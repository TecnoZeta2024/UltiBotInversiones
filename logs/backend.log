2025-06-26 00:53:58,601 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C2114D8C70>) completed
2025-06-26 00:53:58,601 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C2114B5740>, 'PRAGMA main.table_info("trades")', ())
2025-06-26 00:53:58,603 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C2114B5740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-26 00:53:58,603 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C2114B5740>)
2025-06-26 00:53:58,603 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C2114B5740>) completed
2025-06-26 00:53:58,603 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C2114B5740>)
2025-06-26 00:53:58,604 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C2114B5740>) completed
2025-06-26 00:53:58,604 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C2114D8C70>)
2025-06-26 00:53:58,604 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C2114D8C70>) completed
2025-06-26 00:53:58,605 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C2114B57C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-26 00:53:58,605 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C2114B57C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-26 00:53:58,606 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C2114B57C0>)
2025-06-26 00:53:58,606 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C2114B57C0>) completed
2025-06-26 00:53:58,606 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C2114B57C0>)
2025-06-26 00:53:58,606 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C2114B57C0>) completed
2025-06-26 00:53:58,607 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C2114D8C70>)
2025-06-26 00:53:58,607 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C2114D8C70>) completed
2025-06-26 00:53:58,607 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C2114B5840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-26 00:53:58,608 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C2114B5840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-26 00:53:58,608 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C2114B5840>)
2025-06-26 00:53:58,608 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C2114B5840>) completed
2025-06-26 00:53:58,608 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C2114B5840>)
2025-06-26 00:53:58,609 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C2114B5840>) completed
2025-06-26 00:53:58,609 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C2114D8C70>)
2025-06-26 00:53:58,609 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C2114D8C70>) completed
2025-06-26 00:53:58,609 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C2114B58C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-26 00:53:58,610 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C2114B58C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-26 00:53:58,610 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C2114B58C0>)
2025-06-26 00:53:58,610 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C2114B58C0>) completed
2025-06-26 00:53:58,610 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C2114B58C0>)
2025-06-26 00:53:58,611 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C2114B58C0>) completed
2025-06-26 00:53:58,611 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001C2114D8C70>)
2025-06-26 00:53:58,611 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001C2114D8C70>) completed
2025-06-26 00:53:58,612 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C2114D8C70>)
2025-06-26 00:53:58,612 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C2114D8C70>) completed
2025-06-26 00:53:58,612 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-26 00:53:58,613 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 00:53:58,613 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 00:53:58,791 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-26 00:53:58,793 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-26 00:53:58,793 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 00:53:58,793 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 00:53:58,973 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-26 00:53:58,975 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-26 00:53:58,975 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-26 00:53:58,980 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-26 00:53:58,992 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-26 00:53:58,993 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000001C21123C610>
2025-06-26 00:53:58,993 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-26 00:53:58,993 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-26 00:53:58,993 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-26 00:53:58,994 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-26 00:58:53,968 - uvicorn.error - INFO - [MainThread] - server.py:258 - Shutting down
2025-06-26 00:58:54,068 - uvicorn.error - INFO - [MainThread] - on.py:67 - Waiting for application shutdown.
2025-06-26 00:58:54,068 - ultibot_backend - INFO - [MainThread] - main.py:104 - Apagando UltiBot Backend (lifespan)...
2025-06-26 00:58:54,068 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:189 - Shutting down dependency container...
2025-06-26 00:58:54,073 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:40 - Redis client closed.
2025-06-26 00:58:54,073 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:196 - Dependency container shut down.
2025-06-26 00:58:54,073 - ultibot_backend - INFO - [MainThread] - main.py:107 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-26 00:58:54,075 - uvicorn.error - INFO - [MainThread] - on.py:76 - Application shutdown complete.
2025-06-26 00:58:54,075 - uvicorn.error - INFO - [MainThread] - server.py:92 - Finished server process [27640]
2025-06-26 00:59:01,267 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-26 00:59:01,267 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-26 00:59:01,290 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-26 00:59:01,290 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicaci√≥n creada.
2025-06-26 00:59:01,290 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [7008]
2025-06-26 00:59:01,290 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-26 00:59:01,290 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-26 00:59:01,290 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-26 00:59:01,290 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:106 - Initializing dependency container...
2025-06-26 00:59:01,290 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:45 - Using local SQLite database: sqlite+aiosqlite:///ultibot_local.db. This is for development.
2025-06-26 00:59:01,290 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:48 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-26 00:59:01,309 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x0000029061C79C60>
2025-06-26 00:59:01,310 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x0000029061C79C60> completed
2025-06-26 00:59:01,312 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000029061C84C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000029061C78F40>, deterministic=True)
2025-06-26 00:59:01,312 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000029061C84C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000029061C78F40>, deterministic=True) completed
2025-06-26 00:59:01,312 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000029061C84C70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-26 00:59:01,313 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000029061C84C70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-26 00:59:01,313 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000029061C84C70>)
2025-06-26 00:59:01,313 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000029061C84C70>) completed
2025-06-26 00:59:01,314 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000029061C655C0>, 'PRAGMA read_uncommitted', [])
2025-06-26 00:59:01,314 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000029061C655C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-26 00:59:01,315 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000029061C655C0>)
2025-06-26 00:59:01,315 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000029061C655C0>) completed
2025-06-26 00:59:01,315 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000029061C655C0>)
2025-06-26 00:59:01,315 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000029061C655C0>) completed
2025-06-26 00:59:01,316 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000029061C84C70>)
2025-06-26 00:59:01,316 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000029061C84C70>) completed
2025-06-26 00:59:01,317 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000029061C84C70>)
2025-06-26 00:59:01,317 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000029061C84C70>) completed
2025-06-26 00:59:01,317 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000029061C65440>, 'PRAGMA main.table_info("market_data")', ())
2025-06-26 00:59:01,318 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000029061C65440>, 'PRAGMA main.table_info("market_data")', ()) completed
2025-06-26 00:59:01,318 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000029061C65440>)
2025-06-26 00:59:01,319 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000029061C65440>) completed
2025-06-26 00:59:01,319 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000029061C65440>)
2025-06-26 00:59:01,319 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000029061C65440>) completed
2025-06-26 00:59:01,320 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000029061C84C70>)
2025-06-26 00:59:01,320 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000029061C84C70>) completed
2025-06-26 00:59:01,321 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000029061C655C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-26 00:59:01,321 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000029061C655C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-26 00:59:01,322 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000029061C655C0>)
2025-06-26 00:59:01,322 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000029061C655C0>) completed
2025-06-26 00:59:01,322 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000029061C655C0>)
2025-06-26 00:59:01,322 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000029061C655C0>) completed
2025-06-26 00:59:01,323 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000029061C84C70>)
2025-06-26 00:59:01,323 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000029061C84C70>) completed
2025-06-26 00:59:01,323 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000029061C65540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-26 00:59:01,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000029061C65540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-26 00:59:01,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000029061C65540>)
2025-06-26 00:59:01,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000029061C65540>) completed
2025-06-26 00:59:01,325 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000029061C65540>)
2025-06-26 00:59:01,325 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000029061C65540>) completed
2025-06-26 00:59:01,325 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000029061C84C70>)
2025-06-26 00:59:01,325 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000029061C84C70>) completed
2025-06-26 00:59:01,326 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000029061C65740>, 'PRAGMA main.table_info("trades")', ())
2025-06-26 00:59:01,326 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000029061C65740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-26 00:59:01,326 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000029061C65740>)
2025-06-26 00:59:01,327 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000029061C65740>) completed
2025-06-26 00:59:01,327 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000029061C65740>)
2025-06-26 00:59:01,327 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000029061C65740>) completed
2025-06-26 00:59:01,327 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000029061C84C70>)
2025-06-26 00:59:01,327 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000029061C84C70>) completed
2025-06-26 00:59:01,328 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000029061C657C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-26 00:59:01,329 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000029061C657C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-26 00:59:01,329 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000029061C657C0>)
2025-06-26 00:59:01,329 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000029061C657C0>) completed
2025-06-26 00:59:01,329 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000029061C657C0>)
2025-06-26 00:59:01,330 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000029061C657C0>) completed
2025-06-26 00:59:01,330 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000029061C84C70>)
2025-06-26 00:59:01,330 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000029061C84C70>) completed
2025-06-26 00:59:01,331 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000029061C65840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-26 00:59:01,331 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000029061C65840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-26 00:59:01,331 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000029061C65840>)
2025-06-26 00:59:01,331 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000029061C65840>) completed
2025-06-26 00:59:01,332 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000029061C65840>)
2025-06-26 00:59:01,332 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000029061C65840>) completed
2025-06-26 00:59:01,332 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000029061C84C70>)
2025-06-26 00:59:01,332 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000029061C84C70>) completed
2025-06-26 00:59:01,333 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000029061C658C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-26 00:59:01,333 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000029061C658C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-26 00:59:01,334 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000029061C658C0>)
2025-06-26 00:59:01,334 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000029061C658C0>) completed
2025-06-26 00:59:01,334 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000029061C658C0>)
2025-06-26 00:59:01,334 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000029061C658C0>) completed
2025-06-26 00:59:01,335 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000029061C84C70>)
2025-06-26 00:59:01,335 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000029061C84C70>) completed
2025-06-26 00:59:01,335 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000029061C84C70>)
2025-06-26 00:59:01,335 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000029061C84C70>) completed
2025-06-26 00:59:01,337 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-26 00:59:01,337 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 00:59:01,338 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 00:59:01,507 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-26 00:59:01,507 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-26 00:59:01,507 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 00:59:01,517 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 00:59:01,687 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-26 00:59:01,687 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-26 00:59:01,697 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-26 00:59:01,697 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-26 00:59:01,739 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-26 00:59:01,739 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x0000029061B9F3D0>
2025-06-26 00:59:01,740 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-26 00:59:01,740 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-26 00:59:01,740 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-26 00:59:01,741 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-26 00:59:01,758 - uvicorn.error - ERROR - [MainThread] - on.py:134 - Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 741, in lifespan
    await receive()
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-26 00:59:06,429 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-26 00:59:06,430 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-26 00:59:06,450 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-26 00:59:06,451 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicaci√≥n creada.
2025-06-26 00:59:06,452 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [22756]
2025-06-26 00:59:06,452 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-26 00:59:06,453 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-26 00:59:06,453 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-26 00:59:06,454 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:106 - Initializing dependency container...
2025-06-26 00:59:06,454 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:45 - Using local SQLite database: sqlite+aiosqlite:///ultibot_local.db. This is for development.
2025-06-26 00:59:06,454 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:48 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-26 00:59:06,471 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000002CA5B689C60>
2025-06-26 00:59:06,472 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000002CA5B689C60> completed
2025-06-26 00:59:06,473 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002CA5B694C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002CA5B688F40>, deterministic=True)
2025-06-26 00:59:06,473 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002CA5B694C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002CA5B688F40>, deterministic=True) completed
2025-06-26 00:59:06,474 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002CA5B694C70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-26 00:59:06,474 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002CA5B694C70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-26 00:59:06,474 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002CA5B694C70>)
2025-06-26 00:59:06,475 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002CA5B694C70>) completed
2025-06-26 00:59:06,475 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002CA5B6755C0>, 'PRAGMA read_uncommitted', [])
2025-06-26 00:59:06,475 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002CA5B6755C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-26 00:59:06,476 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002CA5B6755C0>)
2025-06-26 00:59:06,477 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002CA5B6755C0>) completed
2025-06-26 00:59:06,477 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002CA5B6755C0>)
2025-06-26 00:59:06,477 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002CA5B6755C0>) completed
2025-06-26 00:59:06,477 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002CA5B694C70>)
2025-06-26 00:59:06,478 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002CA5B694C70>) completed
2025-06-26 00:59:06,478 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002CA5B694C70>)
2025-06-26 00:59:06,479 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002CA5B694C70>) completed
2025-06-26 00:59:06,479 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002CA5B675440>, 'PRAGMA main.table_info("market_data")', ())
2025-06-26 00:59:06,480 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002CA5B675440>, 'PRAGMA main.table_info("market_data")', ()) completed
2025-06-26 00:59:06,480 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002CA5B675440>)
2025-06-26 00:59:06,481 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002CA5B675440>) completed
2025-06-26 00:59:06,481 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002CA5B675440>)
2025-06-26 00:59:06,481 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002CA5B675440>) completed
2025-06-26 00:59:06,482 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002CA5B694C70>)
2025-06-26 00:59:06,482 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002CA5B694C70>) completed
2025-06-26 00:59:06,482 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002CA5B6755C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-26 00:59:06,483 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002CA5B6755C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-26 00:59:06,483 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002CA5B6755C0>)
2025-06-26 00:59:06,483 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002CA5B6755C0>) completed
2025-06-26 00:59:06,484 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002CA5B6755C0>)
2025-06-26 00:59:06,484 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002CA5B6755C0>) completed
2025-06-26 00:59:06,484 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002CA5B694C70>)
2025-06-26 00:59:06,485 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002CA5B694C70>) completed
2025-06-26 00:59:06,485 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002CA5B675540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-26 00:59:06,485 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002CA5B675540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-26 00:59:06,485 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002CA5B675540>)
2025-06-26 00:59:06,485 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002CA5B675540>) completed
2025-06-26 00:59:06,487 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002CA5B675540>)
2025-06-26 00:59:06,487 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002CA5B675540>) completed
2025-06-26 00:59:06,487 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002CA5B694C70>)
2025-06-26 00:59:06,487 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002CA5B694C70>) completed
2025-06-26 00:59:06,488 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002CA5B675740>, 'PRAGMA main.table_info("trades")', ())
2025-06-26 00:59:06,488 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002CA5B675740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-26 00:59:06,489 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002CA5B675740>)
2025-06-26 00:59:06,489 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002CA5B675740>) completed
2025-06-26 00:59:06,489 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002CA5B675740>)
2025-06-26 00:59:06,489 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002CA5B675740>) completed
2025-06-26 00:59:06,490 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002CA5B694C70>)
2025-06-26 00:59:06,491 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002CA5B694C70>) completed
2025-06-26 00:59:06,491 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002CA5B6757C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-26 00:59:06,491 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002CA5B6757C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-26 00:59:06,492 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002CA5B6757C0>)
2025-06-26 00:59:06,492 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002CA5B6757C0>) completed
2025-06-26 00:59:06,494 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002CA5B6757C0>)
2025-06-26 00:59:06,494 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002CA5B6757C0>) completed
2025-06-26 00:59:06,495 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002CA5B694C70>)
2025-06-26 00:59:06,496 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002CA5B694C70>) completed
2025-06-26 00:59:06,497 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002CA5B675840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-26 00:59:06,498 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002CA5B675840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-26 00:59:06,499 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002CA5B675840>)
2025-06-26 00:59:06,499 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002CA5B675840>) completed
2025-06-26 00:59:06,500 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002CA5B675840>)
2025-06-26 00:59:06,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002CA5B675840>) completed
2025-06-26 00:59:06,502 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002CA5B694C70>)
2025-06-26 00:59:06,502 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002CA5B694C70>) completed
2025-06-26 00:59:06,503 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002CA5B6758C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-26 00:59:06,504 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002CA5B6758C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-26 00:59:06,504 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002CA5B6758C0>)
2025-06-26 00:59:06,505 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002CA5B6758C0>) completed
2025-06-26 00:59:06,506 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002CA5B6758C0>)
2025-06-26 00:59:06,506 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002CA5B6758C0>) completed
2025-06-26 00:59:06,507 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002CA5B694C70>)
2025-06-26 00:59:06,507 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002CA5B694C70>) completed
2025-06-26 00:59:06,508 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002CA5B694C70>)
2025-06-26 00:59:06,509 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002CA5B694C70>) completed
2025-06-26 00:59:06,510 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-26 00:59:06,511 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 00:59:06,512 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 00:59:06,700 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-26 00:59:06,701 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-26 00:59:06,702 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 00:59:06,702 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 00:59:06,877 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-26 00:59:06,887 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-26 00:59:06,889 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-26 00:59:06,889 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-26 00:59:06,903 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-26 00:59:06,903 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000002CA5B57E750>
2025-06-26 00:59:06,904 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-26 00:59:06,904 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-26 00:59:06,904 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-26 00:59:06,905 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-26 00:59:06,907 - uvicorn.error - ERROR - [MainThread] - on.py:134 - Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 741, in lifespan
    await receive()
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-26 00:59:11,587 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-26 00:59:11,587 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-26 00:59:11,608 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-26 00:59:11,608 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicaci√≥n creada.
2025-06-26 00:59:11,609 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [23340]
2025-06-26 00:59:11,609 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-26 00:59:11,609 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-26 00:59:11,610 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-26 00:59:11,610 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:106 - Initializing dependency container...
2025-06-26 00:59:11,610 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:45 - Using local SQLite database: sqlite+aiosqlite:///ultibot_local.db. This is for development.
2025-06-26 00:59:11,611 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:48 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-26 00:59:11,625 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000001CA15FB9C60>
2025-06-26 00:59:11,626 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000001CA15FB9C60> completed
2025-06-26 00:59:11,626 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001CA15FC4C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001CA15FB8F40>, deterministic=True)
2025-06-26 00:59:11,627 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001CA15FC4C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001CA15FB8F40>, deterministic=True) completed
2025-06-26 00:59:11,627 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001CA15FC4C70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-26 00:59:11,627 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001CA15FC4C70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-26 00:59:11,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001CA15FC4C70>)
2025-06-26 00:59:11,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001CA15FC4C70>) completed
2025-06-26 00:59:11,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001CA15FA55C0>, 'PRAGMA read_uncommitted', [])
2025-06-26 00:59:11,629 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001CA15FA55C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-26 00:59:11,629 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001CA15FA55C0>)
2025-06-26 00:59:11,629 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001CA15FA55C0>) completed
2025-06-26 00:59:11,630 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001CA15FA55C0>)
2025-06-26 00:59:11,630 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001CA15FA55C0>) completed
2025-06-26 00:59:11,630 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001CA15FC4C70>)
2025-06-26 00:59:11,631 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001CA15FC4C70>) completed
2025-06-26 00:59:11,631 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001CA15FC4C70>)
2025-06-26 00:59:11,632 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001CA15FC4C70>) completed
2025-06-26 00:59:11,632 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001CA15FA5440>, 'PRAGMA main.table_info("market_data")', ())
2025-06-26 00:59:11,633 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001CA15FA5440>, 'PRAGMA main.table_info("market_data")', ()) completed
2025-06-26 00:59:11,633 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001CA15FA5440>)
2025-06-26 00:59:11,634 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001CA15FA5440>) completed
2025-06-26 00:59:11,634 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001CA15FA5440>)
2025-06-26 00:59:11,635 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001CA15FA5440>) completed
2025-06-26 00:59:11,636 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001CA15FC4C70>)
2025-06-26 00:59:11,636 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001CA15FC4C70>) completed
2025-06-26 00:59:11,636 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001CA15FA55C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-26 00:59:11,636 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001CA15FA55C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-26 00:59:11,637 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001CA15FA55C0>)
2025-06-26 00:59:11,637 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001CA15FA55C0>) completed
2025-06-26 00:59:11,638 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001CA15FA55C0>)
2025-06-26 00:59:11,638 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001CA15FA55C0>) completed
2025-06-26 00:59:11,638 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001CA15FC4C70>)
2025-06-26 00:59:11,639 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001CA15FC4C70>) completed
2025-06-26 00:59:11,639 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001CA15FA5540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-26 00:59:11,639 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001CA15FA5540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-26 00:59:11,640 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001CA15FA5540>)
2025-06-26 00:59:11,640 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001CA15FA5540>) completed
2025-06-26 00:59:11,641 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001CA15FA5540>)
2025-06-26 00:59:11,641 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001CA15FA5540>) completed
2025-06-26 00:59:11,642 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001CA15FC4C70>)
2025-06-26 00:59:11,642 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001CA15FC4C70>) completed
2025-06-26 00:59:11,642 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001CA15FA5740>, 'PRAGMA main.table_info("trades")', ())
2025-06-26 00:59:11,643 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001CA15FA5740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-26 00:59:11,643 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001CA15FA5740>)
2025-06-26 00:59:11,643 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001CA15FA5740>) completed
2025-06-26 00:59:11,644 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001CA15FA5740>)
2025-06-26 00:59:11,644 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001CA15FA5740>) completed
2025-06-26 00:59:11,644 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001CA15FC4C70>)
2025-06-26 00:59:11,644 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001CA15FC4C70>) completed
2025-06-26 00:59:11,645 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001CA15FA57C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-26 00:59:11,645 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001CA15FA57C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-26 00:59:11,645 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001CA15FA57C0>)
2025-06-26 00:59:11,646 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001CA15FA57C0>) completed
2025-06-26 00:59:11,646 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001CA15FA57C0>)
2025-06-26 00:59:11,646 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001CA15FA57C0>) completed
2025-06-26 00:59:11,647 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001CA15FC4C70>)
2025-06-26 00:59:11,647 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001CA15FC4C70>) completed
2025-06-26 00:59:11,648 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001CA15FA5840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-26 00:59:11,648 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001CA15FA5840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-26 00:59:11,649 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001CA15FA5840>)
2025-06-26 00:59:11,649 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001CA15FA5840>) completed
2025-06-26 00:59:11,650 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001CA15FA5840>)
2025-06-26 00:59:11,650 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001CA15FA5840>) completed
2025-06-26 00:59:11,650 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001CA15FC4C70>)
2025-06-26 00:59:11,651 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001CA15FC4C70>) completed
2025-06-26 00:59:11,651 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001CA15FA58C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-26 00:59:11,651 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001CA15FA58C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-26 00:59:11,652 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001CA15FA58C0>)
2025-06-26 00:59:11,652 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001CA15FA58C0>) completed
2025-06-26 00:59:11,652 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001CA15FA58C0>)
2025-06-26 00:59:11,653 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001CA15FA58C0>) completed
2025-06-26 00:59:11,653 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001CA15FC4C70>)
2025-06-26 00:59:11,653 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001CA15FC4C70>) completed
2025-06-26 00:59:11,654 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001CA15FC4C70>)
2025-06-26 00:59:11,654 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001CA15FC4C70>) completed
2025-06-26 00:59:11,654 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-26 00:59:11,656 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 00:59:11,656 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 00:59:11,832 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-26 00:59:11,832 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-26 00:59:11,832 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 00:59:11,834 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 00:59:12,011 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-26 00:59:12,011 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-26 00:59:12,011 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-26 00:59:12,011 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-26 00:59:12,028 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-26 00:59:12,029 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000001CA15E3D050>
2025-06-26 00:59:12,029 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-26 00:59:12,030 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-26 00:59:12,030 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-26 00:59:12,031 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-26 01:00:23,182 - uvicorn.error - INFO - [MainThread] - server.py:258 - Shutting down
2025-06-26 01:00:23,294 - uvicorn.error - INFO - [MainThread] - on.py:67 - Waiting for application shutdown.
2025-06-26 01:00:23,294 - uvicorn.error - INFO - [MainThread] - on.py:67 - Waiting for application shutdown.
2025-06-26 01:00:23,295 - ultibot_backend - INFO - [MainThread] - main.py:104 - Apagando UltiBot Backend (lifespan)...
2025-06-26 01:00:23,295 - ultibot_backend - INFO - [MainThread] - main.py:104 - Apagando UltiBot Backend (lifespan)...
2025-06-26 01:00:23,295 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:189 - Shutting down dependency container...
2025-06-26 01:00:23,296 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:189 - Shutting down dependency container...
2025-06-26 01:00:23,300 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:40 - Redis client closed.
2025-06-26 01:00:23,300 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:196 - Dependency container shut down.
2025-06-26 01:00:23,301 - ultibot_backend - INFO - [MainThread] - main.py:107 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-26 01:00:23,301 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:40 - Redis client closed.
2025-06-26 01:00:23,301 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:196 - Dependency container shut down.
2025-06-26 01:00:23,301 - uvicorn.error - INFO - [MainThread] - on.py:76 - Application shutdown complete.
2025-06-26 01:00:23,301 - ultibot_backend - INFO - [MainThread] - main.py:107 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-26 01:00:23,302 - uvicorn.error - INFO - [MainThread] - server.py:92 - Finished server process [23340]
2025-06-26 01:00:23,302 - uvicorn.error - INFO - [MainThread] - on.py:76 - Application shutdown complete.
2025-06-26 01:00:23,302 - uvicorn.error - INFO - [MainThread] - server.py:92 - Finished server process [29280]
2025-06-26 01:00:28,061 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-26 01:00:28,061 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-26 01:00:28,066 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-26 01:00:28,066 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-26 01:00:28,084 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-26 01:00:28,084 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicaci√≥n creada.
2025-06-26 01:00:28,085 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [5060]
2025-06-26 01:00:28,085 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-26 01:00:28,086 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-26 01:00:28,086 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicaci√≥n creada.
2025-06-26 01:00:28,086 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-26 01:00:28,086 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [17076]
2025-06-26 01:00:28,086 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:106 - Initializing dependency container...
2025-06-26 01:00:28,086 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-26 01:00:28,087 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:45 - Using local SQLite database: sqlite+aiosqlite:///ultibot_local.db. This is for development.
2025-06-26 01:00:28,087 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-26 01:00:28,087 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:48 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-26 01:00:28,088 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-26 01:00:28,088 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:106 - Initializing dependency container...
2025-06-26 01:00:28,088 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:45 - Using local SQLite database: sqlite+aiosqlite:///ultibot_local.db. This is for development.
2025-06-26 01:00:28,089 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:48 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-26 01:00:28,101 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000001BED7939C60>
2025-06-26 01:00:28,102 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000001BED7939C60> completed
2025-06-26 01:00:28,102 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x00000243D99E9C60>
2025-06-26 01:00:28,102 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001BED7944C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001BED7938F40>, deterministic=True)
2025-06-26 01:00:28,103 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x00000243D99E9C60> completed
2025-06-26 01:00:28,103 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001BED7944C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001BED7938F40>, deterministic=True) completed
2025-06-26 01:00:28,103 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000243D99F4C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000243D99E8F40>, deterministic=True)
2025-06-26 01:00:28,103 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001BED7944C70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-26 01:00:28,103 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000243D99F4C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000243D99E8F40>, deterministic=True) completed
2025-06-26 01:00:28,104 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001BED7944C70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-26 01:00:28,104 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000243D99F4C70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-26 01:00:28,104 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000243D99F4C70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-26 01:00:28,104 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001BED7944C70>)
2025-06-26 01:00:28,104 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001BED7944C70>) completed
2025-06-26 01:00:28,104 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000243D99F4C70>)
2025-06-26 01:00:28,105 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001BED79255C0>, 'PRAGMA read_uncommitted', [])
2025-06-26 01:00:28,105 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000243D99F4C70>) completed
2025-06-26 01:00:28,105 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001BED79255C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-26 01:00:28,105 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000243D99D55C0>, 'PRAGMA read_uncommitted', [])
2025-06-26 01:00:28,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001BED79255C0>)
2025-06-26 01:00:28,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001BED79255C0>) completed
2025-06-26 01:00:28,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000243D99D55C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-26 01:00:28,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001BED79255C0>)
2025-06-26 01:00:28,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000243D99D55C0>)
2025-06-26 01:00:28,107 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001BED79255C0>) completed
2025-06-26 01:00:28,107 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000243D99D55C0>) completed
2025-06-26 01:00:28,107 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000243D99D55C0>)
2025-06-26 01:00:28,107 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001BED7944C70>)
2025-06-26 01:00:28,108 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000243D99D55C0>) completed
2025-06-26 01:00:28,108 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001BED7944C70>) completed
2025-06-26 01:00:28,108 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000243D99F4C70>)
2025-06-26 01:00:28,108 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000243D99F4C70>) completed
2025-06-26 01:00:28,109 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001BED7944C70>)
2025-06-26 01:00:28,109 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001BED7944C70>) completed
2025-06-26 01:00:28,109 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000243D99F4C70>)
2025-06-26 01:00:28,109 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001BED7925440>, 'PRAGMA main.table_info("market_data")', ())
2025-06-26 01:00:28,109 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000243D99F4C70>) completed
2025-06-26 01:00:28,109 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000243D99D5440>, 'PRAGMA main.table_info("market_data")', ())
2025-06-26 01:00:28,109 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001BED7925440>, 'PRAGMA main.table_info("market_data")', ()) completed
2025-06-26 01:00:28,111 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000243D99D5440>, 'PRAGMA main.table_info("market_data")', ()) completed
2025-06-26 01:00:28,111 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001BED7925440>)
2025-06-26 01:00:28,111 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000243D99D5440>)
2025-06-26 01:00:28,111 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001BED7925440>) completed
2025-06-26 01:00:28,111 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000243D99D5440>) completed
2025-06-26 01:00:28,111 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001BED7925440>)
2025-06-26 01:00:28,112 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001BED7925440>) completed
2025-06-26 01:00:28,112 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000243D99D5440>)
2025-06-26 01:00:28,112 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000243D99D5440>) completed
2025-06-26 01:00:28,112 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001BED7944C70>)
2025-06-26 01:00:28,113 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001BED7944C70>) completed
2025-06-26 01:00:28,113 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000243D99F4C70>)
2025-06-26 01:00:28,113 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000243D99F4C70>) completed
2025-06-26 01:00:28,113 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000243D99D55C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-26 01:00:28,113 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001BED79255C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-26 01:00:28,114 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001BED79255C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-26 01:00:28,114 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000243D99D55C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-26 01:00:28,114 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000243D99D55C0>)
2025-06-26 01:00:28,114 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001BED79255C0>)
2025-06-26 01:00:28,114 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000243D99D55C0>) completed
2025-06-26 01:00:28,114 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001BED79255C0>) completed
2025-06-26 01:00:28,115 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000243D99D55C0>)
2025-06-26 01:00:28,115 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001BED79255C0>)
ompleted
2025-06-26 01:00:28,115 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001BED79255C0>) completed
2025-06-26 01:00:28,115 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000243D99F4C70>)
2025-06-26 01:00:28,115 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000243D99F4C70>) completed
2025-06-26 01:00:28,115 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001BED7944C70>)
2025-06-26 01:00:28,116 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000243D99D5540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-26 01:00:28,116 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000243D99D5540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-26 01:00:28,117 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001BED7925540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-26 01:00:28,117 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000243D99D5540>)
2025-06-26 01:00:28,117 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001BED7925540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-26 01:00:28,117 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000243D99D5540>) completed
2025-06-26 01:00:28,117 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001BED7925540>)
2025-06-26 01:00:28,117 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000243D99D5540>)
2025-06-26 01:00:28,118 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001BED7925540>) completed
2025-06-26 01:00:28,118 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000243D99D5540>) completed
2025-06-26 01:00:28,118 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001BED7925540>)
2025-06-26 01:00:28,118 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000243D99F4C70>)
2025-06-26 01:00:28,118 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001BED7925540>) completed
2025-06-26 01:00:28,118 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000243D99F4C70>) completed
2025-06-26 01:00:28,119 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001BED7944C70>)
2025-06-26 01:00:28,119 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000243D99D5740>, 'PRAGMA main.table_info("trades")', ())
2025-06-26 01:00:28,119 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001BED7944C70>) completed
2025-06-26 01:00:28,119 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000243D99D5740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-26 01:00:28,119 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001BED7925740>, 'PRAGMA main.table_info("trades")', ())
2025-06-26 01:00:28,120 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000243D99D5740>)
2025-06-26 01:00:28,120 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001BED7925740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-26 01:00:28,120 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000243D99D5740>) completed
2025-06-26 01:00:28,120 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001BED7925740>)
2025-06-26 01:00:28,120 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000243D99D5740>)
2025-06-26 01:00:28,120 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000243D99D5740>) completed
2025-06-26 01:00:28,120 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001BED7925740>) completed
2025-06-26 01:00:28,121 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001BED7925740>)
2025-06-26 01:00:28,121 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000243D99F4C70>)
2025-06-26 01:00:28,121 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000243D99F4C70>) completed
2025-06-26 01:00:28,121 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001BED7925740>) completed
2025-06-26 01:00:28,121 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000243D99D57C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-26 01:00:28,121 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001BED7944C70>)
2025-06-26 01:00:28,121 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001BED7944C70>) completed
2025-06-26 01:00:28,121 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000243D99D57C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-26 01:00:28,122 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001BED79257C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-26 01:00:28,122 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000243D99D57C0>)
2025-06-26 01:00:28,122 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001BED79257C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-26 01:00:28,123 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000243D99D57C0>) completed
2025-06-26 01:00:28,123 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001BED79257C0>)
2025-06-26 01:00:28,123 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000243D99D57C0>)
2025-06-26 01:00:28,123 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001BED79257C0>) completed
2025-06-26 01:00:28,123 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000243D99D57C0>) completed
2025-06-26 01:00:28,123 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001BED79257C0>)
2025-06-26 01:00:28,124 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001BED79257C0>) completed
2025-06-26 01:00:28,124 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000243D99F4C70>)
2025-06-26 01:00:28,124 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001BED7944C70>)
2025-06-26 01:00:28,124 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000243D99F4C70>) completed
2025-06-26 01:00:28,124 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001BED7944C70>) completed
2025-06-26 01:00:28,125 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000243D99D5840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-26 01:00:28,125 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001BED7925840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-26 01:00:28,125 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000243D99D5840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-26 01:00:28,125 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001BED7925840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-26 01:00:28,125 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000243D99D5840>)
2025-06-26 01:00:28,126 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001BED7925840>)
2025-06-26 01:00:28,126 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000243D99D5840>) completed
2025-06-26 01:00:28,126 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001BED7925840>) completed
2025-06-26 01:00:28,126 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000243D99D5840>)
2025-06-26 01:00:28,126 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001BED7925840>)
2025-06-26 01:00:28,126 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000243D99D5840>) completed
2025-06-26 01:00:28,127 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001BED7925840>) completed
2025-06-26 01:00:28,127 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000243D99F4C70>)
2025-06-26 01:00:28,127 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001BED7944C70>)
2025-06-26 01:00:28,127 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000243D99F4C70>) completed
2025-06-26 01:00:28,127 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001BED7944C70>) completed
2025-06-26 01:00:28,128 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000243D99D58C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-26 01:00:28,128 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001BED79258C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-26 01:00:28,128 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001BED79258C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-26 01:00:28,128 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000243D99D58C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-26 01:00:28,128 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000243D99D58C0>)
2025-06-26 01:00:28,129 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000243D99D58C0>) completed
2025-06-26 01:00:28,129 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001BED79258C0>) completed
2025-06-26 01:00:28,129 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001BED79258C0>)
2025-06-26 01:00:28,129 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000243D99D58C0>)
2025-06-26 01:00:28,129 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001BED79258C0>) completed
2025-06-26 01:00:28,129 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000243D99F4C70>)
2025-06-26 01:00:28,129 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001BED7944C70>)
2025-06-26 01:00:28,131 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000243D99F4C70>) completed
2025-06-26 01:00:28,131 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001BED7944C70>) completed
2025-06-26 01:00:28,131 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000243D99F4C70>)
2025-06-26 01:00:28,131 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001BED7944C70>)
2025-06-26 01:00:28,132 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000243D99F4C70>) completed
2025-06-26 01:00:28,132 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001BED7944C70>) completed
2025-06-26 01:00:28,132 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-26 01:00:28,132 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-26 01:00:28,133 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:00:28,133 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:00:28,134 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:00:28,134 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:00:28,396 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-26 01:00:28,396 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-26 01:00:28,401 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:00:28,401 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:00:28,401 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-26 01:00:28,401 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-26 01:00:28,404 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:00:28,404 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:00:28,672 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-26 01:00:28,676 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-26 01:00:28,676 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-26 01:00:28,676 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-26 01:00:28,681 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-26 01:00:28,689 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-26 01:00:28,689 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-26 01:00:28,689 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-26 01:00:28,690 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000001BED77B4B90>
2025-06-26 01:00:28,690 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-26 01:00:28,690 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-26 01:00:28,691 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-26 01:00:28,691 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-26 01:00:28,692 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-26 01:00:28,694 - uvicorn.error - ERROR - [MainThread] - on.py:134 - Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 741, in lifespan
    await receive()
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-26 01:00:28,703 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-26 01:00:28,703 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000243D989B510>
2025-06-26 01:00:28,704 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-26 01:00:28,704 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-26 01:00:28,704 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-26 01:00:28,705 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-26 01:00:28,707 - uvicorn.error - ERROR - [MainThread] - on.py:134 - Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 741, in lifespan
    await receive()
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-26 01:00:33,431 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-26 01:00:33,432 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-26 01:00:33,434 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-26 01:00:33,435 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-26 01:00:33,454 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-26 01:00:33,455 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicaci√≥n creada.
2025-06-26 01:00:33,455 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-26 01:00:33,455 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [1172]
2025-06-26 01:00:33,456 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicaci√≥n creada.
2025-06-26 01:00:33,456 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-26 01:00:33,456 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [15288]
pan)...
2025-06-26 01:00:33,456 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-26 01:00:33,456 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-26 01:00:33,457 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-26 01:00:33,457 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:106 - Initializing dependency container...
2025-06-26 01:00:33,458 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-26 01:00:33,458 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:45 - Using local SQLite database: sqlite+aiosqlite:///ultibot_local.db. This is for development.
2025-06-26 01:00:33,458 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:106 - Initializing dependency container...
2025-06-26 01:00:33,458 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:48 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-26 01:00:33,458 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:45 - Using local SQLite database: sqlite+aiosqlite:///ultibot_local.db. This is for development.
2025-06-26 01:00:33,459 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:48 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-26 01:00:33,473 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x00000172B17A9C60>
2025-06-26 01:00:33,473 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x0000025C8FE79C60>
2025-06-26 01:00:33,474 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x0000025C8FE79C60> completed
2025-06-26 01:00:33,475 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025C8FE88C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000025C8FE78F40>, deterministic=True)
2025-06-26 01:00:33,475 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000172B17B4C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000172B17A8F40>, deterministic=True)
2025-06-26 01:00:33,475 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025C8FE88C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000025C8FE78F40>, deterministic=True) completed
2025-06-26 01:00:33,475 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000172B17B4C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000172B17A8F40>, deterministic=True) completed
2025-06-26 01:00:33,476 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025C8FE88C70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-26 01:00:33,476 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000172B17B4C70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-26 01:00:33,476 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025C8FE88C70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-26 01:00:33,476 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000172B17B4C70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-26 01:00:33,477 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000172B17B4C70>)
2025-06-26 01:00:33,477 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025C8FE88C70>) completed
2025-06-26 01:00:33,477 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025C8FE655C0>, 'PRAGMA read_uncommitted', [])
2025-06-26 01:00:33,477 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000172B17955C0>, 'PRAGMA read_uncommitted', [])
2025-06-26 01:00:33,478 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025C8FE655C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-26 01:00:33,478 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000172B17955C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-26 01:00:33,478 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025C8FE655C0>)
2025-06-26 01:00:33,478 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000172B17955C0>)
2025-06-26 01:00:33,478 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025C8FE655C0>) completed
2025-06-26 01:00:33,479 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000172B17955C0>) completed
2025-06-26 01:00:33,479 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025C8FE655C0>)
2025-06-26 01:00:33,479 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025C8FE655C0>) completed
2025-06-26 01:00:33,479 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000172B17955C0>)
2025-06-26 01:00:33,479 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000172B17955C0>) completed
2025-06-26 01:00:33,479 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025C8FE88C70>)
2025-06-26 01:00:33,480 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000172B17B4C70>)
ompleted
2025-06-26 01:00:33,481 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000172B17B4C70>) completed
2025-06-26 01:00:33,481 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025C8FE88C70>)
2025-06-26 01:00:33,481 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025C8FE88C70>) completed
2025-06-26 01:00:33,481 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000172B17B4C70>)
2025-06-26 01:00:33,482 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000172B17B4C70>) completed
2025-06-26 01:00:33,482 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025C8FE65440>, 'PRAGMA main.table_info("market_data")', ())
2025-06-26 01:00:33,482 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000172B1795440>, 'PRAGMA main.table_info("market_data")', ())
2025-06-26 01:00:33,483 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025C8FE65440>, 'PRAGMA main.table_info("market_data")', ()) completed
2025-06-26 01:00:33,483 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000172B1795440>, 'PRAGMA main.table_info("market_data")', ()) completed
2025-06-26 01:00:33,483 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000172B1795440>)
2025-06-26 01:00:33,483 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025C8FE65440>)
2025-06-26 01:00:33,484 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000172B1795440>) completed
2025-06-26 01:00:33,484 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025C8FE65440>) completed
2025-06-26 01:00:33,484 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000172B1795440>)
2025-06-26 01:00:33,485 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000172B1795440>) completed
2025-06-26 01:00:33,485 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025C8FE65440>)
2025-06-26 01:00:33,485 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025C8FE65440>) completed
2025-06-26 01:00:33,485 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000172B17B4C70>)
2025-06-26 01:00:33,486 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000172B17B4C70>) completed
2025-06-26 01:00:33,486 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025C8FE88C70>)
2025-06-26 01:00:33,486 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000172B17955C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-26 01:00:33,486 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025C8FE88C70>) completed
2025-06-26 01:00:33,487 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000172B17955C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-26 01:00:33,487 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025C8FE655C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-26 01:00:33,487 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000172B17955C0>)
2025-06-26 01:00:33,487 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025C8FE655C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-26 01:00:33,488 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000172B17955C0>) completed
2025-06-26 01:00:33,488 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025C8FE655C0>)
2025-06-26 01:00:33,488 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000172B17955C0>)
2025-06-26 01:00:33,488 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025C8FE655C0>) completed
2025-06-26 01:00:33,488 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000172B17955C0>) completed
2025-06-26 01:00:33,489 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025C8FE655C0>)
2025-06-26 01:00:33,489 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000172B17B4C70>)
2025-06-26 01:00:33,489 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025C8FE655C0>) completed
2025-06-26 01:00:33,489 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000172B17B4C70>) completed
2025-06-26 01:00:33,490 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000172B1795540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-26 01:00:33,490 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025C8FE88C70>)
2025-06-26 01:00:33,490 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000172B1795540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-26 01:00:33,490 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025C8FE88C70>) completed
2025-06-26 01:00:33,491 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000172B1795540>)
2025-06-26 01:00:33,491 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000172B1795540>) completed
2025-06-26 01:00:33,491 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025C8FE65540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-26 01:00:33,491 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000172B1795540>)
2025-06-26 01:00:33,491 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025C8FE65540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-26 01:00:33,491 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000172B1795540>) completed
2025-06-26 01:00:33,491 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025C8FE65540>)
2025-06-26 01:00:33,491 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000172B17B4C70>)
2025-06-26 01:00:33,492 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000172B17B4C70>) completed
2025-06-26 01:00:33,492 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025C8FE65540>) completed
2025-06-26 01:00:33,492 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025C8FE65540>)
2025-06-26 01:00:33,492 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000172B1795740>, 'PRAGMA main.table_info("trades")', ())
2025-06-26 01:00:33,493 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025C8FE65540>) completed
2025-06-26 01:00:33,493 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000172B1795740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-26 01:00:33,493 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025C8FE88C70>)
2025-06-26 01:00:33,493 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000172B1795740>)
2025-06-26 01:00:33,493 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025C8FE88C70>) completed
2025-06-26 01:00:33,494 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025C8FE65740>, 'PRAGMA main.table_info("trades")', ())
2025-06-26 01:00:33,494 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000172B1795740>) completed
2025-06-26 01:00:33,494 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025C8FE65740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-26 01:00:33,494 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000172B1795740>)
)
2025-06-26 01:00:33,495 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000172B1795740>) completed
2025-06-26 01:00:33,495 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025C8FE65740>) completed
2025-06-26 01:00:33,495 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025C8FE65740>)
2025-06-26 01:00:33,495 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000172B17B4C70>)
2025-06-26 01:00:33,496 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025C8FE65740>) completed
2025-06-26 01:00:33,496 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000172B17B4C70>) completed
2025-06-26 01:00:33,496 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025C8FE88C70>)
2025-06-26 01:00:33,496 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000172B17957C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-26 01:00:33,497 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000172B17957C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-26 01:00:33,497 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025C8FE88C70>) completed
2025-06-26 01:00:33,497 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000172B17957C0>)
2025-06-26 01:00:33,498 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000172B17957C0>) completed
2025-06-26 01:00:33,498 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025C8FE657C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-26 01:00:33,498 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000172B17957C0>)
2025-06-26 01:00:33,498 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025C8FE657C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-26 01:00:33,498 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000172B17957C0>) completed
2025-06-26 01:00:33,499 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025C8FE657C0>)
2025-06-26 01:00:33,499 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000172B17B4C70>)
2025-06-26 01:00:33,499 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025C8FE657C0>) completed
2025-06-26 01:00:33,499 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000172B17B4C70>) completed
2025-06-26 01:00:33,499 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000172B1795840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-26 01:00:33,499 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025C8FE657C0>)
2025-06-26 01:00:33,500 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025C8FE657C0>) completed
2025-06-26 01:00:33,500 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000172B1795840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-26 01:00:33,500 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025C8FE88C70>)
2025-06-26 01:00:33,500 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000172B1795840>)
2025-06-26 01:00:33,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025C8FE88C70>) completed
2025-06-26 01:00:33,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000172B1795840>) completed
2025-06-26 01:00:33,501 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025C8FE65840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-26 01:00:33,501 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000172B1795840>)
2025-06-26 01:00:33,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025C8FE65840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-26 01:00:33,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000172B1795840>) completed
2025-06-26 01:00:33,501 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025C8FE65840>)
2025-06-26 01:00:33,502 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000172B17B4C70>)
2025-06-26 01:00:33,502 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025C8FE65840>) completed
2025-06-26 01:00:33,502 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000172B17B4C70>) completed
2025-06-26 01:00:33,502 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025C8FE65840>)
2025-06-26 01:00:33,502 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000172B17958C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-26 01:00:33,503 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025C8FE65840>) completed
2025-06-26 01:00:33,503 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000172B17958C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-26 01:00:33,503 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000172B17958C0>)
2025-06-26 01:00:33,503 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025C8FE88C70>)
2025-06-26 01:00:33,503 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000172B17958C0>) completed
2025-06-26 01:00:33,503 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025C8FE88C70>) completed
2025-06-26 01:00:33,504 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000172B17958C0>)
2025-06-26 01:00:33,504 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025C8FE658C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-26 01:00:33,505 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000172B17958C0>) completed
2025-06-26 01:00:33,505 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025C8FE658C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-26 01:00:33,505 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000172B17B4C70>)
2025-06-26 01:00:33,505 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025C8FE658C0>)
2025-06-26 01:00:33,505 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000172B17B4C70>) completed
2025-06-26 01:00:33,506 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025C8FE658C0>) completed
2025-06-26 01:00:33,506 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000172B17B4C70>)
2025-06-26 01:00:33,506 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025C8FE658C0>)
2025-06-26 01:00:33,506 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000172B17B4C70>) completed
2025-06-26 01:00:33,506 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025C8FE658C0>) completed
2025-06-26 01:00:33,506 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-26 01:00:33,507 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000025C8FE88C70>)
2025-06-26 01:00:33,507 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000025C8FE88C70>) completed
2025-06-26 01:00:33,508 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:00:33,508 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025C8FE88C70>)
2025-06-26 01:00:33,508 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025C8FE88C70>) completed
2025-06-26 01:00:33,509 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:00:33,509 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-26 01:00:33,510 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:00:33,511 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:00:33,786 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-26 01:00:33,786 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-26 01:00:33,786 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:00:33,789 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:00:33,807 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-26 01:00:33,808 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-26 01:00:33,809 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:00:33,811 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:00:34,075 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-26 01:00:34,081 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-26 01:00:34,081 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-26 01:00:34,081 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-26 01:00:34,095 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-26 01:00:34,097 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-26 01:00:34,097 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000172B1724050>
2025-06-26 01:00:34,098 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-26 01:00:34,098 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-26 01:00:34,098 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-26 01:00:34,099 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-26 01:00:34,099 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-26 01:00:34,099 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-26 01:00:34,101 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-26 01:00:34,113 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-26 01:00:34,114 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x0000025C8FD82590>
2025-06-26 01:00:34,114 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-26 01:00:34,114 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-26 01:00:34,115 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-26 01:00:34,115 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-26 01:01:06,116 - uvicorn.error - INFO - [MainThread] - server.py:258 - Shutting down
2025-06-26 01:01:06,116 - uvicorn.error - INFO - [MainThread] - server.py:258 - Shutting down
2025-06-26 01:01:06,225 - uvicorn.error - INFO - [MainThread] - on.py:67 - Waiting for application shutdown.
2025-06-26 01:01:06,225 - uvicorn.error - INFO - [MainThread] - on.py:67 - Waiting for application shutdown.
2025-06-26 01:01:06,225 - ultibot_backend - INFO - [MainThread] - main.py:104 - Apagando UltiBot Backend (lifespan)...
2025-06-26 01:01:06,225 - ultibot_backend - INFO - [MainThread] - main.py:104 - Apagando UltiBot Backend (lifespan)...
2025-06-26 01:01:06,226 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:189 - Shutting down dependency container...
2025-06-26 01:01:06,226 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:189 - Shutting down dependency container...
2025-06-26 01:01:06,230 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:40 - Redis client closed.
2025-06-26 01:01:06,230 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:40 - Redis client closed.
2025-06-26 01:01:06,231 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:196 - Dependency container shut down.
2025-06-26 01:01:06,231 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:196 - Dependency container shut down.
2025-06-26 01:01:06,231 - ultibot_backend - INFO - [MainThread] - main.py:107 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-26 01:01:06,231 - ultibot_backend - INFO - [MainThread] - main.py:107 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-26 01:01:06,231 - uvicorn.error - INFO - [MainThread] - on.py:76 - Application shutdown complete.
2025-06-26 01:01:06,233 - uvicorn.error - INFO - [MainThread] - server.py:92 - Finished server process [1172]
2025-06-26 01:01:06,233 - uvicorn.error - INFO - [MainThread] - on.py:76 - Application shutdown complete.
2025-06-26 01:01:06,233 - uvicorn.error - INFO - [MainThread] - server.py:92 - Finished server process [15288]
2025-06-26 01:01:11,047 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-26 01:01:11,047 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-26 01:01:11,047 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-26 01:01:11,047 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-26 01:01:11,066 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-26 01:01:11,066 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicaci√≥n creada.
2025-06-26 01:01:11,068 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [26648]
2025-06-26 01:01:11,068 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-26 01:01:11,069 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-26 01:01:11,069 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-26 01:01:11,069 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-26 01:01:11,069 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicaci√≥n creada.
2025-06-26 01:01:11,069 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:106 - Initializing dependency container...
2025-06-26 01:01:11,070 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [13252]
2025-06-26 01:01:11,070 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:45 - Using local SQLite database: sqlite+aiosqlite:///ultibot_local.db. This is for development.
2025-06-26 01:01:11,070 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-26 01:01:11,070 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:48 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-26 01:01:11,071 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-26 01:01:11,071 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-26 01:01:11,071 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:106 - Initializing dependency container...
2025-06-26 01:01:11,072 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:45 - Using local SQLite database: sqlite+aiosqlite:///ultibot_local.db. This is for development.
2025-06-26 01:01:11,072 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:48 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-26 01:01:11,083 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000002A597AA9C60>
2025-06-26 01:01:11,083 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000002A597AA9C60> completed
2025-06-26 01:01:11,083 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x00000204427C9C60>
2025-06-26 01:01:11,086 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002A597AB8C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002A597AA8F40>, deterministic=True)
2025-06-26 01:01:11,086 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x00000204427C9C60> completed
2025-06-26 01:01:11,086 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002A597AB8C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002A597AA8F40>, deterministic=True) completed
2025-06-26 01:01:11,087 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002A597AB8C70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-26 01:01:11,087 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000204427D4C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000204427C8F40>, deterministic=True)
2025-06-26 01:01:11,087 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002A597AB8C70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-26 01:01:11,087 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000204427D4C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000204427C8F40>, deterministic=True) completed
2025-06-26 01:01:11,087 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002A597AB8C70>)
2025-06-26 01:01:11,088 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000204427D4C70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-26 01:01:11,088 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002A597AB8C70>) completed
2025-06-26 01:01:11,088 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000204427D4C70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-26 01:01:11,088 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002A597A955C0>, 'PRAGMA read_uncommitted', [])
2025-06-26 01:01:11,088 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002A597A955C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-26 01:01:11,089 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000204427D4C70>)
2025-06-26 01:01:11,089 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002A597A955C0>)
2025-06-26 01:01:11,089 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000204427D4C70>) completed
2025-06-26 01:01:11,089 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002A597A955C0>) completed
2025-06-26 01:01:11,089 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000204427B55C0>, 'PRAGMA read_uncommitted', [])
2025-06-26 01:01:11,089 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002A597A955C0>)
2025-06-26 01:01:11,090 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000204427B55C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-26 01:01:11,090 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002A597A955C0>) completed
2025-06-26 01:01:11,091 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002A597AB8C70>)
2025-06-26 01:01:11,091 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000204427B55C0>)
2025-06-26 01:01:11,091 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002A597AB8C70>) completed
2025-06-26 01:01:11,091 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000204427B55C0>) completed
2025-06-26 01:01:11,091 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000204427B55C0>)
2025-06-26 01:01:11,091 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000204427B55C0>) completed
2025-06-26 01:01:11,091 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002A597AB8C70>)
2025-06-26 01:01:11,091 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000204427D4C70>)
2025-06-26 01:01:11,091 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002A597AB8C70>) completed
2025-06-26 01:01:11,091 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000204427D4C70>) completed
2025-06-26 01:01:11,093 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002A597A95440>, 'PRAGMA main.table_info("market_data")', ())
2025-06-26 01:01:11,093 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000204427D4C70>)
2025-06-26 01:01:11,094 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002A597A95440>, 'PRAGMA main.table_info("market_data")', ()) completed
2025-06-26 01:01:11,094 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000204427D4C70>) completed
2025-06-26 01:01:11,094 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002A597A95440>) completed
2025-06-26 01:01:11,095 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000204427B5440>, 'PRAGMA main.table_info("market_data")', ())
2025-06-26 01:01:11,095 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002A597A95440>)
2025-06-26 01:01:11,095 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002A597A95440>) completed
2025-06-26 01:01:11,095 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000204427B5440>, 'PRAGMA main.table_info("market_data")', ()) completed
2025-06-26 01:01:11,096 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002A597AB8C70>)
2025-06-26 01:01:11,096 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000204427B5440>)
2025-06-26 01:01:11,096 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000204427B5440>) completed
2025-06-26 01:01:11,096 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002A597AB8C70>) completed
2025-06-26 01:01:11,096 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000204427B5440>)
2025-06-26 01:01:11,097 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000204427B5440>) completed
2025-06-26 01:01:11,097 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002A597A955C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-26 01:01:11,097 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002A597A955C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-26 01:01:11,097 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000204427D4C70>)
2025-06-26 01:01:11,097 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002A597A955C0>)
2025-06-26 01:01:11,097 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000204427D4C70>) completed
2025-06-26 01:01:11,097 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002A597A955C0>) completed
2025-06-26 01:01:11,097 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000204427B55C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-26 01:01:11,097 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002A597A955C0>)
2025-06-26 01:01:11,098 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002A597A955C0>) completed
2025-06-26 01:01:11,098 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000204427B55C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-26 01:01:11,098 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002A597AB8C70>)
2025-06-26 01:01:11,098 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000204427B55C0>)
2025-06-26 01:01:11,098 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002A597AB8C70>) completed
2025-06-26 01:01:11,099 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000204427B55C0>) completed
2025-06-26 01:01:11,099 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000204427B55C0>)
2025-06-26 01:01:11,099 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002A597A95540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-26 01:01:11,099 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000204427B55C0>) completed
2025-06-26 01:01:11,100 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002A597A95540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-26 01:01:11,100 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002A597A95540>)
2025-06-26 01:01:11,101 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000204427D4C70>)
2025-06-26 01:01:11,101 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002A597A95540>) completed
2025-06-26 01:01:11,101 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000204427D4C70>) completed
2025-06-26 01:01:11,101 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002A597A95540>)
2025-06-26 01:01:11,101 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000204427B5540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-26 01:01:11,101 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002A597A95540>) completed
2025-06-26 01:01:11,101 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000204427B5540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-26 01:01:11,103 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000204427B5540>)
2025-06-26 01:01:11,103 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002A597AB8C70>)
2025-06-26 01:01:11,103 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000204427B5540>) completed
2025-06-26 01:01:11,103 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002A597AB8C70>) completed
2025-06-26 01:01:11,103 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000204427B5540>)
2025-06-26 01:01:11,103 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002A597A95740>, 'PRAGMA main.table_info("trades")', ())
2025-06-26 01:01:11,103 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000204427B5540>) completed
2025-06-26 01:01:11,103 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002A597A95740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-26 01:01:11,103 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000204427D4C70>)
2025-06-26 01:01:11,104 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000204427D4C70>) completed
2025-06-26 01:01:11,104 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002A597A95740>)
2025-06-26 01:01:11,104 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002A597A95740>) completed
2025-06-26 01:01:11,104 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000204427B5740>, 'PRAGMA main.table_info("trades")', ())
2025-06-26 01:01:11,104 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002A597A95740>)
2025-06-26 01:01:11,104 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000204427B5740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-26 01:01:11,105 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002A597A95740>) completed
2025-06-26 01:01:11,105 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000204427B5740>)
2025-06-26 01:01:11,105 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002A597AB8C70>)
2025-06-26 01:01:11,105 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000204427B5740>) completed
2025-06-26 01:01:11,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002A597AB8C70>) completed
2025-06-26 01:01:11,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002A597A957C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-26 01:01:11,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000204427B5740>) completed
2025-06-26 01:01:11,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002A597A957C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-26 01:01:11,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000204427D4C70>)
2025-06-26 01:01:11,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002A597A957C0>)
2025-06-26 01:01:11,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000204427D4C70>) completed
2025-06-26 01:01:11,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002A597A957C0>) completed
2025-06-26 01:01:11,108 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000204427B57C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-26 01:01:11,108 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002A597A957C0>)
2025-06-26 01:01:11,108 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002A597A957C0>) completed
2025-06-26 01:01:11,108 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000204427B57C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-26 01:01:11,108 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002A597AB8C70>)
2025-06-26 01:01:11,109 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000204427B57C0>)
2025-06-26 01:01:11,109 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002A597AB8C70>) completed
2025-06-26 01:01:11,109 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000204427B57C0>) completed
2025-06-26 01:01:11,109 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002A597A95840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-26 01:01:11,109 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000204427B57C0>)
2025-06-26 01:01:11,109 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000204427B57C0>) completed
2025-06-26 01:01:11,109 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002A597A95840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-26 01:01:11,110 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000204427D4C70>)
2025-06-26 01:01:11,110 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002A597A95840>)
2025-06-26 01:01:11,110 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000204427D4C70>) completed
2025-06-26 01:01:11,110 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002A597A95840>) completed
2025-06-26 01:01:11,111 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000204427B5840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-26 01:01:11,111 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002A597A95840>)
2025-06-26 01:01:11,111 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000204427B5840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-26 01:01:11,111 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002A597A95840>) completed
2025-06-26 01:01:11,111 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000204427B5840>)
2025-06-26 01:01:11,111 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002A597AB8C70>)
2025-06-26 01:01:11,111 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000204427B5840>) completed
2025-06-26 01:01:11,111 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002A597AB8C70>) completed
2025-06-26 01:01:11,111 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000204427B5840>)
2025-06-26 01:01:11,111 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002A597A958C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-26 01:01:11,111 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000204427B5840>) completed
2025-06-26 01:01:11,111 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002A597A958C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-26 01:01:11,113 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000204427D4C70>)
2025-06-26 01:01:11,113 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002A597A958C0>)
2025-06-26 01:01:11,113 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000204427D4C70>) completed
2025-06-26 01:01:11,113 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002A597A958C0>) completed
2025-06-26 01:01:11,113 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000204427B58C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-26 01:01:11,113 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002A597A958C0>)
2025-06-26 01:01:11,114 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000204427B58C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-26 01:01:11,114 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002A597A958C0>) completed
2025-06-26 01:01:11,114 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000204427B58C0>)
2025-06-26 01:01:11,114 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000204427B58C0>) completed
2025-06-26 01:01:11,114 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002A597AB8C70>)
2025-06-26 01:01:11,114 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002A597AB8C70>) completed
2025-06-26 01:01:11,114 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000204427B58C0>) completed
2025-06-26 01:01:11,114 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002A597AB8C70>)
2025-06-26 01:01:11,114 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002A597AB8C70>) completed
2025-06-26 01:01:11,114 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000204427D4C70>)
2025-06-26 01:01:11,114 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-26 01:01:11,116 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000204427D4C70>) completed
2025-06-26 01:01:11,117 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:01:11,117 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000204427D4C70>)
2025-06-26 01:01:11,117 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000204427D4C70>) completed
2025-06-26 01:01:11,117 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:01:11,118 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-26 01:01:11,118 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:01:11,119 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:01:11,375 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-26 01:01:11,375 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-26 01:01:11,375 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:01:11,375 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:01:11,375 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-26 01:01:11,375 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-26 01:01:11,382 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:01:11,383 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:01:11,633 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-26 01:01:11,638 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-26 01:01:11,638 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-26 01:01:11,638 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-26 01:01:11,642 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-26 01:01:11,645 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-26 01:01:11,646 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-26 01:01:11,646 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-26 01:01:11,653 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-26 01:01:11,653 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x0000020442759AD0>
2025-06-26 01:01:11,653 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-26 01:01:11,653 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-26 01:01:11,653 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-26 01:01:11,657 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-26 01:01:11,658 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-26 01:01:11,658 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000002A5979573D0>
2025-06-26 01:01:11,659 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-26 01:01:11,659 - uvicorn.error - ERROR - [MainThread] - on.py:134 - Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 741, in lifespan
    await receive()
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-26 01:01:11,659 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-26 01:01:11,660 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-26 01:01:11,660 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-26 01:01:11,662 - uvicorn.error - ERROR - [MainThread] - on.py:134 - Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 741, in lifespan
    await receive()
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-26 01:01:16,393 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-26 01:01:16,393 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-26 01:01:16,415 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-26 01:01:16,416 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicaci√≥n creada.
2025-06-26 01:01:16,416 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [14140]
2025-06-26 01:01:16,416 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-26 01:01:16,417 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-26 01:01:16,417 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-26 01:01:16,417 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:106 - Initializing dependency container...
2025-06-26 01:01:16,417 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:45 - Using local SQLite database: sqlite+aiosqlite:///ultibot_local.db. This is for development.
2025-06-26 01:01:16,418 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:48 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-26 01:01:16,430 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-26 01:01:16,430 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-26 01:01:16,431 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x0000025FC36D9C60>
2025-06-26 01:01:16,433 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x0000025FC36D9C60> completed
2025-06-26 01:01:16,434 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025FC36E8C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000025FC36D8F40>, deterministic=True)
2025-06-26 01:01:16,434 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025FC36E8C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000025FC36D8F40>, deterministic=True) completed
2025-06-26 01:01:16,435 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025FC36E8C70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-26 01:01:16,435 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025FC36E8C70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-26 01:01:16,435 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025FC36E8C70>)
2025-06-26 01:01:16,436 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025FC36E8C70>) completed
2025-06-26 01:01:16,436 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025FC36C55C0>, 'PRAGMA read_uncommitted', [])
2025-06-26 01:01:16,436 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025FC36C55C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-26 01:01:16,437 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025FC36C55C0>)
2025-06-26 01:01:16,437 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025FC36C55C0>) completed
2025-06-26 01:01:16,437 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025FC36C55C0>)
2025-06-26 01:01:16,437 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025FC36C55C0>) completed
2025-06-26 01:01:16,437 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025FC36E8C70>)
2025-06-26 01:01:16,438 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025FC36E8C70>) completed
2025-06-26 01:01:16,439 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025FC36E8C70>)
2025-06-26 01:01:16,439 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025FC36E8C70>) completed
2025-06-26 01:01:16,439 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025FC36C5440>, 'PRAGMA main.table_info("market_data")', ())
2025-06-26 01:01:16,440 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025FC36C5440>, 'PRAGMA main.table_info("market_data")', ()) completed
2025-06-26 01:01:16,440 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025FC36C5440>)
2025-06-26 01:01:16,440 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025FC36C5440>) completed
2025-06-26 01:01:16,441 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025FC36C5440>)
2025-06-26 01:01:16,441 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025FC36C5440>) completed
2025-06-26 01:01:16,441 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025FC36E8C70>)
2025-06-26 01:01:16,442 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025FC36E8C70>) completed
2025-06-26 01:01:16,442 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025FC36C55C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-26 01:01:16,443 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025FC36C55C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-26 01:01:16,443 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025FC36C55C0>)
2025-06-26 01:01:16,443 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025FC36C55C0>) completed
2025-06-26 01:01:16,444 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025FC36C55C0>)
2025-06-26 01:01:16,444 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025FC36C55C0>) completed
2025-06-26 01:01:16,444 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025FC36E8C70>)
2025-06-26 01:01:16,445 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025FC36E8C70>) completed
2025-06-26 01:01:16,445 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025FC36C5540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-26 01:01:16,445 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025FC36C5540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-26 01:01:16,445 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025FC36C5540>)
2025-06-26 01:01:16,446 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025FC36C5540>) completed
2025-06-26 01:01:16,446 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025FC36C5540>)
2025-06-26 01:01:16,446 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025FC36C5540>) completed
2025-06-26 01:01:16,447 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025FC36E8C70>)
2025-06-26 01:01:16,447 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025FC36E8C70>) completed
2025-06-26 01:01:16,447 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025FC36C5740>, 'PRAGMA main.table_info("trades")', ())
2025-06-26 01:01:16,448 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025FC36C5740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-26 01:01:16,448 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025FC36C5740>)
2025-06-26 01:01:16,448 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025FC36C5740>) completed
2025-06-26 01:01:16,448 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025FC36C5740>)
2025-06-26 01:01:16,449 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025FC36C5740>) completed
2025-06-26 01:01:16,448 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-26 01:01:16,449 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025FC36E8C70>)
2025-06-26 01:01:16,449 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicaci√≥n creada.
2025-06-26 01:01:16,449 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025FC36E8C70>) completed
2025-06-26 01:01:16,449 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [24152]
2025-06-26 01:01:16,450 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025FC36C57C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-26 01:01:16,450 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-26 01:01:16,450 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025FC36C57C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-26 01:01:16,450 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-26 01:01:16,450 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025FC36C57C0>)
2025-06-26 01:01:16,451 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-26 01:01:16,451 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025FC36C57C0>) completed
2025-06-26 01:01:16,451 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:106 - Initializing dependency container...
2025-06-26 01:01:16,451 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025FC36C57C0>)
2025-06-26 01:01:16,451 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:45 - Using local SQLite database: sqlite+aiosqlite:///ultibot_local.db. This is for development.
2025-06-26 01:01:16,451 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025FC36C57C0>) completed
2025-06-26 01:01:16,451 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:48 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-26 01:01:16,451 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025FC36E8C70>)
2025-06-26 01:01:16,453 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025FC36E8C70>) completed
2025-06-26 01:01:16,453 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025FC36C5840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-26 01:01:16,453 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025FC36C5840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-26 01:01:16,454 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025FC36C5840>)
2025-06-26 01:01:16,454 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025FC36C5840>) completed
2025-06-26 01:01:16,454 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025FC36C5840>)
2025-06-26 01:01:16,454 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025FC36C5840>) completed
2025-06-26 01:01:16,455 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025FC36E8C70>)
2025-06-26 01:01:16,455 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025FC36E8C70>) completed
2025-06-26 01:01:16,455 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025FC36C58C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-26 01:01:16,455 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025FC36C58C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-26 01:01:16,456 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025FC36C58C0>)
2025-06-26 01:01:16,456 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025FC36C58C0>) completed
2025-06-26 01:01:16,457 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025FC36C58C0>)
2025-06-26 01:01:16,457 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025FC36C58C0>) completed
2025-06-26 01:01:16,457 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000025FC36E8C70>)
2025-06-26 01:01:16,457 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000025FC36E8C70>) completed
2025-06-26 01:01:16,458 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025FC36E8C70>)
2025-06-26 01:01:16,458 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025FC36E8C70>) completed
2025-06-26 01:01:16,458 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-26 01:01:16,459 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:01:16,460 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:01:16,467 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x00000282A4919C60>
2025-06-26 01:01:16,468 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x00000282A4919C60> completed
2025-06-26 01:01:16,468 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000282A4924C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000282A4918F40>, deterministic=True)
2025-06-26 01:01:16,468 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000282A4924C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000282A4918F40>, deterministic=True) completed
2025-06-26 01:01:16,469 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000282A4924C70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-26 01:01:16,469 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000282A4924C70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-26 01:01:16,469 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000282A4924C70>)
2025-06-26 01:01:16,470 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000282A4924C70>) completed
2025-06-26 01:01:16,470 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000282A49055C0>, 'PRAGMA read_uncommitted', [])
2025-06-26 01:01:16,470 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000282A49055C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-26 01:01:16,470 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000282A49055C0>)
2025-06-26 01:01:16,471 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000282A49055C0>) completed
2025-06-26 01:01:16,471 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000282A49055C0>)
2025-06-26 01:01:16,471 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000282A49055C0>) completed
2025-06-26 01:01:16,471 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000282A4924C70>)
2025-06-26 01:01:16,471 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000282A4924C70>) completed
2025-06-26 01:01:16,473 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000282A4924C70>)
2025-06-26 01:01:16,473 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000282A4924C70>) completed
2025-06-26 01:01:16,473 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000282A4905440>, 'PRAGMA main.table_info("market_data")', ())
2025-06-26 01:01:16,474 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000282A4905440>, 'PRAGMA main.table_info("market_data")', ()) completed
2025-06-26 01:01:16,474 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000282A4905440>)
2025-06-26 01:01:16,474 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000282A4905440>) completed
2025-06-26 01:01:16,475 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000282A4905440>)
2025-06-26 01:01:16,475 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000282A4905440>) completed
2025-06-26 01:01:16,476 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000282A4924C70>)
2025-06-26 01:01:16,476 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000282A4924C70>) completed
2025-06-26 01:01:16,477 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000282A49055C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-26 01:01:16,477 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000282A49055C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-26 01:01:16,478 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000282A49055C0>)
2025-06-26 01:01:16,478 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000282A49055C0>) completed
2025-06-26 01:01:16,478 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000282A49055C0>)
2025-06-26 01:01:16,478 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000282A49055C0>) completed
2025-06-26 01:01:16,478 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000282A4924C70>)
2025-06-26 01:01:16,479 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000282A4924C70>) completed
2025-06-26 01:01:16,479 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000282A4905540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-26 01:01:16,479 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000282A4905540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-26 01:01:16,480 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000282A4905540>)
2025-06-26 01:01:16,480 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000282A4905540>) completed
2025-06-26 01:01:16,480 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000282A4905540>)
2025-06-26 01:01:16,480 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000282A4905540>) completed
2025-06-26 01:01:16,481 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000282A4924C70>)
2025-06-26 01:01:16,481 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000282A4924C70>) completed
2025-06-26 01:01:16,481 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000282A4905740>, 'PRAGMA main.table_info("trades")', ())
2025-06-26 01:01:16,481 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000282A4905740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-26 01:01:16,483 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000282A4905740>)
2025-06-26 01:01:16,483 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000282A4905740>) completed
2025-06-26 01:01:16,483 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000282A4905740>)
2025-06-26 01:01:16,484 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000282A4905740>) completed
2025-06-26 01:01:16,484 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000282A4924C70>)
2025-06-26 01:01:16,484 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000282A4924C70>) completed
2025-06-26 01:01:16,484 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000282A49057C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-26 01:01:16,485 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000282A49057C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-26 01:01:16,485 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000282A49057C0>)
2025-06-26 01:01:16,485 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000282A49057C0>) completed
2025-06-26 01:01:16,486 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000282A49057C0>)
2025-06-26 01:01:16,486 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000282A49057C0>) completed
2025-06-26 01:01:16,486 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000282A4924C70>)
2025-06-26 01:01:16,486 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000282A4924C70>) completed
2025-06-26 01:01:16,487 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000282A4905840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-26 01:01:16,487 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000282A4905840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-26 01:01:16,487 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000282A4905840>)
2025-06-26 01:01:16,487 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000282A4905840>) completed
2025-06-26 01:01:16,488 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000282A4905840>)
2025-06-26 01:01:16,488 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000282A4905840>) completed
2025-06-26 01:01:16,488 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000282A4924C70>)
2025-06-26 01:01:16,489 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000282A4924C70>) completed
2025-06-26 01:01:16,489 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000282A49058C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-26 01:01:16,489 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000282A49058C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-26 01:01:16,489 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000282A49058C0>)
2025-06-26 01:01:16,490 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000282A49058C0>) completed
2025-06-26 01:01:16,490 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000282A49058C0>)
2025-06-26 01:01:16,490 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000282A49058C0>) completed
2025-06-26 01:01:16,491 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000282A4924C70>)
2025-06-26 01:01:16,491 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000282A4924C70>) completed
2025-06-26 01:01:16,491 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000282A4924C70>)
2025-06-26 01:01:16,492 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000282A4924C70>) completed
2025-06-26 01:01:16,493 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-26 01:01:16,493 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:01:16,495 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:01:16,711 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-26 01:01:16,712 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-26 01:01:16,713 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:01:16,713 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:01:16,773 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-26 01:01:16,773 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-26 01:01:16,773 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:01:16,775 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:01:16,968 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-26 01:01:16,975 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-26 01:01:16,976 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-26 01:01:16,976 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-26 01:01:16,988 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-26 01:01:16,989 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x0000025FC357B550>
2025-06-26 01:01:16,989 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-26 01:01:16,990 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-26 01:01:16,990 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-26 01:01:16,991 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-26 01:01:16,995 - uvicorn.error - ERROR - [MainThread] - on.py:134 - Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 741, in lifespan
    await receive()
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-26 01:01:17,019 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-26 01:01:17,022 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-26 01:01:17,023 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-26 01:01:17,023 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-26 01:01:17,036 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-26 01:01:17,037 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000282A4804D50>
2025-06-26 01:01:17,037 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-26 01:01:17,037 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-26 01:01:17,038 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-26 01:01:17,039 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-26 01:01:17,041 - uvicorn.error - ERROR - [MainThread] - on.py:134 - Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 741, in lifespan
    await receive()
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-26 01:01:21,645 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-26 01:01:21,645 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-26 01:01:21,670 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-26 01:01:21,671 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicaci√≥n creada.
2025-06-26 01:01:21,671 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [7936]
2025-06-26 01:01:21,671 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-26 01:01:21,672 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-26 01:01:21,672 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-26 01:01:21,672 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:106 - Initializing dependency container...
2025-06-26 01:01:21,673 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:45 - Using local SQLite database: sqlite+aiosqlite:///ultibot_local.db. This is for development.
2025-06-26 01:01:21,673 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:48 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-26 01:01:21,685 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-26 01:01:21,686 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-26 01:01:21,686 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000001E4C3659C60>
2025-06-26 01:01:21,688 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000001E4C3659C60> completed
2025-06-26 01:01:21,688 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001E4C3664C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001E4C3658F40>, deterministic=True)
2025-06-26 01:01:21,689 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001E4C3664C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001E4C3658F40>, deterministic=True) completed
2025-06-26 01:01:21,689 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001E4C3664C70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-26 01:01:21,689 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001E4C3664C70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-26 01:01:21,689 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E4C3664C70>)
2025-06-26 01:01:21,690 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E4C3664C70>) completed
2025-06-26 01:01:21,691 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E4C36455C0>, 'PRAGMA read_uncommitted', [])
2025-06-26 01:01:21,691 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E4C36455C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-26 01:01:21,692 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001E4C36455C0>)
2025-06-26 01:01:21,692 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001E4C36455C0>) completed
2025-06-26 01:01:21,693 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001E4C36455C0>)
2025-06-26 01:01:21,693 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001E4C36455C0>) completed
2025-06-26 01:01:21,693 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001E4C3664C70>)
2025-06-26 01:01:21,693 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001E4C3664C70>) completed
2025-06-26 01:01:21,694 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E4C3664C70>)
2025-06-26 01:01:21,695 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E4C3664C70>) completed
2025-06-26 01:01:21,695 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E4C3645440>, 'PRAGMA main.table_info("market_data")', ())
2025-06-26 01:01:21,696 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E4C3645440>, 'PRAGMA main.table_info("market_data")', ()) completed
2025-06-26 01:01:21,696 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001E4C3645440>)
2025-06-26 01:01:21,696 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001E4C3645440>) completed
2025-06-26 01:01:21,697 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001E4C3645440>)
2025-06-26 01:01:21,697 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001E4C3645440>) completed
2025-06-26 01:01:21,697 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E4C3664C70>)
2025-06-26 01:01:21,698 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E4C3664C70>) completed
2025-06-26 01:01:21,698 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E4C36455C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-26 01:01:21,698 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E4C36455C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-26 01:01:21,698 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001E4C36455C0>)
2025-06-26 01:01:21,699 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001E4C36455C0>) completed
2025-06-26 01:01:21,699 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001E4C36455C0>)
2025-06-26 01:01:21,699 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001E4C36455C0>) completed
2025-06-26 01:01:21,700 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E4C3664C70>)
2025-06-26 01:01:21,700 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E4C3664C70>) completed
2025-06-26 01:01:21,700 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E4C3645540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-26 01:01:21,700 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E4C3645540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-26 01:01:21,701 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001E4C3645540>)
2025-06-26 01:01:21,701 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001E4C3645540>) completed
2025-06-26 01:01:21,701 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001E4C3645540>)
2025-06-26 01:01:21,701 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001E4C3645540>) completed
2025-06-26 01:01:21,702 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E4C3664C70>)
2025-06-26 01:01:21,702 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E4C3664C70>) completed
2025-06-26 01:01:21,702 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E4C3645740>, 'PRAGMA main.table_info("trades")', ())
2025-06-26 01:01:21,703 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E4C3645740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-26 01:01:21,704 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001E4C3645740>)
2025-06-26 01:01:21,704 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001E4C3645740>) completed
2025-06-26 01:01:21,704 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001E4C3645740>)
2025-06-26 01:01:21,704 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001E4C3645740>) completed
2025-06-26 01:01:21,705 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E4C3664C70>)
2025-06-26 01:01:21,705 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E4C3664C70>) completed
2025-06-26 01:01:21,705 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E4C36457C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-26 01:01:21,706 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E4C36457C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-26 01:01:21,706 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-26 01:01:21,706 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001E4C36457C0>)
2025-06-26 01:01:21,706 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001E4C36457C0>) completed
2025-06-26 01:01:21,706 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicaci√≥n creada.
2025-06-26 01:01:21,707 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001E4C36457C0>)
2025-06-26 01:01:21,707 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [2388]
2025-06-26 01:01:21,707 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-26 01:01:21,707 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001E4C36457C0>) completed
2025-06-26 01:01:21,707 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-26 01:01:21,707 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E4C3664C70>)
2025-06-26 01:01:21,708 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E4C3664C70>) completed
2025-06-26 01:01:21,708 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-26 01:01:21,708 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:106 - Initializing dependency container...
2025-06-26 01:01:21,708 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E4C3645840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-26 01:01:21,708 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:45 - Using local SQLite database: sqlite+aiosqlite:///ultibot_local.db. This is for development.
2025-06-26 01:01:21,708 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E4C3645840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-26 01:01:21,709 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:48 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-26 01:01:21,709 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001E4C3645840>)
2025-06-26 01:01:21,709 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001E4C3645840>) completed
2025-06-26 01:01:21,710 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001E4C3645840>)
2025-06-26 01:01:21,710 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001E4C3645840>) completed
2025-06-26 01:01:21,711 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E4C3664C70>)
2025-06-26 01:01:21,711 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001E4C3664C70>) completed
2025-06-26 01:01:21,712 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E4C36458C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-26 01:01:21,712 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001E4C36458C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-26 01:01:21,712 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001E4C36458C0>)
2025-06-26 01:01:21,713 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001E4C36458C0>) completed
2025-06-26 01:01:21,713 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001E4C36458C0>)
2025-06-26 01:01:21,714 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001E4C36458C0>) completed
2025-06-26 01:01:21,714 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001E4C3664C70>)
2025-06-26 01:01:21,714 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001E4C3664C70>) completed
2025-06-26 01:01:21,715 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001E4C3664C70>)
2025-06-26 01:01:21,715 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001E4C3664C70>) completed
2025-06-26 01:01:21,716 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-26 01:01:21,716 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:01:21,717 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:01:21,722 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000002DBEED09C60>
2025-06-26 01:01:21,722 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000002DBEED09C60> completed
2025-06-26 01:01:21,723 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002DBEED14C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002DBEED08F40>, deterministic=True)
2025-06-26 01:01:21,723 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002DBEED14C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002DBEED08F40>, deterministic=True) completed
2025-06-26 01:01:21,723 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002DBEED14C70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-26 01:01:21,724 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002DBEED14C70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-26 01:01:21,724 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>)
2025-06-26 01:01:21,724 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>) completed
2025-06-26 01:01:21,725 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEECF55C0>, 'PRAGMA read_uncommitted', [])
2025-06-26 01:01:21,725 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEECF55C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-26 01:01:21,726 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEECF55C0>)
2025-06-26 01:01:21,726 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEECF55C0>) completed
2025-06-26 01:01:21,727 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEECF55C0>)
2025-06-26 01:01:21,727 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEECF55C0>) completed
2025-06-26 01:01:21,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002DBEED14C70>)
2025-06-26 01:01:21,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002DBEED14C70>) completed
2025-06-26 01:01:21,729 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>)
2025-06-26 01:01:21,729 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>) completed
2025-06-26 01:01:21,729 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEECF5440>, 'PRAGMA main.table_info("market_data")', ())
2025-06-26 01:01:21,730 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEECF5440>, 'PRAGMA main.table_info("market_data")', ()) completed
2025-06-26 01:01:21,731 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEECF5440>)
2025-06-26 01:01:21,731 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEECF5440>) completed
2025-06-26 01:01:21,731 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEECF5440>)
2025-06-26 01:01:21,731 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEECF5440>) completed
2025-06-26 01:01:21,732 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>)
2025-06-26 01:01:21,732 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>) completed
2025-06-26 01:01:21,732 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEECF55C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-26 01:01:21,733 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEECF55C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-26 01:01:21,733 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEECF55C0>)
2025-06-26 01:01:21,733 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEECF55C0>) completed
2025-06-26 01:01:21,733 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEECF55C0>)
2025-06-26 01:01:21,734 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEECF55C0>) completed
2025-06-26 01:01:21,734 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>)
2025-06-26 01:01:21,734 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>) completed
2025-06-26 01:01:21,734 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEECF5540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-26 01:01:21,735 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEECF5540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-26 01:01:21,735 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEECF5540>)
2025-06-26 01:01:21,735 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEECF5540>) completed
2025-06-26 01:01:21,736 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEECF5540>)
2025-06-26 01:01:21,736 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEECF5540>) completed
2025-06-26 01:01:21,737 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>)
2025-06-26 01:01:21,737 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>) completed
2025-06-26 01:01:21,737 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEECF5740>, 'PRAGMA main.table_info("trades")', ())
2025-06-26 01:01:21,738 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEECF5740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-26 01:01:21,738 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEECF5740>)
2025-06-26 01:01:21,738 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEECF5740>) completed
2025-06-26 01:01:21,738 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEECF5740>)
2025-06-26 01:01:21,738 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEECF5740>) completed
2025-06-26 01:01:21,739 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>)
2025-06-26 01:01:21,739 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>) completed
2025-06-26 01:01:21,739 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEECF57C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-26 01:01:21,739 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEECF57C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-26 01:01:21,739 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEECF57C0>)
2025-06-26 01:01:21,741 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEECF57C0>) completed
2025-06-26 01:01:21,741 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEECF57C0>)
2025-06-26 01:01:21,741 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEECF57C0>) completed
2025-06-26 01:01:21,741 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>)
2025-06-26 01:01:21,742 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>) completed
2025-06-26 01:01:21,742 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEECF5840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-26 01:01:21,743 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEECF5840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-26 01:01:21,743 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEECF5840>)
2025-06-26 01:01:21,743 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEECF5840>) completed
2025-06-26 01:01:21,744 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEECF5840>)
2025-06-26 01:01:21,744 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEECF5840>) completed
2025-06-26 01:01:21,744 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>)
2025-06-26 01:01:21,745 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>) completed
2025-06-26 01:01:21,745 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEECF58C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-26 01:01:21,745 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEECF58C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-26 01:01:21,746 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEECF58C0>)
2025-06-26 01:01:21,747 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEECF58C0>) completed
2025-06-26 01:01:21,747 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEECF58C0>)
2025-06-26 01:01:21,747 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEECF58C0>) completed
2025-06-26 01:01:21,748 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002DBEED14C70>)
2025-06-26 01:01:21,748 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002DBEED14C70>) completed
2025-06-26 01:01:21,748 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002DBEED14C70>)
2025-06-26 01:01:21,748 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002DBEED14C70>) completed
2025-06-26 01:01:21,748 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-26 01:01:21,749 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:01:21,749 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:01:21,988 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-26 01:01:21,988 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-26 01:01:21,992 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:01:21,993 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:01:22,027 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-26 01:01:22,028 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-26 01:01:22,030 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:01:22,030 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:01:22,253 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-26 01:01:22,259 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-26 01:01:22,259 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-26 01:01:22,260 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-26 01:01:22,272 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-26 01:01:22,273 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000001E4C35073D0>
2025-06-26 01:01:22,274 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-26 01:01:22,274 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-26 01:01:22,275 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-26 01:01:22,275 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-26 01:01:22,278 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-26 01:01:22,282 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-26 01:01:22,282 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-26 01:01:22,283 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-26 01:01:22,295 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-26 01:01:22,296 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000002DBEEBA8910>
2025-06-26 01:01:22,296 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-26 01:01:22,296 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-26 01:01:22,297 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-26 01:01:22,297 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-26 01:01:58,706 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/config
2025-06-26 01:01:58,712 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>)
2025-06-26 01:01:58,713 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002DBEED14C70>) completed
2025-06-26 01:01:58,714 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEEF4B3C0>, 'SELECT user_configurations.id, user_configurations.user_id, user_configurations.telegram_chat_id, user_configurations.notification_preferences, user_configurations.enable_telegram_notifications, user_configurations.default_paper_trading_capital, user_configurations.paper_trading_active, user_configurations.paper_trading_assets, user_configurations.watchlists, user_configurations.favorite_pairs, user_configurations.risk_profile, user_configurations.risk_profile_settings, user_configurations.real_trading_settings, user_configurations.ai_strategy_configurations, user_configurations.ai_analysis_confidence_thresholds, user_configurations.mcp_server_preferences, user_configurations.selected_theme, user_configurations.dashboard_layout_profiles, user_configurations.active_dashboard_layout_profile_id, user_configurations.dashboard_layout_config, user_configurations.cloud_sync_preferences, user_configurations.created_at, user_configurations.updated_at \nFROM user_configurations \nWHERE user_configurations.user_id = ?', ('00000000-0000-0000-0000-000000000001',))
2025-06-26 01:01:58,714 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002DBEEF4B3C0>, 'SELECT user_configurations.id, user_configurations.user_id, user_configurations.telegram_chat_id, user_configurations.notification_preferences, user_configurations.enable_telegram_notifications, user_configurations.default_paper_trading_capital, user_configurations.paper_trading_active, user_configurations.paper_trading_assets, user_configurations.watchlists, user_configurations.favorite_pairs, user_configurations.risk_profile, user_configurations.risk_profile_settings, user_configurations.real_trading_settings, user_configurations.ai_strategy_configurations, user_configurations.ai_analysis_confidence_thresholds, user_configurations.mcp_server_preferences, user_configurations.selected_theme, user_configurations.dashboard_layout_profiles, user_configurations.active_dashboard_layout_profile_id, user_configurations.dashboard_layout_config, user_configurations.cloud_sync_preferences, user_configurations.created_at, user_configurations.updated_at \nFROM user_configurations \nWHERE user_configurations.user_id = ?', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-26 01:01:58,715 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEEF4B3C0>)
2025-06-26 01:01:58,715 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002DBEEF4B3C0>) completed
2025-06-26 01:01:58,716 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEEF4B3C0>)
2025-06-26 01:01:58,716 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002DBEEF4B3C0>) completed
2025-06-26 01:01:58,717 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002DBEED14C70>)
2025-06-26 01:01:58,717 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002DBEED14C70>) completed
2025-06-26 01:01:58,718 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002DBEED14C70>)
2025-06-26 01:01:58,718 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002DBEED14C70>) completed
2025-06-26 01:01:58,718 - ultibot_backend.services.config_service - INFO - [MainThread] - config_service.py:70 - Configuraci√≥n de usuario cargada exitosamente desde la BD para el user_id: 00000000-0000-0000-0000-000000000001
2025-06-26 01:01:58,718 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/config - Status: 200
2025-06-26 01:01:58,719 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:60095 - "GET /api/v1/config HTTP/1.1" 200
2025-06-26 01:01:58,795 - uvicorn.error - INFO - [MainThread] - server.py:258 - Shutting down
2025-06-26 01:01:58,896 - uvicorn.error - INFO - [MainThread] - on.py:67 - Waiting for application shutdown.
2025-06-26 01:01:58,897 - ultibot_backend - INFO - [MainThread] - main.py:104 - Apagando UltiBot Backend (lifespan)...
2025-06-26 01:01:58,897 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:189 - Shutting down dependency container...
2025-06-26 01:01:58,898 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:40 - Redis client closed.
2025-06-26 01:01:58,899 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:196 - Dependency container shut down.
2025-06-26 01:01:58,899 - ultibot_backend - INFO - [MainThread] - main.py:107 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-26 01:01:58,900 - uvicorn.error - INFO - [MainThread] - on.py:76 - Application shutdown complete.
2025-06-26 01:01:58,900 - uvicorn.error - INFO - [MainThread] - server.py:92 - Finished server process [2388]
2025-06-26 01:02:03,450 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-26 01:02:03,450 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-26 01:02:03,469 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-26 01:02:03,469 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicaci√≥n creada.
2025-06-26 01:02:03,474 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [23668]
2025-06-26 01:02:03,474 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-26 01:02:03,474 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-26 01:02:03,474 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-26 01:02:03,475 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:106 - Initializing dependency container...
2025-06-26 01:02:03,475 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:45 - Using local SQLite database: sqlite+aiosqlite:///ultibot_local.db. This is for development.
2025-06-26 01:02:03,476 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:48 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-26 01:02:03,490 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x0000017C7E7D9C60>
2025-06-26 01:02:03,491 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x0000017C7E7D9C60> completed
2025-06-26 01:02:03,491 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000017C7E7E4C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000017C7E7D8F40>, deterministic=True)
2025-06-26 01:02:03,491 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000017C7E7E4C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000017C7E7D8F40>, deterministic=True) completed
2025-06-26 01:02:03,491 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000017C7E7E4C70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-26 01:02:03,491 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000017C7E7E4C70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-26 01:02:03,491 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000017C7E7E4C70>)
2025-06-26 01:02:03,491 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000017C7E7E4C70>) completed
2025-06-26 01:02:03,491 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000017C7E7C55C0>, 'PRAGMA read_uncommitted', [])
2025-06-26 01:02:03,491 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000017C7E7C55C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-26 01:02:03,491 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000017C7E7C55C0>)
2025-06-26 01:02:03,491 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000017C7E7C55C0>) completed
2025-06-26 01:02:03,495 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000017C7E7C55C0>)
2025-06-26 01:02:03,496 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000017C7E7C55C0>) completed
2025-06-26 01:02:03,496 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000017C7E7E4C70>)
2025-06-26 01:02:03,496 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000017C7E7E4C70>) completed
2025-06-26 01:02:03,497 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000017C7E7E4C70>)
2025-06-26 01:02:03,497 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000017C7E7E4C70>) completed
2025-06-26 01:02:03,497 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000017C7E7C5440>, 'PRAGMA main.table_info("market_data")', ())
2025-06-26 01:02:03,498 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000017C7E7C5440>, 'PRAGMA main.table_info("market_data")', ()) completed
2025-06-26 01:02:03,498 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000017C7E7C5440>)
2025-06-26 01:02:03,499 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000017C7E7C5440>) completed
2025-06-26 01:02:03,499 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000017C7E7C5440>)
2025-06-26 01:02:03,499 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000017C7E7C5440>) completed
2025-06-26 01:02:03,500 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000017C7E7E4C70>)
2025-06-26 01:02:03,500 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000017C7E7E4C70>) completed
2025-06-26 01:02:03,500 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000017C7E7C55C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-26 01:02:03,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000017C7E7C55C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-26 01:02:03,501 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000017C7E7C55C0>)
2025-06-26 01:02:03,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000017C7E7C55C0>) completed
2025-06-26 01:02:03,501 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000017C7E7C55C0>)
2025-06-26 01:02:03,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000017C7E7C55C0>) completed
2025-06-26 01:02:03,501 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000017C7E7E4C70>)
2025-06-26 01:02:03,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000017C7E7E4C70>) completed
2025-06-26 01:02:03,501 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000017C7E7C5540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-26 01:02:03,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000017C7E7C5540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-26 01:02:03,501 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000017C7E7C5540>)
2025-06-26 01:02:03,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000017C7E7C5540>) completed
2025-06-26 01:02:03,501 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000017C7E7C5540>)
2025-06-26 01:02:03,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000017C7E7C5540>) completed
2025-06-26 01:02:03,505 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000017C7E7E4C70>)
2025-06-26 01:02:03,506 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000017C7E7E4C70>) completed
2025-06-26 01:02:03,506 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000017C7E7C5740>, 'PRAGMA main.table_info("trades")', ())
2025-06-26 01:02:03,507 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000017C7E7C5740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-26 01:02:03,507 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000017C7E7C5740>)
2025-06-26 01:02:03,507 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000017C7E7C5740>) completed
2025-06-26 01:02:03,508 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000017C7E7C5740>)
2025-06-26 01:02:03,508 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000017C7E7C5740>) completed
2025-06-26 01:02:03,508 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000017C7E7E4C70>)
2025-06-26 01:02:03,508 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000017C7E7E4C70>) completed
2025-06-26 01:02:03,509 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000017C7E7C57C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-26 01:02:03,509 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000017C7E7C57C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-26 01:02:03,509 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000017C7E7C57C0>)
2025-06-26 01:02:03,510 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000017C7E7C57C0>) completed
2025-06-26 01:02:03,510 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000017C7E7C57C0>)
2025-06-26 01:02:03,510 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000017C7E7C57C0>) completed
2025-06-26 01:02:03,510 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000017C7E7E4C70>)
2025-06-26 01:02:03,510 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000017C7E7E4C70>) completed
2025-06-26 01:02:03,510 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000017C7E7C5840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-26 01:02:03,510 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000017C7E7C5840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-26 01:02:03,512 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000017C7E7C5840>)
2025-06-26 01:02:03,512 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000017C7E7C5840>) completed
2025-06-26 01:02:03,513 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000017C7E7C5840>)
2025-06-26 01:02:03,513 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000017C7E7C5840>) completed
2025-06-26 01:02:03,513 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000017C7E7E4C70>)
2025-06-26 01:02:03,513 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000017C7E7E4C70>) completed
2025-06-26 01:02:03,513 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000017C7E7C58C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-26 01:02:03,513 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000017C7E7C58C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-26 01:02:03,515 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000017C7E7C58C0>)
2025-06-26 01:02:03,515 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000017C7E7C58C0>) completed
2025-06-26 01:02:03,515 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000017C7E7C58C0>)
2025-06-26 01:02:03,515 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000017C7E7C58C0>) completed
2025-06-26 01:02:03,517 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000017C7E7E4C70>)
2025-06-26 01:02:03,517 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000017C7E7E4C70>) completed
2025-06-26 01:02:03,517 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000017C7E7E4C70>)
2025-06-26 01:02:03,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000017C7E7E4C70>) completed
2025-06-26 01:02:03,518 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-26 01:02:03,519 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:02:03,519 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:02:03,694 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-26 01:02:03,695 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-26 01:02:03,696 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:02:03,696 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:02:03,870 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-26 01:02:03,875 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-26 01:02:03,875 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-26 01:02:03,878 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-26 01:02:03,890 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-26 01:02:03,890 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x0000017C7D0C2150>
2025-06-26 01:02:03,890 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-26 01:02:03,895 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-26 01:02:03,895 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-26 01:02:03,896 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-26 01:02:03,899 - uvicorn.error - ERROR - [MainThread] - on.py:134 - Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 741, in lifespan
    await receive()
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-26 01:02:08,401 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-26 01:02:08,402 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-26 01:02:08,423 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-26 01:02:08,424 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicaci√≥n creada.
2025-06-26 01:02:08,424 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [30700]
2025-06-26 01:02:08,424 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-26 01:02:08,425 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-26 01:02:08,425 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-26 01:02:08,425 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:106 - Initializing dependency container...
2025-06-26 01:02:08,426 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:45 - Using local SQLite database: sqlite+aiosqlite:///ultibot_local.db. This is for development.
2025-06-26 01:02:08,427 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:48 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-26 01:02:08,439 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000001F43DD19C60>
2025-06-26 01:02:08,440 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000001F43DD19C60> completed
2025-06-26 01:02:08,440 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F43DD28C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001F43DD18F40>, deterministic=True)
2025-06-26 01:02:08,441 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F43DD28C70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001F43DD18F40>, deterministic=True) completed
2025-06-26 01:02:08,441 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F43DD28C70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-26 01:02:08,441 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F43DD28C70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-26 01:02:08,442 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F43DD28C70>)
2025-06-26 01:02:08,442 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F43DD28C70>) completed
2025-06-26 01:02:08,442 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F43DD055C0>, 'PRAGMA read_uncommitted', [])
2025-06-26 01:02:08,443 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F43DD055C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-26 01:02:08,443 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F43DD055C0>)
2025-06-26 01:02:08,443 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F43DD055C0>) completed
2025-06-26 01:02:08,444 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F43DD055C0>)
2025-06-26 01:02:08,444 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F43DD055C0>) completed
2025-06-26 01:02:08,444 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F43DD28C70>)
2025-06-26 01:02:08,444 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F43DD28C70>) completed
2025-06-26 01:02:08,444 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F43DD28C70>)
2025-06-26 01:02:08,445 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F43DD28C70>) completed
2025-06-26 01:02:08,445 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F43DD05440>, 'PRAGMA main.table_info("market_data")', ())
2025-06-26 01:02:08,446 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F43DD05440>, 'PRAGMA main.table_info("market_data")', ()) completed
2025-06-26 01:02:08,447 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F43DD05440>)
2025-06-26 01:02:08,447 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F43DD05440>) completed
2025-06-26 01:02:08,447 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F43DD05440>)
2025-06-26 01:02:08,447 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F43DD05440>) completed
2025-06-26 01:02:08,448 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F43DD28C70>)
2025-06-26 01:02:08,448 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F43DD28C70>) completed
2025-06-26 01:02:08,449 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F43DD055C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-26 01:02:08,449 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F43DD055C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-26 01:02:08,449 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F43DD055C0>)
2025-06-26 01:02:08,450 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F43DD055C0>) completed
2025-06-26 01:02:08,450 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F43DD055C0>)
2025-06-26 01:02:08,450 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F43DD055C0>) completed
2025-06-26 01:02:08,451 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F43DD28C70>)
2025-06-26 01:02:08,451 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F43DD28C70>) completed
2025-06-26 01:02:08,451 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F43DD05540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-26 01:02:08,451 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F43DD05540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-26 01:02:08,452 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F43DD05540>)
2025-06-26 01:02:08,452 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F43DD05540>) completed
2025-06-26 01:02:08,452 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F43DD05540>)
2025-06-26 01:02:08,452 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F43DD05540>) completed
2025-06-26 01:02:08,453 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F43DD28C70>)
2025-06-26 01:02:08,453 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F43DD28C70>) completed
2025-06-26 01:02:08,453 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F43DD05740>, 'PRAGMA main.table_info("trades")', ())
2025-06-26 01:02:08,454 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F43DD05740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-26 01:02:08,454 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F43DD05740>)
2025-06-26 01:02:08,454 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F43DD05740>) completed
2025-06-26 01:02:08,454 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F43DD05740>)
2025-06-26 01:02:08,454 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F43DD05740>) completed
2025-06-26 01:02:08,455 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F43DD28C70>)
2025-06-26 01:02:08,456 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F43DD28C70>) completed
2025-06-26 01:02:08,456 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F43DD057C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-26 01:02:08,456 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F43DD057C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-26 01:02:08,456 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F43DD057C0>)
2025-06-26 01:02:08,457 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F43DD057C0>) completed
2025-06-26 01:02:08,457 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F43DD057C0>)
2025-06-26 01:02:08,457 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F43DD057C0>) completed
2025-06-26 01:02:08,457 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F43DD28C70>)
2025-06-26 01:02:08,458 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F43DD28C70>) completed
2025-06-26 01:02:08,458 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F43DD05840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-26 01:02:08,458 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F43DD05840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-26 01:02:08,459 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F43DD05840>)
2025-06-26 01:02:08,459 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F43DD05840>) completed
2025-06-26 01:02:08,459 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F43DD05840>)
2025-06-26 01:02:08,459 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F43DD05840>) completed
2025-06-26 01:02:08,460 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F43DD28C70>)
2025-06-26 01:02:08,460 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F43DD28C70>) completed
2025-06-26 01:02:08,460 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F43DD058C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-26 01:02:08,460 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F43DD058C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-26 01:02:08,461 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F43DD058C0>)
2025-06-26 01:02:08,461 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F43DD058C0>) completed
2025-06-26 01:02:08,461 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F43DD058C0>)
2025-06-26 01:02:08,461 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F43DD058C0>) completed
2025-06-26 01:02:08,462 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F43DD28C70>)
2025-06-26 01:02:08,463 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F43DD28C70>) completed
2025-06-26 01:02:08,463 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F43DD28C70>)
2025-06-26 01:02:08,464 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F43DD28C70>) completed
2025-06-26 01:02:08,464 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-26 01:02:08,465 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:02:08,466 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:02:08,640 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-26 01:02:08,640 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-26 01:02:08,645 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-26 01:02:08,646 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-26 01:02:08,815 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-26 01:02:08,820 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-26 01:02:08,820 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-26 01:02:08,820 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-26 01:02:08,833 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-26 01:02:08,834 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000001F43DBF4610>
2025-06-26 01:02:08,834 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-26 01:02:08,835 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-26 01:02:08,835 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-26 01:02:08,835 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-26 01:02:23,277 - uvicorn.error - INFO - [MainThread] - server.py:258 - Shutting down
2025-06-26 01:02:23,381 - uvicorn.error - INFO - [MainThread] - on.py:67 - Waiting for application shutdown.
2025-06-26 01:02:23,383 - ultibot_backend - INFO - [MainThread] - main.py:104 - Apagando UltiBot Backend (lifespan)...
2025-06-26 01:02:23,383 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:189 - Shutting down dependency container...
2025-06-26 01:02:23,387 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:40 - Redis client closed.
2025-06-26 01:02:23,388 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:196 - Dependency container shut down.
2025-06-26 01:02:23,388 - ultibot_backend - INFO - [MainThread] - main.py:107 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-26 01:02:23,388 - uvicorn.error - INFO - [MainThread] - on.py:76 - Application shutdown complete.
2025-06-26 01:02:23,388 - uvicorn.error - INFO - [MainThread] - server.py:92 - Finished server process [7936]
