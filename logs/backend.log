2025-06-17 15:02:35,988 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 15:02:35,989 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 15:02:36,006 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 15:02:36,106 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 15:02:36,250 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 15:02:36,259 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:02:36,259 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 15:02:36,260 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 15:02:36,311 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:02:36,371 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 15:05:39,163 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 15:05:39,163 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 15:05:39,179 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 15:05:39,289 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 15:06:29,357 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 15:06:29,357 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 15:06:29,389 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 15:06:29,484 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 15:06:29,617 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 15:06:29,624 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:06:29,631 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 15:06:29,631 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 15:06:29,670 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:06:29,747 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 15:07:03,259 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 15:07:03,259 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 15:07:03,275 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 15:07:03,379 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 15:07:03,508 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 15:07:03,523 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:07:03,523 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 15:07:03,523 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 15:07:03,571 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:07:03,618 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 15:07:52,238 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 15:07:52,238 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 15:07:52,263 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 15:07:52,348 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 15:07:52,493 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 15:07:52,493 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:07:52,493 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 15:07:52,493 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 15:07:52,538 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:07:52,586 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 15:08:30,102 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 15:08:30,102 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 15:08:30,116 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 15:08:30,221 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 15:08:30,355 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 15:08:30,364 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:08:30,365 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 15:08:30,366 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 15:08:30,413 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:08:30,448 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 15:09:01,540 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 15:09:01,540 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 15:09:01,548 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 15:09:01,643 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 15:09:01,786 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 15:09:01,786 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:09:01,786 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 15:09:01,786 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 15:09:01,850 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:09:01,899 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 15:10:28,265 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 15:10:28,265 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 15:10:28,276 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 15:10:28,374 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 15:10:28,508 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 15:10:28,508 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:10:28,508 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 15:10:28,508 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 15:10:28,566 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:10:28,604 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 15:16:07,556 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 15:16:07,556 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 15:16:07,560 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 15:16:07,683 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 15:16:07,794 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 15:16:07,809 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:16:07,809 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 15:16:07,809 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 15:16:07,904 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:16:07,904 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 15:16:45,221 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 15:16:45,221 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 15:16:45,245 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 15:16:45,354 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 15:16:45,471 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 15:16:45,489 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:16:45,489 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 15:16:45,489 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 15:16:45,537 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:16:45,602 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 15:16:46,425 - ultibot_backend - INFO - [Thread-1 (run_blocking_portal)] - main.py:102 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 15:16:46,425 - ultibot_backend - CRITICAL - [Thread-1 (run_blocking_portal)] - main.py:117 - Excepción no controlada en GET /api/v1/performance/strategies: 
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 103, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    |     solved = await call(**sub_values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 212, in get_performance_service
    |     assert container.performance_service is not None
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    | AssertionError
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 103, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 212, in get_performance_service
    assert container.performance_service is not None
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
2025-06-17 15:16:47,059 - ultibot_backend - INFO - [Thread-2 (run_blocking_portal)] - main.py:102 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 15:16:47,070 - ultibot_backend - CRITICAL - [Thread-2 (run_blocking_portal)] - main.py:117 - Excepción no controlada en GET /api/v1/performance/strategies: 
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 103, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    |     solved = await call(**sub_values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 212, in get_performance_service
    |     assert container.performance_service is not None
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    | AssertionError
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 103, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 212, in get_performance_service
    assert container.performance_service is not None
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
2025-06-17 15:50:56,483 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 15:50:56,483 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 15:50:56,502 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 15:50:56,502 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [9760]
2025-06-17 15:50:56,503 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-17 15:50:56,503 - ultibot_backend - INFO - [MainThread] - main.py:74 - Iniciando UltiBot Backend...
2025-06-17 15:50:56,503 - src.ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:47 - Initializing dependency container...
2025-06-17 15:50:56,503 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-17 15:50:56,503 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-17 15:50:56,691 - src.ultibot_backend.adapters.persistence_service - INFO - [MainThread] - persistence_service.py:68 - Pool de conexiones a Supabase (psycopg_pool) establecido exitosamente. Min: 2, Max: 10
2025-06-17 15:50:56,691 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-17 15:50:56,691 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-17 15:50:56,871 - src.ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:110 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-17 15:50:56,871 - src.ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 15:50:56,871 - src.ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-17 15:50:56,871 - src.ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:27 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-17 15:50:56,994 - src.ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-17 15:50:56,995 - src.ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:126 - Dependency container initialized successfully.
2025-06-17 15:50:56,995 - ultibot_backend - INFO - [MainThread] - main.py:79 - Contenedor de dependencias inicializado.
2025-06-17 15:50:56,995 - ultibot_backend - INFO - [MainThread] - main.py:86 - Aplicación iniciada correctamente.
2025-06-17 15:50:56,996 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:50:56,996 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:50:56,996 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-17 15:50:58,042 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:50:58,074 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:51:00,140 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:51:00,218 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:51:01,115 - ultibot_backend - INFO - [MainThread] - main.py:102 - Middleware: Solicitud entrante: GET /api/v1/config
2025-06-17 15:51:01,115 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:51:02,071 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:51:04,019 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:51:04,309 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:51:04,483 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:51:07,880 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:51:12,641 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:51:13,004 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:51:15,576 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:51:29,293 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:51:30,030 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:51:30,984 - psycopg.pool - WARNING - [MainThread] - pool_async.py:691 - error connecting in 'supabase_pool': invalid connection option "sqlite:///./ultibot_local.db?sslmode"

2025-06-17 15:51:31,111 - src.ultibot_backend.adapters.persistence_service - ERROR - [MainThread] - persistence_service.py:320 - Error al obtener configuración de usuario para 00000000-0000-0000-0000-000000000001 (psycopg_pool): couldn't get a connection after 30.00 sec
Traceback (most recent call last):
  File "c:\Users\zamor\UltiBotInversiones\src\ultibot_backend\adapters\persistence_service.py", line 312, in get_user_configuration
    async with self.pool.connection() as conn:
  File "C:\Program Files\Python311\Lib\contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\psycopg_pool\pool_async.py", line 195, in connection
    conn = await self.getconn(timeout=timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\psycopg_pool\pool_async.py", line 230, in getconn
    raise PoolTimeout(
psycopg_pool.PoolTimeout: couldn't get a connection after 30.00 sec
2025-06-17 15:51:31,111 - src.ultibot_backend.services.config_service - ERROR - [MainThread] - config_service.py:69 - Error al cargar la configuración: couldn't get a connection after 30.00 sec
Traceback (most recent call last):
  File "c:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\config_service.py", line 53, in _load_config_from_db
    config_data = await self.persistence_service.get_user_configuration()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\zamor\UltiBotInversiones\src\ultibot_backend\adapters\persistence_service.py", line 312, in get_user_configuration
    async with self.pool.connection() as conn:
  File "C:\Program Files\Python311\Lib\contextlib.py", line 210, in __aenter__
    return await anext(self.gen)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\psycopg_pool\pool_async.py", line 195, in connection
    conn = await self.getconn(timeout=timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\psycopg_pool\pool_async.py", line 230, in getconn
    raise PoolTimeout(
psycopg_pool.PoolTimeout: couldn't get a connection after 30.00 sec
2025-06-17 15:51:31,116 - ultibot_backend - INFO - [MainThread] - main.py:104 - Middleware: Solicitud procesada: GET /api/v1/config - Status: 200
2025-06-17 15:51:31,116 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:57590 - "GET /api/v1/config HTTP/1.1" 200
2025-06-17 15:58:36,761 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 15:58:36,761 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 15:58:36,785 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 15:58:37,001 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 15:58:37,175 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 15:58:37,185 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:58:37,185 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 15:58:37,185 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 15:58:37,241 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:58:37,241 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 15:59:39,441 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 15:59:39,441 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 15:59:39,463 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 15:59:39,571 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 15:59:39,711 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 15:59:39,720 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:59:39,721 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 15:59:39,721 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 15:59:39,771 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 15:59:39,826 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 15:59:40,481 - ultibot_backend - INFO - [Thread-1 (run_blocking_portal)] - main.py:102 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 15:59:40,481 - ultibot_backend - CRITICAL - [Thread-1 (run_blocking_portal)] - main.py:117 - Excepción no controlada en GET /api/v1/performance/strategies: 
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 103, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    |     solved = await call(**sub_values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 212, in get_performance_service
    |     assert container.performance_service is not None
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    | AssertionError
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 103, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 212, in get_performance_service
    assert container.performance_service is not None
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
2025-06-17 16:00:38,971 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:00:38,971 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 16:00:38,991 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 16:01:40,213 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:01:40,213 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 16:01:40,231 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 16:01:40,271 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:01:40,271 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 16:01:40,291 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 16:01:40,391 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 16:01:40,534 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 16:01:40,543 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:01:40,544 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 16:01:40,545 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 16:01:40,661 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:01:40,666 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 16:01:41,281 - ultibot_backend - INFO - [Thread-1 (run_blocking_portal)] - main.py:102 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 16:01:41,281 - ultibot_backend - CRITICAL - [Thread-1 (run_blocking_portal)] - main.py:117 - Excepción no controlada en GET /api/v1/performance/strategies: 
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 103, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    |     solved = await call(**sub_values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 212, in get_performance_service
    |     assert container.performance_service is not None
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    | AssertionError
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 103, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 212, in get_performance_service
    assert container.performance_service is not None
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
2025-06-17 16:02:29,297 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:02:29,301 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 16:02:29,317 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 16:02:29,358 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:02:29,358 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 16:02:29,374 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 16:02:29,481 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 16:02:29,624 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 16:02:29,633 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:02:29,635 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 16:02:29,635 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 16:02:29,741 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:02:29,741 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 16:02:30,363 - ultibot_backend - INFO - [Thread-1 (run_blocking_portal)] - main.py:102 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 16:02:30,364 - ultibot_backend - CRITICAL - [Thread-1 (run_blocking_portal)] - main.py:117 - Excepción no controlada en GET /api/v1/performance/strategies: 
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 103, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    |     solved = await call(**sub_values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 212, in get_performance_service
    |     assert container.performance_service is not None
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    | AssertionError
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 103, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 212, in get_performance_service
    assert container.performance_service is not None
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
2025-06-17 16:06:29,781 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:06:29,781 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 16:06:29,801 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 16:06:29,851 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:06:29,851 - ultibot_backend - INFO - [MainThread] - main.py:133 - Registrando routers de la API...
2025-06-17 16:06:29,869 - ultibot_backend - INFO - [MainThread] - main.py:145 - Todos los routers han sido registrados.
2025-06-17 16:06:29,981 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 16:06:30,118 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 16:06:30,129 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:06:30,130 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 16:06:30,131 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 16:06:30,247 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:06:30,251 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 16:06:30,899 - ultibot_backend - INFO - [Thread-1 (run_blocking_portal)] - main.py:102 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 16:06:30,899 - ultibot_backend - CRITICAL - [Thread-1 (run_blocking_portal)] - main.py:117 - Excepción no controlada en GET /api/v1/performance/strategies: 
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 103, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    |     solved = await call(**sub_values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 212, in get_performance_service
    |     assert container.performance_service is not None
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    | AssertionError
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 103, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 212, in get_performance_service
    assert container.performance_service is not None
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
2025-06-17 16:08:19,047 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:08:19,047 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 16:08:19,062 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 16:08:19,101 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:08:19,101 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 16:08:19,121 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 16:08:19,231 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 16:08:19,367 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 16:08:19,377 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:08:19,378 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 16:08:19,379 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 16:08:19,505 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:08:19,512 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 16:08:20,135 - ultibot_backend - INFO - [Thread-1 (run_blocking_portal)] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 16:08:20,135 - ultibot_backend - CRITICAL - [Thread-1 (run_blocking_portal)] - main.py:120 - Excepción no controlada en GET /api/v1/performance/strategies: 
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 106, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    |     solved = await call(**sub_values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 212, in get_performance_service
    |     assert container.performance_service is not None
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    | AssertionError
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 106, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 212, in get_performance_service
    assert container.performance_service is not None
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AssertionError
2025-06-17 16:28:49,654 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:28:49,654 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 16:28:49,675 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 16:28:49,727 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:28:49,727 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 16:28:49,746 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 16:28:49,866 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 16:28:50,025 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 16:28:50,035 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:28:50,038 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 16:28:50,039 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 16:28:50,172 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:28:50,175 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 16:28:50,876 - ultibot_backend - INFO - [Thread-1 (run_blocking_portal)] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 16:28:50,876 - ultibot_backend - CRITICAL - [Thread-1 (run_blocking_portal)] - main.py:120 - Excepción no controlada en GET /api/v1/performance/strategies: 'State' object has no attribute 'container'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 106, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    |     solved = await call(**sub_values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 211, in get_performance_service
    |     container = get_container(request)
    |                 ^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 141, in get_container
    |     return request.app.state.container
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\datastructures.py", line 702, in __getattr__
    |     raise AttributeError(message.format(self.__class__.__name__, key))
    | AttributeError: 'State' object has no attribute 'container'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 106, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 211, in get_performance_service
    container = get_container(request)
                ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 141, in get_container
    return request.app.state.container
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\datastructures.py", line 702, in __getattr__
    raise AttributeError(message.format(self.__class__.__name__, key))
AttributeError: 'State' object has no attribute 'container'
2025-06-17 16:33:39,304 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:33:39,304 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 16:33:39,322 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 16:39:33,994 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:39:33,994 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 16:39:34,012 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 16:39:34,334 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 16:39:34,476 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 16:39:34,484 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:39:34,487 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 16:39:34,488 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 16:39:34,549 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:39:34,552 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 16:39:35,422 - ultibot_backend - INFO - [Thread-1 (run_blocking_portal)] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 16:39:35,422 - ultibot_backend - CRITICAL - [Thread-1 (run_blocking_portal)] - main.py:120 - Excepción no controlada en GET /api/v1/performance/strategies: 'State' object has no attribute 'container'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 106, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    |     solved = await call(**sub_values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 211, in get_performance_service
    |     container = get_container(request)
    |                 ^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 141, in get_container
    |     return request.app.state.container
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\datastructures.py", line 702, in __getattr__
    |     raise AttributeError(message.format(self.__class__.__name__, key))
    | AttributeError: 'State' object has no attribute 'container'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 106, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 211, in get_performance_service
    container = get_container(request)
                ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 141, in get_container
    return request.app.state.container
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\datastructures.py", line 702, in __getattr__
    raise AttributeError(message.format(self.__class__.__name__, key))
AttributeError: 'State' object has no attribute 'container'
2025-06-17 16:49:08,791 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:49:08,791 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 16:49:08,810 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 16:49:08,963 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 16:49:09,112 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 16:49:09,127 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:49:09,128 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 16:49:09,128 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 16:49:09,242 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:49:09,246 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 16:49:09,884 - ultibot_backend - INFO - [Thread-1 (run_blocking_portal)] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 16:49:09,884 - ultibot_backend - CRITICAL - [Thread-1 (run_blocking_portal)] - main.py:120 - Excepción no controlada en GET /api/v1/performance/strategies: 'State' object has no attribute 'container'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 106, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    |     solved = await call(**sub_values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 211, in get_performance_service
    |     container = get_container(request)
    |                 ^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 141, in get_container
    |     return request.app.state.container
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\datastructures.py", line 702, in __getattr__
    |     raise AttributeError(message.format(self.__class__.__name__, key))
    | AttributeError: 'State' object has no attribute 'container'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 106, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 211, in get_performance_service
    container = get_container(request)
                ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 141, in get_container
    return request.app.state.container
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\datastructures.py", line 702, in __getattr__
    raise AttributeError(message.format(self.__class__.__name__, key))
AttributeError: 'State' object has no attribute 'container'
2025-06-17 16:50:31,142 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:50:31,142 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 16:50:31,163 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 16:50:31,307 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 16:50:31,451 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 16:50:31,462 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:50:31,462 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 16:50:31,464 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 16:50:31,513 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:50:31,577 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 16:50:32,211 - ultibot_backend - INFO - [Thread-1 (run_blocking_portal)] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 16:50:32,213 - ultibot_backend - CRITICAL - [Thread-1 (run_blocking_portal)] - main.py:120 - Excepción no controlada en GET /api/v1/performance/strategies: 'State' object has no attribute 'container'
  + Exception Group Traceback (most recent call last):
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 87, in collapse_excgroups
  |     yield
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 190, in __call__
  |     async with anyio.create_task_group() as task_group:
  |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    |     await self.app(scope, receive, _send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    |     with collapse_excgroups():
    |   File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    |     self.gen.throw(typ, value, traceback)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 106, in log_requests
    |     response = await call_next(request)
    |                ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    |     raise app_exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    |     await route.handle(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    |     await self.app(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    |     raise exc
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    |     await app(scope, receive, sender)
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    |     response = await func(request)
    |                ^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    |     solved_result = await solve_dependencies(
    |                     ^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    |     solved = await call(**sub_values)
    |              ^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 211, in get_performance_service
    |     container = get_container(request)
    |                 ^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 141, in get_container
    |     return request.app.state.container
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\datastructures.py", line 702, in __getattr__
    |     raise AttributeError(message.format(self.__class__.__name__, key))
    | AttributeError: 'State' object has no attribute 'container'
    +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\errors.py", line 164, in __call__
    await self.app(scope, receive, _send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 189, in __call__
    with collapse_excgroups():
  File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_utils.py", line 93, in collapse_excgroups
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 191, in __call__
    response = await self.dispatch_func(request, call_next)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 106, in log_requests
    response = await call_next(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 165, in call_next
    raise app_exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\base.py", line 151, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\middleware\exceptions.py", line 65, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 756, in __call__
    await self.middleware_stack(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 776, in app
    await route.handle(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 297, in handle
    await self.app(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 77, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 64, in wrapped_app
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    await app(scope, receive, sender)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 72, in app
    response = await func(request)
               ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\routing.py", line 269, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\fastapi\dependencies\utils.py", line 600, in solve_dependencies
    solved = await call(**sub_values)
             ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 211, in get_performance_service
    container = get_container(request)
                ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 141, in get_container
    return request.app.state.container
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\datastructures.py", line 702, in __getattr__
    raise AttributeError(message.format(self.__class__.__name__, key))
AttributeError: 'State' object has no attribute 'container'
2025-06-17 16:51:35,130 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:51:35,130 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 16:51:35,145 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 16:51:35,327 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 16:51:35,490 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 16:51:35,496 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:51:35,496 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 16:51:35,496 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 16:51:35,617 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:51:35,622 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 16:51:36,263 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 16:51:36,265 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 16:51:36,265 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:120 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-17 16:51:36,265 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 16:52:27,337 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 16:52:27,337 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 16:52:27,357 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 16:52:27,527 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 16:52:27,658 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 16:52:27,667 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:52:27,667 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 16:52:27,667 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 16:52:27,773 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 16:52:27,782 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 16:52:28,392 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 16:52:28,392 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 16:52:28,392 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:120 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-17 16:52:28,392 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 17:00:35,953 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 17:00:35,953 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 17:00:35,973 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 17:00:36,151 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 17:00:36,301 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 17:00:36,313 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 17:00:36,313 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 17:00:36,313 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 17:00:36,423 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 17:00:36,433 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 17:00:37,060 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 17:00:37,062 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 17:00:37,063 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:120 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-17 17:00:37,063 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 17:00:37,367 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 17:00:37,369 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 422
2025-06-17 17:00:38,973 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 17:00:38,975 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 17:00:39,064 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 17:00:39,064 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 17:10:47,663 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 17:10:47,667 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 17:10:47,684 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 17:11:09,153 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 17:11:09,153 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 17:11:09,178 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 17:11:09,255 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 17:11:09,255 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 17:15:34,993 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 17:15:34,993 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 17:15:35,018 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 17:15:35,083 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 17:15:35,089 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 17:15:35,095 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 17:15:35,097 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 17:15:35,097 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 17:15:35,099 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 17:15:35,099 - httpx - INFO - [MainThread] - _client.py:1786 - HTTP Request: GET http://test/api/v1/performance/strategies?mode=paper "HTTP/1.1 200 OK"
2025-06-17 17:21:22,866 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 17:21:22,866 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 17:21:22,888 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 17:21:22,934 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 17:21:22,936 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 17:21:22,944 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 17:21:22,945 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 17:21:22,946 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 17:21:22,946 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 17:21:22,946 - httpx - INFO - [MainThread] - _client.py:1786 - HTTP Request: GET http://test/api/v1/performance/strategies?mode=paper "HTTP/1.1 200 OK"
2025-06-17 17:22:26,639 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 17:22:26,639 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 17:22:26,659 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 17:22:26,709 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 17:22:26,711 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 17:22:26,716 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 17:22:26,719 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 17:22:26,720 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 17:22:26,720 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 17:22:26,721 - httpx - INFO - [MainThread] - _client.py:1786 - HTTP Request: GET http://test/api/v1/performance/strategies?mode=paper "HTTP/1.1 200 OK"
2025-06-17 17:23:37,655 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 17:23:37,655 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 17:23:37,683 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 17:23:37,757 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 17:23:37,758 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 17:23:37,766 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 17:23:37,768 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 17:23:37,768 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 17:23:37,769 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 17:23:37,769 - httpx - INFO - [MainThread] - _client.py:1786 - HTTP Request: GET http://test/api/v1/performance/strategies?mode=paper "HTTP/1.1 200 OK"
2025-06-17 18:00:33,729 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:00:33,729 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:00:33,744 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:00:34,134 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 18:00:34,924 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 18:00:34,949 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 18:00:34,952 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 18:00:34,952 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 18:00:35,016 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 18:00:35,069 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 18:09:25,124 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:09:25,124 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:09:25,139 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:09:25,295 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 18:09:25,428 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 18:09:25,434 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 18:09:25,434 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 18:09:25,434 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 18:09:25,499 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 18:09:25,564 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 18:20:06,194 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:20:06,194 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:20:06,215 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:20:06,434 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 18:20:06,576 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 18:20:06,588 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 18:20:06,589 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 18:20:06,589 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 18:20:06,645 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 18:20:06,706 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 18:20:07,539 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:20:07,539 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 18:20:07,539 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:120 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-17 18:20:07,539 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:20:07,544 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:20:07,544 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 18:20:07,544 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:20:07,544 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:20:07,559 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:20:07,561 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.REAL
2025-06-17 18:20:07,561 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:20:07,561 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:20:07,565 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:20:07,565 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 18:20:07,565 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:20:07,565 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:20:07,573 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:20:07,575 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 18:20:07,575 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:20:07,575 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:20:07,580 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:20:07,580 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 422
2025-06-17 18:20:07,844 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:20:07,844 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 18:20:07,844 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:20:07,844 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:20:11,065 - ultibot_backend.services.configuration_service - INFO - [MainThread] - configuration_service.py:106 - Saved user configuration for user 704a1e62-ac0b-4351-a1f1-3f77d5c34f7c
2025-06-17 18:20:11,926 - ultibot_backend.services.trading_report_service - INFO - [MainThread] - trading_report_service.py:67 - Obtenidos 0 trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000 en modo paper
2025-06-17 18:20:11,934 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error
2025-06-17 18:20:11,946 - ultibot_backend.services.trading_report_service - INFO - [MainThread] - trading_report_service.py:67 - Obtenidos 0 trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000 en modo paper
2025-06-17 18:20:11,966 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:20:11,966 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:20:11,984 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error
2025-06-17 18:20:11,984 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: Database error
2025-06-17 18:20:11,989 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:20:11,991 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:20:25,895 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:20:25,895 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:20:25,921 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:20:26,075 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 18:20:26,222 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 18:20:26,224 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 18:20:26,224 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 18:20:26,224 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 18:20:26,284 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 18:20:26,340 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 18:22:33,975 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:22:33,975 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:22:34,000 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:22:34,135 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 18:22:34,314 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 18:22:34,330 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 18:22:34,330 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 18:22:34,330 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 18:22:34,384 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 18:22:34,445 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 18:22:35,058 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:22:35,059 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 18:22:35,059 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:120 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-17 18:22:35,059 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:22:35,066 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:22:35,068 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 18:22:35,068 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:22:35,068 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:22:35,075 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:22:35,076 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.REAL
2025-06-17 18:22:35,076 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:22:35,076 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:22:35,082 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:22:35,082 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 18:22:35,082 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:22:35,082 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:22:35,085 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:22:35,085 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 18:22:35,085 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:22:35,085 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:22:35,095 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:22:35,095 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 422
2025-06-17 18:22:35,354 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:22:35,359 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 18:22:35,359 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:22:35,359 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:22:38,468 - ultibot_backend.services.configuration_service - INFO - [MainThread] - configuration_service.py:106 - Saved user configuration for user b1d4a70d-71d5-4230-8693-2ebf3e5700ad
2025-06-17 18:22:39,295 - ultibot_backend.services.trading_report_service - INFO - [MainThread] - trading_report_service.py:67 - Obtenidos 0 trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000 en modo paper
2025-06-17 18:22:39,295 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error
2025-06-17 18:22:39,314 - ultibot_backend.services.trading_report_service - INFO - [MainThread] - trading_report_service.py:67 - Obtenidos 0 trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000 en modo paper
2025-06-17 18:22:39,334 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:22:39,334 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:22:39,349 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error
2025-06-17 18:22:39,349 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: Database error
2025-06-17 18:22:39,349 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:22:39,355 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:25:11,944 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:25:11,944 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:25:11,955 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:25:12,105 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 18:25:12,255 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 18:25:12,267 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 18:25:12,268 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 18:25:12,268 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 18:25:12,324 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 18:25:12,384 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 18:25:13,012 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:25:13,013 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 18:25:13,015 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:120 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-17 18:25:13,015 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:25:13,018 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:25:13,018 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 18:25:13,018 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:25:13,018 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:25:13,025 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:25:13,029 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.REAL
2025-06-17 18:25:13,029 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:25:13,030 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:25:13,035 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:25:13,035 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 18:25:13,036 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:25:13,036 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:25:13,036 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:25:13,036 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 18:25:13,036 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:25:13,036 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:25:13,049 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:25:13,050 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 422
2025-06-17 18:25:13,314 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:25:13,314 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 18:25:13,314 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:25:13,314 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:25:16,454 - ultibot_backend.services.configuration_service - INFO - [MainThread] - configuration_service.py:106 - Saved user configuration for user 2a7461fc-f91f-4e3b-a2e8-3040da679621
2025-06-17 18:25:17,300 - ultibot_backend.services.trading_report_service - INFO - [MainThread] - trading_report_service.py:67 - Obtenidos 0 trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000 en modo paper
2025-06-17 18:25:17,301 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error
2025-06-17 18:25:17,319 - ultibot_backend.services.trading_report_service - INFO - [MainThread] - trading_report_service.py:67 - Obtenidos 0 trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000 en modo paper
2025-06-17 18:25:17,335 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:25:17,335 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:25:17,352 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error
2025-06-17 18:25:17,352 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: Database error
2025-06-17 18:25:17,355 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:25:17,355 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:25:39,659 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:25:39,661 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:25:39,677 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:25:39,831 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 18:25:39,965 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 18:25:39,974 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 18:25:39,974 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 18:25:39,979 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 18:25:40,035 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 18:25:40,095 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 18:25:40,719 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:25:40,719 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 18:25:40,719 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:120 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-17 18:25:40,719 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:25:40,726 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:25:40,728 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 18:25:40,729 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:25:40,729 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:25:40,734 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:25:40,734 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.REAL
2025-06-17 18:25:40,734 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:25:40,734 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:25:40,734 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:25:40,734 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 18:25:40,744 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:25:40,744 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:25:40,747 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:25:40,747 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 18:25:40,747 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:25:40,747 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:25:40,754 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:25:40,756 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 422
2025-06-17 18:25:41,024 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:25:41,024 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 18:25:41,024 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:25:41,029 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:25:44,254 - ultibot_backend.services.configuration_service - INFO - [MainThread] - configuration_service.py:106 - Saved user configuration for user 10e0adf9-0f0a-42a0-af09-83b6e650186d
2025-06-17 18:25:45,095 - ultibot_backend.services.trading_report_service - INFO - [MainThread] - trading_report_service.py:67 - Obtenidos 0 trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000 en modo paper
2025-06-17 18:25:45,097 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error
2025-06-17 18:25:45,115 - ultibot_backend.services.trading_report_service - INFO - [MainThread] - trading_report_service.py:67 - Obtenidos 0 trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000 en modo paper
2025-06-17 18:25:45,130 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:25:45,130 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:25:45,146 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error
2025-06-17 18:25:45,146 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: Database error
2025-06-17 18:25:45,154 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:25:45,154 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:27:29,465 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:27:29,465 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:27:29,482 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:28:34,515 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:28:34,515 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:28:34,539 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:28:34,605 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:28:34,605 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 3O9Ec... (truncada por seguridad)
2025-06-17 18:28:34,623 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:28:34,623 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 3O9Ec... (truncada por seguridad)
2025-06-17 18:28:34,627 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:28:34,627 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 3O9Ec... (truncada por seguridad)
2025-06-17 18:28:34,628 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:28:34,629 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:30:30,501 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:30:30,501 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:30:30,523 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:30:30,576 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:30:30,577 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: yYDSi... (truncada por seguridad)
2025-06-17 18:30:30,580 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:30:30,582 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: yYDSi... (truncada por seguridad)
2025-06-17 18:30:30,585 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:30:30,585 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: yYDSi... (truncada por seguridad)
2025-06-17 18:30:30,586 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:30:30,588 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:31:12,479 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:31:12,480 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:31:12,494 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:31:12,565 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:31:12,565 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: cFOF4... (truncada por seguridad)
2025-06-17 18:31:12,570 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:31:12,570 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: cFOF4... (truncada por seguridad)
2025-06-17 18:31:12,575 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:31:12,575 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: cFOF4... (truncada por seguridad)
2025-06-17 18:31:12,575 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:31:12,577 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:31:33,885 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:31:33,885 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:31:33,906 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:31:33,975 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:31:33,975 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: TLyZU... (truncada por seguridad)
2025-06-17 18:31:33,979 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:31:33,980 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: TLyZU... (truncada por seguridad)
2025-06-17 18:31:33,983 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:31:33,983 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: TLyZU... (truncada por seguridad)
2025-06-17 18:31:33,984 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:31:33,985 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:32:16,650 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:32:16,650 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:32:16,675 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:32:16,736 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:32:16,736 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: NN0pk... (truncada por seguridad)
2025-06-17 18:32:16,741 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:32:16,742 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: NN0pk... (truncada por seguridad)
2025-06-17 18:32:16,745 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:32:16,745 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: NN0pk... (truncada por seguridad)
2025-06-17 18:32:16,746 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:32:16,747 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:32:16,750 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:32:16,750 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: NN0pk... (truncada por seguridad)
2025-06-17 18:32:16,751 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:32:16,756 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:32:16,757 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: NN0pk... (truncada por seguridad)
2025-06-17 18:32:16,758 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:32:16,762 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:32:16,762 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: NN0pk... (truncada por seguridad)
2025-06-17 18:32:16,763 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:32:16,763 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:209 - Verificación de Binance BINANCE_SPOT exitosa.
2025-06-17 18:32:45,055 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:32:45,055 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:32:45,077 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:32:45,134 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:32:45,134 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: ahPky... (truncada por seguridad)
2025-06-17 18:32:45,138 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:32:45,139 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: ahPky... (truncada por seguridad)
2025-06-17 18:32:45,144 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:32:45,144 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: ahPky... (truncada por seguridad)
2025-06-17 18:32:45,145 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:32:45,146 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:32:45,149 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:32:45,150 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: ahPky... (truncada por seguridad)
2025-06-17 18:32:45,151 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:32:45,155 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:32:45,156 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: ahPky... (truncada por seguridad)
2025-06-17 18:32:45,157 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:32:45,161 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:32:45,162 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: ahPky... (truncada por seguridad)
2025-06-17 18:32:45,163 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:32:45,165 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:209 - Verificación de Binance BINANCE_SPOT exitosa.
2025-06-17 18:32:45,169 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:32:45,169 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: ahPky... (truncada por seguridad)
2025-06-17 18:32:45,171 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:32:45,173 - ultibot_backend.services.credential_service - ERROR - [MainThread] - credential_service.py:219 - Error de Binance API durante la verificación: Binance Down
2025-06-17 18:32:45,176 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:32:45,176 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: ahPky... (truncada por seguridad)
2025-06-17 18:32:45,177 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:33:09,055 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:33:09,055 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:33:09,076 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:33:09,155 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:33:09,155 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 78olx... (truncada por seguridad)
2025-06-17 18:33:09,159 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:33:09,160 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 78olx... (truncada por seguridad)
2025-06-17 18:33:09,163 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:33:09,163 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 78olx... (truncada por seguridad)
2025-06-17 18:33:09,163 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:33:09,165 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:33:09,168 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:33:09,168 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 78olx... (truncada por seguridad)
2025-06-17 18:33:09,169 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:33:09,174 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:33:09,175 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 78olx... (truncada por seguridad)
2025-06-17 18:33:09,176 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:33:09,179 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:33:09,179 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 78olx... (truncada por seguridad)
2025-06-17 18:33:09,179 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:33:09,179 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:209 - Verificación de Binance BINANCE_SPOT exitosa.
2025-06-17 18:33:09,185 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:33:09,186 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 78olx... (truncada por seguridad)
2025-06-17 18:33:09,187 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:33:09,188 - ultibot_backend.services.credential_service - ERROR - [MainThread] - credential_service.py:219 - Error de Binance API durante la verificación: Binance Down
2025-06-17 18:33:09,192 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:33:09,192 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 78olx... (truncada por seguridad)
2025-06-17 18:33:09,193 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:35:53,091 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:35:53,095 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:35:53,113 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:35:53,179 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:35:53,179 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: IWnCw... (truncada por seguridad)
2025-06-17 18:35:53,187 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:35:53,187 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: IWnCw... (truncada por seguridad)
2025-06-17 18:35:53,190 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:35:53,190 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: IWnCw... (truncada por seguridad)
2025-06-17 18:35:53,191 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:35:53,192 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:35:53,196 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:35:53,197 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: IWnCw... (truncada por seguridad)
2025-06-17 18:35:53,198 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:35:53,199 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:35:53,199 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: IWnCw... (truncada por seguridad)
2025-06-17 18:35:53,199 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:35:53,205 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:35:53,205 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: IWnCw... (truncada por seguridad)
2025-06-17 18:35:53,207 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:35:53,208 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:209 - Verificación de Binance BINANCE_SPOT exitosa.
2025-06-17 18:35:53,211 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:35:53,211 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: IWnCw... (truncada por seguridad)
2025-06-17 18:35:53,213 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:35:53,214 - ultibot_backend.services.credential_service - ERROR - [MainThread] - credential_service.py:219 - Error de Binance API durante la verificación: Binance Down
2025-06-17 18:35:53,217 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:35:53,218 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: IWnCw... (truncada por seguridad)
2025-06-17 18:35:53,218 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:36:55,672 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:36:55,673 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:36:55,690 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:36:55,743 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:36:55,743 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 8ZEoO... (truncada por seguridad)
2025-06-17 18:36:55,747 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:36:55,748 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 8ZEoO... (truncada por seguridad)
2025-06-17 18:36:55,751 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:36:55,751 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 8ZEoO... (truncada por seguridad)
2025-06-17 18:36:55,752 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:36:55,753 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:36:55,756 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:36:55,756 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 8ZEoO... (truncada por seguridad)
2025-06-17 18:36:55,757 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:36:55,761 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:36:55,761 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 8ZEoO... (truncada por seguridad)
2025-06-17 18:36:55,763 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:36:55,766 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:36:55,766 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 8ZEoO... (truncada por seguridad)
2025-06-17 18:36:55,768 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:36:55,769 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:209 - Verificación de Binance BINANCE_SPOT exitosa.
2025-06-17 18:36:55,772 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:36:55,772 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 8ZEoO... (truncada por seguridad)
2025-06-17 18:36:55,773 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:36:55,775 - ultibot_backend.services.credential_service - ERROR - [MainThread] - credential_service.py:219 - Error de Binance API durante la verificación: Binance Down
2025-06-17 18:37:21,029 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:37:21,029 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:37:21,049 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:37:21,106 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:37:21,107 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: T--Xl... (truncada por seguridad)
2025-06-17 18:37:21,113 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:37:21,113 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: T--Xl... (truncada por seguridad)
2025-06-17 18:37:21,117 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:37:21,117 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: T--Xl... (truncada por seguridad)
2025-06-17 18:37:21,119 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:37:21,120 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:37:21,124 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:37:21,124 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: T--Xl... (truncada por seguridad)
2025-06-17 18:37:21,125 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:37:21,129 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:37:21,130 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: T--Xl... (truncada por seguridad)
2025-06-17 18:37:21,131 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:37:21,135 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:37:21,135 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: T--Xl... (truncada por seguridad)
2025-06-17 18:37:21,137 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:37:21,138 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:209 - Verificación de Binance BINANCE_SPOT exitosa.
2025-06-17 18:37:48,485 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:37:48,485 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:37:48,499 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:37:48,557 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:37:48,557 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 0OzSy... (truncada por seguridad)
2025-06-17 18:37:48,563 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:37:48,563 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 0OzSy... (truncada por seguridad)
2025-06-17 18:37:48,566 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:37:48,567 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 0OzSy... (truncada por seguridad)
2025-06-17 18:37:48,568 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:37:48,569 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:37:48,572 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:37:48,573 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 0OzSy... (truncada por seguridad)
2025-06-17 18:37:48,574 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:37:48,577 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:37:48,577 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 0OzSy... (truncada por seguridad)
2025-06-17 18:37:48,577 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:37:48,577 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:37:48,577 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 0OzSy... (truncada por seguridad)
2025-06-17 18:37:48,584 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:37:48,585 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:212 - Verificación de Binance BINANCE_SPOT exitosa.
2025-06-17 18:37:48,588 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:37:48,589 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 0OzSy... (truncada por seguridad)
2025-06-17 18:37:48,589 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:37:48,591 - ultibot_backend.services.credential_service - ERROR - [MainThread] - credential_service.py:224 - Error de Binance API durante la verificación: Binance Down
2025-06-17 18:37:48,594 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:37:48,594 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 0OzSy... (truncada por seguridad)
2025-06-17 18:37:48,596 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:37:48,600 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:37:48,600 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: 0OzSy... (truncada por seguridad)
2025-06-17 18:37:48,601 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:37:48,603 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:190 - Verificación de Telegram exitosa.
2025-06-17 18:38:18,985 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:38:18,985 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:38:18,995 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:38:19,162 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 18:38:19,301 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 18:38:19,310 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 18:38:19,312 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 18:38:19,312 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 18:38:19,365 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 18:38:19,427 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 18:38:20,015 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:38:20,015 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 18:38:20,020 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:120 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-17 18:38:20,020 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:38:20,025 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:38:20,027 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 18:38:20,028 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:38:20,028 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:38:20,029 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:38:20,029 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.REAL
2025-06-17 18:38:20,035 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:38:20,035 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:38:20,040 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:38:20,040 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 18:38:20,040 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:38:20,040 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:38:20,045 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:38:20,045 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 18:38:20,045 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:38:20,045 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:38:20,045 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:38:20,045 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 422
2025-06-17 18:38:20,320 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 18:38:20,320 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 18:38:20,320 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 18:38:20,320 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 18:38:23,396 - ultibot_backend.services.configuration_service - INFO - [MainThread] - configuration_service.py:106 - Saved user configuration for user 9325612a-09a2-47ba-a139-209f786ec33d
2025-06-17 18:38:23,405 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:38:23,405 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: Gy8iv... (truncada por seguridad)
2025-06-17 18:38:23,412 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:38:23,412 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: Gy8iv... (truncada por seguridad)
2025-06-17 18:38:23,415 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:38:23,415 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: Gy8iv... (truncada por seguridad)
2025-06-17 18:38:23,420 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:38:23,420 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: Gy8iv... (truncada por seguridad)
2025-06-17 18:38:23,420 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:38:23,420 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: Gy8iv... (truncada por seguridad)
2025-06-17 18:38:23,428 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:38:23,429 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: Gy8iv... (truncada por seguridad)
2025-06-17 18:38:23,430 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:212 - Verificación de Binance BINANCE_SPOT exitosa.
2025-06-17 18:38:23,430 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:38:23,435 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: Gy8iv... (truncada por seguridad)
2025-06-17 18:38:23,435 - ultibot_backend.services.credential_service - ERROR - [MainThread] - credential_service.py:224 - Error de Binance API durante la verificación: Binance Down
2025-06-17 18:38:23,435 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:38:23,435 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: Gy8iv... (truncada por seguridad)
2025-06-17 18:38:23,444 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 18:38:23,444 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: Gy8iv... (truncada por seguridad)
2025-06-17 18:38:23,448 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:190 - Verificación de Telegram exitosa.
2025-06-17 18:38:23,685 - ultibot_backend.services.trading_report_service - INFO - [MainThread] - trading_report_service.py:67 - Obtenidos 0 trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000 en modo paper
2025-06-17 18:38:23,685 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error
2025-06-17 18:38:23,705 - ultibot_backend.services.trading_report_service - INFO - [MainThread] - trading_report_service.py:67 - Obtenidos 0 trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000 en modo paper
2025-06-17 18:38:23,795 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:38:23,795 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:38:23,815 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error
2025-06-17 18:38:23,815 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: Database error
2025-06-17 18:38:23,815 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:38:23,815 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 18:40:05,235 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:40:05,235 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:40:05,259 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:40:05,307 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:40:05,309 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:40:30,331 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:40:30,331 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:40:30,351 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:40:30,395 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:40:30,396 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:51:35,679 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 18:51:35,679 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 18:51:35,699 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 18:51:35,759 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 18:51:35,761 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:16:54,126 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:16:54,126 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:16:54,146 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:16:54,210 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:16:54,210 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:16:54,216 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:120 - Executing trade directly from confirmed opportunity 73518039-df73-494e-b1a4-b51d8a284cb3
2025-06-17 19:16:54,216 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:127 - Using strategy 'test_strategy' as context for confirmed opportunity 73518039-df73-494e-b1a4-b51d8a284cb3
2025-06-17 19:18:14,446 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:18:14,446 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:18:14,463 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:18:14,546 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:18:14,546 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:18:14,558 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:120 - Executing trade directly from confirmed opportunity 18fb7e1e-207d-4dfd-929e-1cbd1d52a92f
2025-06-17 19:18:14,558 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:127 - Using strategy 'test_strategy' as context for confirmed opportunity 18fb7e1e-207d-4dfd-929e-1cbd1d52a92f
2025-06-17 19:18:14,561 - ultibot_backend.services.trading_engine_service - ERROR - [MainThread] - trading_engine_service.py:234 - Error creating trade object from decision de09be70-db60-42c5-bab5-0cc359943642: 4 validation errors for TradeOrderDetails
orderCategory
  Field required [type=missing, input_value={'order_id_internal': 'e6...roup_id_exchange': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
requestedQuantity
  Field required [type=missing, input_value={'order_id_internal': 'e6...roup_id_exchange': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
executedQuantity
  Field required [type=missing, input_value={'order_id_internal': 'e6...roup_id_exchange': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
executedPrice
  Field required [type=missing, input_value={'order_id_internal': 'e6...roup_id_exchange': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_engine_service.py", line 192, in create_trade_from_decision
    entry_order=self._create_entry_order_from_decision(decision, opportunity),
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_engine_service.py", line 242, in _create_entry_order_from_decision
    return TradeOrderDetails(
           ^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 4 validation errors for TradeOrderDetails
orderCategory
  Field required [type=missing, input_value={'order_id_internal': 'e6...roup_id_exchange': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
requestedQuantity
  Field required [type=missing, input_value={'order_id_internal': 'e6...roup_id_exchange': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
executedQuantity
  Field required [type=missing, input_value={'order_id_internal': 'e6...roup_id_exchange': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
executedPrice
  Field required [type=missing, input_value={'order_id_internal': 'e6...roup_id_exchange': None}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 19:22:37,713 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:22:37,713 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:22:37,729 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:22:37,789 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:22:37,790 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:22:37,799 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:121 - Executing trade directly from confirmed opportunity c9f759ee-c720-40e7-9136-31de99cb3346
2025-06-17 19:22:37,799 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:128 - Using strategy 'test_strategy' as context for confirmed opportunity c9f759ee-c720-40e7-9136-31de99cb3346
2025-06-17 19:22:37,800 - ultibot_backend.services.trading_engine_service - ERROR - [MainThread] - trading_engine_service.py:220 - Error creating trade object from decision 8b7a032c-763a-4e60-a372-160cd503d073: 'UUID' object has no attribute 'replace'
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_engine_service.py", line 187, in create_trade_from_decision
    user_id=UUID(strategy.user_id),
            ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\uuid.py", line 175, in __init__
    hex = hex.replace('urn:', '').replace('uuid:', '')
          ^^^^^^^^^^^
AttributeError: 'UUID' object has no attribute 'replace'
2025-06-17 19:23:20,104 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:23:20,104 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:23:20,125 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:23:20,165 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:23:20,166 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:23:20,166 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:121 - Executing trade directly from confirmed opportunity 422543b6-6c77-49d4-b1c4-9b98fdbe9f9e
2025-06-17 19:23:20,166 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:128 - Using strategy 'test_strategy' as context for confirmed opportunity 422543b6-6c77-49d4-b1c4-9b98fdbe9f9e
2025-06-17 19:23:20,175 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:211 - Created trade 61623611-3093-430f-a01c-b8433db03446 from decision a9af5433-2b2b-4ae5-ac90-7e1137fd4316
2025-06-17 19:23:20,176 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:216 - Trade 61623611-3093-430f-a01c-b8433db03446 persisted before execution.
2025-06-17 19:23:20,176 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:143 - Successfully created trade 61623611-3093-430f-a01c-b8433db03446 from confirmed opportunity.
2025-06-17 19:23:20,176 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:266 - Updated opportunity 422543b6-6c77-49d4-b1c4-9b98fdbe9f9e status to converted_to_trade_real: Trade 61623611-3093-430f-a01c-b8433db03446 executed based on user confirmation.
2025-06-17 19:23:20,177 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:274 - Persisted status update for opportunity 422543b6-6c77-49d4-b1c4-9b98fdbe9f9e
2025-06-17 19:25:36,880 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:25:36,880 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:25:36,900 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:25:36,985 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:25:36,985 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:29:29,410 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:29:29,410 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:29:29,429 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:29:29,514 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:29:29,514 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:29:29,523 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:121 - Executing trade directly from confirmed opportunity 420cdc15-f229-4915-b2db-63527c66b9cc
2025-06-17 19:29:29,524 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:128 - Using strategy 'test_strategy' as context for confirmed opportunity 420cdc15-f229-4915-b2db-63527c66b9cc
2025-06-17 19:29:29,524 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:211 - Created trade 5ea82514-9db1-4204-9cd0-d28bc43427ce from decision af6f564e-d866-44ed-9524-1169d0465dc1
2025-06-17 19:29:29,525 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:216 - Trade 5ea82514-9db1-4204-9cd0-d28bc43427ce persisted before execution.
2025-06-17 19:29:29,525 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:143 - Successfully created trade 5ea82514-9db1-4204-9cd0-d28bc43427ce from confirmed opportunity.
2025-06-17 19:29:29,525 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:266 - Updated opportunity 420cdc15-f229-4915-b2db-63527c66b9cc status to converted_to_trade_real: Trade 5ea82514-9db1-4204-9cd0-d28bc43427ce executed based on user confirmation.
2025-06-17 19:29:29,526 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:274 - Persisted status update for opportunity 420cdc15-f229-4915-b2db-63527c66b9cc
2025-06-17 19:30:44,317 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:30:44,317 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:30:44,342 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:30:44,380 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:30:44,380 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:30:44,388 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:121 - Executing trade directly from confirmed opportunity 0222953a-af3b-457f-9bb2-226abf2cb7d9
2025-06-17 19:30:44,388 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:132 - Using strategy 'test_strategy' as context for confirmed opportunity 0222953a-af3b-457f-9bb2-226abf2cb7d9
2025-06-17 19:30:44,395 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:215 - Created trade b59031fb-d76e-4155-bed4-0f46f4861dac from decision cd05a28d-88c6-4445-b1cf-f3b61063d282
2025-06-17 19:30:44,396 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:220 - Trade b59031fb-d76e-4155-bed4-0f46f4861dac persisted before execution.
2025-06-17 19:30:44,397 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:147 - Successfully created trade b59031fb-d76e-4155-bed4-0f46f4861dac from confirmed opportunity.
2025-06-17 19:30:44,397 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:270 - Updated opportunity 0222953a-af3b-457f-9bb2-226abf2cb7d9 status to converted_to_trade_real: Trade b59031fb-d76e-4155-bed4-0f46f4861dac executed based on user confirmation.
2025-06-17 19:30:44,398 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:277 - Persisted status update for opportunity 0222953a-af3b-457f-9bb2-226abf2cb7d9
2025-06-17 19:33:45,587 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:33:45,587 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:33:45,609 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:33:45,687 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:33:45,687 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:33:45,696 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:121 - Executing trade directly from confirmed opportunity f2face04-dc63-406c-92c8-7bbe0ed3fa2c
2025-06-17 19:33:45,696 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:136 - Using strategy 'test_strategy' as context for confirmed opportunity f2face04-dc63-406c-92c8-7bbe0ed3fa2c
2025-06-17 19:33:45,699 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:219 - Created trade 94f5ec33-3406-4d92-b96b-9298d46d6c15 from decision cd48fadd-d379-4360-87e2-2192ebd2871f
2025-06-17 19:33:45,700 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:224 - Trade 94f5ec33-3406-4d92-b96b-9298d46d6c15 persisted before execution.
2025-06-17 19:33:45,700 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:151 - Successfully created trade 94f5ec33-3406-4d92-b96b-9298d46d6c15 from confirmed opportunity.
2025-06-17 19:33:45,700 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:274 - Updated opportunity f2face04-dc63-406c-92c8-7bbe0ed3fa2c status to converted_to_trade_real: Trade 94f5ec33-3406-4d92-b96b-9298d46d6c15 executed based on user confirmation.
2025-06-17 19:33:45,701 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:281 - Persisted status update for opportunity f2face04-dc63-406c-92c8-7bbe0ed3fa2c
2025-06-17 19:34:08,250 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:34:08,250 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:34:08,271 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:34:08,315 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:34:08,315 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:34:08,322 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:121 - Executing trade directly from confirmed opportunity d7fedecd-1866-4349-8c4e-207d0185e289
2025-06-17 19:34:08,325 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:140 - Using strategy 'test_strategy' as context for confirmed opportunity d7fedecd-1866-4349-8c4e-207d0185e289
2025-06-17 19:34:08,326 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:223 - Created trade a5b68dd2-f86c-42e3-991e-36d391615203 from decision afbf131b-3e55-46ab-af89-962d783f14eb
2025-06-17 19:34:08,327 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:228 - Trade a5b68dd2-f86c-42e3-991e-36d391615203 persisted before execution.
2025-06-17 19:34:08,327 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:155 - Successfully created trade a5b68dd2-f86c-42e3-991e-36d391615203 from confirmed opportunity.
2025-06-17 19:34:08,327 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:278 - Updated opportunity d7fedecd-1866-4349-8c4e-207d0185e289 status to converted_to_trade_real: Trade a5b68dd2-f86c-42e3-991e-36d391615203 executed based on user confirmation.
2025-06-17 19:34:08,328 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:285 - Persisted status update for opportunity d7fedecd-1866-4349-8c4e-207d0185e289
2025-06-17 19:36:17,136 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:36:17,136 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:36:17,155 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:36:17,199 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:36:17,199 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:36:17,207 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:126 - Executing trade directly from confirmed opportunity 097e752f-2f01-409d-b275-1ee37b60bb84
2025-06-17 19:36:17,207 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:145 - Using strategy 'test_strategy' as context for confirmed opportunity 097e752f-2f01-409d-b275-1ee37b60bb84
2025-06-17 19:36:17,208 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:268 - Created trade 3ac37bb4-6a38-4449-9506-ab30421d2d73 from decision 94c5f644-ae3c-4eb9-aa20-6c25e1032620
2025-06-17 19:36:17,209 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:273 - Trade 3ac37bb4-6a38-4449-9506-ab30421d2d73 persisted before execution.
2025-06-17 19:36:17,209 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:194 - Successfully executed trade 3ac37bb4-6a38-4449-9506-ab30421d2d73 from confirmed opportunity.
2025-06-17 19:36:17,209 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:323 - Updated opportunity 097e752f-2f01-409d-b275-1ee37b60bb84 status to converted_to_trade_real: Trade 3ac37bb4-6a38-4449-9506-ab30421d2d73 executed based on user confirmation.
2025-06-17 19:36:17,211 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:330 - Persisted status update for opportunity 097e752f-2f01-409d-b275-1ee37b60bb84
2025-06-17 19:36:40,181 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:36:40,183 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:36:40,200 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:38:21,981 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:38:21,987 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:38:22,006 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:38:22,097 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:38:22,098 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-17 19:38:22,107 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:126 - Executing trade directly from confirmed opportunity 1b2a30ed-86b1-4970-bf24-2ac80499343a
2025-06-17 19:38:22,107 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:145 - Using strategy 'test_strategy' as context for confirmed opportunity 1b2a30ed-86b1-4970-bf24-2ac80499343a
2025-06-17 19:38:22,108 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:268 - Created trade 149d8a6b-0ec7-4cb5-86bc-438bce4f7991 from decision 0eaa0aba-7759-4ec7-8214-419b4dfd4c9e
2025-06-17 19:38:22,109 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:273 - Trade 149d8a6b-0ec7-4cb5-86bc-438bce4f7991 persisted before execution.
2025-06-17 19:38:22,109 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:194 - Successfully executed trade 149d8a6b-0ec7-4cb5-86bc-438bce4f7991 from confirmed opportunity.
2025-06-17 19:38:22,109 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:323 - Updated opportunity 1b2a30ed-86b1-4970-bf24-2ac80499343a status to converted_to_trade_real: Trade 149d8a6b-0ec7-4cb5-86bc-438bce4f7991 executed based on user confirmation.
2025-06-17 19:38:22,110 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:330 - Persisted status update for opportunity 1b2a30ed-86b1-4970-bf24-2ac80499343a
2025-06-17 19:42:10,301 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:42:10,301 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:42:10,323 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:42:10,484 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 19:42:10,637 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 19:42:10,642 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 19:42:10,647 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 19:42:10,647 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 19:42:10,701 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 19:42:10,757 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 19:42:11,392 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:42:11,392 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 19:42:11,392 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:120 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-17 19:42:11,392 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:42:11,401 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:42:11,401 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 19:42:11,401 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 19:42:11,401 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:42:11,407 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:42:11,407 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.REAL
2025-06-17 19:42:11,407 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 19:42:11,407 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:42:11,416 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:42:11,417 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 19:42:11,418 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 19:42:11,418 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:42:11,422 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:42:11,422 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 19:42:11,422 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 19:42:11,422 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:42:11,428 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:42:11,428 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 422
2025-06-17 19:42:11,687 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:42:11,687 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 19:42:11,687 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 19:42:11,687 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:42:11,727 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:126 - Executing trade directly from confirmed opportunity 3e0906c5-3a2f-4548-8525-d24c72e1c419
2025-06-17 19:42:11,727 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:145 - Using strategy 'test_strategy' as context for confirmed opportunity 3e0906c5-3a2f-4548-8525-d24c72e1c419
2025-06-17 19:42:11,727 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:268 - Created trade c0c4ad2b-1a5a-4653-8d17-d3ba1b084f37 from decision 8bf861e1-6238-4ea2-a361-a46d7b9f1fb7
2025-06-17 19:42:11,733 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:273 - Trade c0c4ad2b-1a5a-4653-8d17-d3ba1b084f37 persisted before execution.
2025-06-17 19:42:11,733 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:194 - Successfully executed trade c0c4ad2b-1a5a-4653-8d17-d3ba1b084f37 from confirmed opportunity.
2025-06-17 19:42:11,733 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:323 - Updated opportunity 3e0906c5-3a2f-4548-8525-d24c72e1c419 status to converted_to_trade_real: Trade c0c4ad2b-1a5a-4653-8d17-d3ba1b084f37 executed based on user confirmation.
2025-06-17 19:42:11,734 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:330 - Persisted status update for opportunity 3e0906c5-3a2f-4548-8525-d24c72e1c419
2025-06-17 19:42:11,769 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:126 - Executing trade directly from confirmed opportunity 1822620b-b3f3-44dc-9391-27a53bf87e77
2025-06-17 19:42:11,769 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:145 - Using strategy 'test_strategy' as context for confirmed opportunity 1822620b-b3f3-44dc-9391-27a53bf87e77
2025-06-17 19:42:11,769 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:268 - Created trade 784ab278-b016-4154-8d01-e84592e4b2ec from decision 67489736-ac4e-4ab8-a3f1-11c0813ddb19
2025-06-17 19:42:11,769 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:273 - Trade 784ab278-b016-4154-8d01-e84592e4b2ec persisted before execution.
2025-06-17 19:42:11,769 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:194 - Successfully executed trade 784ab278-b016-4154-8d01-e84592e4b2ec from confirmed opportunity.
2025-06-17 19:42:11,769 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:323 - Updated opportunity 1822620b-b3f3-44dc-9391-27a53bf87e77 status to converted_to_trade_real: Trade 784ab278-b016-4154-8d01-e84592e4b2ec executed based on user confirmation.
2025-06-17 19:42:11,777 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:330 - Persisted status update for opportunity 1822620b-b3f3-44dc-9391-27a53bf87e77
2025-06-17 19:42:13,427 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:268 - Created trade adc5d75b-f3dd-4ccf-862f-865e4eba7912 from decision 20379afa-8635-4ea4-9cd1-a9fc41b36265
2025-06-17 19:42:13,432 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:273 - Trade adc5d75b-f3dd-4ccf-862f-865e4eba7912 persisted before execution.
2025-06-17 19:42:13,432 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:268 - Created trade 77cbdb5d-f3a4-427f-8d2f-1b45ed50bb7d from decision 20379afa-8635-4ea4-9cd1-a9fc41b36265
2025-06-17 19:42:13,433 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:273 - Trade 77cbdb5d-f3a4-427f-8d2f-1b45ed50bb7d persisted before execution.
2025-06-17 19:42:14,972 - ultibot_backend.services.configuration_service - INFO - [MainThread] - configuration_service.py:106 - Saved user configuration for user 76909ac5-cc93-435c-b3a3-d392f460aeee
2025-06-17 19:42:14,977 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:42:14,977 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: tS3RS... (truncada por seguridad)
2025-06-17 19:42:14,983 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:42:14,983 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: tS3RS... (truncada por seguridad)
2025-06-17 19:42:14,987 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:42:14,987 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: tS3RS... (truncada por seguridad)
2025-06-17 19:42:14,990 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:42:14,990 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: tS3RS... (truncada por seguridad)
2025-06-17 19:42:14,997 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:42:14,997 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: tS3RS... (truncada por seguridad)
2025-06-17 19:42:15,001 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:42:15,001 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: tS3RS... (truncada por seguridad)
2025-06-17 19:42:15,001 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:212 - Verificación de Binance BINANCE_SPOT exitosa.
2025-06-17 19:42:15,007 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:42:15,007 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: tS3RS... (truncada por seguridad)
2025-06-17 19:42:15,007 - ultibot_backend.services.credential_service - ERROR - [MainThread] - credential_service.py:224 - Error de Binance API durante la verificación: Binance Down
2025-06-17 19:42:15,012 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:42:15,012 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: tS3RS... (truncada por seguridad)
2025-06-17 19:42:15,018 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:42:15,018 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: tS3RS... (truncada por seguridad)
2025-06-17 19:42:15,018 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:190 - Verificación de Telegram exitosa.
2025-06-17 19:42:15,337 - ultibot_backend.services.trading_report_service - INFO - [MainThread] - trading_report_service.py:67 - Obtenidos 0 trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000 en modo paper
2025-06-17 19:42:15,337 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error
2025-06-17 19:42:15,357 - ultibot_backend.services.trading_report_service - INFO - [MainThread] - trading_report_service.py:67 - Obtenidos 0 trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000 en modo paper
2025-06-17 19:42:15,372 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 19:42:15,373 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 19:42:15,390 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error
2025-06-17 19:42:15,390 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: Database error
2025-06-17 19:42:15,390 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 19:42:15,390 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 19:47:23,712 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:47:23,714 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:47:23,731 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:47:23,877 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 19:48:28,237 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:48:28,237 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:48:28,260 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:48:28,417 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 19:50:09,252 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:50:09,252 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:50:09,267 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:50:09,411 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 19:50:09,627 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 19:50:09,637 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 19:50:09,637 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 19:50:09,637 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 19:50:10,301 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 19:50:10,301 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 19:50:25,208 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:50:25,208 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:50:25,227 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:50:25,387 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 19:50:25,555 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 19:50:25,560 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 19:50:25,561 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 19:50:25,561 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 19:50:25,619 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 19:50:25,619 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 19:50:26,332 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:50:26,334 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 19:50:26,335 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:120 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-17 19:50:26,335 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:50:26,341 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:50:26,343 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 19:50:26,343 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 19:50:26,343 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:50:26,351 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:50:26,353 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.REAL
2025-06-17 19:50:26,353 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 19:50:26,353 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:50:26,360 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:50:26,361 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 19:50:26,361 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 19:50:26,361 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:50:26,368 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:50:26,369 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 19:50:26,369 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 19:50:26,369 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:50:26,369 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:50:26,369 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 422
2025-06-17 19:50:26,628 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:50:26,637 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 19:50:26,637 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 19:50:26,637 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:50:26,672 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:126 - Executing trade directly from confirmed opportunity 35d1a642-7b1e-4504-a83b-77eb5c52dd9a
2025-06-17 19:50:26,672 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:145 - Using strategy 'test_strategy' as context for confirmed opportunity 35d1a642-7b1e-4504-a83b-77eb5c52dd9a
2025-06-17 19:50:26,672 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:268 - Created trade e1e907a9-f4e8-480d-862d-c9980306a615 from decision b01c6709-b73a-4d8b-9cdc-487bbb90dac0
2025-06-17 19:50:26,672 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:273 - Trade e1e907a9-f4e8-480d-862d-c9980306a615 persisted before execution.
2025-06-17 19:50:26,672 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:194 - Successfully executed trade e1e907a9-f4e8-480d-862d-c9980306a615 from confirmed opportunity.
2025-06-17 19:50:26,672 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:323 - Updated opportunity 35d1a642-7b1e-4504-a83b-77eb5c52dd9a status to converted_to_trade_real: Trade e1e907a9-f4e8-480d-862d-c9980306a615 executed based on user confirmation.
2025-06-17 19:50:26,677 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:330 - Persisted status update for opportunity 35d1a642-7b1e-4504-a83b-77eb5c52dd9a
2025-06-17 19:50:26,698 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:126 - Executing trade directly from confirmed opportunity f828ccd9-d945-41a4-9737-d7610cb5296a
2025-06-17 19:50:26,698 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:145 - Using strategy 'test_strategy' as context for confirmed opportunity f828ccd9-d945-41a4-9737-d7610cb5296a
2025-06-17 19:50:26,698 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:268 - Created trade f2092295-da3c-4d9c-9899-b1fee445da28 from decision f0093aef-599a-4903-9939-c4e009aa0f11
2025-06-17 19:50:26,700 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:273 - Trade f2092295-da3c-4d9c-9899-b1fee445da28 persisted before execution.
2025-06-17 19:50:26,702 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:194 - Successfully executed trade f2092295-da3c-4d9c-9899-b1fee445da28 from confirmed opportunity.
2025-06-17 19:50:26,702 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:323 - Updated opportunity f828ccd9-d945-41a4-9737-d7610cb5296a status to converted_to_trade_real: Trade f2092295-da3c-4d9c-9899-b1fee445da28 executed based on user confirmation.
2025-06-17 19:50:26,702 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:330 - Persisted status update for opportunity f828ccd9-d945-41a4-9737-d7610cb5296a
2025-06-17 19:50:28,416 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:268 - Created trade 78e43019-ffdf-4c76-93ac-6d34274b26ba from decision e612158a-d231-4af7-92ab-8df4e7abf3f4
2025-06-17 19:50:28,416 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:273 - Trade 78e43019-ffdf-4c76-93ac-6d34274b26ba persisted before execution.
2025-06-17 19:50:28,416 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:268 - Created trade 4c7ad875-b4d6-40cc-a57d-3df94b8b7554 from decision e612158a-d231-4af7-92ab-8df4e7abf3f4
2025-06-17 19:50:28,417 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:273 - Trade 4c7ad875-b4d6-40cc-a57d-3df94b8b7554 persisted before execution.
2025-06-17 19:50:29,979 - ultibot_backend.services.configuration_service - INFO - [MainThread] - configuration_service.py:106 - Saved user configuration for user c404dd1a-eeae-4189-8355-d16d54ff2d11
2025-06-17 19:50:29,987 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:50:29,988 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: jUKQp... (truncada por seguridad)
2025-06-17 19:50:29,992 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:50:29,993 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: jUKQp... (truncada por seguridad)
2025-06-17 19:50:29,996 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:50:29,997 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: jUKQp... (truncada por seguridad)
2025-06-17 19:50:29,997 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:50:29,997 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: jUKQp... (truncada por seguridad)
2025-06-17 19:50:29,997 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:50:29,997 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: jUKQp... (truncada por seguridad)
2025-06-17 19:50:30,011 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:50:30,011 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: jUKQp... (truncada por seguridad)
2025-06-17 19:50:30,015 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:212 - Verificación de Binance BINANCE_SPOT exitosa.
2025-06-17 19:50:30,017 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:50:30,017 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: jUKQp... (truncada por seguridad)
2025-06-17 19:50:30,017 - ultibot_backend.services.credential_service - ERROR - [MainThread] - credential_service.py:224 - Error de Binance API durante la verificación: Binance Down
2025-06-17 19:50:30,017 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:50:30,017 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: jUKQp... (truncada por seguridad)
2025-06-17 19:50:30,030 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:50:30,030 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: jUKQp... (truncada por seguridad)
2025-06-17 19:50:30,034 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:190 - Verificación de Telegram exitosa.
2025-06-17 19:50:30,367 - ultibot_backend.services.trading_report_service - INFO - [MainThread] - trading_report_service.py:67 - Obtenidos 0 trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000 en modo paper
2025-06-17 19:50:30,369 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error
2025-06-17 19:50:30,385 - ultibot_backend.services.trading_report_service - INFO - [MainThread] - trading_report_service.py:67 - Obtenidos 0 trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000 en modo paper
2025-06-17 19:50:30,403 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 19:50:30,404 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 19:50:30,417 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error
2025-06-17 19:50:30,417 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: Database error
2025-06-17 19:50:30,417 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 19:50:30,417 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 19:50:55,980 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-17 19:50:55,980 - ultibot_backend - INFO - [MainThread] - main.py:136 - Registrando routers de la API...
2025-06-17 19:50:55,997 - ultibot_backend - INFO - [MainThread] - main.py:148 - Todos los routers han sido registrados.
2025-06-17 19:50:56,152 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-17 19:50:56,297 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-17 19:50:56,307 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-17 19:50:56,307 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-17 19:50:56,307 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-17 19:50:56,362 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-17 19:50:56,363 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-17 19:50:56,998 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:50:56,998 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 19:50:56,998 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:120 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-17 19:50:56,998 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:50:57,007 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:50:57,011 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 19:50:57,011 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 19:50:57,011 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:50:57,013 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:50:57,017 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.REAL
2025-06-17 19:50:57,017 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 19:50:57,017 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:50:57,017 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:50:57,017 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 19:50:57,017 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 19:50:57,017 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:50:57,029 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:50:57,029 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-17 19:50:57,029 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 19:50:57,029 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:50:57,029 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:50:57,037 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 422
2025-06-17 19:50:57,298 - ultibot_backend - INFO - [MainThread] - main.py:105 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-17 19:50:57,298 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:109 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-17 19:50:57,298 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:160 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-17 19:50:57,298 - ultibot_backend - INFO - [MainThread] - main.py:107 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-17 19:50:57,329 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:126 - Executing trade directly from confirmed opportunity 00974f28-062f-4f99-90ec-ea0a2173ed23
2025-06-17 19:50:57,329 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:145 - Using strategy 'test_strategy' as context for confirmed opportunity 00974f28-062f-4f99-90ec-ea0a2173ed23
2025-06-17 19:50:57,329 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:268 - Created trade 3bbf8ffa-dd34-4946-9e3c-2046c1bc13a3 from decision 55deef37-3b00-447d-b61a-c6d2f7a474fb
2025-06-17 19:50:57,329 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:273 - Trade 3bbf8ffa-dd34-4946-9e3c-2046c1bc13a3 persisted before execution.
2025-06-17 19:50:57,329 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:194 - Successfully executed trade 3bbf8ffa-dd34-4946-9e3c-2046c1bc13a3 from confirmed opportunity.
2025-06-17 19:50:57,329 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:323 - Updated opportunity 00974f28-062f-4f99-90ec-ea0a2173ed23 status to converted_to_trade_real: Trade 3bbf8ffa-dd34-4946-9e3c-2046c1bc13a3 executed based on user confirmation.
2025-06-17 19:50:57,329 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:330 - Persisted status update for opportunity 00974f28-062f-4f99-90ec-ea0a2173ed23
2025-06-17 19:50:57,347 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:126 - Executing trade directly from confirmed opportunity b6a1f05b-3184-4623-9e36-2a9fc012b9ed
2025-06-17 19:50:57,347 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:145 - Using strategy 'test_strategy' as context for confirmed opportunity b6a1f05b-3184-4623-9e36-2a9fc012b9ed
2025-06-17 19:50:57,347 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:268 - Created trade c8d88732-dea8-4420-a84d-fb928523596d from decision 7d58fc94-4e25-4691-849d-8f06d450098a
2025-06-17 19:50:57,347 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:273 - Trade c8d88732-dea8-4420-a84d-fb928523596d persisted before execution.
2025-06-17 19:50:57,357 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:194 - Successfully executed trade c8d88732-dea8-4420-a84d-fb928523596d from confirmed opportunity.
2025-06-17 19:50:57,357 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:323 - Updated opportunity b6a1f05b-3184-4623-9e36-2a9fc012b9ed status to converted_to_trade_real: Trade c8d88732-dea8-4420-a84d-fb928523596d executed based on user confirmation.
2025-06-17 19:50:57,357 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:330 - Persisted status update for opportunity b6a1f05b-3184-4623-9e36-2a9fc012b9ed
2025-06-17 19:50:59,062 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:268 - Created trade c7a5048e-0ed7-450c-8ab8-b28a97312d88 from decision 7f749cdf-5f25-4cfc-958b-6bee0704d3b1
2025-06-17 19:50:59,062 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:273 - Trade c7a5048e-0ed7-450c-8ab8-b28a97312d88 persisted before execution.
2025-06-17 19:50:59,062 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:268 - Created trade 264dfd6f-3e58-402e-a089-fdcd7598cd5b from decision 7f749cdf-5f25-4cfc-958b-6bee0704d3b1
2025-06-17 19:50:59,062 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:273 - Trade 264dfd6f-3e58-402e-a089-fdcd7598cd5b persisted before execution.
2025-06-17 19:51:00,637 - ultibot_backend.services.configuration_service - INFO - [MainThread] - configuration_service.py:106 - Saved user configuration for user 5d276382-72d3-4c11-8c24-bbf82bc50716
2025-06-17 19:51:00,645 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:51:00,645 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: AfCro... (truncada por seguridad)
2025-06-17 19:51:00,651 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:51:00,651 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: AfCro... (truncada por seguridad)
2025-06-17 19:51:00,651 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:51:00,651 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: AfCro... (truncada por seguridad)
2025-06-17 19:51:00,660 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:51:00,660 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: AfCro... (truncada por seguridad)
2025-06-17 19:51:00,664 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:51:00,666 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: AfCro... (truncada por seguridad)
2025-06-17 19:51:00,667 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:51:00,667 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: AfCro... (truncada por seguridad)
2025-06-17 19:51:00,673 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:212 - Verificación de Binance BINANCE_SPOT exitosa.
2025-06-17 19:51:00,675 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:51:00,675 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: AfCro... (truncada por seguridad)
2025-06-17 19:51:00,679 - ultibot_backend.services.credential_service - ERROR - [MainThread] - credential_service.py:224 - Error de Binance API durante la verificación: Binance Down
2025-06-17 19:51:00,682 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:51:00,682 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: AfCro... (truncada por seguridad)
2025-06-17 19:51:00,687 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:28 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-17 19:51:00,687 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:34 - Pasando la siguiente clave (str) a Fernet: AfCro... (truncada por seguridad)
2025-06-17 19:51:00,690 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:190 - Verificación de Telegram exitosa.
2025-06-17 19:51:00,922 - ultibot_backend.services.trading_report_service - INFO - [MainThread] - trading_report_service.py:67 - Obtenidos 0 trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000 en modo paper
2025-06-17 19:51:00,927 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error
2025-06-17 19:51:00,943 - ultibot_backend.services.trading_report_service - INFO - [MainThread] - trading_report_service.py:67 - Obtenidos 0 trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000 en modo paper
2025-06-17 19:51:00,957 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 19:51:00,957 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-win-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-win-1', 'us...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 19:51:00,967 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error
2025-06-17 19:51:00,967 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: Database error
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 60, in get_closed_trades
    trade_records = await self.persistence_service.get_closed_trades(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\unittest\mock.py", line 2237, in _execute_mock_call
    raise effect
Exception: Database error

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: Database error
2025-06-17 19:51:00,977 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:71 - Error al obtener trades cerrados para usuario 123e4567-e89b-12d3-a456-426614174000: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
2025-06-17 19:51:00,978 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:182 - Error al calcular métricas de rendimiento para usuario 123e4567-e89b-12d3-a456-426614174000: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in get_closed_trades
    trades = [Trade(**record) for record in trade_records]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 65, in <listcomp>
    trades = [Trade(**record) for record in trade_records]
              ^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\pydantic\main.py", line 253, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 97, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 72, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 9 validation errors for Trade
id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `t` at 1 [type=uuid_parsing, input_value='trade-1', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
user_id
  Input should be a valid UUID, invalid character: expected an optional prefix of `urn:uuid:` followed by [0-9a-fA-F-], found `u` at 1 [type=uuid_parsing, input_value='user-123', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/uuid_parsing
mode
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
side
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.orderCategory
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.type
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.status
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
entryOrder.requestedQuantity
  Field required [type=missing, input_value={'executedQuantity': 0.00...executedPrice': 50000.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
positionStatus
  Field required [type=missing, input_value={'id': 'trade-1', 'user_i...xecutedPrice': 50000.0}}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.11/v/missing
