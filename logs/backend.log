2025-06-24 10:54:44,633 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EE1D63ED40>)
2025-06-24 10:54:44,633 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EE1D63ED40>) completed
2025-06-24 10:54:44,633 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EE1D6438C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-24 10:54:44,633 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EE1D6438C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-24 10:54:44,635 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EE1D6438C0>)
2025-06-24 10:54:44,635 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EE1D6438C0>) completed
2025-06-24 10:54:44,635 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EE1D6438C0>)
2025-06-24 10:54:44,635 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EE1D6438C0>) completed
2025-06-24 10:54:44,636 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001EE1D63ED40>)
2025-06-24 10:54:44,636 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001EE1D63ED40>) completed
2025-06-24 10:54:44,636 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001EE1D63ED40>)
2025-06-24 10:54:44,637 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001EE1D63ED40>) completed
2025-06-24 10:54:44,637 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-24 10:54:44,638 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-24 10:54:44,638 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-24 10:54:44,830 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-24 10:54:44,830 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-24 10:54:45,027 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-24 10:54:45,029 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-24 10:54:45,030 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-24 10:54:45,031 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-24 10:54:45,043 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-24 10:54:45,044 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000001EE1D597510>
2025-06-24 10:54:45,045 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container initialized successfully.
2025-06-24 10:54:45,045 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-24 10:54:45,045 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-24 10:54:45,046 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-24 10:54:45,049 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352
2025-06-24 10:54:45,051 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EE1D63ED40>)
2025-06-24 10:54:45,052 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EE1D63ED40>) completed
2025-06-24 10:54:45,052 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EE1D84C540>, "SELECT * FROM user_configurations WHERE user_id = 'da377bb3-349a-45fc-b024-784f5880c352' LIMIT 1", ())
2025-06-24 10:54:45,052 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EE1D84C540>, "SELECT * FROM user_configurations WHERE user_id = 'da377bb3-349a-45fc-b024-784f5880c352' LIMIT 1", ()) completed
2025-06-24 10:54:45,052 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EE1D84C540>)
2025-06-24 10:54:45,053 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EE1D84C540>) completed
2025-06-24 10:54:45,053 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EE1D84C540>)
2025-06-24 10:54:45,053 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EE1D84C540>) completed
2025-06-24 10:54:45,055 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001EE1D63ED40>)
2025-06-24 10:54:45,055 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001EE1D63ED40>) completed
2025-06-24 10:54:45,055 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001EE1D63ED40>)
2025-06-24 10:54:45,055 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001EE1D63ED40>) completed
2025-06-24 10:54:45,056 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:85 - No configuration found for da377bb3-349a-45fc-b024-784f5880c352. Using default values.
2025-06-24 10:54:45,056 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:87 - Paper trading portfolio initialized for da377bb3-349a-45fc-b024-784f5880c352 with capital: 10000.0
2025-06-24 10:54:45,057 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352 - Status: 200
2025-06-24 10:54:45,057 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:53144 - "GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352?trading_mode=paper HTTP/1.1" 200
2025-06-24 14:55:13,969 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 14:55:13,971 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 14:55:13,973 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 14:55:13,974 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:38852 - "GET /health HTTP/1.1" 200
2025-06-24 14:55:44,028 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 14:55:44,030 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 14:55:44,031 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 14:55:44,033 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:56806 - "GET /health HTTP/1.1" 200
2025-06-24 14:56:14,062 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 14:56:14,064 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 14:56:14,065 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 14:56:14,066 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:54788 - "GET /health HTTP/1.1" 200
2025-06-24 14:56:44,092 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 14:56:44,094 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 14:56:44,096 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 14:56:44,098 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:36240 - "GET /health HTTP/1.1" 200
2025-06-24 14:57:14,124 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 14:57:14,126 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 14:57:14,128 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 14:57:14,129 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:52888 - "GET /health HTTP/1.1" 200
2025-06-24 14:57:44,156 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 14:57:44,158 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 14:57:44,159 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 14:57:44,160 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:38756 - "GET /health HTTP/1.1" 200
2025-06-24 14:58:14,186 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 14:58:14,188 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 14:58:14,189 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 14:58:14,190 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:44002 - "GET /health HTTP/1.1" 200
2025-06-24 14:58:44,214 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 14:58:44,217 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 14:58:44,218 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 14:58:44,219 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:56722 - "GET /health HTTP/1.1" 200
2025-06-24 14:59:14,243 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 14:59:14,247 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 14:59:14,250 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 14:59:14,251 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:41990 - "GET /health HTTP/1.1" 200
2025-06-24 14:59:44,275 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 14:59:44,277 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 14:59:44,278 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 14:59:44,279 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:33826 - "GET /health HTTP/1.1" 200
2025-06-24 15:00:14,303 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:00:14,305 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 15:00:14,306 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 15:00:14,307 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:42644 - "GET /health HTTP/1.1" 200
2025-06-24 15:00:44,328 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:00:44,329 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 15:00:44,330 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 15:00:44,332 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:49882 - "GET /health HTTP/1.1" 200
2025-06-24 15:01:14,353 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:01:14,355 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 15:01:14,356 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 15:01:14,358 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:52108 - "GET /health HTTP/1.1" 200
2025-06-24 15:01:44,382 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:01:44,384 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 15:01:44,385 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 15:01:44,387 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:55522 - "GET /health HTTP/1.1" 200
2025-06-24 15:02:14,412 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:02:14,413 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 15:02:14,414 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 15:02:14,416 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:44398 - "GET /health HTTP/1.1" 200
2025-06-24 15:02:44,437 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:02:44,439 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 15:02:44,440 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 15:02:44,442 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:59498 - "GET /health HTTP/1.1" 200
2025-06-24 15:03:14,463 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:03:14,464 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 15:03:14,466 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 15:03:14,467 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:51454 - "GET /health HTTP/1.1" 200
2025-06-24 15:03:44,490 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:03:44,491 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 15:03:44,493 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 15:03:44,494 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:53208 - "GET /health HTTP/1.1" 200
2025-06-24 15:04:14,508 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:04:14,510 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 15:04:14,512 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 15:04:14,513 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:43698 - "GET /health HTTP/1.1" 200
2025-06-24 11:04:42,912 - uvicorn.error - INFO - [MainThread] - server.py:258 - Shutting down
2025-06-24 11:04:43,020 - uvicorn.error - INFO - [MainThread] - on.py:67 - Waiting for application shutdown.
2025-06-24 11:04:43,020 - ultibot_backend - INFO - [MainThread] - main.py:100 - Apagando UltiBot Backend (lifespan)...
2025-06-24 11:04:43,021 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:200 - Shutting down dependency container...
2025-06-24 11:04:43,021 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:205 - Dependency container shut down.
2025-06-24 11:04:43,021 - ultibot_backend - INFO - [MainThread] - main.py:103 - Recursos liberados y aplicación apagada (lifespan).
2025-06-24 11:04:43,021 - uvicorn.error - INFO - [MainThread] - on.py:76 - Application shutdown complete.
2025-06-24 11:04:43,021 - uvicorn.error - INFO - [MainThread] - server.py:92 - Finished server process [11316]
2025-06-24 15:04:44,537 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:04:44,540 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 15:04:44,541 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 15:04:44,543 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:43122 - "GET /health HTTP/1.1" 200
2025-06-24 11:04:47,204 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-24 11:04:47,204 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-24 11:04:47,227 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-24 11:04:47,227 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-24 11:04:47,228 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [27860]
2025-06-24 11:04:47,228 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-24 11:04:47,228 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-24 11:04:47,229 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-24 11:04:47,229 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:120 - Initializing dependency container...
2025-06-24 11:04:47,230 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///./ultibot_local.db
2025-06-24 11:04:47,243 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000001F0ABB600E0>
2025-06-24 11:04:47,243 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000001F0ABB600E0> completed
2025-06-24 11:04:47,245 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F0ABB2ED40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001F0ABB4F380>, deterministic=True)
2025-06-24 11:04:47,245 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F0ABB2ED40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001F0ABB4F380>, deterministic=True) completed
2025-06-24 11:04:47,246 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F0ABB2ED40>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-24 11:04:47,246 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F0ABB2ED40>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-24 11:04:47,246 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F0ABB2ED40>)
2025-06-24 11:04:47,246 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F0ABB2ED40>) completed
2025-06-24 11:04:47,247 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F0ABB33640>, 'PRAGMA read_uncommitted', [])
2025-06-24 11:04:47,247 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F0ABB33640>, 'PRAGMA read_uncommitted', []) completed
2025-06-24 11:04:47,247 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F0ABB33640>)
2025-06-24 11:04:47,248 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F0ABB33640>) completed
2025-06-24 11:04:47,248 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F0ABB33640>)
2025-06-24 11:04:47,248 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F0ABB33640>) completed
2025-06-24 11:04:47,249 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F0ABB2ED40>)
2025-06-24 11:04:47,249 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F0ABB2ED40>) completed
2025-06-24 11:04:47,250 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F0ABB2ED40>)
2025-06-24 11:04:47,250 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F0ABB2ED40>) completed
2025-06-24 11:04:47,250 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F0ABB334C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-24 11:04:47,251 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F0ABB334C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-24 11:04:47,251 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F0ABB334C0>)
2025-06-24 11:04:47,251 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F0ABB334C0>) completed
2025-06-24 11:04:47,251 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F0ABB334C0>)
2025-06-24 11:04:47,252 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F0ABB334C0>) completed
2025-06-24 11:04:47,252 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F0ABB2ED40>)
2025-06-24 11:04:47,253 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F0ABB2ED40>) completed
2025-06-24 11:04:47,253 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F0ABB33640>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-24 11:04:47,254 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F0ABB33640>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-24 11:04:47,254 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F0ABB33640>)
2025-06-24 11:04:47,254 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F0ABB33640>) completed
2025-06-24 11:04:47,255 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F0ABB33640>)
2025-06-24 11:04:47,255 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F0ABB33640>) completed
2025-06-24 11:04:47,255 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F0ABB2ED40>)
2025-06-24 11:04:47,255 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F0ABB2ED40>) completed
2025-06-24 11:04:47,256 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F0ABB335C0>, 'PRAGMA main.table_info("trades")', ())
2025-06-24 11:04:47,256 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F0ABB335C0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-24 11:04:47,256 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F0ABB335C0>)
2025-06-24 11:04:47,257 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F0ABB335C0>) completed
2025-06-24 11:04:47,257 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F0ABB335C0>)
2025-06-24 11:04:47,257 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F0ABB335C0>) completed
2025-06-24 11:04:47,258 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F0ABB2ED40>)
2025-06-24 11:04:47,258 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F0ABB2ED40>) completed
2025-06-24 11:04:47,258 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F0ABB337C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-24 11:04:47,259 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F0ABB337C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-24 11:04:47,259 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F0ABB337C0>)
2025-06-24 11:04:47,259 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F0ABB337C0>) completed
2025-06-24 11:04:47,259 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F0ABB337C0>)
2025-06-24 11:04:47,259 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F0ABB337C0>) completed
2025-06-24 11:04:47,261 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F0ABB2ED40>)
2025-06-24 11:04:47,261 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F0ABB2ED40>) completed
2025-06-24 11:04:47,261 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F0ABB33840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-24 11:04:47,261 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F0ABB33840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-24 11:04:47,262 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F0ABB33840>)
2025-06-24 11:04:47,262 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F0ABB33840>) completed
2025-06-24 11:04:47,262 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F0ABB33840>)
2025-06-24 11:04:47,263 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F0ABB33840>) completed
2025-06-24 11:04:47,263 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F0ABB2ED40>)
2025-06-24 11:04:47,263 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F0ABB2ED40>) completed
2025-06-24 11:04:47,264 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F0ABB338C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-24 11:04:47,264 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F0ABB338C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-24 11:04:47,264 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F0ABB338C0>)
2025-06-24 11:04:47,264 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F0ABB338C0>) completed
2025-06-24 11:04:47,265 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F0ABB338C0>)
2025-06-24 11:04:47,265 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F0ABB338C0>) completed
2025-06-24 11:04:47,266 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F0ABB2ED40>)
2025-06-24 11:04:47,266 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F0ABB2ED40>) completed
2025-06-24 11:04:47,266 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F0ABB2ED40>)
2025-06-24 11:04:47,266 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F0ABB2ED40>) completed
2025-06-24 11:04:47,267 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-24 11:04:47,267 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-24 11:04:47,269 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-24 11:04:47,461 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-24 11:04:47,469 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-24 11:04:47,661 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-24 11:04:47,661 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-24 11:04:47,669 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-24 11:04:47,669 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-24 11:04:47,681 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-24 11:04:47,681 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000001F0AB9EF690>
2025-06-24 11:04:47,681 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container initialized successfully.
2025-06-24 11:04:47,681 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-24 11:04:47,681 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-24 11:04:47,681 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-24 11:04:47,696 - uvicorn.error - ERROR - [MainThread] - on.py:134 - Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 741, in lifespan
    await receive()
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-24 11:04:51,804 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-24 11:04:51,804 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-24 11:04:51,827 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-24 11:04:51,828 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-24 11:04:51,828 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [30196]
2025-06-24 11:04:51,829 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-24 11:04:51,829 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-24 11:04:51,829 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-24 11:04:51,830 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:120 - Initializing dependency container...
2025-06-24 11:04:51,830 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///./ultibot_local.db
2025-06-24 11:04:51,843 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x00000217B4BF00E0>
2025-06-24 11:04:51,844 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x00000217B4BF00E0> completed
2025-06-24 11:04:51,845 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000217B4BBED40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000217B4BDF380>, deterministic=True)
2025-06-24 11:04:51,845 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000217B4BBED40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000217B4BDF380>, deterministic=True) completed
2025-06-24 11:04:51,846 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000217B4BBED40>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-24 11:04:51,846 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000217B4BBED40>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-24 11:04:51,846 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000217B4BBED40>)
2025-06-24 11:04:51,847 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000217B4BBED40>) completed
2025-06-24 11:04:51,847 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000217B4BC3640>, 'PRAGMA read_uncommitted', [])
2025-06-24 11:04:51,847 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000217B4BC3640>, 'PRAGMA read_uncommitted', []) completed
2025-06-24 11:04:51,847 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000217B4BC3640>)
2025-06-24 11:04:51,848 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000217B4BC3640>) completed
2025-06-24 11:04:51,848 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000217B4BC3640>)
2025-06-24 11:04:51,849 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000217B4BC3640>) completed
2025-06-24 11:04:51,849 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000217B4BBED40>)
2025-06-24 11:04:51,850 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000217B4BBED40>) completed
2025-06-24 11:04:51,851 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000217B4BBED40>)
2025-06-24 11:04:51,851 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000217B4BBED40>) completed
2025-06-24 11:04:51,851 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000217B4BC34C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-24 11:04:51,851 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000217B4BC34C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-24 11:04:51,853 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000217B4BC34C0>)
2025-06-24 11:04:51,853 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000217B4BC34C0>) completed
2025-06-24 11:04:51,853 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000217B4BC34C0>)
2025-06-24 11:04:51,854 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000217B4BC34C0>) completed
2025-06-24 11:04:51,854 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000217B4BBED40>)
2025-06-24 11:04:51,854 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000217B4BBED40>) completed
2025-06-24 11:04:51,855 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000217B4BC3640>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-24 11:04:51,855 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000217B4BC3640>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-24 11:04:51,855 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000217B4BC3640>)
2025-06-24 11:04:51,855 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000217B4BC3640>) completed
2025-06-24 11:04:51,855 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000217B4BC3640>)
2025-06-24 11:04:51,856 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000217B4BC3640>) completed
2025-06-24 11:04:51,856 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000217B4BBED40>)
2025-06-24 11:04:51,856 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000217B4BBED40>) completed
2025-06-24 11:04:51,857 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000217B4BC35C0>, 'PRAGMA main.table_info("trades")', ())
2025-06-24 11:04:51,857 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000217B4BC35C0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-24 11:04:51,858 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000217B4BC35C0>)
2025-06-24 11:04:51,858 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000217B4BC35C0>) completed
2025-06-24 11:04:51,858 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000217B4BC35C0>)
2025-06-24 11:04:51,859 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000217B4BC35C0>) completed
2025-06-24 11:04:51,860 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000217B4BBED40>)
2025-06-24 11:04:51,861 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000217B4BBED40>) completed
2025-06-24 11:04:51,861 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000217B4BC37C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-24 11:04:51,861 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000217B4BC37C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-24 11:04:51,861 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000217B4BC37C0>)
2025-06-24 11:04:51,861 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000217B4BC37C0>) completed
2025-06-24 11:04:51,862 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000217B4BC37C0>)
2025-06-24 11:04:51,862 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000217B4BC37C0>) completed
2025-06-24 11:04:51,862 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000217B4BBED40>)
2025-06-24 11:04:51,863 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000217B4BBED40>) completed
2025-06-24 11:04:51,863 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000217B4BC3840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-24 11:04:51,863 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000217B4BC3840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-24 11:04:51,863 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000217B4BC3840>)
2025-06-24 11:04:51,864 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000217B4BC3840>) completed
2025-06-24 11:04:51,864 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000217B4BC3840>)
2025-06-24 11:04:51,865 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000217B4BC3840>) completed
2025-06-24 11:04:51,865 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000217B4BBED40>)
2025-06-24 11:04:51,865 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000217B4BBED40>) completed
2025-06-24 11:04:51,866 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000217B4BC38C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-24 11:04:51,866 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000217B4BC38C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-24 11:04:51,866 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000217B4BC38C0>)
2025-06-24 11:04:51,866 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000217B4BC38C0>) completed
2025-06-24 11:04:51,867 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000217B4BC38C0>)
2025-06-24 11:04:51,867 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000217B4BC38C0>) completed
2025-06-24 11:04:51,867 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000217B4BBED40>)
2025-06-24 11:04:51,868 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000217B4BBED40>) completed
2025-06-24 11:04:51,868 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000217B4BBED40>)
2025-06-24 11:04:51,868 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000217B4BBED40>) completed
2025-06-24 11:04:51,869 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-24 11:04:51,870 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-24 11:04:51,871 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-24 11:04:52,062 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-24 11:04:52,062 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-24 11:04:52,262 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-24 11:04:52,262 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-24 11:04:52,262 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-24 11:04:52,268 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-24 11:04:52,284 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-24 11:04:52,284 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000217B4A6EE10>
2025-06-24 11:04:52,285 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container initialized successfully.
2025-06-24 11:04:52,287 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-24 11:04:52,288 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-24 11:04:52,289 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-24 15:05:14,565 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:05:14,567 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 15:05:14,568 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 15:05:14,570 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:32820 - "GET /health HTTP/1.1" 200
2025-06-24 15:05:44,590 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:05:44,592 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 15:05:44,594 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 15:05:44,596 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:59802 - "GET /health HTTP/1.1" 200
2025-06-24 15:06:14,620 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:06:14,621 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 15:06:14,623 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 15:06:14,624 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:44030 - "GET /health HTTP/1.1" 200
2025-06-24 15:06:44,653 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:06:44,656 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 15:06:44,659 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 15:06:44,661 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:34216 - "GET /health HTTP/1.1" 200
2025-06-24 15:07:14,685 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:07:14,687 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 15:07:14,689 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 15:07:14,690 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:33584 - "GET /health HTTP/1.1" 200
2025-06-24 15:07:44,712 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:07:44,713 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:170 - Health check solicitado.
2025-06-24 15:07:44,715 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-24 15:07:44,716 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:51592 - "GET /health HTTP/1.1" 200
2025-06-24 15:07:59,699 - uvicorn.error - INFO - [MainThread] - server.py:258 - Shutting down
2025-06-24 15:07:59,801 - uvicorn.error - INFO - [MainThread] - on.py:67 - Waiting for application shutdown.
2025-06-24 15:07:59,804 - ultibot_backend - INFO - [MainThread] - main.py:100 - Apagando UltiBot Backend (lifespan)...
2025-06-24 15:07:59,807 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:200 - Shutting down dependency container...
2025-06-24 15:07:59,810 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:205 - Dependency container shut down.
2025-06-24 15:07:59,812 - ultibot_backend - INFO - [MainThread] - main.py:103 - Recursos liberados y aplicación apagada (lifespan).
2025-06-24 15:07:59,815 - uvicorn.error - INFO - [MainThread] - on.py:76 - Application shutdown complete.
2025-06-24 15:07:59,816 - uvicorn.error - INFO - [MainThread] - server.py:92 - Finished server process [1]
2025-06-24 15:08:04,905 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-24 15:08:04,908 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-24 15:08:04,934 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-24 15:08:04,935 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-24 15:08:04,938 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [1]
2025-06-24 15:08:04,939 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-24 15:08:04,941 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-24 15:08:04,945 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-24 15:08:04,947 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:120 - Initializing dependency container...
2025-06-24 15:08:05,187 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-24 15:08:05,189 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-24 15:08:05,190 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='/usr/local/lib/python3.11/site-packages/certifi/cacert.pem'
2025-06-24 15:08:05,195 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-24 15:08:05,196 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='/usr/local/lib/python3.11/site-packages/certifi/cacert.pem'
2025-06-24 15:08:05,200 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-24 15:08:05,202 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-24 15:08:05,204 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-24 15:08:05,205 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-24 15:08:05,234 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-24 15:08:05,235 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x7fbc29971310>
2025-06-24 15:08:05,237 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container initialized successfully.
2025-06-24 15:08:05,239 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-24 15:08:05,240 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-24 15:08:05,242 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-24 15:08:05,244 - uvicorn.error - INFO - [MainThread] - server.py:214 - Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
2025-06-24 15:08:05,831 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-24 15:08:05,832 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-24 15:08:05,859 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-24 15:08:05,861 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-24 15:08:06,179 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-24 15:08:06,181 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-24 15:08:06,207 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-24 15:08:06,210 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-24 15:08:06,641 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:08:06,643 - ultibot_backend - INFO - [MainThread] - main.py:170 - Ejecutando health check extendido
2025-06-24 15:08:06,644 - ultibot_backend - ERROR - [MainThread] - main.py:208 - Error durante health check: 'DependencyContainer' object has no attribute 'db_client'
2025-06-24 15:08:06,645 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 503
2025-06-24 15:08:06,647 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:56782 - "GET /health HTTP/1.1" 503
2025-06-24 15:08:06,841 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: /usr/local/lib/python3.11/site-packages/matplotlib/mpl-data
2025-06-24 15:08:06,847 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=/root/.config/matplotlib
2025-06-24 15:08:06,848 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-24 15:08:06,849 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is linux
2025-06-24 15:08:07,065 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=/root/.cache/matplotlib
2025-06-24 15:08:07,067 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1085 - font search path [PosixPath('/usr/local/lib/python3.11/site-packages/matplotlib/mpl-data/fonts/ttf'), PosixPath('/usr/local/lib/python3.11/site-packages/matplotlib/mpl-data/fonts/afm'), PosixPath('/usr/local/lib/python3.11/site-packages/matplotlib/mpl-data/fonts/pdfcorefonts')]
2025-06-24 15:08:07,321 - matplotlib.font_manager - INFO - [MainThread] - font_manager.py:1639 - generated new fontManager
2025-06-24 15:08:11,680 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:08:11,682 - ultibot_backend - INFO - [MainThread] - main.py:170 - Ejecutando health check extendido
2025-06-24 15:08:11,684 - ultibot_backend - ERROR - [MainThread] - main.py:208 - Error durante health check: 'DependencyContainer' object has no attribute 'db_client'
2025-06-24 15:08:11,685 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 503
2025-06-24 15:08:11,687 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:40444 - "GET /health HTTP/1.1" 503
2025-06-24 15:08:41,714 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:08:41,716 - ultibot_backend - INFO - [MainThread] - main.py:170 - Ejecutando health check extendido
2025-06-24 15:08:41,717 - ultibot_backend - ERROR - [MainThread] - main.py:208 - Error durante health check: 'DependencyContainer' object has no attribute 'db_client'
2025-06-24 15:08:41,719 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 503
2025-06-24 15:08:41,720 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:49522 - "GET /health HTTP/1.1" 503
2025-06-24 15:09:11,781 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:09:11,783 - ultibot_backend - INFO - [MainThread] - main.py:170 - Ejecutando health check extendido
2025-06-24 15:09:11,784 - ultibot_backend - ERROR - [MainThread] - main.py:208 - Error durante health check: 'DependencyContainer' object has no attribute 'db_client'
2025-06-24 15:09:11,786 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 503
2025-06-24 15:09:11,788 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:58306 - "GET /health HTTP/1.1" 503
2025-06-24 15:09:41,813 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:09:41,815 - ultibot_backend - INFO - [MainThread] - main.py:170 - Ejecutando health check extendido
2025-06-24 15:09:41,816 - ultibot_backend - ERROR - [MainThread] - main.py:208 - Error durante health check: 'DependencyContainer' object has no attribute 'db_client'
2025-06-24 15:09:41,818 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 503
2025-06-24 15:09:41,820 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:33870 - "GET /health HTTP/1.1" 503
2025-06-24 11:09:50,084 - uvicorn.error - INFO - [MainThread] - server.py:258 - Shutting down
2025-06-24 11:09:50,188 - uvicorn.error - INFO - [MainThread] - on.py:67 - Waiting for application shutdown.
2025-06-24 11:09:50,189 - ultibot_backend - INFO - [MainThread] - main.py:100 - Apagando UltiBot Backend (lifespan)...
2025-06-24 11:09:50,189 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:200 - Shutting down dependency container...
2025-06-24 11:09:50,195 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:205 - Dependency container shut down.
2025-06-24 11:09:50,195 - ultibot_backend - INFO - [MainThread] - main.py:103 - Recursos liberados y aplicación apagada (lifespan).
2025-06-24 11:09:50,196 - uvicorn.error - INFO - [MainThread] - on.py:76 - Application shutdown complete.
2025-06-24 11:09:50,196 - uvicorn.error - INFO - [MainThread] - server.py:92 - Finished server process [30196]
2025-06-24 11:09:54,259 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-24 11:09:54,259 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-24 11:09:54,290 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-24 11:09:54,291 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-24 11:09:54,292 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [18828]
2025-06-24 11:09:54,293 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-24 11:09:54,293 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-24 11:09:54,294 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-24 11:09:54,294 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:120 - Initializing dependency container...
2025-06-24 11:09:54,294 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///./ultibot_local.db
2025-06-24 11:09:54,307 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x0000028E6D0700E0>
2025-06-24 11:09:54,308 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x0000028E6D0700E0> completed
2025-06-24 11:09:54,308 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000028E6D03ED40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000028E6D05F380>, deterministic=True)
2025-06-24 11:09:54,309 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000028E6D03ED40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000028E6D05F380>, deterministic=True) completed
2025-06-24 11:09:54,310 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000028E6D03ED40>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-24 11:09:54,310 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000028E6D03ED40>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-24 11:09:54,310 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028E6D03ED40>)
2025-06-24 11:09:54,311 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028E6D03ED40>) completed
2025-06-24 11:09:54,311 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028E6D043640>, 'PRAGMA read_uncommitted', [])
2025-06-24 11:09:54,311 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028E6D043640>, 'PRAGMA read_uncommitted', []) completed
2025-06-24 11:09:54,311 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028E6D043640>)
2025-06-24 11:09:54,312 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028E6D043640>) completed
2025-06-24 11:09:54,312 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028E6D043640>)
2025-06-24 11:09:54,312 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028E6D043640>) completed
2025-06-24 11:09:54,313 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028E6D03ED40>)
2025-06-24 11:09:54,313 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028E6D03ED40>) completed
2025-06-24 11:09:54,314 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028E6D03ED40>)
2025-06-24 11:09:54,314 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028E6D03ED40>) completed
2025-06-24 11:09:54,314 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028E6D0434C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-24 11:09:54,314 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028E6D0434C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-24 11:09:54,316 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028E6D0434C0>)
2025-06-24 11:09:54,316 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028E6D0434C0>) completed
2025-06-24 11:09:54,316 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028E6D0434C0>)
2025-06-24 11:09:54,316 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028E6D0434C0>) completed
2025-06-24 11:09:54,317 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028E6D03ED40>)
2025-06-24 11:09:54,317 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028E6D03ED40>) completed
2025-06-24 11:09:54,317 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028E6D043640>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-24 11:09:54,318 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028E6D043640>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-24 11:09:54,318 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028E6D043640>)
2025-06-24 11:09:54,318 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028E6D043640>) completed
2025-06-24 11:09:54,319 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028E6D043640>)
2025-06-24 11:09:54,319 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028E6D043640>) completed
2025-06-24 11:09:54,319 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028E6D03ED40>)
2025-06-24 11:09:54,319 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028E6D03ED40>) completed
2025-06-24 11:09:54,319 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028E6D0435C0>, 'PRAGMA main.table_info("trades")', ())
2025-06-24 11:09:54,320 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028E6D0435C0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-24 11:09:54,320 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028E6D0435C0>)
2025-06-24 11:09:54,320 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028E6D0435C0>) completed
2025-06-24 11:09:54,321 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028E6D0435C0>)
2025-06-24 11:09:54,321 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028E6D0435C0>) completed
2025-06-24 11:09:54,321 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028E6D03ED40>)
2025-06-24 11:09:54,321 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028E6D03ED40>) completed
2025-06-24 11:09:54,322 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028E6D0437C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-24 11:09:54,322 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028E6D0437C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-24 11:09:54,322 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028E6D0437C0>)
2025-06-24 11:09:54,323 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028E6D0437C0>) completed
2025-06-24 11:09:54,323 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028E6D0437C0>)
2025-06-24 11:09:54,323 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028E6D0437C0>) completed
2025-06-24 11:09:54,323 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028E6D03ED40>)
2025-06-24 11:09:54,323 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028E6D03ED40>) completed
2025-06-24 11:09:54,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028E6D043840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-24 11:09:54,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028E6D043840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-24 11:09:54,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028E6D043840>)
2025-06-24 11:09:54,325 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028E6D043840>) completed
2025-06-24 11:09:54,326 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028E6D043840>)
2025-06-24 11:09:54,326 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028E6D043840>) completed
2025-06-24 11:09:54,327 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028E6D03ED40>)
2025-06-24 11:09:54,327 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028E6D03ED40>) completed
2025-06-24 11:09:54,328 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028E6D0438C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-24 11:09:54,328 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028E6D0438C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-24 11:09:54,329 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028E6D0438C0>)
2025-06-24 11:09:54,329 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028E6D0438C0>) completed
2025-06-24 11:09:54,329 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028E6D0438C0>)
2025-06-24 11:09:54,329 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028E6D0438C0>) completed
2025-06-24 11:09:54,330 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000028E6D03ED40>)
2025-06-24 11:09:54,330 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000028E6D03ED40>) completed
2025-06-24 11:09:54,330 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028E6D03ED40>)
2025-06-24 11:09:54,330 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028E6D03ED40>) completed
2025-06-24 11:09:54,331 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-24 11:09:54,331 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-24 11:09:54,332 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-24 11:09:54,524 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-24 11:09:54,525 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-24 11:09:54,717 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-24 11:09:54,719 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-24 11:09:54,719 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-24 11:09:54,719 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-24 11:09:54,729 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-24 11:09:54,734 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x0000028E6CF5DBD0>
2025-06-24 11:09:54,735 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container initialized successfully.
2025-06-24 11:09:54,735 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-24 11:09:54,735 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-24 11:09:54,735 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-24 11:09:54,737 - uvicorn.error - ERROR - [MainThread] - on.py:134 - Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 741, in lifespan
    await receive()
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-24 11:09:58,728 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-24 11:09:58,729 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-24 11:09:58,752 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-24 11:09:58,753 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-24 11:09:58,753 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [10360]
2025-06-24 11:09:58,753 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-24 11:09:58,754 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-24 11:09:58,754 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-24 11:09:58,754 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:120 - Initializing dependency container...
2025-06-24 11:09:58,754 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///./ultibot_local.db
2025-06-24 11:09:58,768 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000001B4928800E0>
2025-06-24 11:09:58,768 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000001B4928800E0> completed
2025-06-24 11:09:58,769 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001B49284ED40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001B49286F380>, deterministic=True)
2025-06-24 11:09:58,770 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001B49284ED40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001B49286F380>, deterministic=True) completed
2025-06-24 11:09:58,770 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001B49284ED40>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-24 11:09:58,770 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001B49284ED40>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-24 11:09:58,771 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B49284ED40>)
2025-06-24 11:09:58,771 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B49284ED40>) completed
2025-06-24 11:09:58,771 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B492853640>, 'PRAGMA read_uncommitted', [])
2025-06-24 11:09:58,772 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B492853640>, 'PRAGMA read_uncommitted', []) completed
2025-06-24 11:09:58,772 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B492853640>)
2025-06-24 11:09:58,772 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B492853640>) completed
2025-06-24 11:09:58,773 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B492853640>)
2025-06-24 11:09:58,773 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B492853640>) completed
2025-06-24 11:09:58,773 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001B49284ED40>)
2025-06-24 11:09:58,773 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001B49284ED40>) completed
2025-06-24 11:09:58,775 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B49284ED40>)
2025-06-24 11:09:58,775 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B49284ED40>) completed
2025-06-24 11:09:58,775 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B4928534C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-24 11:09:58,775 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B4928534C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-24 11:09:58,776 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B4928534C0>)
2025-06-24 11:09:58,777 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B4928534C0>) completed
2025-06-24 11:09:58,777 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B4928534C0>)
2025-06-24 11:09:58,777 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B4928534C0>) completed
2025-06-24 11:09:58,778 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B49284ED40>)
2025-06-24 11:09:58,778 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B49284ED40>) completed
2025-06-24 11:09:58,778 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B492853640>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-24 11:09:58,778 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B492853640>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-24 11:09:58,778 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B492853640>)
2025-06-24 11:09:58,779 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B492853640>) completed
2025-06-24 11:09:58,779 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B492853640>)
2025-06-24 11:09:58,779 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B492853640>) completed
2025-06-24 11:09:58,780 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B49284ED40>)
2025-06-24 11:09:58,780 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B49284ED40>) completed
2025-06-24 11:09:58,780 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B4928535C0>, 'PRAGMA main.table_info("trades")', ())
2025-06-24 11:09:58,780 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B4928535C0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-24 11:09:58,781 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B4928535C0>)
2025-06-24 11:09:58,781 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B4928535C0>) completed
2025-06-24 11:09:58,781 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B4928535C0>)
2025-06-24 11:09:58,782 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B4928535C0>) completed
2025-06-24 11:09:58,782 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B49284ED40>)
2025-06-24 11:09:58,782 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B49284ED40>) completed
2025-06-24 11:09:58,782 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B4928537C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-24 11:09:58,783 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B4928537C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-24 11:09:58,783 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B4928537C0>)
2025-06-24 11:09:58,783 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B4928537C0>) completed
2025-06-24 11:09:58,784 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B4928537C0>)
2025-06-24 11:09:58,784 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B4928537C0>) completed
2025-06-24 11:09:58,784 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B49284ED40>)
2025-06-24 11:09:58,784 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B49284ED40>) completed
2025-06-24 11:09:58,785 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B492853840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-24 11:09:58,785 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B492853840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-24 11:09:58,785 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B492853840>)
2025-06-24 11:09:58,785 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B492853840>) completed
2025-06-24 11:09:58,786 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B492853840>)
2025-06-24 11:09:58,786 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B492853840>) completed
2025-06-24 11:09:58,786 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B49284ED40>)
2025-06-24 11:09:58,786 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B49284ED40>) completed
2025-06-24 11:09:58,787 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B4928538C0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-24 11:09:58,787 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B4928538C0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-24 11:09:58,787 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B4928538C0>)
2025-06-24 11:09:58,787 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B4928538C0>) completed
2025-06-24 11:09:58,787 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B4928538C0>)
2025-06-24 11:09:58,789 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B4928538C0>) completed
2025-06-24 11:09:58,789 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001B49284ED40>)
2025-06-24 11:09:58,789 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001B49284ED40>) completed
2025-06-24 11:09:58,790 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001B49284ED40>)
2025-06-24 11:09:58,790 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001B49284ED40>) completed
2025-06-24 11:09:58,791 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-24 11:09:58,791 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-24 11:09:58,792 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-24 11:09:58,989 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-24 11:09:58,990 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-24 11:09:59,179 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-24 11:09:59,179 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-24 11:09:59,179 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-24 11:09:59,179 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-24 11:09:59,198 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-24 11:09:59,199 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000001B49270EE10>
2025-06-24 11:09:59,199 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container initialized successfully.
2025-06-24 11:09:59,199 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-24 11:09:59,199 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-24 11:09:59,200 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-24 15:10:11,843 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:10:11,844 - ultibot_backend - INFO - [MainThread] - main.py:170 - Ejecutando health check extendido
2025-06-24 15:10:11,845 - ultibot_backend - ERROR - [MainThread] - main.py:208 - Error durante health check: 'DependencyContainer' object has no attribute 'db_client'
2025-06-24 15:10:11,846 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 503
2025-06-24 15:10:11,849 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:47578 - "GET /health HTTP/1.1" 503
2025-06-24 15:10:41,876 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:10:41,878 - ultibot_backend - INFO - [MainThread] - main.py:170 - Ejecutando health check extendido
2025-06-24 15:10:41,879 - ultibot_backend - ERROR - [MainThread] - main.py:208 - Error durante health check: 'DependencyContainer' object has no attribute 'db_client'
2025-06-24 15:10:41,880 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 503
2025-06-24 15:10:41,881 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:40952 - "GET /health HTTP/1.1" 503
2025-06-24 15:11:11,905 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:11:11,907 - ultibot_backend - INFO - [MainThread] - main.py:170 - Ejecutando health check extendido
2025-06-24 15:11:11,908 - ultibot_backend - ERROR - [MainThread] - main.py:208 - Error durante health check: 'DependencyContainer' object has no attribute 'db_client'
2025-06-24 15:11:11,909 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 503
2025-06-24 15:11:11,910 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:52018 - "GET /health HTTP/1.1" 503
2025-06-24 15:11:41,931 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /health
2025-06-24 15:11:41,935 - ultibot_backend - INFO - [MainThread] - main.py:170 - Ejecutando health check extendido
2025-06-24 15:11:41,937 - ultibot_backend - ERROR - [MainThread] - main.py:208 - Error durante health check: 'DependencyContainer' object has no attribute 'db_client'
2025-06-24 15:11:41,939 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /health - Status: 503
2025-06-24 15:11:41,941 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:52540 - "GET /health HTTP/1.1" 503
