2025-06-21 19:34:53,428 - src.ultibot_ui.services.api_client - DEBUG - [MainThread] - api_client.py:40 - APIClient singleton: base URL establecida en http://testserver
2025-06-21 19:34:53,429 - src.ultibot_ui.workers - INFO - [MainThread] - workers.py:103 - Fetching mock strategies...
2025-06-21 19:34:54,434 - src.ultibot_ui.workers - INFO - [MainThread] - workers.py:110 - Mock strategies fetched.
2025-06-21 19:34:54,436 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-21 19:34:54,439 - src.ultibot_ui.services.api_client - DEBUG - [MainThread] - api_client.py:40 - APIClient singleton: base URL establecida en http://testserver
2025-06-21 19:34:54,441 - src.ultibot_ui.services.api_client - INFO - [MainThread] - api_client.py:134 - Obteniendo trades, modo: paper, filtros: {'trading_mode': 'paper', 'limit': 100, 'offset': 0, 'status': 'open'}
2025-06-21 19:34:54,441 - src.ultibot_ui.services.api_client - DEBUG - [MainThread] - api_client.py:94 - APIClient: _make_request invocado para GET /api/v1/trades
2025-06-21 19:34:54,441 - src.ultibot_ui.services.api_client - WARNING - [MainThread] - api_client.py:119 - Error de red para GET http://testserver/api/v1/trades: Connection refused. Re-lanzando para posible reintento.
2025-06-21 19:34:54,441 - src.ultibot_ui.services.api_client - WARNING - [MainThread] - api_client.py:82 - Fallo de conexión, reintentando en 1.00s... (Intento 1) para GET
2025-06-21 19:34:55,451 - src.ultibot_ui.services.api_client - DEBUG - [MainThread] - api_client.py:94 - APIClient: _make_request invocado para GET /api/v1/trades
2025-06-21 19:34:55,451 - src.ultibot_ui.services.api_client - INFO - [MainThread] - api_client.py:98 - HTTP Request: GET http://testserver/api/v1/trades "HTTP/HTTP/1.1 200 OK"
2025-06-21 19:35:33,773 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-21 19:35:33,773 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-21 19:35:33,790 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-21 19:35:33,790 - ultibot_backend - INFO - [MainThread] - main.py:177 - Instancia global de la aplicación creada.
2025-06-21 19:35:33,917 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-21 19:35:33,921 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-21 19:35:33,938 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-21 19:35:33,939 - ultibot_backend - INFO - [MainThread] - main.py:177 - Instancia global de la aplicación creada.
2025-06-21 19:35:33,951 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-21 19:35:33,952 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-21 19:35:33,953 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-21 19:35:33,954 - src.ultibot_ui.services.api_client - DEBUG - [MainThread] - api_client.py:40 - APIClient singleton: base URL establecida en http://testserver
2025-06-21 19:35:33,955 - src.ultibot_ui.workers - INFO - [MainThread] - workers.py:103 - Fetching mock strategies...
2025-06-21 19:35:34,956 - src.ultibot_ui.workers - INFO - [MainThread] - workers.py:110 - Mock strategies fetched.
2025-06-21 19:35:34,956 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-21 19:35:34,956 - src.ultibot_ui.services.api_client - DEBUG - [MainThread] - api_client.py:40 - APIClient singleton: base URL establecida en http://testserver
2025-06-21 19:35:34,956 - src.ultibot_ui.services.api_client - INFO - [MainThread] - api_client.py:134 - Obteniendo trades, modo: paper, filtros: {'trading_mode': 'paper', 'limit': 100, 'offset': 0, 'status': 'open'}
2025-06-21 19:35:34,956 - src.ultibot_ui.services.api_client - DEBUG - [MainThread] - api_client.py:94 - APIClient: _make_request invocado para GET /api/v1/trades
2025-06-21 19:35:34,956 - src.ultibot_ui.services.api_client - WARNING - [MainThread] - api_client.py:119 - Error de red para GET http://testserver/api/v1/trades: Connection refused. Re-lanzando para posible reintento.
2025-06-21 19:35:34,956 - src.ultibot_ui.services.api_client - WARNING - [MainThread] - api_client.py:82 - Fallo de conexión, reintentando en 1.00s... (Intento 1) para GET
2025-06-21 19:35:35,971 - src.ultibot_ui.services.api_client - DEBUG - [MainThread] - api_client.py:94 - APIClient: _make_request invocado para GET /api/v1/trades
2025-06-21 19:35:35,971 - src.ultibot_ui.services.api_client - INFO - [MainThread] - api_client.py:98 - HTTP Request: GET http://testserver/api/v1/trades "HTTP/HTTP/1.1 200 OK"
2025-06-21 19:35:35,971 - src.ultibot_ui.services.api_client - DEBUG - [MainThread] - api_client.py:106 - Response content (processed): [{'id': 'trade_123', 'symbol': 'BTC/USDT', 'status': 'open'}]
2025-06-21 19:36:37,771 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-21 19:36:37,771 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-21 19:36:37,794 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-21 19:36:37,795 - ultibot_backend - INFO - [MainThread] - main.py:177 - Instancia global de la aplicación creada.
2025-06-21 19:36:37,795 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [6932]
2025-06-21 19:36:37,795 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-21 19:36:37,796 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-21 19:36:37,796 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-21 19:36:37,796 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:120 - Initializing dependency container...
2025-06-21 19:36:37,796 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///./ultibot_local.db
2025-06-21 19:36:37,908 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000002404DBD2340>
2025-06-21 19:36:37,908 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000002404DBD2340> completed
2025-06-21 19:36:37,908 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002404DB26E30>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002404DB36020>, deterministic=True)
2025-06-21 19:36:37,925 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002404DB26E30>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002404DB36020>, deterministic=True) completed
2025-06-21 19:36:37,925 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002404DB26E30>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-21 19:36:37,925 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002404DB26E30>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-21 19:36:37,926 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:36:37,926 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:36:37,926 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DBCD840>, 'PRAGMA read_uncommitted', [])
2025-06-21 19:36:37,926 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DBCD840>, 'PRAGMA read_uncommitted', []) completed
2025-06-21 19:36:37,927 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DBCD840>)
2025-06-21 19:36:37,927 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DBCD840>) completed
2025-06-21 19:36:37,927 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DBCD840>)
2025-06-21 19:36:37,927 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DBCD840>) completed
2025-06-21 19:36:37,928 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:36:37,928 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:36:37,929 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:36:37,929 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:36:37,929 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DBCD0C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-21 19:36:37,930 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DBCD0C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-21 19:36:37,930 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DBCD0C0>)
2025-06-21 19:36:37,930 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DBCD0C0>) completed
2025-06-21 19:36:37,930 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DBCD0C0>)
2025-06-21 19:36:37,931 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DBCD0C0>) completed
2025-06-21 19:36:37,931 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:36:37,931 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:36:37,932 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DBCD840>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-21 19:36:37,932 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DBCD840>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-21 19:36:37,932 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DBCD840>)
2025-06-21 19:36:37,932 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DBCD840>) completed
2025-06-21 19:36:37,933 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DBCD840>)
2025-06-21 19:36:37,933 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DBCD840>) completed
2025-06-21 19:36:37,933 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:36:37,934 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:36:37,934 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DBCC340>, 'PRAGMA main.table_info("trades")', ())
2025-06-21 19:36:37,934 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DBCC340>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-21 19:36:37,934 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DBCC340>)
2025-06-21 19:36:37,935 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DBCC340>) completed
2025-06-21 19:36:37,935 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DBCC340>)
2025-06-21 19:36:37,935 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DBCC340>) completed
2025-06-21 19:36:37,936 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:36:37,936 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:36:37,936 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DBCD9C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-21 19:36:37,936 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DBCD9C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-21 19:36:37,937 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DBCD9C0>)
2025-06-21 19:36:37,937 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DBCD9C0>) completed
2025-06-21 19:36:37,937 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DBCD9C0>)
2025-06-21 19:36:37,937 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DBCD9C0>) completed
2025-06-21 19:36:37,938 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:36:37,938 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:36:37,938 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DBCDA40>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-21 19:36:37,939 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DBCDA40>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-21 19:36:37,939 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DBCDA40>)
2025-06-21 19:36:37,939 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DBCDA40>) completed
2025-06-21 19:36:37,940 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DBCDA40>)
2025-06-21 19:36:37,940 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DBCDA40>) completed
2025-06-21 19:36:37,940 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:36:37,941 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:36:37,941 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DBCDAC0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-21 19:36:37,942 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DBCDAC0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-21 19:36:37,942 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DBCDAC0>)
2025-06-21 19:36:37,943 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DBCDAC0>) completed
2025-06-21 19:36:37,943 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DBCDAC0>)
2025-06-21 19:36:37,943 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DBCDAC0>) completed
2025-06-21 19:36:37,944 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:36:37,944 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:36:37,944 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:36:37,946 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:36:37,946 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-21 19:36:37,947 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-21 19:36:37,947 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-21 19:36:38,123 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-21 19:36:38,139 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-21 19:36:38,321 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-21 19:36:38,321 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-21 19:36:38,321 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-21 19:36:38,321 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-21 19:36:38,425 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-21 19:36:38,425 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000002404D95B9D0>
2025-06-21 19:36:38,425 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container initialized successfully.
2025-06-21 19:36:38,425 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-21 19:36:38,425 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-21 19:36:38,425 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-21 19:37:37,503 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /api/v1/config
2025-06-21 19:37:37,505 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:37:37,505 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:37:37,505 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DD5D840>, 'SELECT user_configurations.id, user_configurations.user_id, user_configurations.telegram_chat_id, user_configurations.notification_preferences, user_configurations.enable_telegram_notifications, user_configurations.default_paper_trading_capital, user_configurations.paper_trading_active, user_configurations.paper_trading_assets, user_configurations.watchlists, user_configurations.favorite_pairs, user_configurations.risk_profile, user_configurations.risk_profile_settings, user_configurations.real_trading_settings, user_configurations.ai_strategy_configurations, user_configurations.ai_analysis_confidence_thresholds, user_configurations.mcp_server_preferences, user_configurations.selected_theme, user_configurations.dashboard_layout_profiles, user_configurations.active_dashboard_layout_profile_id, user_configurations.dashboard_layout_config, user_configurations.cloud_sync_preferences, user_configurations.created_at, user_configurations.updated_at \nFROM user_configurations \nWHERE user_configurations.user_id = ?', ('00000000-0000-0000-0000-000000000001',))
2025-06-21 19:37:37,510 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DD5D840>, 'SELECT user_configurations.id, user_configurations.user_id, user_configurations.telegram_chat_id, user_configurations.notification_preferences, user_configurations.enable_telegram_notifications, user_configurations.default_paper_trading_capital, user_configurations.paper_trading_active, user_configurations.paper_trading_assets, user_configurations.watchlists, user_configurations.favorite_pairs, user_configurations.risk_profile, user_configurations.risk_profile_settings, user_configurations.real_trading_settings, user_configurations.ai_strategy_configurations, user_configurations.ai_analysis_confidence_thresholds, user_configurations.mcp_server_preferences, user_configurations.selected_theme, user_configurations.dashboard_layout_profiles, user_configurations.active_dashboard_layout_profile_id, user_configurations.dashboard_layout_config, user_configurations.cloud_sync_preferences, user_configurations.created_at, user_configurations.updated_at \nFROM user_configurations \nWHERE user_configurations.user_id = ?', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-21 19:37:37,510 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DD5D840>)
2025-06-21 19:37:37,511 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DD5D840>) completed
2025-06-21 19:37:37,511 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DD5D840>)
2025-06-21 19:37:37,512 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DD5D840>) completed
2025-06-21 19:37:37,513 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:37:37,513 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:37:37,513 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:37:37,514 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:37:37,514 - ultibot_backend.services.config_service - INFO - [MainThread] - config_service.py:71 - Configuración de usuario cargada exitosamente para el user_id: 00000000-0000-0000-0000-000000000001
2025-06-21 19:37:37,515 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /api/v1/config - Status: 200
2025-06-21 19:37:37,515 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:64636 - "GET /api/v1/config HTTP/1.1" 200
2025-06-21 19:37:39,498 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352
2025-06-21 19:37:39,500 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:37:39,500 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:37:39,500 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DD50540>, "SELECT * FROM user_configurations WHERE user_id = 'da377bb3-349a-45fc-b024-784f5880c352' LIMIT 1", ())
2025-06-21 19:37:39,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DD50540>, "SELECT * FROM user_configurations WHERE user_id = 'da377bb3-349a-45fc-b024-784f5880c352' LIMIT 1", ()) completed
2025-06-21 19:37:39,501 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DD50540>)
2025-06-21 19:37:39,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DD50540>) completed
2025-06-21 19:37:39,502 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DD50540>)
2025-06-21 19:37:39,502 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DD50540>) completed
2025-06-21 19:37:39,503 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:37:39,503 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:37:39,504 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:37:39,504 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:37:39,504 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:85 - No configuration found for da377bb3-349a-45fc-b024-784f5880c352. Using default values.
2025-06-21 19:37:39,505 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:87 - Paper trading portfolio initialized for da377bb3-349a-45fc-b024-784f5880c352 with capital: 10000.0
2025-06-21 19:37:39,505 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352 - Status: 200
2025-06-21 19:37:39,506 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:64636 - "GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352?trading_mode=paper HTTP/1.1" 200
2025-06-21 19:37:54,397 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /api/v1/trades
2025-06-21 19:37:54,399 - ultibot_backend.adapters.persistence_service - DEBUG - [MainThread] - persistence_service.py:550 - get_trades_with_filters - user_id: 00000000-0000-0000-0000-000000000001, trading_mode: paper, status: None, symbol: None, start_date: None, end_date: None, limit: 100, offset: 0
2025-06-21 19:37:54,401 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:37:54,401 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352
2025-06-21 19:37:54,401 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:37:54,402 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x000002404DDB0C20>
2025-06-21 19:37:54,402 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DD5FD40>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000-0000-0000-0000-000000000001', 'paper', 100, 0))
2025-06-21 19:37:54,403 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x000002404DDB0C20> completed
2025-06-21 19:37:54,403 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DD5FD40>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000-0000-0000-0000-000000000001', 'paper', 100, 0)) completed
2025-06-21 19:37:54,404 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002404DDB4A90>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002404DB36020>, deterministic=True)
2025-06-21 19:37:54,404 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DD5FD40>)
2025-06-21 19:37:54,404 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002404DDB4A90>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002404DB36020>, deterministic=True) completed
2025-06-21 19:37:54,404 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DD5FD40>) completed
2025-06-21 19:37:54,404 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002404DDB4A90>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-21 19:37:54,405 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DD5FD40>)
2025-06-21 19:37:54,405 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002404DDB4A90>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-21 19:37:54,405 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DD5FD40>) completed
2025-06-21 19:37:54,405 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DDB4A90>)
2025-06-21 19:37:54,406 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002404DDB4A90>) completed
2025-06-21 19:37:54,406 - ultibot_backend.adapters.persistence_service - DEBUG - [MainThread] - persistence_service.py:589 - get_trades_with_filters - Trades recuperados: 0
2025-06-21 19:37:54,406 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:37:54,406 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DD52340>, "SELECT * FROM user_configurations WHERE user_id = 'da377bb3-349a-45fc-b024-784f5880c352' LIMIT 1", ())
2025-06-21 19:37:54,406 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:37:54,407 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DB26E30>)
2025-06-21 19:37:54,407 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002404DD52340>, "SELECT * FROM user_configurations WHERE user_id = 'da377bb3-349a-45fc-b024-784f5880c352' LIMIT 1", ()) completed
2025-06-21 19:37:54,407 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DB26E30>) completed
2025-06-21 19:37:54,407 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DD52340>)
2025-06-21 19:37:54,409 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /api/v1/trades - Status: 200
2025-06-21 19:37:54,409 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002404DD52340>) completed
2025-06-21 19:37:54,409 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:64644 - "GET /api/v1/trades?trading_mode=paper&limit=100&offset=0&status=open HTTP/1.1" 200
2025-06-21 19:37:54,410 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DD52340>)
2025-06-21 19:37:54,410 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002404DD52340>) completed
2025-06-21 19:37:54,410 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DDB4A90>)
2025-06-21 19:37:54,410 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DDB4A90>) completed
2025-06-21 19:37:54,412 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DDB4A90>)
2025-06-21 19:37:54,412 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002404DDB4A90>) completed
2025-06-21 19:37:54,413 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:85 - No configuration found for da377bb3-349a-45fc-b024-784f5880c352. Using default values.
2025-06-21 19:37:54,413 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:87 - Paper trading portfolio initialized for da377bb3-349a-45fc-b024-784f5880c352 with capital: 10000.0
2025-06-21 19:37:54,414 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352 - Status: 200
2025-06-21 19:37:54,414 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:64643 - "GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352?trading_mode=paper HTTP/1.1" 200
2025-06-21 19:46:03,280 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-21 19:46:03,280 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-21 19:46:03,303 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-21 19:46:03,303 - ultibot_backend - INFO - [MainThread] - main.py:177 - Instancia global de la aplicación creada.
2025-06-21 19:46:03,303 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [28472]
2025-06-21 19:46:03,303 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-21 19:46:03,303 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-21 19:46:03,303 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-21 19:46:03,303 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:120 - Initializing dependency container...
2025-06-21 19:46:03,303 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///./ultibot_local.db
2025-06-21 19:46:03,340 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x00000263018B2340>
2025-06-21 19:46:03,341 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x00000263018B2340> completed
2025-06-21 19:46:03,341 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026301806E30>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000026301816020>, deterministic=True)
2025-06-21 19:46:03,343 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026301806E30>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000026301816020>, deterministic=True) completed
2025-06-21 19:46:03,343 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026301806E30>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-21 19:46:03,343 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026301806E30>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-21 19:46:03,343 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:03,343 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:03,343 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263018AD840>, 'PRAGMA read_uncommitted', [])
2025-06-21 19:46:03,347 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263018AD840>, 'PRAGMA read_uncommitted', []) completed
2025-06-21 19:46:03,347 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263018AD840>)
2025-06-21 19:46:03,347 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263018AD840>) completed
2025-06-21 19:46:03,347 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263018AD840>)
2025-06-21 19:46:03,348 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263018AD840>) completed
2025-06-21 19:46:03,348 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:03,349 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:03,349 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:03,349 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:03,350 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263018AD0C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-21 19:46:03,350 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263018AD0C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-21 19:46:03,351 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263018AD0C0>)
2025-06-21 19:46:03,351 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263018AD0C0>) completed
2025-06-21 19:46:03,351 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263018AD0C0>)
2025-06-21 19:46:03,351 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263018AD0C0>) completed
2025-06-21 19:46:03,351 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:03,351 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:03,351 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263018AD840>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-21 19:46:03,351 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263018AD840>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-21 19:46:03,351 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263018AD840>)
2025-06-21 19:46:03,351 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263018AD840>) completed
2025-06-21 19:46:03,351 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263018AD840>)
2025-06-21 19:46:03,351 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263018AD840>) completed
2025-06-21 19:46:03,351 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:03,351 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:03,351 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263018AC340>, 'PRAGMA main.table_info("trades")', ())
2025-06-21 19:46:03,357 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263018AC340>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-21 19:46:03,357 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263018AC340>)
2025-06-21 19:46:03,357 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263018AC340>) completed
2025-06-21 19:46:03,358 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263018AC340>)
2025-06-21 19:46:03,358 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263018AC340>) completed
2025-06-21 19:46:03,359 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:03,359 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:03,360 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263018AD9C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-21 19:46:03,360 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263018AD9C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-21 19:46:03,361 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263018AD9C0>)
2025-06-21 19:46:03,361 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263018AD9C0>) completed
2025-06-21 19:46:03,362 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263018AD9C0>)
2025-06-21 19:46:03,362 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263018AD9C0>) completed
2025-06-21 19:46:03,362 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:03,362 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:03,362 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263018ADA40>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-21 19:46:03,363 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263018ADA40>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-21 19:46:03,363 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263018ADA40>)
2025-06-21 19:46:03,363 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263018ADA40>) completed
2025-06-21 19:46:03,364 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263018ADA40>)
2025-06-21 19:46:03,364 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263018ADA40>) completed
2025-06-21 19:46:03,364 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:03,365 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:03,365 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263018ADAC0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-21 19:46:03,366 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263018ADAC0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-21 19:46:03,366 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263018ADAC0>)
2025-06-21 19:46:03,367 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263018ADAC0>) completed
2025-06-21 19:46:03,367 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263018ADAC0>)
2025-06-21 19:46:03,368 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263018ADAC0>) completed
2025-06-21 19:46:03,368 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:03,368 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:03,369 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:03,369 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:03,369 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-21 19:46:03,370 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-21 19:46:03,371 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-21 19:46:03,559 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-21 19:46:03,560 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-21 19:46:03,734 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-21 19:46:03,753 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-21 19:46:03,753 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-21 19:46:03,753 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-21 19:46:03,782 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-21 19:46:03,782 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000263016E7A90>
2025-06-21 19:46:03,783 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container initialized successfully.
2025-06-21 19:46:03,783 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-21 19:46:03,784 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-21 19:46:03,784 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-21 19:46:25,651 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /api/v1/config
2025-06-21 19:46:25,655 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:25,658 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:25,659 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263019FD840>, 'SELECT user_configurations.id, user_configurations.user_id, user_configurations.telegram_chat_id, user_configurations.notification_preferences, user_configurations.enable_telegram_notifications, user_configurations.default_paper_trading_capital, user_configurations.paper_trading_active, user_configurations.paper_trading_assets, user_configurations.watchlists, user_configurations.favorite_pairs, user_configurations.risk_profile, user_configurations.risk_profile_settings, user_configurations.real_trading_settings, user_configurations.ai_strategy_configurations, user_configurations.ai_analysis_confidence_thresholds, user_configurations.mcp_server_preferences, user_configurations.selected_theme, user_configurations.dashboard_layout_profiles, user_configurations.active_dashboard_layout_profile_id, user_configurations.dashboard_layout_config, user_configurations.cloud_sync_preferences, user_configurations.created_at, user_configurations.updated_at \nFROM user_configurations \nWHERE user_configurations.user_id = ?', ('00000000-0000-0000-0000-000000000001',))
2025-06-21 19:46:25,659 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263019FD840>, 'SELECT user_configurations.id, user_configurations.user_id, user_configurations.telegram_chat_id, user_configurations.notification_preferences, user_configurations.enable_telegram_notifications, user_configurations.default_paper_trading_capital, user_configurations.paper_trading_active, user_configurations.paper_trading_assets, user_configurations.watchlists, user_configurations.favorite_pairs, user_configurations.risk_profile, user_configurations.risk_profile_settings, user_configurations.real_trading_settings, user_configurations.ai_strategy_configurations, user_configurations.ai_analysis_confidence_thresholds, user_configurations.mcp_server_preferences, user_configurations.selected_theme, user_configurations.dashboard_layout_profiles, user_configurations.active_dashboard_layout_profile_id, user_configurations.dashboard_layout_config, user_configurations.cloud_sync_preferences, user_configurations.created_at, user_configurations.updated_at \nFROM user_configurations \nWHERE user_configurations.user_id = ?', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-21 19:46:25,660 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263019FD840>)
2025-06-21 19:46:25,660 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263019FD840>) completed
2025-06-21 19:46:25,661 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263019FD840>)
2025-06-21 19:46:25,661 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263019FD840>) completed
2025-06-21 19:46:25,662 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:25,662 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:25,663 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:25,663 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:25,663 - ultibot_backend.services.config_service - INFO - [MainThread] - config_service.py:71 - Configuración de usuario cargada exitosamente para el user_id: 00000000-0000-0000-0000-000000000001
2025-06-21 19:46:25,665 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /api/v1/config - Status: 200
2025-06-21 19:46:25,665 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:64771 - "GET /api/v1/config HTTP/1.1" 200
2025-06-21 19:46:26,273 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352
2025-06-21 19:46:26,274 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:26,274 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:26,276 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263019EC540>, "SELECT * FROM user_configurations WHERE user_id = 'da377bb3-349a-45fc-b024-784f5880c352' LIMIT 1", ())
2025-06-21 19:46:26,276 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263019EC540>, "SELECT * FROM user_configurations WHERE user_id = 'da377bb3-349a-45fc-b024-784f5880c352' LIMIT 1", ()) completed
2025-06-21 19:46:26,277 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263019EC540>)
2025-06-21 19:46:26,277 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263019EC540>) completed
2025-06-21 19:46:26,277 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263019EC540>)
2025-06-21 19:46:26,278 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263019EC540>) completed
2025-06-21 19:46:26,278 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:26,278 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:26,279 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:26,279 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:26,280 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:85 - No configuration found for da377bb3-349a-45fc-b024-784f5880c352. Using default values.
2025-06-21 19:46:26,280 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:87 - Paper trading portfolio initialized for da377bb3-349a-45fc-b024-784f5880c352 with capital: 10000.0
2025-06-21 19:46:26,280 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352 - Status: 200
2025-06-21 19:46:26,281 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:64771 - "GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352?trading_mode=paper HTTP/1.1" 200
2025-06-21 19:46:40,812 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /api/v1/trades
2025-06-21 19:46:40,813 - ultibot_backend.adapters.persistence_service - DEBUG - [MainThread] - persistence_service.py:550 - get_trades_with_filters - user_id: 00000000-0000-0000-0000-000000000001, trading_mode: paper, status: None, symbol: None, start_date: None, end_date: None, limit: 100, offset: 0
2025-06-21 19:46:40,815 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:40,815 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352
2025-06-21 19:46:40,815 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:40,817 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x0000026301A50C20>
2025-06-21 19:46:40,817 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263019FFD40>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000-0000-0000-0000-000000000001', 'paper', 100, 0))
2025-06-21 19:46:40,817 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x0000026301A50C20> completed
2025-06-21 19:46:40,818 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263019FFD40>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000-0000-0000-0000-000000000001', 'paper', 100, 0)) completed
2025-06-21 19:46:40,818 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026301A54A90>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000026301816020>, deterministic=True)
2025-06-21 19:46:40,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263019FFD40>)
2025-06-21 19:46:40,819 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026301A54A90>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000026301816020>, deterministic=True) completed
2025-06-21 19:46:40,819 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263019FFD40>) completed
2025-06-21 19:46:40,820 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026301A54A90>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-21 19:46:40,820 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263019FFD40>)
2025-06-21 19:46:40,820 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026301A54A90>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-21 19:46:40,821 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263019FFD40>) completed
2025-06-21 19:46:40,821 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301A54A90>)
2025-06-21 19:46:40,822 - ultibot_backend.adapters.persistence_service - DEBUG - [MainThread] - persistence_service.py:589 - get_trades_with_filters - Trades recuperados: 0
2025-06-21 19:46:40,822 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026301A54A90>) completed
2025-06-21 19:46:40,823 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:40,823 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263018AFAC0>, "SELECT * FROM user_configurations WHERE user_id = 'da377bb3-349a-45fc-b024-784f5880c352' LIMIT 1", ())
2025-06-21 19:46:40,823 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:40,824 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000263018AFAC0>, "SELECT * FROM user_configurations WHERE user_id = 'da377bb3-349a-45fc-b024-784f5880c352' LIMIT 1", ()) completed
2025-06-21 19:46:40,824 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301806E30>)
2025-06-21 19:46:40,825 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263018AFAC0>)
2025-06-21 19:46:40,825 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301806E30>) completed
2025-06-21 19:46:40,825 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000263018AFAC0>) completed
2025-06-21 19:46:40,826 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /api/v1/trades - Status: 200
2025-06-21 19:46:40,827 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:64781 - "GET /api/v1/trades?trading_mode=paper&limit=100&offset=0&status=open HTTP/1.1" 200
2025-06-21 19:46:40,828 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263018AFAC0>)
2025-06-21 19:46:40,828 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000263018AFAC0>) completed
2025-06-21 19:46:40,829 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301A54A90>)
2025-06-21 19:46:40,830 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301A54A90>) completed
2025-06-21 19:46:40,830 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301A54A90>)
2025-06-21 19:46:40,830 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026301A54A90>) completed
2025-06-21 19:46:40,831 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:85 - No configuration found for da377bb3-349a-45fc-b024-784f5880c352. Using default values.
2025-06-21 19:46:40,832 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:87 - Paper trading portfolio initialized for da377bb3-349a-45fc-b024-784f5880c352 with capital: 10000.0
2025-06-21 19:46:40,833 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352 - Status: 200
2025-06-21 19:46:40,834 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:64780 - "GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352?trading_mode=paper HTTP/1.1" 200
2025-06-21 19:50:57,392 - uvicorn.error - INFO - [MainThread] - server.py:258 - Shutting down
2025-06-21 19:50:57,507 - uvicorn.error - INFO - [MainThread] - on.py:67 - Waiting for application shutdown.
2025-06-21 19:50:57,508 - ultibot_backend - INFO - [MainThread] - main.py:100 - Apagando UltiBot Backend (lifespan)...
2025-06-21 19:50:57,508 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:200 - Shutting down dependency container...
2025-06-21 19:50:57,509 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:205 - Dependency container shut down.
2025-06-21 19:50:57,509 - ultibot_backend - INFO - [MainThread] - main.py:103 - Recursos liberados y aplicación apagada (lifespan).
2025-06-21 19:50:57,509 - uvicorn.error - INFO - [MainThread] - on.py:76 - Application shutdown complete.
2025-06-21 19:50:57,509 - uvicorn.error - INFO - [MainThread] - server.py:92 - Finished server process [28472]
2025-06-21 19:51:01,892 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-21 19:51:01,892 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-21 19:51:01,915 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-21 19:51:01,916 - ultibot_backend - INFO - [MainThread] - main.py:177 - Instancia global de la aplicación creada.
2025-06-21 19:51:01,916 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [8640]
2025-06-21 19:51:01,917 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-21 19:51:01,917 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-21 19:51:01,917 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-21 19:51:01,918 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:120 - Initializing dependency container...
2025-06-21 19:51:01,918 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///./ultibot_local.db
2025-06-21 19:51:01,932 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000001DF43DD8900>
2025-06-21 19:51:01,933 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000001DF43DD8900> completed
2025-06-21 19:51:01,934 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DF43DA2F20>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001DF43DB7BA0>, deterministic=True)
2025-06-21 19:51:01,935 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DF43DA2F20>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001DF43DB7BA0>, deterministic=True) completed
2025-06-21 19:51:01,935 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DF43DA2F20>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-21 19:51:01,935 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DF43DA2F20>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-21 19:51:01,936 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DF43DA2F20>)
2025-06-21 19:51:01,936 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DF43DA2F20>) completed
2025-06-21 19:51:01,936 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DF43DA7B40>, 'PRAGMA read_uncommitted', [])
2025-06-21 19:51:01,937 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DF43DA7B40>, 'PRAGMA read_uncommitted', []) completed
2025-06-21 19:51:01,937 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DF43DA7B40>)
2025-06-21 19:51:01,937 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DF43DA7B40>) completed
2025-06-21 19:51:01,937 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DF43DA7B40>)
2025-06-21 19:51:01,938 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DF43DA7B40>) completed
2025-06-21 19:51:01,938 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DF43DA2F20>)
2025-06-21 19:51:01,938 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DF43DA2F20>) completed
2025-06-21 19:51:01,939 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DF43DA2F20>)
2025-06-21 19:51:01,939 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DF43DA2F20>) completed
2025-06-21 19:51:01,940 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DF43DA79C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-21 19:51:01,940 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DF43DA79C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-21 19:51:01,942 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DF43DA79C0>)
2025-06-21 19:51:01,943 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DF43DA79C0>) completed
2025-06-21 19:51:01,944 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DF43DA79C0>)
2025-06-21 19:51:01,944 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DF43DA79C0>) completed
2025-06-21 19:51:01,944 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DF43DA2F20>)
2025-06-21 19:51:01,945 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DF43DA2F20>) completed
2025-06-21 19:51:01,945 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DF43DA7B40>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-21 19:51:01,946 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DF43DA7B40>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-21 19:51:01,947 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DF43DA7B40>)
2025-06-21 19:51:01,947 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DF43DA7B40>) completed
2025-06-21 19:51:01,949 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DF43DA7B40>)
2025-06-21 19:51:01,949 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DF43DA7B40>) completed
2025-06-21 19:51:01,952 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DF43DA2F20>)
2025-06-21 19:51:01,953 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DF43DA2F20>) completed
2025-06-21 19:51:01,954 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DF43DA7AC0>, 'PRAGMA main.table_info("trades")', ())
2025-06-21 19:51:01,954 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DF43DA7AC0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-21 19:51:01,955 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DF43DA7AC0>)
2025-06-21 19:51:01,956 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DF43DA7AC0>) completed
2025-06-21 19:51:01,957 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DF43DA7AC0>)
2025-06-21 19:51:01,957 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DF43DA7AC0>) completed
2025-06-21 19:51:01,958 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DF43DA2F20>)
2025-06-21 19:51:01,959 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DF43DA2F20>) completed
2025-06-21 19:51:01,960 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DF43DA7CC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-21 19:51:01,960 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DF43DA7CC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-21 19:51:01,961 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DF43DA7CC0>)
2025-06-21 19:51:01,962 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DF43DA7CC0>) completed
2025-06-21 19:51:01,962 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DF43DA7CC0>)
2025-06-21 19:51:01,963 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DF43DA7CC0>) completed
2025-06-21 19:51:01,964 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DF43DA2F20>)
2025-06-21 19:51:01,964 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DF43DA2F20>) completed
2025-06-21 19:51:01,965 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DF43DA7D40>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-21 19:51:01,966 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DF43DA7D40>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-21 19:51:01,967 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DF43DA7D40>)
2025-06-21 19:51:01,968 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DF43DA7D40>) completed
2025-06-21 19:51:01,968 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DF43DA7D40>)
2025-06-21 19:51:01,969 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DF43DA7D40>) completed
2025-06-21 19:51:01,969 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DF43DA2F20>)
2025-06-21 19:51:01,969 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DF43DA2F20>) completed
2025-06-21 19:51:01,970 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DF43DA7DC0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-21 19:51:01,970 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DF43DA7DC0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-21 19:51:01,971 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DF43DA7DC0>)
2025-06-21 19:51:01,971 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DF43DA7DC0>) completed
2025-06-21 19:51:01,971 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DF43DA7DC0>)
2025-06-21 19:51:01,972 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DF43DA7DC0>) completed
2025-06-21 19:51:01,972 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001DF43DA2F20>)
2025-06-21 19:51:01,973 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001DF43DA2F20>) completed
2025-06-21 19:51:01,973 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DF43DA2F20>)
2025-06-21 19:51:01,974 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DF43DA2F20>) completed
2025-06-21 19:51:01,974 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-21 19:51:01,975 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-21 19:51:01,976 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-21 19:51:02,159 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-21 19:51:02,175 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-21 19:51:02,358 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-21 19:51:02,375 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-21 19:51:02,376 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-21 19:51:02,377 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-21 19:51:02,389 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-21 19:51:02,390 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000001DF43D65950>
2025-06-21 19:51:02,391 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container initialized successfully.
2025-06-21 19:51:02,391 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-21 19:51:02,391 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-21 19:51:02,392 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-21 19:51:02,396 - uvicorn.error - ERROR - [MainThread] - on.py:134 - Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 741, in lifespan
    await receive()
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-21 19:51:06,637 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-21 19:51:06,639 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-21 19:51:06,658 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-21 19:51:06,660 - ultibot_backend - INFO - [MainThread] - main.py:177 - Instancia global de la aplicación creada.
2025-06-21 19:51:06,661 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [31236]
2025-06-21 19:51:06,661 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-21 19:51:06,662 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-21 19:51:06,662 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-21 19:51:06,663 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:120 - Initializing dependency container...
2025-06-21 19:51:06,663 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///./ultibot_local.db
2025-06-21 19:51:06,677 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000001EA61368900>
2025-06-21 19:51:06,678 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000001EA61368900> completed
2025-06-21 19:51:06,679 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001EA6132EF20>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001EA61347BA0>, deterministic=True)
2025-06-21 19:51:06,679 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001EA6132EF20>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001EA61347BA0>, deterministic=True) completed
2025-06-21 19:51:06,680 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001EA6132EF20>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-21 19:51:06,680 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001EA6132EF20>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-21 19:51:06,680 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EA6132EF20>)
2025-06-21 19:51:06,680 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EA6132EF20>) completed
2025-06-21 19:51:06,681 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EA61333B40>, 'PRAGMA read_uncommitted', [])
2025-06-21 19:51:06,681 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EA61333B40>, 'PRAGMA read_uncommitted', []) completed
2025-06-21 19:51:06,681 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EA61333B40>)
2025-06-21 19:51:06,681 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EA61333B40>) completed
2025-06-21 19:51:06,682 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EA61333B40>)
2025-06-21 19:51:06,682 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EA61333B40>) completed
2025-06-21 19:51:06,682 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001EA6132EF20>)
2025-06-21 19:51:06,682 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001EA6132EF20>) completed
2025-06-21 19:51:06,683 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EA6132EF20>)
2025-06-21 19:51:06,683 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EA6132EF20>) completed
2025-06-21 19:51:06,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EA613339C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-21 19:51:06,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EA613339C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-21 19:51:06,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EA613339C0>)
2025-06-21 19:51:06,686 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EA613339C0>) completed
2025-06-21 19:51:06,686 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EA613339C0>)
2025-06-21 19:51:06,686 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EA613339C0>) completed
2025-06-21 19:51:06,687 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EA6132EF20>)
2025-06-21 19:51:06,687 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EA6132EF20>) completed
2025-06-21 19:51:06,688 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EA61333B40>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-21 19:51:06,688 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EA61333B40>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-21 19:51:06,688 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EA61333B40>)
2025-06-21 19:51:06,688 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EA61333B40>) completed
2025-06-21 19:51:06,689 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EA61333B40>)
2025-06-21 19:51:06,689 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EA61333B40>) completed
2025-06-21 19:51:06,689 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EA6132EF20>)
2025-06-21 19:51:06,690 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EA6132EF20>) completed
2025-06-21 19:51:06,690 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EA61333AC0>, 'PRAGMA main.table_info("trades")', ())
2025-06-21 19:51:06,690 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EA61333AC0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-21 19:51:06,691 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EA61333AC0>)
2025-06-21 19:51:06,691 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EA61333AC0>) completed
2025-06-21 19:51:06,692 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EA61333AC0>)
2025-06-21 19:51:06,692 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EA61333AC0>) completed
2025-06-21 19:51:06,692 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EA6132EF20>)
2025-06-21 19:51:06,693 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EA6132EF20>) completed
2025-06-21 19:51:06,693 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EA61333CC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-21 19:51:06,694 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EA61333CC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-21 19:51:06,694 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EA61333CC0>)
2025-06-21 19:51:06,694 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EA61333CC0>) completed
2025-06-21 19:51:06,695 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EA61333CC0>)
2025-06-21 19:51:06,695 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EA61333CC0>) completed
2025-06-21 19:51:06,695 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EA6132EF20>)
2025-06-21 19:51:06,695 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EA6132EF20>) completed
2025-06-21 19:51:06,696 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EA61333D40>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-21 19:51:06,696 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EA61333D40>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-21 19:51:06,696 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EA61333D40>)
2025-06-21 19:51:06,696 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EA61333D40>) completed
2025-06-21 19:51:06,696 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EA61333D40>)
2025-06-21 19:51:06,696 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EA61333D40>) completed
2025-06-21 19:51:06,697 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EA6132EF20>)
2025-06-21 19:51:06,697 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001EA6132EF20>) completed
2025-06-21 19:51:06,697 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EA61333DC0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-21 19:51:06,698 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001EA61333DC0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-21 19:51:06,698 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EA61333DC0>)
2025-06-21 19:51:06,698 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001EA61333DC0>) completed
2025-06-21 19:51:06,698 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EA61333DC0>)
2025-06-21 19:51:06,699 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001EA61333DC0>) completed
2025-06-21 19:51:06,699 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001EA6132EF20>)
2025-06-21 19:51:06,699 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001EA6132EF20>) completed
2025-06-21 19:51:06,700 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001EA6132EF20>)
2025-06-21 19:51:06,700 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001EA6132EF20>) completed
2025-06-21 19:51:06,700 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-21 19:51:06,701 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-21 19:51:06,702 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-21 19:51:06,892 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-21 19:51:06,892 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-21 19:51:07,092 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-21 19:51:07,092 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-21 19:51:07,092 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-21 19:51:07,092 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-21 19:51:07,109 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-21 19:51:07,110 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000001EA611F4710>
2025-06-21 19:51:07,111 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container initialized successfully.
2025-06-21 19:51:07,111 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-21 19:51:07,111 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-21 19:51:07,112 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-21 19:52:18,967 - uvicorn.error - INFO - [MainThread] - server.py:258 - Shutting down
2025-06-21 19:52:19,078 - uvicorn.error - INFO - [MainThread] - on.py:67 - Waiting for application shutdown.
2025-06-21 19:52:19,079 - ultibot_backend - INFO - [MainThread] - main.py:100 - Apagando UltiBot Backend (lifespan)...
2025-06-21 19:52:19,080 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:200 - Shutting down dependency container...
2025-06-21 19:52:19,084 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:205 - Dependency container shut down.
2025-06-21 19:52:19,084 - ultibot_backend - INFO - [MainThread] - main.py:103 - Recursos liberados y aplicación apagada (lifespan).
2025-06-21 19:52:19,086 - uvicorn.error - INFO - [MainThread] - on.py:76 - Application shutdown complete.
2025-06-21 19:52:19,086 - uvicorn.error - INFO - [MainThread] - server.py:92 - Finished server process [31236]
2025-06-21 19:52:23,447 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-21 19:52:23,447 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-21 19:52:23,469 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-21 19:52:23,470 - ultibot_backend - INFO - [MainThread] - main.py:177 - Instancia global de la aplicación creada.
2025-06-21 19:52:23,470 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [4120]
2025-06-21 19:52:23,470 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-21 19:52:23,471 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-21 19:52:23,471 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-21 19:52:23,471 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:120 - Initializing dependency container...
2025-06-21 19:52:23,472 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///./ultibot_local.db
2025-06-21 19:52:23,488 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000002099FA18900>
2025-06-21 19:52:23,489 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000002099FA18900> completed
2025-06-21 19:52:23,489 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002099F9DEF20>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002099F9F7BA0>, deterministic=True)
2025-06-21 19:52:23,490 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002099F9DEF20>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002099F9F7BA0>, deterministic=True) completed
2025-06-21 19:52:23,490 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002099F9DEF20>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-21 19:52:23,490 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002099F9DEF20>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-21 19:52:23,491 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002099F9DEF20>)
2025-06-21 19:52:23,491 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002099F9DEF20>) completed
2025-06-21 19:52:23,491 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002099F9E3B40>, 'PRAGMA read_uncommitted', [])
2025-06-21 19:52:23,492 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002099F9E3B40>, 'PRAGMA read_uncommitted', []) completed
2025-06-21 19:52:23,492 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002099F9E3B40>)
2025-06-21 19:52:23,492 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002099F9E3B40>) completed
2025-06-21 19:52:23,492 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002099F9E3B40>)
2025-06-21 19:52:23,494 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002099F9E3B40>) completed
2025-06-21 19:52:23,494 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002099F9DEF20>)
2025-06-21 19:52:23,494 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002099F9DEF20>) completed
2025-06-21 19:52:23,496 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002099F9DEF20>)
2025-06-21 19:52:23,496 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002099F9DEF20>) completed
2025-06-21 19:52:23,496 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002099F9E39C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-21 19:52:23,497 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002099F9E39C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-21 19:52:23,498 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002099F9E39C0>)
2025-06-21 19:52:23,499 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002099F9E39C0>) completed
2025-06-21 19:52:23,499 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002099F9E39C0>)
2025-06-21 19:52:23,500 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002099F9E39C0>) completed
2025-06-21 19:52:23,500 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002099F9DEF20>)
2025-06-21 19:52:23,500 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002099F9DEF20>) completed
2025-06-21 19:52:23,501 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002099F9E3B40>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-21 19:52:23,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002099F9E3B40>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-21 19:52:23,501 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002099F9E3B40>)
2025-06-21 19:52:23,502 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002099F9E3B40>) completed
2025-06-21 19:52:23,502 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002099F9E3B40>)
2025-06-21 19:52:23,502 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002099F9E3B40>) completed
2025-06-21 19:52:23,503 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002099F9DEF20>)
2025-06-21 19:52:23,503 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002099F9DEF20>) completed
2025-06-21 19:52:23,503 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002099F9E3AC0>, 'PRAGMA main.table_info("trades")', ())
2025-06-21 19:52:23,504 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002099F9E3AC0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-21 19:52:23,504 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002099F9E3AC0>)
2025-06-21 19:52:23,504 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002099F9E3AC0>) completed
2025-06-21 19:52:23,505 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002099F9E3AC0>)
2025-06-21 19:52:23,505 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002099F9E3AC0>) completed
2025-06-21 19:52:23,506 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002099F9DEF20>)
2025-06-21 19:52:23,507 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002099F9DEF20>) completed
2025-06-21 19:52:23,507 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002099F9E3CC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-21 19:52:23,507 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002099F9E3CC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-21 19:52:23,508 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002099F9E3CC0>)
2025-06-21 19:52:23,508 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002099F9E3CC0>) completed
2025-06-21 19:52:23,509 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002099F9E3CC0>)
2025-06-21 19:52:23,509 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002099F9E3CC0>) completed
2025-06-21 19:52:23,509 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002099F9DEF20>)
2025-06-21 19:52:23,510 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002099F9DEF20>) completed
2025-06-21 19:52:23,510 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002099F9E3D40>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-21 19:52:23,510 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002099F9E3D40>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-21 19:52:23,511 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002099F9E3D40>)
2025-06-21 19:52:23,511 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002099F9E3D40>) completed
2025-06-21 19:52:23,511 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002099F9E3D40>)
2025-06-21 19:52:23,511 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002099F9E3D40>) completed
2025-06-21 19:52:23,512 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002099F9DEF20>)
2025-06-21 19:52:23,512 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002099F9DEF20>) completed
2025-06-21 19:52:23,513 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002099F9E3DC0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-21 19:52:23,513 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002099F9E3DC0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-21 19:52:23,514 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002099F9E3DC0>)
2025-06-21 19:52:23,514 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002099F9E3DC0>) completed
2025-06-21 19:52:23,515 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002099F9E3DC0>)
2025-06-21 19:52:23,515 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002099F9E3DC0>) completed
2025-06-21 19:52:23,516 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002099F9DEF20>)
2025-06-21 19:52:23,517 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002099F9DEF20>) completed
2025-06-21 19:52:23,517 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002099F9DEF20>)
2025-06-21 19:52:23,517 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002099F9DEF20>) completed
2025-06-21 19:52:23,518 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-21 19:52:23,518 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-21 19:52:23,519 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-21 19:52:23,716 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-21 19:52:23,717 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-21 19:52:23,896 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-21 19:52:23,896 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-21 19:52:23,896 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-21 19:52:23,896 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-21 19:52:23,921 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-21 19:52:23,922 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000002099F93BE90>
2025-06-21 19:52:23,922 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container initialized successfully.
2025-06-21 19:52:23,923 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-21 19:52:23,923 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-21 19:52:23,923 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-21 19:52:23,925 - uvicorn.error - ERROR - [MainThread] - on.py:134 - Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\base_events.py", line 653, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 190, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\starlette\routing.py", line 741, in lifespan
    await receive()
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-06-21 19:52:28,178 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-21 19:52:28,179 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-21 19:52:28,200 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-21 19:52:28,201 - ultibot_backend - INFO - [MainThread] - main.py:177 - Instancia global de la aplicación creada.
2025-06-21 19:52:28,201 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [34748]
2025-06-21 19:52:28,202 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-21 19:52:28,203 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-21 19:52:28,203 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-21 19:52:28,203 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:120 - Initializing dependency container...
2025-06-21 19:52:28,204 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///./ultibot_local.db
2025-06-21 19:52:28,218 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x00000240C17F8900>
2025-06-21 19:52:28,219 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x00000240C17F8900> completed
2025-06-21 19:52:28,220 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000240C17BEF20>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000240C17D7BA0>, deterministic=True)
2025-06-21 19:52:28,220 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000240C17BEF20>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000240C17D7BA0>, deterministic=True) completed
2025-06-21 19:52:28,220 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000240C17BEF20>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-21 19:52:28,220 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000240C17BEF20>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-21 19:52:28,221 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000240C17BEF20>)
2025-06-21 19:52:28,221 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000240C17BEF20>) completed
2025-06-21 19:52:28,221 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000240C17C3B40>, 'PRAGMA read_uncommitted', [])
2025-06-21 19:52:28,221 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000240C17C3B40>, 'PRAGMA read_uncommitted', []) completed
2025-06-21 19:52:28,222 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000240C17C3B40>)
2025-06-21 19:52:28,222 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000240C17C3B40>) completed
2025-06-21 19:52:28,222 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000240C17C3B40>)
2025-06-21 19:52:28,223 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000240C17C3B40>) completed
2025-06-21 19:52:28,223 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000240C17BEF20>)
2025-06-21 19:52:28,223 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000240C17BEF20>) completed
2025-06-21 19:52:28,224 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000240C17BEF20>)
2025-06-21 19:52:28,224 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000240C17BEF20>) completed
2025-06-21 19:52:28,225 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000240C17C39C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-21 19:52:28,225 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000240C17C39C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-21 19:52:28,226 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000240C17C39C0>)
2025-06-21 19:52:28,226 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000240C17C39C0>) completed
2025-06-21 19:52:28,226 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000240C17C39C0>)
2025-06-21 19:52:28,226 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000240C17C39C0>) completed
2025-06-21 19:52:28,227 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000240C17BEF20>)
2025-06-21 19:52:28,227 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000240C17BEF20>) completed
2025-06-21 19:52:28,227 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000240C17C3B40>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-21 19:52:28,227 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000240C17C3B40>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-21 19:52:28,228 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000240C17C3B40>)
2025-06-21 19:52:28,228 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000240C17C3B40>) completed
2025-06-21 19:52:28,229 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000240C17C3B40>)
2025-06-21 19:52:28,229 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000240C17C3B40>) completed
2025-06-21 19:52:28,229 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000240C17BEF20>)
2025-06-21 19:52:28,230 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000240C17BEF20>) completed
2025-06-21 19:52:28,230 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000240C17C3AC0>, 'PRAGMA main.table_info("trades")', ())
2025-06-21 19:52:28,230 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000240C17C3AC0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-21 19:52:28,231 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000240C17C3AC0>)
2025-06-21 19:52:28,231 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000240C17C3AC0>) completed
2025-06-21 19:52:28,231 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000240C17C3AC0>)
2025-06-21 19:52:28,232 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000240C17C3AC0>) completed
2025-06-21 19:52:28,232 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000240C17BEF20>)
2025-06-21 19:52:28,232 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000240C17BEF20>) completed
2025-06-21 19:52:28,233 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000240C17C3CC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-21 19:52:28,233 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000240C17C3CC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-21 19:52:28,233 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000240C17C3CC0>)
2025-06-21 19:52:28,234 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000240C17C3CC0>) completed
2025-06-21 19:52:28,234 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000240C17C3CC0>)
2025-06-21 19:52:28,234 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000240C17C3CC0>) completed
2025-06-21 19:52:28,235 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000240C17BEF20>)
2025-06-21 19:52:28,235 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000240C17BEF20>) completed
2025-06-21 19:52:28,235 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000240C17C3D40>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-21 19:52:28,237 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000240C17C3D40>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-21 19:52:28,237 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000240C17C3D40>)
2025-06-21 19:52:28,237 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000240C17C3D40>) completed
2025-06-21 19:52:28,238 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000240C17C3D40>)
2025-06-21 19:52:28,238 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000240C17C3D40>) completed
2025-06-21 19:52:28,238 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000240C17BEF20>)
2025-06-21 19:52:28,238 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000240C17BEF20>) completed
2025-06-21 19:52:28,239 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000240C17C3DC0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-21 19:52:28,239 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000240C17C3DC0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-21 19:52:28,239 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000240C17C3DC0>)
2025-06-21 19:52:28,239 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000240C17C3DC0>) completed
2025-06-21 19:52:28,239 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000240C17C3DC0>)
2025-06-21 19:52:28,239 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000240C17C3DC0>) completed
2025-06-21 19:52:28,240 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000240C17BEF20>)
2025-06-21 19:52:28,240 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000240C17BEF20>) completed
2025-06-21 19:52:28,240 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000240C17BEF20>)
2025-06-21 19:52:28,240 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000240C17BEF20>) completed
2025-06-21 19:52:28,242 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-21 19:52:28,242 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-21 19:52:28,243 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-21 19:52:28,431 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-21 19:52:28,431 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-21 19:52:28,632 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-21 19:52:28,632 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-21 19:52:28,632 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-21 19:52:28,632 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-21 19:52:28,656 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-21 19:52:28,656 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000240C1708E90>
2025-06-21 19:52:28,657 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container initialized successfully.
2025-06-21 19:52:28,657 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-21 19:52:28,658 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-21 19:52:28,658 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-21 23:59:13,530 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-21 23:59:13,530 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-21 23:59:13,548 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-21 23:59:13,549 - ultibot_backend - INFO - [MainThread] - main.py:177 - Instancia global de la aplicación creada.
2025-06-21 23:59:13,550 - uvicorn.error - INFO - [MainThread] - server.py:82 - Started server process [22108]
2025-06-21 23:59:13,550 - uvicorn.error - INFO - [MainThread] - on.py:48 - Waiting for application startup.
2025-06-21 23:59:13,550 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-21 23:59:13,551 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-21 23:59:13,551 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:120 - Initializing dependency container...
2025-06-21 23:59:13,551 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///./ultibot_local.db
2025-06-21 23:59:13,584 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x0000015941B26340>
2025-06-21 23:59:13,584 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x0000015941B26340> completed
2025-06-21 23:59:13,584 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000015941A7AE30>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000015941A86020>, deterministic=True)
2025-06-21 23:59:13,584 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000015941A7AE30>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000015941A86020>, deterministic=True) completed
2025-06-21 23:59:13,584 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000015941A7AE30>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-21 23:59:13,584 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000015941A7AE30>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-21 23:59:13,584 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>)
2025-06-21 23:59:13,584 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>) completed
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941B21840>, 'PRAGMA read_uncommitted', [])
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941B21840>, 'PRAGMA read_uncommitted', []) completed
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941B21840>)
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941B21840>) completed
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941B21840>)
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941B21840>) completed
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000015941A7AE30>)
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000015941A7AE30>) completed
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>)
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>) completed
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941B210C0>, 'PRAGMA main.table_info("api_credentials")', ())
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941B210C0>, 'PRAGMA main.table_info("api_credentials")', ()) completed
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941B210C0>)
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941B210C0>) completed
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941B210C0>)
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941B210C0>) completed
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>)
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>) completed
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941B21840>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941B21840>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-21 23:59:13,588 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941B21840>)
2025-06-21 23:59:13,595 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941B21840>) completed
2025-06-21 23:59:13,595 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941B21840>)
2025-06-21 23:59:13,595 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941B21840>) completed
2025-06-21 23:59:13,595 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>)
2025-06-21 23:59:13,595 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>) completed
2025-06-21 23:59:13,595 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941B20340>, 'PRAGMA main.table_info("trades")', ())
2025-06-21 23:59:13,595 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941B20340>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-21 23:59:13,595 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941B20340>)
2025-06-21 23:59:13,595 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941B20340>) completed
2025-06-21 23:59:13,598 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941B20340>)
2025-06-21 23:59:13,598 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941B20340>) completed
2025-06-21 23:59:13,598 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>)
2025-06-21 23:59:13,598 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>) completed
2025-06-21 23:59:13,598 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941B219C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-21 23:59:13,598 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941B219C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941B219C0>)
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941B219C0>) completed
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941B219C0>)
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941B219C0>) completed
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>)
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>) completed
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941B21A40>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941B21A40>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941B21A40>)
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941B21A40>) completed
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941B21A40>)
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941B21A40>) completed
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>)
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>) completed
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941B21AC0>, 'PRAGMA main.table_info("strategy_configurations")', ())
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941B21AC0>, 'PRAGMA main.table_info("strategy_configurations")', ()) completed
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941B21AC0>)
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941B21AC0>) completed
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941B21AC0>)
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941B21AC0>) completed
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000015941A7AE30>)
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000015941A7AE30>) completed
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000015941A7AE30>)
2025-06-21 23:59:13,600 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000015941A7AE30>) completed
2025-06-21 23:59:13,600 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-21 23:59:13,600 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-21 23:59:13,600 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-21 23:59:13,801 - httpx - DEBUG - [MainThread] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-21 23:59:13,801 - httpx - DEBUG - [MainThread] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-21 23:59:14,000 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-21 23:59:14,002 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-21 23:59:14,004 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-21 23:59:14,004 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-21 23:59:14,030 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-21 23:59:14,031 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000001594199B150>
2025-06-21 23:59:14,031 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container initialized successfully.
2025-06-21 23:59:14,031 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-21 23:59:14,032 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-21 23:59:14,032 - uvicorn.error - INFO - [MainThread] - on.py:62 - Application startup complete.
2025-06-21 23:59:16,275 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /api/v1/config
2025-06-21 23:59:16,282 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>)
2025-06-21 23:59:16,282 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>) completed
2025-06-21 23:59:16,282 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941CAD840>, 'SELECT user_configurations.id, user_configurations.user_id, user_configurations.telegram_chat_id, user_configurations.notification_preferences, user_configurations.enable_telegram_notifications, user_configurations.default_paper_trading_capital, user_configurations.paper_trading_active, user_configurations.paper_trading_assets, user_configurations.watchlists, user_configurations.favorite_pairs, user_configurations.risk_profile, user_configurations.risk_profile_settings, user_configurations.real_trading_settings, user_configurations.ai_strategy_configurations, user_configurations.ai_analysis_confidence_thresholds, user_configurations.mcp_server_preferences, user_configurations.selected_theme, user_configurations.dashboard_layout_profiles, user_configurations.active_dashboard_layout_profile_id, user_configurations.dashboard_layout_config, user_configurations.cloud_sync_preferences, user_configurations.created_at, user_configurations.updated_at \nFROM user_configurations \nWHERE user_configurations.user_id = ?', ('00000000-0000-0000-0000-000000000001',))
2025-06-21 23:59:16,282 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941CAD840>, 'SELECT user_configurations.id, user_configurations.user_id, user_configurations.telegram_chat_id, user_configurations.notification_preferences, user_configurations.enable_telegram_notifications, user_configurations.default_paper_trading_capital, user_configurations.paper_trading_active, user_configurations.paper_trading_assets, user_configurations.watchlists, user_configurations.favorite_pairs, user_configurations.risk_profile, user_configurations.risk_profile_settings, user_configurations.real_trading_settings, user_configurations.ai_strategy_configurations, user_configurations.ai_analysis_confidence_thresholds, user_configurations.mcp_server_preferences, user_configurations.selected_theme, user_configurations.dashboard_layout_profiles, user_configurations.active_dashboard_layout_profile_id, user_configurations.dashboard_layout_config, user_configurations.cloud_sync_preferences, user_configurations.created_at, user_configurations.updated_at \nFROM user_configurations \nWHERE user_configurations.user_id = ?', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-21 23:59:16,282 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941CAD840>)
2025-06-21 23:59:16,282 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941CAD840>) completed
2025-06-21 23:59:16,282 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941CAD840>)
2025-06-21 23:59:16,282 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941CAD840>) completed
2025-06-21 23:59:16,287 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000015941A7AE30>)
2025-06-21 23:59:16,287 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000015941A7AE30>) completed
2025-06-21 23:59:16,287 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000015941A7AE30>)
2025-06-21 23:59:16,287 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000015941A7AE30>) completed
2025-06-21 23:59:16,287 - ultibot_backend.services.config_service - INFO - [MainThread] - config_service.py:71 - Configuración de usuario cargada exitosamente para el user_id: 00000000-0000-0000-0000-000000000001
2025-06-21 23:59:16,289 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /api/v1/config - Status: 200
2025-06-21 23:59:16,289 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:50492 - "GET /api/v1/config HTTP/1.1" 200
2025-06-21 23:59:16,982 - ultibot_backend - INFO - [MainThread] - main.py:123 - Middleware: Solicitud entrante: GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352
2025-06-21 23:59:16,983 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>)
2025-06-21 23:59:16,984 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000015941A7AE30>) completed
2025-06-21 23:59:16,984 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941C9C540>, "SELECT * FROM user_configurations WHERE user_id = 'da377bb3-349a-45fc-b024-784f5880c352' LIMIT 1", ())
2025-06-21 23:59:16,984 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000015941C9C540>, "SELECT * FROM user_configurations WHERE user_id = 'da377bb3-349a-45fc-b024-784f5880c352' LIMIT 1", ()) completed
2025-06-21 23:59:16,985 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941C9C540>)
2025-06-21 23:59:16,985 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000015941C9C540>) completed
2025-06-21 23:59:16,985 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941C9C540>)
2025-06-21 23:59:16,985 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000015941C9C540>) completed
2025-06-21 23:59:16,986 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000015941A7AE30>)
2025-06-21 23:59:16,986 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000015941A7AE30>) completed
2025-06-21 23:59:16,986 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000015941A7AE30>)
2025-06-21 23:59:16,987 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000015941A7AE30>) completed
2025-06-21 23:59:16,987 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:85 - No configuration found for da377bb3-349a-45fc-b024-784f5880c352. Using default values.
2025-06-21 23:59:16,987 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:87 - Paper trading portfolio initialized for da377bb3-349a-45fc-b024-784f5880c352 with capital: 10000.0
2025-06-21 23:59:16,988 - ultibot_backend - INFO - [MainThread] - main.py:125 - Middleware: Solicitud procesada: GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352 - Status: 200
2025-06-21 23:59:16,988 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:50492 - "GET /api/v1/portfolio/snapshot/da377bb3-349a-45fc-b024-784f5880c352?trading_mode=paper HTTP/1.1" 200
