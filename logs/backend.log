2025-06-19 10:54:04,349 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 10:54:04,349 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 10:54:04,349 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 10:54:04,349 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000022FF27604F0>)
2025-06-19 10:54:04,349 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000022FF27604F0>) completed
2025-06-19 10:54:04,349 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000022FF27604F0>)
2025-06-19 10:54:04,349 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000022FF27604F0>) completed
2025-06-19 10:54:04,349 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000022FF27A96C0>)
2025-06-19 10:54:04,349 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000022FF27A96C0>) completed
2025-06-19 10:54:04,349 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000022FF27604F0>)
2025-06-19 10:54:04,349 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000022FF27604F0>) completed
2025-06-19 14:54:12,688 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 14:54:12,690 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 14:54:12,690 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 14:54:12,691 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:41292 - "GET /health HTTP/1.1" 200
2025-06-19 14:54:42,718 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 14:54:42,719 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 14:54:42,720 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 14:54:42,721 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:42686 - "GET /health HTTP/1.1" 200
2025-06-19 14:55:12,749 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 14:55:12,750 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 14:55:12,751 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 14:55:12,752 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:44014 - "GET /health HTTP/1.1" 200
2025-06-19 10:55:14,476 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 10:55:14,477 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 10:55:14,493 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 10:55:14,650 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 10:55:14,651 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 10:55:14,652 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpya7m9s7a\test_db.sqlite
2025-06-19 10:55:14,666 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x00000259069468E0>
2025-06-19 10:55:14,666 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x00000259069468E0> completed
2025-06-19 10:55:14,668 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000259069684F0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000025906945BC0>, deterministic=True)
2025-06-19 10:55:14,668 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000259069684F0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000025906945BC0>, deterministic=True) completed
2025-06-19 10:55:14,668 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000259069684F0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 10:55:14,669 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000259069684F0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 10:55:14,669 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:14,669 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955BC0>, 'PRAGMA read_uncommitted', [])
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955BC0>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906955BC0>)
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906955BC0>) completed
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955BC0>)
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955BC0>) completed
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000259069559C0>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000259069559C0>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000259069559C0>)
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000259069559C0>) completed
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000259069559C0>)
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000259069559C0>) completed
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955AC0>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955AC0>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906955AC0>)
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906955AC0>) completed
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955AC0>)
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955AC0>) completed
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955B40>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955B40>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906955B40>)
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906955B40>) completed
2025-06-19 10:55:14,670 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955B40>)
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955B40>) completed
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955C40>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955C40>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906955C40>)
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906955C40>) completed
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955C40>)
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955C40>) completed
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955CC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955CC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906955CC0>)
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906955CC0>) completed
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955CC0>)
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955CC0>) completed
2025-06-19 10:55:14,678 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:14,683 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:14,683 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955E40>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955E40>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906955E40>)
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906955E40>) completed
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955E40>)
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955E40>) completed
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955DC0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955DC0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906955DC0>)
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906955DC0>) completed
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955DC0>)
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955DC0>) completed
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955FC0>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955FC0>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906955FC0>)
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906955FC0>) completed
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955FC0>)
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955FC0>) completed
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906956140>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906956140>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906956140>)
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906956140>) completed
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:14,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955D40>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 10:55:14,699 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955D40>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 10:55:14,699 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955D40>)
2025-06-19 10:55:14,699 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955D40>) completed
2025-06-19 10:55:14,701 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:14,702 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:14,702 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955840>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 10:55:14,705 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906955840>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 10:55:14,706 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955840>)
2025-06-19 10:55:14,706 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906955840>) completed
2025-06-19 10:55:14,707 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:14,707 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:14,707 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000259069560C0>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 10:55:14,709 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000259069560C0>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 10:55:14,709 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000259069560C0>)
2025-06-19 10:55:14,709 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000259069560C0>) completed
2025-06-19 10:55:14,709 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:14,709 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:14,709 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:14,709 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:14,709 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 10:55:14,716 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 10:55:14,716 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: qJUgW... (truncada por seguridad)
2025-06-19 10:55:14,716 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x0000025906A32480>
2025-06-19 10:55:14,719 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x0000025906A32480> completed
2025-06-19 10:55:14,719 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025906A3DA80>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000025906945BC0>, deterministic=True)
2025-06-19 10:55:14,719 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025906A3DA80>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000025906945BC0>, deterministic=True) completed
2025-06-19 10:55:14,719 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025906A3DA80>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 10:55:14,719 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025906A3DA80>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 10:55:14,721 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025906A3DA80>)
2025-06-19 10:55:14,721 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025906A3DA80>) completed
2025-06-19 10:55:14,721 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906A3B6C0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 10:55:14,721 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025906A3B6C0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 10:55:14,721 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906A3B6C0>)
2025-06-19 10:55:14,721 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025906A3B6C0>) completed
2025-06-19 10:55:14,721 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906A3B6C0>)
2025-06-19 10:55:14,721 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025906A3B6C0>) completed
2025-06-19 10:55:14,721 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 10:55:14,721 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025906A3DA80>)
2025-06-19 10:55:14,721 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025906A3DA80>) completed
2025-06-19 10:55:14,721 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025906A3DA80>)
2025-06-19 10:55:14,725 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025906A3DA80>) completed
2025-06-19 10:55:14,725 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 10:55:14,725 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 10:55:14,742 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 10:55:14,819 - asyncio - DEBUG - [Thread-3 (run_blocking_portal)] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 10:55:14,819 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 10:55:14,819 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 10:55:14,819 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 10:55:14,819 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpya7m9s7a\test_db.sqlite
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing <function connect.<locals>.connector at 0x0000025907DE1D00>
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation <function connect.<locals>.connector at 0x0000025907DE1D00> completed
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025907C70F40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000025907DE1620>, deterministic=True)
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025907C70F40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000025907DE1620>, deterministic=True) completed
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025907C70F40>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025907C70F40>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025907C70F40>)
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025907C70F40>) completed
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025907DE4B40>, 'PRAGMA read_uncommitted', [])
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025907DE4B40>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025907DE4B40>)
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025907DE4B40>) completed
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025907DE4B40>)
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025907DE4B40>) completed
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025907C70F40>)
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025907C70F40>) completed
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025907C70F40>)
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025907C70F40>) completed
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025907DE4C40>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025907DE4C40>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025907DE4C40>)
2025-06-19 10:55:14,819 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025907DE4C40>) completed
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025907DE4C40>)
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025907DE4C40>) completed
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025907C70F40>)
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025907C70F40>) completed
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025907DE4CC0>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025907DE4CC0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025907DE4CC0>)
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025907DE4CC0>) completed
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025907DE4CC0>)
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025907DE4CC0>) completed
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025907C70F40>)
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025907C70F40>) completed
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025907DE4E40>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025907DE4E40>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025907DE4E40>)
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025907DE4E40>) completed
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025907DE4E40>)
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025907DE4E40>) completed
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025907C70F40>)
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025907C70F40>) completed
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025907DE4DC0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025907DE4DC0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025907DE4DC0>)
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025907DE4DC0>) completed
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025907DE4DC0>)
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025907DE4DC0>) completed
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000025907C70F40>)
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000025907C70F40>) completed
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025907C70F40>)
2025-06-19 10:55:14,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025907C70F40>) completed
2025-06-19 10:55:14,830 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-19 10:55:14,830 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 10:55:14,830 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 10:55:15,033 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 10:55:15,033 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 10:55:15,217 - ultibot_backend.services.order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 10:55:15,217 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 10:55:15,217 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: qJUgW... (truncada por seguridad)
2025-06-19 10:55:15,217 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 10:55:15,233 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-3 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 10:55:15,233 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:195 - Dependency container initialized successfully.
2025-06-19 10:55:15,233 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 10:55:15,233 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 10:55:15,233 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 10:55:15,233 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:119 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 10:55:15,233 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025907C70F40>)
2025-06-19 10:55:15,233 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025907C70F40>) completed
2025-06-19 10:55:15,233 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025907E535C0>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0))
2025-06-19 10:55:15,233 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025907E535C0>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0)) completed
2025-06-19 10:55:15,233 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025907E535C0>)
2025-06-19 10:55:15,233 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025907E535C0>) completed
2025-06-19 10:55:15,233 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025907E535C0>)
2025-06-19 10:55:15,233 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025907E535C0>) completed
2025-06-19 10:55:15,233 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025907C70F40>)
2025-06-19 10:55:15,233 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025907C70F40>) completed
2025-06-19 10:55:15,233 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025907C70F40>)
2025-06-19 10:55:15,233 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025907C70F40>) completed
2025-06-19 10:55:15,233 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:132 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-19 10:55:15,233 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 10:55:15,233 - httpx - INFO - [MainThread] - _client.py:1038 - HTTP Request: GET http://testserver/api/v1/performance/strategies "HTTP/1.1 200 OK"
2025-06-19 10:55:15,517 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 10:55:15,517 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:198 - Shutting down dependency container...
2025-06-19 10:55:15,517 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:203 - Dependency container shut down.
2025-06-19 10:55:15,524 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 10:55:15,525 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 10:55:15,525 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 10:55:15,525 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:15,525 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:15,525 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:15,525 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 10:55:15,525 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000025906A3DA80>)
2025-06-19 10:55:15,525 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000025906A3DA80>) completed
2025-06-19 10:55:15,525 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000259069684F0>)
2025-06-19 10:55:15,525 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000259069684F0>) completed
2025-06-19 14:55:42,776 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 14:55:42,778 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 14:55:42,780 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 14:55:42,780 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:56174 - "GET /health HTTP/1.1" 200
2025-06-19 14:56:12,807 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 14:56:12,809 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 14:56:12,811 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 14:56:12,812 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:43210 - "GET /health HTTP/1.1" 200
2025-06-19 14:56:42,837 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 14:56:42,838 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 14:56:42,839 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 14:56:42,840 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:59560 - "GET /health HTTP/1.1" 200
2025-06-19 14:57:12,865 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 14:57:12,866 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 14:57:12,867 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 14:57:12,868 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:58560 - "GET /health HTTP/1.1" 200
2025-06-19 14:57:42,895 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 14:57:42,896 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 14:57:42,897 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 14:57:42,898 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:53288 - "GET /health HTTP/1.1" 200
2025-06-19 14:58:12,930 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 14:58:12,932 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 14:58:12,934 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 14:58:12,935 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:54356 - "GET /health HTTP/1.1" 200
2025-06-19 14:58:42,961 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 14:58:42,962 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 14:58:42,963 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 14:58:42,964 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:53964 - "GET /health HTTP/1.1" 200
2025-06-19 14:59:12,990 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 14:59:12,992 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 14:59:12,993 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 14:59:12,994 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:53080 - "GET /health HTTP/1.1" 200
2025-06-19 10:59:29,435 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 10:59:29,435 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 10:59:29,456 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 10:59:29,589 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 10:59:29,589 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 10:59:29,589 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmplgm7b5y8\test_db.sqlite
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000002450E856A20>
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000002450E856A20> completed
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002450E8505E0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002450E855D00>, deterministic=True)
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002450E8505E0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002450E855D00>, deterministic=True) completed
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002450E8505E0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002450E8505E0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E869EC0>, 'PRAGMA read_uncommitted', [])
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E869EC0>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E869EC0>)
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E869EC0>) completed
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E869EC0>)
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E869EC0>) completed
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:29,610 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:29,621 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E869CC0>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 10:59:29,621 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E869CC0>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 10:59:29,621 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E869CC0>)
2025-06-19 10:59:29,622 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E869CC0>) completed
2025-06-19 10:59:29,622 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E869CC0>)
2025-06-19 10:59:29,622 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E869CC0>) completed
2025-06-19 10:59:29,623 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:29,623 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:29,623 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E869DC0>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 10:59:29,624 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E869DC0>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 10:59:29,624 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E869DC0>)
2025-06-19 10:59:29,624 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E869DC0>) completed
2025-06-19 10:59:29,624 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E869DC0>)
2025-06-19 10:59:29,624 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E869DC0>) completed
2025-06-19 10:59:29,625 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:29,625 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:29,625 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E869E40>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 10:59:29,625 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E869E40>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 10:59:29,626 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E869E40>)
2025-06-19 10:59:29,626 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E869E40>) completed
2025-06-19 10:59:29,626 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E869E40>)
2025-06-19 10:59:29,626 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E869E40>) completed
2025-06-19 10:59:29,626 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:29,627 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:29,627 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E869F40>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 10:59:29,627 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E869F40>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 10:59:29,627 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E869F40>)
2025-06-19 10:59:29,627 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E869F40>) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E869F40>)
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E869F40>) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E869FC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E869FC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E869FC0>)
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E869FC0>) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E869FC0>)
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E869FC0>) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E86A140>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E86A140>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E86A140>)
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E86A140>) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E86A140>)
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E86A140>) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E86A0C0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E86A0C0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E86A0C0>)
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E86A0C0>) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E86A0C0>)
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E86A0C0>) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E86A2C0>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E86A2C0>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E86A2C0>)
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E86A2C0>) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E86A2C0>)
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E86A2C0>) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:29,628 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E86A440>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 10:59:29,640 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E86A440>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 10:59:29,641 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E86A440>)
2025-06-19 10:59:29,641 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E86A440>) completed
2025-06-19 10:59:29,642 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:29,642 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:29,642 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E86A040>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 10:59:29,642 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E86A040>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 10:59:29,642 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E86A040>)
2025-06-19 10:59:29,642 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E86A040>) completed
2025-06-19 10:59:29,647 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:29,647 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:29,647 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E869B40>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 10:59:29,649 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E869B40>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 10:59:29,649 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E869B40>)
2025-06-19 10:59:29,649 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E869B40>) completed
2025-06-19 10:59:29,649 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:29,649 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:29,649 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E86A1C0>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 10:59:29,649 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E86A1C0>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 10:59:29,649 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E86A1C0>)
2025-06-19 10:59:29,649 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E86A1C0>) completed
2025-06-19 10:59:29,649 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:29,654 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:29,654 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:29,654 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:29,655 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 10:59:29,658 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 10:59:29,658 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: lvXrb... (truncada por seguridad)
2025-06-19 10:59:29,658 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x000002450E9325C0>
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x000002450E9325C0> completed
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002450E949B70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002450E855D00>, deterministic=True)
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002450E949B70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002450E855D00>, deterministic=True) completed
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002450E949B70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002450E949B70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E949B70>)
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E949B70>) completed
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E9439C0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450E9439C0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E9439C0>)
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450E9439C0>) completed
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E9439C0>)
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450E9439C0>) completed
2025-06-19 10:59:29,662 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002450E949B70>)
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002450E949B70>) completed
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002450E949B70>)
2025-06-19 10:59:29,662 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002450E949B70>) completed
2025-06-19 10:59:29,662 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 10:59:29,662 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 10:59:29,683 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 10:59:29,741 - asyncio - DEBUG - [Thread-3 (run_blocking_portal)] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 10:59:29,756 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 10:59:29,756 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 10:59:29,756 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 10:59:29,756 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmplgm7b5y8\test_db.sqlite
2025-06-19 10:59:29,756 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing <function connect.<locals>.connector at 0x000002450FCEDE40>
2025-06-19 10:59:29,758 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation <function connect.<locals>.connector at 0x000002450FCEDE40> completed
2025-06-19 10:59:29,758 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002450EAAD030>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002450FCED760>, deterministic=True)
2025-06-19 10:59:29,758 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002450EAAD030>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000002450FCED760>, deterministic=True) completed
2025-06-19 10:59:29,758 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002450EAAD030>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 10:59:29,760 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000002450EAAD030>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 10:59:29,760 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450EAAD030>)
2025-06-19 10:59:29,761 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450EAAD030>) completed
2025-06-19 10:59:29,761 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450FCF0E40>, 'PRAGMA read_uncommitted', [])
2025-06-19 10:59:29,761 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450FCF0E40>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 10:59:29,761 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450FCF0E40>)
2025-06-19 10:59:29,762 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450FCF0E40>) completed
2025-06-19 10:59:29,762 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450FCF0E40>)
2025-06-19 10:59:29,762 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450FCF0E40>) completed
2025-06-19 10:59:29,762 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002450EAAD030>)
2025-06-19 10:59:29,762 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002450EAAD030>) completed
2025-06-19 10:59:29,762 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450EAAD030>)
2025-06-19 10:59:29,762 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450EAAD030>) completed
2025-06-19 10:59:29,762 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450FCF0F40>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 10:59:29,762 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450FCF0F40>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 10:59:29,762 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450FCF0F40>)
2025-06-19 10:59:29,762 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450FCF0F40>) completed
2025-06-19 10:59:29,762 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450FCF0F40>)
2025-06-19 10:59:29,762 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450FCF0F40>) completed
2025-06-19 10:59:29,762 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450EAAD030>)
2025-06-19 10:59:29,767 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450EAAD030>) completed
2025-06-19 10:59:29,767 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450FCF0FC0>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 10:59:29,767 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450FCF0FC0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 10:59:29,767 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450FCF0FC0>)
2025-06-19 10:59:29,767 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450FCF0FC0>) completed
2025-06-19 10:59:29,767 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450FCF0FC0>)
2025-06-19 10:59:29,767 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450FCF0FC0>) completed
2025-06-19 10:59:29,767 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450EAAD030>)
2025-06-19 10:59:29,767 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450EAAD030>) completed
2025-06-19 10:59:29,767 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450FCF1140>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 10:59:29,767 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450FCF1140>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 10:59:29,767 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450FCF1140>)
2025-06-19 10:59:29,767 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450FCF1140>) completed
2025-06-19 10:59:29,767 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450FCF1140>)
2025-06-19 10:59:29,767 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450FCF1140>) completed
2025-06-19 10:59:29,767 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450EAAD030>)
2025-06-19 10:59:29,771 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450EAAD030>) completed
2025-06-19 10:59:29,771 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450FCF10C0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 10:59:29,771 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450FCF10C0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 10:59:29,771 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450FCF10C0>)
2025-06-19 10:59:29,772 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450FCF10C0>) completed
2025-06-19 10:59:29,772 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450FCF10C0>)
2025-06-19 10:59:29,772 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450FCF10C0>) completed
2025-06-19 10:59:29,773 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002450EAAD030>)
2025-06-19 10:59:29,774 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000002450EAAD030>) completed
2025-06-19 10:59:29,774 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002450EAAD030>)
2025-06-19 10:59:29,774 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002450EAAD030>) completed
2025-06-19 10:59:29,774 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-19 10:59:29,774 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 10:59:29,776 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 10:59:29,977 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 10:59:29,978 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 10:59:30,191 - ultibot_backend.services.order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 10:59:30,191 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 10:59:30,191 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: lvXrb... (truncada por seguridad)
2025-06-19 10:59:30,191 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 10:59:30,194 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-3 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 10:59:30,194 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 10:59:30,194 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 10:59:30,194 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 10:59:30,199 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 10:59:30,199 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:125 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 10:59:30,206 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:30,206 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:30,206 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450FD87B40>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0))
2025-06-19 10:59:30,206 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000002450FD87B40>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0)) completed
2025-06-19 10:59:30,206 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450FD87B40>)
2025-06-19 10:59:30,206 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000002450FD87B40>) completed
2025-06-19 10:59:30,206 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450FD87B40>)
2025-06-19 10:59:30,206 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000002450FD87B40>) completed
2025-06-19 10:59:30,206 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:138 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-19 10:59:30,206 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 10:59:30,210 - httpx - INFO - [MainThread] - _client.py:1038 - HTTP Request: GET http://testserver/api/v1/performance/strategies "HTTP/1.1 200 OK"
2025-06-19 10:59:30,503 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 10:59:30,504 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 10:59:30,504 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 10:59:30,504 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 10:59:30,505 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 10:59:30,508 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 10:59:30,508 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:30,508 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:30,509 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:30,509 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 10:59:30,510 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002450E949B70>)
2025-06-19 10:59:30,510 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002450E949B70>) completed
2025-06-19 10:59:30,510 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000002450E8505E0>)
2025-06-19 10:59:30,510 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000002450E8505E0>) completed
2025-06-19 14:59:43,020 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 14:59:43,021 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 14:59:43,024 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 14:59:43,026 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:41256 - "GET /health HTTP/1.1" 200
2025-06-19 15:00:13,053 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:00:13,056 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:00:13,058 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:00:13,059 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:59282 - "GET /health HTTP/1.1" 200
2025-06-19 11:00:16,922 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:00:16,922 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 11:00:16,945 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 11:00:17,067 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:00:17,068 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:00:17,069 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmprkgqopl0\test_db.sqlite
2025-06-19 11:00:17,079 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x0000023A656AA840>
2025-06-19 11:00:17,079 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x0000023A656AA840> completed
2025-06-19 11:00:17,079 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000023A656B46D0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000023A656A9B20>, deterministic=True)
2025-06-19 11:00:17,079 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000023A656B46D0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000023A656A9B20>, deterministic=True) completed
2025-06-19 11:00:17,079 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000023A656B46D0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:00:17,079 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000023A656B46D0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:00:17,079 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,079 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,079 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A59C0>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:00:17,088 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A59C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:00:17,088 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A656A59C0>)
2025-06-19 11:00:17,089 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A656A59C0>) completed
2025-06-19 11:00:17,089 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A59C0>)
2025-06-19 11:00:17,090 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A59C0>) completed
2025-06-19 11:00:17,090 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,090 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,092 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,092 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,092 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A57C0>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:00:17,092 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A57C0>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:00:17,092 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A656A57C0>)
2025-06-19 11:00:17,092 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A656A57C0>) completed
2025-06-19 11:00:17,092 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A57C0>)
2025-06-19 11:00:17,092 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A57C0>) completed
2025-06-19 11:00:17,092 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,092 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,092 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A58C0>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 11:00:17,095 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A58C0>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 11:00:17,095 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A656A58C0>)
2025-06-19 11:00:17,095 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A656A58C0>) completed
2025-06-19 11:00:17,095 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A58C0>)
2025-06-19 11:00:17,095 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A58C0>) completed
2025-06-19 11:00:17,095 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,095 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,095 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A5940>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:00:17,097 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A5940>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:00:17,097 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A656A5940>)
2025-06-19 11:00:17,097 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A656A5940>) completed
2025-06-19 11:00:17,097 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A5940>)
2025-06-19 11:00:17,100 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A5940>) completed
2025-06-19 11:00:17,100 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,100 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,101 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A6550AEC0>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 11:00:17,101 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A6550AEC0>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 11:00:17,101 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A6550AEC0>)
2025-06-19 11:00:17,101 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A6550AEC0>) completed
2025-06-19 11:00:17,101 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A6550AEC0>)
2025-06-19 11:00:17,102 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A6550AEC0>) completed
2025-06-19 11:00:17,102 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,102 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,102 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A6550AF40>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:00:17,102 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A6550AF40>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:00:17,103 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A6550AF40>)
2025-06-19 11:00:17,103 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A6550AF40>) completed
2025-06-19 11:00:17,103 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A6550AF40>)
2025-06-19 11:00:17,103 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A6550AF40>) completed
2025-06-19 11:00:17,103 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,104 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,105 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A5A40>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 11:00:17,105 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A5A40>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A656A5A40>)
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A656A5A40>) completed
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A5A40>)
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A5A40>) completed
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A5AC0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A5AC0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A656A5AC0>)
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A656A5AC0>) completed
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A5AC0>)
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A5AC0>) completed
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A5C40>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A5C40>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A656A5C40>)
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A656A5C40>) completed
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A5C40>)
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A5C40>) completed
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,106 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A5DC0>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 11:00:17,116 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A5DC0>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 11:00:17,116 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A5DC0>)
2025-06-19 11:00:17,116 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A5DC0>) completed
2025-06-19 11:00:17,116 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,116 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,116 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A56C0>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:00:17,119 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A56C0>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:00:17,119 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A56C0>)
2025-06-19 11:00:17,121 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A56C0>) completed
2025-06-19 11:00:17,121 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,122 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,122 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A7140>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:00:17,123 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A7140>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:00:17,123 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A7140>)
2025-06-19 11:00:17,123 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A7140>) completed
2025-06-19 11:00:17,123 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,123 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,123 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A5CC0>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:00:17,123 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656A5CC0>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:00:17,123 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A5CC0>)
2025-06-19 11:00:17,123 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656A5CC0>) completed
2025-06-19 11:00:17,123 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,123 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,123 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,123 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,123 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:00:17,134 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:00:17,135 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: O08cM... (truncada por seguridad)
2025-06-19 11:00:17,137 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x0000023A656E65C0>
2025-06-19 11:00:17,138 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x0000023A656E65C0> completed
2025-06-19 11:00:17,139 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000023A656FD8A0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000023A656A9B20>, deterministic=True)
2025-06-19 11:00:17,139 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000023A656FD8A0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000023A656A9B20>, deterministic=True) completed
2025-06-19 11:00:17,139 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000023A656FD8A0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:00:17,139 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000023A656FD8A0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:00:17,140 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656FD8A0>)
2025-06-19 11:00:17,140 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656FD8A0>) completed
2025-06-19 11:00:17,141 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656D6BC0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 11:00:17,141 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A656D6BC0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 11:00:17,141 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A656D6BC0>)
2025-06-19 11:00:17,141 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A656D6BC0>) completed
2025-06-19 11:00:17,142 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656D6BC0>)
2025-06-19 11:00:17,142 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A656D6BC0>) completed
2025-06-19 11:00:17,142 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:00:17,142 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000023A656FD8A0>)
2025-06-19 11:00:17,142 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000023A656FD8A0>) completed
2025-06-19 11:00:17,143 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000023A656FD8A0>)
2025-06-19 11:00:17,143 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000023A656FD8A0>) completed
2025-06-19 11:00:17,143 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:00:17,143 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:00:17,160 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:00:17,172 - asyncio - DEBUG - [Thread-3 (run_blocking_portal)] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:00:17,172 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:00:17,172 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:00:17,172 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:00:17,172 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmprkgqopl0\test_db.sqlite
2025-06-19 11:00:17,172 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing <function connect.<locals>.connector at 0x0000023A66A423E0>
2025-06-19 11:00:17,172 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation <function connect.<locals>.connector at 0x0000023A66A423E0> completed
2025-06-19 11:00:17,172 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000023A66A49120>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000023A66A41D00>, deterministic=True)
2025-06-19 11:00:17,172 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000023A66A49120>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000023A66A41D00>, deterministic=True) completed
2025-06-19 11:00:17,172 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000023A66A49120>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:00:17,172 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000023A66A49120>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:00:17,172 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A66A49120>)
2025-06-19 11:00:17,172 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A66A49120>) completed
2025-06-19 11:00:17,179 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A66A50CC0>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:00:17,179 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A66A50CC0>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:00:17,179 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A66A50CC0>)
2025-06-19 11:00:17,179 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A66A50CC0>) completed
2025-06-19 11:00:17,179 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A66A50CC0>)
2025-06-19 11:00:17,179 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A66A50CC0>) completed
2025-06-19 11:00:17,179 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000023A66A49120>)
2025-06-19 11:00:17,179 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000023A66A49120>) completed
2025-06-19 11:00:17,179 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A66A49120>)
2025-06-19 11:00:17,179 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A66A49120>) completed
2025-06-19 11:00:17,181 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A66A50DC0>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:00:17,181 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A66A50DC0>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:00:17,182 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A66A50DC0>)
2025-06-19 11:00:17,182 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A66A50DC0>) completed
2025-06-19 11:00:17,182 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A66A50DC0>)
2025-06-19 11:00:17,182 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A66A50DC0>) completed
2025-06-19 11:00:17,183 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A66A49120>)
2025-06-19 11:00:17,183 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A66A49120>) completed
2025-06-19 11:00:17,184 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A66A50E40>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:00:17,184 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A66A50E40>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:00:17,184 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A66A50E40>)
2025-06-19 11:00:17,184 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A66A50E40>) completed
2025-06-19 11:00:17,184 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A66A50E40>)
2025-06-19 11:00:17,185 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A66A50E40>) completed
2025-06-19 11:00:17,185 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A66A49120>)
2025-06-19 11:00:17,185 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A66A49120>) completed
2025-06-19 11:00:17,185 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A66A50FC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:00:17,185 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A66A50FC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:00:17,185 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A66A50FC0>)
2025-06-19 11:00:17,185 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A66A50FC0>) completed
2025-06-19 11:00:17,185 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A66A50FC0>)
2025-06-19 11:00:17,185 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A66A50FC0>) completed
2025-06-19 11:00:17,185 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A66A49120>)
2025-06-19 11:00:17,185 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A66A49120>) completed
2025-06-19 11:00:17,185 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A66A50F40>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:00:17,185 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A66A50F40>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:00:17,188 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A66A50F40>)
2025-06-19 11:00:17,188 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A66A50F40>) completed
2025-06-19 11:00:17,188 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A66A50F40>)
2025-06-19 11:00:17,188 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A66A50F40>) completed
2025-06-19 11:00:17,188 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000023A66A49120>)
2025-06-19 11:00:17,189 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000023A66A49120>) completed
2025-06-19 11:00:17,189 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000023A66A49120>)
2025-06-19 11:00:17,189 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000023A66A49120>) completed
2025-06-19 11:00:17,189 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-19 11:00:17,190 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:00:17,191 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:00:17,384 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:00:17,385 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:00:17,591 - ultibot_backend.services.order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:00:17,591 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:00:17,591 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: O08cM... (truncada por seguridad)
2025-06-19 11:00:17,591 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:00:17,591 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-3 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:00:17,591 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:00:17,591 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:00:17,591 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:00:17,600 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:00:17,601 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:125 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 11:00:17,607 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,608 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,608 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A66ACF9C0>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0))
2025-06-19 11:00:17,608 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000023A66ACF9C0>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0)) completed
2025-06-19 11:00:17,608 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A66ACF9C0>)
2025-06-19 11:00:17,608 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000023A66ACF9C0>) completed
2025-06-19 11:00:17,608 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A66ACF9C0>)
2025-06-19 11:00:17,608 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000023A66ACF9C0>) completed
2025-06-19 11:00:17,610 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:138 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-19 11:00:17,610 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:00:17,612 - httpx - INFO - [MainThread] - _client.py:1038 - HTTP Request: GET http://testserver/api/v1/performance/strategies "HTTP/1.1 200 OK"
2025-06-19 11:00:17,951 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:00:17,951 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:00:17,955 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:00:17,955 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:00:17,956 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:00:17,958 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:00:17,958 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,959 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,959 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,959 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 11:00:17,960 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000023A656FD8A0>)
2025-06-19 11:00:17,960 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000023A656FD8A0>) completed
2025-06-19 11:00:17,960 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000023A656B46D0>)
2025-06-19 11:00:17,960 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000023A656B46D0>) completed
2025-06-19 15:00:43,086 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:00:43,087 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:00:43,088 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:00:43,088 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:48966 - "GET /health HTTP/1.1" 200
2025-06-19 15:01:13,113 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:01:13,114 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:01:13,115 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:01:13,116 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:48840 - "GET /health HTTP/1.1" 200
2025-06-19 15:01:43,141 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:01:43,143 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:01:43,144 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:01:43,145 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:38638 - "GET /health HTTP/1.1" 200
2025-06-19 15:02:13,167 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:02:13,168 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:02:13,169 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:02:13,170 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:55964 - "GET /health HTTP/1.1" 200
2025-06-19 11:02:20,131 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:02:20,131 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 11:02:20,154 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 11:02:20,275 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:02:20,275 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:02:20,275 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmp9q6v9g2a\test_db.sqlite
2025-06-19 11:02:20,289 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x0000021CE4A9AAC0>
2025-06-19 11:02:20,291 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x0000021CE4A9AAC0> completed
2025-06-19 11:02:20,293 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000021CE4AA0310>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000021CE4A99E40>, deterministic=True)
2025-06-19 11:02:20,293 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000021CE4AA0310>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000021CE4A99E40>, deterministic=True) completed
2025-06-19 11:02:20,294 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000021CE4AA0310>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:02:20,294 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000021CE4AA0310>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:02:20,294 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,294 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,295 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A958C0>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:02:20,295 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A958C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:02:20,295 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A958C0>)
2025-06-19 11:02:20,295 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A958C0>) completed
2025-06-19 11:02:20,296 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A958C0>)
2025-06-19 11:02:20,296 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A958C0>) completed
2025-06-19 11:02:20,296 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,296 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,297 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,297 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,297 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A956C0>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:02:20,298 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A956C0>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:02:20,298 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A956C0>)
2025-06-19 11:02:20,298 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A956C0>) completed
2025-06-19 11:02:20,298 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A956C0>)
2025-06-19 11:02:20,299 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A956C0>) completed
2025-06-19 11:02:20,299 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,299 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A957C0>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A957C0>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A957C0>)
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A957C0>) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A957C0>)
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A957C0>) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A95840>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A95840>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A95840>)
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A95840>) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A95840>)
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A95840>) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A95940>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A95940>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A95940>)
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A95940>) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A95940>)
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A95940>) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A959C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A959C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A959C0>)
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A959C0>) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A959C0>)
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A959C0>) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A95B40>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A95B40>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A95B40>)
2025-06-19 11:02:20,300 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A95B40>) completed
2025-06-19 11:02:20,307 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A95B40>)
2025-06-19 11:02:20,308 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A95B40>) completed
2025-06-19 11:02:20,308 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,309 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,309 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A95AC0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:02:20,309 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A95AC0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:02:20,310 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A95AC0>)
2025-06-19 11:02:20,310 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A95AC0>) completed
2025-06-19 11:02:20,310 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A95AC0>)
2025-06-19 11:02:20,310 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A95AC0>) completed
2025-06-19 11:02:20,311 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,311 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,312 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A95CC0>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 11:02:20,312 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A95CC0>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 11:02:20,312 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A95CC0>)
2025-06-19 11:02:20,312 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4A95CC0>) completed
2025-06-19 11:02:20,313 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A95CC0>)
2025-06-19 11:02:20,313 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A95CC0>) completed
2025-06-19 11:02:20,314 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,314 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,314 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A95E40>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 11:02:20,317 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A95E40>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 11:02:20,317 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A95E40>)
2025-06-19 11:02:20,317 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A95E40>) completed
2025-06-19 11:02:20,317 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,317 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,317 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A95A40>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:02:20,319 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A95A40>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:02:20,319 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A95A40>)
2025-06-19 11:02:20,321 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A95A40>) completed
2025-06-19 11:02:20,321 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,321 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,321 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A971C0>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:02:20,321 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A971C0>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:02:20,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A971C0>)
2025-06-19 11:02:20,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A971C0>) completed
2025-06-19 11:02:20,326 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,326 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,326 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A95D40>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:02:20,328 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4A95D40>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:02:20,328 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A95D40>)
2025-06-19 11:02:20,328 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4A95D40>) completed
2025-06-19 11:02:20,330 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,330 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,330 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,330 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,330 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:02:20,334 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:02:20,334 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: xcboC... (truncada por seguridad)
2025-06-19 11:02:20,334 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x0000021CE4AC2980>
2025-06-19 11:02:20,336 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x0000021CE4AC2980> completed
2025-06-19 11:02:20,336 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000021CE4AF1990>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000021CE4A99E40>, deterministic=True)
2025-06-19 11:02:20,337 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000021CE4AF1990>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000021CE4A99E40>, deterministic=True) completed
2025-06-19 11:02:20,337 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000021CE4AF1990>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:02:20,337 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000021CE4AF1990>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:02:20,337 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AF1990>)
2025-06-19 11:02:20,337 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AF1990>) completed
2025-06-19 11:02:20,337 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4ACABC0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 11:02:20,337 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE4ACABC0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 11:02:20,339 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4ACABC0>)
2025-06-19 11:02:20,339 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE4ACABC0>) completed
2025-06-19 11:02:20,339 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4ACABC0>)
2025-06-19 11:02:20,339 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE4ACABC0>) completed
2025-06-19 11:02:20,339 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:02:20,339 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000021CE4AF1990>)
2025-06-19 11:02:20,341 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000021CE4AF1990>) completed
2025-06-19 11:02:20,341 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000021CE4AF1990>)
2025-06-19 11:02:20,341 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000021CE4AF1990>) completed
2025-06-19 11:02:20,342 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:02:20,343 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:02:20,359 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:02:20,370 - asyncio - DEBUG - [Thread-3 (run_blocking_portal)] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:02:20,372 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:02:20,372 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:02:20,372 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:02:20,372 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmp9q6v9g2a\test_db.sqlite
2025-06-19 11:02:20,373 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing <function connect.<locals>.connector at 0x0000021CE5E36840>
2025-06-19 11:02:20,374 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation <function connect.<locals>.connector at 0x0000021CE5E36840> completed
2025-06-19 11:02:20,374 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000021CE4CED300>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000021CE5E36160>, deterministic=True)
2025-06-19 11:02:20,375 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000021CE4CED300>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000021CE5E36160>, deterministic=True) completed
2025-06-19 11:02:20,375 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000021CE4CED300>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:02:20,376 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000021CE4CED300>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:02:20,376 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4CED300>)
2025-06-19 11:02:20,376 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4CED300>) completed
2025-06-19 11:02:20,376 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE5E44CC0>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:02:20,377 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE5E44CC0>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:02:20,377 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE5E44CC0>)
2025-06-19 11:02:20,377 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE5E44CC0>) completed
2025-06-19 11:02:20,377 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE5E44CC0>)
2025-06-19 11:02:20,377 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE5E44CC0>) completed
2025-06-19 11:02:20,378 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000021CE4CED300>)
2025-06-19 11:02:20,378 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000021CE4CED300>) completed
2025-06-19 11:02:20,378 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4CED300>)
2025-06-19 11:02:20,378 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4CED300>) completed
2025-06-19 11:02:20,379 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE5E44DC0>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:02:20,379 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE5E44DC0>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:02:20,379 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE5E44DC0>)
2025-06-19 11:02:20,379 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE5E44DC0>) completed
2025-06-19 11:02:20,380 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE5E44DC0>)
2025-06-19 11:02:20,380 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE5E44DC0>) completed
2025-06-19 11:02:20,380 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4CED300>)
2025-06-19 11:02:20,380 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4CED300>) completed
2025-06-19 11:02:20,381 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE5E44E40>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:02:20,381 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE5E44E40>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:02:20,381 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE5E44E40>)
2025-06-19 11:02:20,382 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE5E44E40>) completed
2025-06-19 11:02:20,382 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE5E44E40>)
2025-06-19 11:02:20,382 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE5E44E40>) completed
2025-06-19 11:02:20,382 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4CED300>)
2025-06-19 11:02:20,382 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4CED300>) completed
2025-06-19 11:02:20,383 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE5E44FC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:02:20,383 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE5E44FC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:02:20,383 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE5E44FC0>)
2025-06-19 11:02:20,383 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE5E44FC0>) completed
2025-06-19 11:02:20,384 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE5E44FC0>)
2025-06-19 11:02:20,384 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE5E44FC0>) completed
2025-06-19 11:02:20,384 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4CED300>)
2025-06-19 11:02:20,384 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4CED300>) completed
2025-06-19 11:02:20,384 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE5E44F40>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:02:20,385 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE5E44F40>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:02:20,385 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE5E44F40>)
2025-06-19 11:02:20,385 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE5E44F40>) completed
2025-06-19 11:02:20,385 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE5E44F40>)
2025-06-19 11:02:20,385 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE5E44F40>) completed
2025-06-19 11:02:20,386 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000021CE4CED300>)
2025-06-19 11:02:20,386 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000021CE4CED300>) completed
2025-06-19 11:02:20,386 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000021CE4CED300>)
2025-06-19 11:02:20,386 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000021CE4CED300>) completed
2025-06-19 11:02:20,386 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-19 11:02:20,387 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:02:20,388 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:02:20,595 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:02:20,596 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:02:20,787 - ultibot_backend.services.order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:02:20,787 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:02:20,787 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: xcboC... (truncada por seguridad)
2025-06-19 11:02:20,787 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:02:20,789 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-3 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:02:20,789 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:02:20,791 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:02:20,791 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:02:20,797 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:02:20,797 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:125 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 11:02:20,803 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:20,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:20,806 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE5EC39C0>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0))
2025-06-19 11:02:20,806 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000021CE5EC39C0>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0)) completed
2025-06-19 11:02:20,807 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE5EC39C0>)
2025-06-19 11:02:20,807 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000021CE5EC39C0>) completed
2025-06-19 11:02:20,808 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE5EC39C0>)
2025-06-19 11:02:20,809 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000021CE5EC39C0>) completed
2025-06-19 11:02:20,810 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:138 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-19 11:02:20,811 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:02:20,812 - httpx - INFO - [MainThread] - _client.py:1038 - HTTP Request: GET http://testserver/api/v1/performance/strategies "HTTP/1.1 200 OK"
2025-06-19 11:02:21,142 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:02:21,142 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:02:21,142 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:02:21,142 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:02:21,158 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:02:21,158 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:02:21,158 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:21,158 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:21,158 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:21,158 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 11:02:21,158 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000021CE4AF1990>)
2025-06-19 11:02:21,158 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000021CE4AF1990>) completed
2025-06-19 11:02:21,158 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000021CE4AA0310>)
2025-06-19 11:02:21,158 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000021CE4AA0310>) completed
2025-06-19 15:02:43,203 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:02:43,205 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:02:43,206 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:02:43,207 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:53984 - "GET /health HTTP/1.1" 200
2025-06-19 11:02:50,413 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:02:50,413 - ultibot_backend - INFO - [MainThread] - main.py:144 - Registrando routers de la API...
2025-06-19 11:02:50,427 - ultibot_backend - INFO - [MainThread] - main.py:156 - Todos los routers han sido registrados.
2025-06-19 11:02:50,549 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:02:50,549 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:02:50,549 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpssrjbwj1\test_db.sqlite
2025-06-19 11:02:50,567 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000001DDD9746AC0>
2025-06-19 11:02:50,568 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000001DDD9746AC0> completed
2025-06-19 11:02:50,568 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DDD97545E0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001DDD9745DA0>, deterministic=True)
2025-06-19 11:02:50,568 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DDD97545E0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001DDD9745DA0>, deterministic=True) completed
2025-06-19 11:02:50,568 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DDD97545E0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:02:50,568 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DDD97545E0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:02:50,568 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,568 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,568 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD97497C0>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:02:50,575 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD97497C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:02:50,575 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD97497C0>)
2025-06-19 11:02:50,575 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD97497C0>) completed
2025-06-19 11:02:50,576 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD97497C0>)
2025-06-19 11:02:50,576 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD97497C0>) completed
2025-06-19 11:02:50,576 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,577 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,577 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,578 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,578 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD97495C0>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:02:50,578 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD97495C0>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:02:50,578 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD97495C0>)
2025-06-19 11:02:50,579 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD97495C0>) completed
2025-06-19 11:02:50,579 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD97495C0>)
2025-06-19 11:02:50,579 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD97495C0>) completed
2025-06-19 11:02:50,579 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,580 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,580 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD97496C0>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 11:02:50,580 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD97496C0>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 11:02:50,581 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD97496C0>)
2025-06-19 11:02:50,581 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD97496C0>) completed
2025-06-19 11:02:50,581 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD97496C0>)
2025-06-19 11:02:50,581 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD97496C0>) completed
2025-06-19 11:02:50,581 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,582 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,582 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD9749740>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:02:50,582 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD9749740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:02:50,582 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD9749740>)
2025-06-19 11:02:50,582 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD9749740>) completed
2025-06-19 11:02:50,583 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD9749740>)
2025-06-19 11:02:50,583 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD9749740>) completed
2025-06-19 11:02:50,583 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,583 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,584 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD9749840>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 11:02:50,584 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD9749840>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD9749840>)
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD9749840>) completed
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD9749840>)
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD9749840>) completed
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD97498C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD97498C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD97498C0>)
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD97498C0>) completed
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD97498C0>)
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD97498C0>) completed
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD9749A40>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD9749A40>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD9749A40>)
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD9749A40>) completed
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD9749A40>)
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD9749A40>) completed
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD97499C0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD97499C0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD97499C0>)
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD97499C0>) completed
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD97499C0>)
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD97499C0>) completed
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,591 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD9749BC0>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 11:02:50,591 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD9749BC0>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 11:02:50,591 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD9749BC0>)
2025-06-19 11:02:50,591 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD9749BC0>) completed
2025-06-19 11:02:50,591 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD9749BC0>)
2025-06-19 11:02:50,591 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD9749BC0>) completed
2025-06-19 11:02:50,594 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,594 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,594 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD9749D40>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 11:02:50,609 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD9749D40>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 11:02:50,610 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD9749D40>)
2025-06-19 11:02:50,610 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD9749D40>) completed
2025-06-19 11:02:50,610 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,610 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,610 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD9749940>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:02:50,623 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD9749940>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:02:50,623 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD9749940>)
2025-06-19 11:02:50,623 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD9749940>) completed
2025-06-19 11:02:50,625 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,625 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,625 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD9749440>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:02:50,636 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD9749440>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:02:50,636 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD9749440>)
2025-06-19 11:02:50,637 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD9749440>) completed
2025-06-19 11:02:50,637 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,637 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,638 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD9749C40>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:02:50,639 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD9749C40>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:02:50,640 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD9749C40>)
2025-06-19 11:02:50,640 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD9749C40>) completed
2025-06-19 11:02:50,640 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,641 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,641 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,641 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,641 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:02:50,645 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:02:50,646 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: zuHip... (truncada por seguridad)
2025-06-19 11:02:50,647 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x000001DDD97805E0>
2025-06-19 11:02:50,649 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x000001DDD97805E0> completed
2025-06-19 11:02:50,649 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DDD9785B70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001DDD9745DA0>, deterministic=True)
2025-06-19 11:02:50,650 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DDD9785B70>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001DDD9745DA0>, deterministic=True) completed
2025-06-19 11:02:50,650 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DDD9785B70>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:02:50,650 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DDD9785B70>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:02:50,651 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD9785B70>)
2025-06-19 11:02:50,651 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD9785B70>) completed
2025-06-19 11:02:50,651 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD978F6C0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 11:02:50,652 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDD978F6C0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 11:02:50,652 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD978F6C0>)
2025-06-19 11:02:50,652 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDD978F6C0>) completed
2025-06-19 11:02:50,653 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD978F6C0>)
2025-06-19 11:02:50,653 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDD978F6C0>) completed
2025-06-19 11:02:50,653 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:02:50,653 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DDD9785B70>)
2025-06-19 11:02:50,654 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DDD9785B70>) completed
2025-06-19 11:02:50,654 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DDD9785B70>)
2025-06-19 11:02:50,654 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DDD9785B70>) completed
2025-06-19 11:02:50,655 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:02:50,655 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:02:50,669 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:02:50,677 - asyncio - DEBUG - [Thread-3 (run_blocking_portal)] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:02:50,677 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:02:50,677 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:02:50,677 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:87 - Modo de prueba detectado. La inicializaci√≥n del contenedor se gestionar√° por los tests.
2025-06-19 11:02:50,677 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:93 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:02:50,689 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:113 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:02:50,692 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:125 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 11:02:50,694 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:50,694 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:50,694 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDDAB46340>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0))
2025-06-19 11:02:50,694 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DDDAB46340>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0)) completed
2025-06-19 11:02:50,694 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDDAB46340>)
2025-06-19 11:02:50,694 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DDDAB46340>) completed
2025-06-19 11:02:50,694 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDDAB46340>)
2025-06-19 11:02:50,694 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DDDAB46340>) completed
2025-06-19 11:02:50,694 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:138 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-19 11:02:50,694 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:115 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:02:50,694 - httpx - INFO - [MainThread] - _client.py:1038 - HTTP Request: GET http://testserver/api/v1/performance/strategies "HTTP/1.1 200 OK"
2025-06-19 11:02:51,077 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:02:51,078 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:02:51,078 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:02:51,078 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:99 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:02:51,078 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:02:51,078 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:02:51,078 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:51,078 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:51,078 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:51,078 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 11:02:51,078 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001DDD9785B70>)
2025-06-19 11:02:51,078 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001DDD9785B70>) completed
2025-06-19 11:02:51,078 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001DDD97545E0>)
2025-06-19 11:02:51,078 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001DDD97545E0>) completed
2025-06-19 15:03:13,233 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:03:13,235 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:03:13,236 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:03:13,237 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:51830 - "GET /health HTTP/1.1" 200
2025-06-19 15:03:43,263 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:03:43,265 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:03:43,267 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:03:43,267 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:55544 - "GET /health HTTP/1.1" 200
2025-06-19 11:03:44,345 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:03:44,345 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 11:03:44,361 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 11:03:44,488 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:03:44,489 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:03:44,490 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmp35o4he3w\test_db.sqlite
2025-06-19 11:03:44,502 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000001C6674CEB60>
2025-06-19 11:03:44,505 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000001C6674CEB60> completed
2025-06-19 11:03:44,505 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001C6674D8310>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001C6674CDEE0>, deterministic=True)
2025-06-19 11:03:44,505 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001C6674D8310>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001C6674CDEE0>, deterministic=True) completed
2025-06-19 11:03:44,505 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001C6674D8310>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:03:44,505 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001C6674D8310>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:03:44,505 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:44,509 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:44,509 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9940>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:03:44,509 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9940>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:03:44,510 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C9940>)
2025-06-19 11:03:44,510 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C9940>) completed
2025-06-19 11:03:44,510 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9940>)
2025-06-19 11:03:44,510 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9940>) completed
2025-06-19 11:03:44,511 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:44,511 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:44,511 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:44,512 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:44,512 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9740>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:03:44,513 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9740>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:03:44,513 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C9740>)
2025-06-19 11:03:44,513 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C9740>) completed
2025-06-19 11:03:44,514 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9740>)
2025-06-19 11:03:44,514 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9740>) completed
2025-06-19 11:03:44,514 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:44,514 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:44,515 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9840>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 11:03:44,515 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9840>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 11:03:44,515 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C9840>)
2025-06-19 11:03:44,515 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C9840>) completed
2025-06-19 11:03:44,516 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9840>)
2025-06-19 11:03:44,516 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9840>) completed
2025-06-19 11:03:44,516 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:44,516 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:44,516 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C98C0>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:03:44,517 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C98C0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:03:44,517 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C98C0>)
2025-06-19 11:03:44,517 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C98C0>) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C98C0>)
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C98C0>) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C99C0>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C99C0>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C99C0>)
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C99C0>) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C99C0>)
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C99C0>) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9A40>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9A40>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C9A40>)
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C9A40>) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9A40>)
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9A40>) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9BC0>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9BC0>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C9BC0>)
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C9BC0>) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9BC0>)
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9BC0>) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9B40>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9B40>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C9B40>)
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C9B40>) completed
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9B40>)
2025-06-19 11:03:44,518 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9B40>) completed
2025-06-19 11:03:44,526 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:44,526 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:44,526 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9D40>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 11:03:44,526 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9D40>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 11:03:44,527 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C9D40>)
2025-06-19 11:03:44,527 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C6674C9D40>) completed
2025-06-19 11:03:44,527 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9D40>)
2025-06-19 11:03:44,527 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9D40>) completed
2025-06-19 11:03:44,529 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:44,529 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:44,529 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9EC0>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9EC0>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9EC0>)
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9EC0>) completed
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9AC0>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9AC0>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9AC0>)
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9AC0>) completed
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674CB240>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674CB240>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674CB240>)
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674CB240>) completed
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:44,530 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9DC0>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:03:44,544 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C6674C9DC0>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9DC0>)
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C6674C9DC0>) completed
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:44,545 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:03:44,545 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:03:44,545 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: 3dxtc... (truncada por seguridad)
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x000001C6674E2980>
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x000001C6674E2980> completed
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001C6675218A0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001C6674CDEE0>, deterministic=True)
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001C6675218A0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001C6674CDEE0>, deterministic=True) completed
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001C6675218A0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001C6675218A0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6675218A0>)
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6675218A0>) completed
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C667502C40>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C667502C40>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C667502C40>)
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C667502C40>) completed
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C667502C40>)
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C667502C40>) completed
2025-06-19 11:03:44,545 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:03:44,545 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C6675218A0>)
2025-06-19 11:03:44,558 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C6675218A0>) completed
2025-06-19 11:03:44,558 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C6675218A0>)
2025-06-19 11:03:44,558 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C6675218A0>) completed
2025-06-19 11:03:44,558 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:03:44,559 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:03:44,574 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:03:44,586 - asyncio - DEBUG - [Thread-3 (run_blocking_portal)] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:03:44,587 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:03:44,588 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:03:44,588 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:03:44,588 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmp35o4he3w\test_db.sqlite
2025-06-19 11:03:44,589 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing <function connect.<locals>.connector at 0x000001C668876840>
2025-06-19 11:03:44,589 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation <function connect.<locals>.connector at 0x000001C668876840> completed
2025-06-19 11:03:44,589 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001C668881120>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001C668876160>, deterministic=True)
2025-06-19 11:03:44,589 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001C668881120>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001C668876160>, deterministic=True) completed
2025-06-19 11:03:44,590 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001C668881120>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:03:44,590 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001C668881120>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:03:44,590 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C668881120>)
2025-06-19 11:03:44,591 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C668881120>) completed
2025-06-19 11:03:44,591 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C668884D40>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:03:44,591 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C668884D40>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:03:44,591 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C668884D40>)
2025-06-19 11:03:44,591 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C668884D40>) completed
2025-06-19 11:03:44,592 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C668884D40>)
2025-06-19 11:03:44,592 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C668884D40>) completed
2025-06-19 11:03:44,592 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C668881120>)
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C668881120>) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C668881120>)
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C668881120>) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C668884E40>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C668884E40>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C668884E40>)
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C668884E40>) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C668884E40>)
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C668884E40>) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C668881120>)
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C668881120>) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C668884EC0>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C668884EC0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C668884EC0>)
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C668884EC0>) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C668884EC0>)
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C668884EC0>) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C668881120>)
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C668881120>) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C668885040>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C668885040>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C668885040>)
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C668885040>) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C668885040>)
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C668885040>) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C668881120>)
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C668881120>) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C668884FC0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C668884FC0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C668884FC0>)
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C668884FC0>) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C668884FC0>)
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C668884FC0>) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001C668881120>)
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001C668881120>) completed
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C668881120>)
2025-06-19 11:03:44,593 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C668881120>) completed
2025-06-19 11:03:44,593 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-19 11:03:44,593 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:03:44,593 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:03:44,798 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:03:44,798 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:03:44,993 - ultibot_backend.services.order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:03:44,994 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:03:44,994 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: 3dxtc... (truncada por seguridad)
2025-06-19 11:03:44,994 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:03:44,995 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-3 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:03:44,995 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:03:44,995 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:03:44,995 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:03:44,995 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:03:44,995 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:125 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 11:03:45,007 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:45,007 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:45,007 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C66891FA40>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0))
2025-06-19 11:03:45,007 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001C66891FA40>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0)) completed
2025-06-19 11:03:45,007 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C66891FA40>)
2025-06-19 11:03:45,007 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001C66891FA40>) completed
2025-06-19 11:03:45,009 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C66891FA40>)
2025-06-19 11:03:45,009 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001C66891FA40>) completed
2025-06-19 11:03:45,010 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:138 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-19 11:03:45,011 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:03:45,011 - httpx - INFO - [MainThread] - _client.py:1038 - HTTP Request: GET http://testserver/api/v1/performance/strategies "HTTP/1.1 200 OK"
2025-06-19 11:03:45,345 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:03:45,345 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:03:45,345 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:03:45,345 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:03:45,345 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:03:45,345 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:03:45,345 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:45,345 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:45,345 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:45,345 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 11:03:45,345 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001C6675218A0>)
2025-06-19 11:03:45,345 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001C6675218A0>) completed
2025-06-19 11:03:45,345 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001C6674D8310>)
2025-06-19 11:03:45,345 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001C6674D8310>) completed
2025-06-19 15:04:13,295 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:04:13,297 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:04:13,298 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:04:13,299 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:46882 - "GET /health HTTP/1.1" 200
2025-06-19 11:04:31,546 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:04:31,551 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 11:04:31,562 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 11:04:31,693 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:04:31,694 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:04:31,695 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmp4arf3w10\test_db.sqlite
2025-06-19 11:04:31,704 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x0000024761B8A840>
2025-06-19 11:04:31,710 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x0000024761B8A840> completed
2025-06-19 11:04:31,711 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024761BA06D0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000024761B89B20>, deterministic=True)
2025-06-19 11:04:31,712 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024761BA06D0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000024761B89B20>, deterministic=True) completed
2025-06-19 11:04:31,712 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024761BA06D0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:04:31,712 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024761BA06D0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:04:31,712 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:31,713 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:31,713 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B85940>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:04:31,713 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B85940>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:04:31,714 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024761B85940>)
2025-06-19 11:04:31,715 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024761B85940>) completed
2025-06-19 11:04:31,715 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B85940>)
2025-06-19 11:04:31,715 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B85940>) completed
2025-06-19 11:04:31,716 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:31,716 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:31,716 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:31,717 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:31,717 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B85740>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:04:31,717 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B85740>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:04:31,718 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024761B85740>)
2025-06-19 11:04:31,718 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024761B85740>) completed
2025-06-19 11:04:31,718 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B85740>)
2025-06-19 11:04:31,718 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B85740>) completed
2025-06-19 11:04:31,719 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:31,719 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:31,719 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B85840>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B85840>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024761B85840>)
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024761B85840>) completed
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B85840>)
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B85840>) completed
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B858C0>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B858C0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024761B858C0>)
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024761B858C0>) completed
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B858C0>)
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B858C0>) completed
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000247619EAEC0>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000247619EAEC0>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000247619EAEC0>)
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000247619EAEC0>) completed
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000247619EAEC0>)
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000247619EAEC0>) completed
2025-06-19 11:04:31,720 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:31,726 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:31,726 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000247619EAF40>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:04:31,726 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000247619EAF40>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:04:31,726 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000247619EAF40>)
2025-06-19 11:04:31,727 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000247619EAF40>) completed
2025-06-19 11:04:31,727 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000247619EAF40>)
2025-06-19 11:04:31,727 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000247619EAF40>) completed
2025-06-19 11:04:31,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:31,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:31,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B859C0>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 11:04:31,729 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B859C0>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:04:31,729 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024761B859C0>)
2025-06-19 11:04:31,729 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024761B859C0>) completed
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B859C0>)
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B859C0>) completed
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B85A40>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B85A40>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024761B85A40>)
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024761B85A40>) completed
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B85A40>)
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B85A40>) completed
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B85BC0>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B85BC0>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024761B85BC0>)
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024761B85BC0>) completed
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B85BC0>)
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B85BC0>) completed
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B85D40>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B85D40>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B85D40>)
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B85D40>) completed
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:31,730 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B85640>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:04:31,743 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B85640>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:04:31,744 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B85640>)
2025-06-19 11:04:31,745 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B85640>) completed
2025-06-19 11:04:31,745 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:31,745 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:31,745 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B870C0>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:04:31,745 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B870C0>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:04:31,745 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B870C0>)
2025-06-19 11:04:31,745 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B870C0>) completed
2025-06-19 11:04:31,745 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:31,745 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:31,745 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B85C40>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:04:31,751 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761B85C40>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:04:31,751 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B85C40>)
2025-06-19 11:04:31,751 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761B85C40>) completed
2025-06-19 11:04:31,751 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:31,751 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:31,751 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:31,751 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:31,751 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:04:31,751 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:04:31,758 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: rtraC... (truncada por seguridad)
2025-06-19 11:04:31,760 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x0000024761BD65C0>
2025-06-19 11:04:31,761 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x0000024761BD65C0> completed
2025-06-19 11:04:31,761 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024761BE98A0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000024761B89B20>, deterministic=True)
2025-06-19 11:04:31,762 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024761BE98A0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000024761B89B20>, deterministic=True) completed
2025-06-19 11:04:31,762 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024761BE98A0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:04:31,762 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024761BE98A0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:04:31,763 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BE98A0>)
2025-06-19 11:04:31,763 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BE98A0>) completed
2025-06-19 11:04:31,764 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761BC2AC0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 11:04:31,764 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024761BC2AC0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 11:04:31,764 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024761BC2AC0>)
2025-06-19 11:04:31,765 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024761BC2AC0>) completed
2025-06-19 11:04:31,765 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761BC2AC0>)
2025-06-19 11:04:31,765 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024761BC2AC0>) completed
2025-06-19 11:04:31,766 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:04:31,767 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024761BE98A0>)
2025-06-19 11:04:31,767 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024761BE98A0>) completed
2025-06-19 11:04:31,767 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024761BE98A0>)
2025-06-19 11:04:31,767 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024761BE98A0>) completed
2025-06-19 11:04:31,768 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:04:31,768 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:04:31,785 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:04:31,800 - asyncio - DEBUG - [Thread-3 (run_blocking_portal)] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:04:31,800 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:04:31,800 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:04:31,800 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:04:31,800 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmp4arf3w10\test_db.sqlite
2025-06-19 11:04:31,800 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing <function connect.<locals>.connector at 0x0000024762F5DF80>
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation <function connect.<locals>.connector at 0x0000024762F5DF80> completed
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024762F65120>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000024762F5D8A0>, deterministic=True)
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024762F65120>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000024762F5D8A0>, deterministic=True) completed
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024762F65120>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024762F65120>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024762F65120>)
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024762F65120>) completed
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024762F611C0>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024762F611C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024762F611C0>)
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024762F611C0>) completed
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024762F611C0>)
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024762F611C0>) completed
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024762F65120>)
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024762F65120>) completed
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024762F65120>)
2025-06-19 11:04:31,805 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024762F65120>) completed
2025-06-19 11:04:31,810 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024762F612C0>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:04:31,810 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024762F612C0>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:04:31,811 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024762F612C0>)
2025-06-19 11:04:31,811 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024762F612C0>) completed
2025-06-19 11:04:31,811 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024762F612C0>)
2025-06-19 11:04:31,812 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024762F612C0>) completed
2025-06-19 11:04:31,812 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024762F65120>)
2025-06-19 11:04:31,812 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024762F65120>) completed
2025-06-19 11:04:31,813 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024762F61340>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:04:31,813 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024762F61340>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:04:31,813 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024762F61340>)
2025-06-19 11:04:31,813 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024762F61340>) completed
2025-06-19 11:04:31,813 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024762F61340>)
2025-06-19 11:04:31,814 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024762F61340>) completed
2025-06-19 11:04:31,814 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024762F65120>)
2025-06-19 11:04:31,814 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024762F65120>) completed
2025-06-19 11:04:31,815 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024762F614C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:04:31,815 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024762F614C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:04:31,815 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024762F614C0>)
2025-06-19 11:04:31,815 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024762F614C0>) completed
2025-06-19 11:04:31,815 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024762F614C0>)
2025-06-19 11:04:31,815 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024762F614C0>) completed
2025-06-19 11:04:31,816 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024762F65120>)
2025-06-19 11:04:31,816 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024762F65120>) completed
2025-06-19 11:04:31,816 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024762F61440>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:04:31,816 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024762F61440>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:04:31,817 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024762F61440>)
2025-06-19 11:04:31,817 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024762F61440>) completed
2025-06-19 11:04:31,817 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024762F61440>)
2025-06-19 11:04:31,817 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024762F61440>) completed
2025-06-19 11:04:31,818 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000024762F65120>)
2025-06-19 11:04:31,818 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000024762F65120>) completed
2025-06-19 11:04:31,818 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024762F65120>)
2025-06-19 11:04:31,818 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024762F65120>) completed
2025-06-19 11:04:31,819 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-19 11:04:31,819 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:04:31,820 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:04:32,025 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:04:32,025 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:04:32,213 - ultibot_backend.services.order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:04:32,213 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:04:32,213 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: rtraC... (truncada por seguridad)
2025-06-19 11:04:32,213 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:04:32,213 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-3 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:04:32,213 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:04:32,213 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:04:32,213 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:04:32,213 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:04:32,213 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:125 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 11:04:32,229 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:32,229 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:32,229 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024763003840>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0))
2025-06-19 11:04:32,229 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024763003840>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0)) completed
2025-06-19 11:04:32,229 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024763003840>)
2025-06-19 11:04:32,229 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024763003840>) completed
2025-06-19 11:04:32,229 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024763003840>)
2025-06-19 11:04:32,229 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024763003840>) completed
2025-06-19 11:04:32,229 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:138 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-19 11:04:32,229 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:04:32,229 - httpx - INFO - [MainThread] - _client.py:1038 - HTTP Request: GET http://testserver/api/v1/performance/strategies "HTTP/1.1 200 OK"
2025-06-19 11:04:32,581 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:04:32,582 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:04:32,582 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:04:32,582 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:04:32,582 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:04:32,582 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:04:32,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:32,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:32,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:32,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 11:04:32,585 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000024761BE98A0>)
2025-06-19 11:04:32,585 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000024761BE98A0>) completed
2025-06-19 11:04:32,585 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000024761BA06D0>)
2025-06-19 11:04:32,585 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000024761BA06D0>) completed
2025-06-19 15:04:43,325 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:04:43,326 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:04:43,328 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:04:43,329 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:34022 - "GET /health HTTP/1.1" 200
2025-06-19 11:05:06,596 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:05:06,596 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 11:05:06,612 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 11:05:06,731 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:05:06,731 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:05:06,731 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpm6qu9_2u\test_db.sqlite
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000001DC6AE9ECA0>
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000001DC6AE9ECA0> completed
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DC6AEA46D0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001DC6AE9DF80>, deterministic=True)
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DC6AEA46D0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001DC6AE9DF80>, deterministic=True) completed
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DC6AEA46D0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DC6AEA46D0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA17C0>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA17C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA17C0>)
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA17C0>) completed
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA17C0>)
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA17C0>) completed
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA15C0>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA15C0>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:05:06,752 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA15C0>)
2025-06-19 11:05:06,760 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA15C0>) completed
2025-06-19 11:05:06,760 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA15C0>)
2025-06-19 11:05:06,760 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA15C0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA16C0>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA16C0>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA16C0>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA16C0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA16C0>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA16C0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA1740>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA1740>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA1740>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA1740>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA1740>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA1740>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA1840>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA1840>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA1840>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA1840>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA1840>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA1840>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA18C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA18C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA18C0>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA18C0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA18C0>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA18C0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA1A40>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA1A40>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA1A40>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA1A40>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA1A40>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA1A40>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA19C0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA19C0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA19C0>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA19C0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA19C0>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA19C0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA1BC0>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA1BC0>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA1BC0>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEA1BC0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA1BC0>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA1BC0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:06,762 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA1D40>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 11:05:06,779 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA1D40>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 11:05:06,779 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA1D40>)
2025-06-19 11:05:06,779 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA1D40>) completed
2025-06-19 11:05:06,779 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:06,779 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:06,779 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA1940>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA1940>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA1940>)
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA1940>) completed
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA1440>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA1440>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA1440>)
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA1440>) completed
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA1C40>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEA1C40>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA1C40>)
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEA1C40>) completed
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:06,782 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:06,782 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:05:06,795 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:05:06,795 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: oJRng... (truncada por seguridad)
2025-06-19 11:05:06,797 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x000001DC6AEB8900>
2025-06-19 11:05:06,798 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x000001DC6AEB8900> completed
2025-06-19 11:05:06,798 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DC6AED9C60>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001DC6AE9DF80>, deterministic=True)
2025-06-19 11:05:06,798 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DC6AED9C60>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001DC6AE9DF80>, deterministic=True) completed
2025-06-19 11:05:06,799 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DC6AED9C60>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:05:06,799 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DC6AED9C60>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:05:06,800 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AED9C60>)
2025-06-19 11:05:06,800 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AED9C60>) completed
2025-06-19 11:05:06,800 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEE3640>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 11:05:06,801 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6AEE3640>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 11:05:06,801 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEE3640>)
2025-06-19 11:05:06,801 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6AEE3640>) completed
2025-06-19 11:05:06,801 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEE3640>)
2025-06-19 11:05:06,801 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6AEE3640>) completed
2025-06-19 11:05:06,802 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:05:06,802 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DC6AED9C60>)
2025-06-19 11:05:06,802 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DC6AED9C60>) completed
2025-06-19 11:05:06,802 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DC6AED9C60>)
2025-06-19 11:05:06,803 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DC6AED9C60>) completed
2025-06-19 11:05:06,803 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:05:06,803 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:05:06,821 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:05:06,828 - asyncio - DEBUG - [Thread-3 (run_blocking_portal)] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:05:06,828 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:05:06,828 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:05:06,828 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:05:06,828 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpm6qu9_2u\test_db.sqlite
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing <function connect.<locals>.connector at 0x000001DC6C25E200>
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation <function connect.<locals>.connector at 0x000001DC6C25E200> completed
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DC6C265120>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001DC6C25DB20>, deterministic=True)
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DC6C265120>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001DC6C25DB20>, deterministic=True) completed
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DC6C265120>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001DC6C265120>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6C265120>)
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6C265120>) completed
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6C269040>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6C269040>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6C269040>)
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6C269040>) completed
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6C269040>)
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6C269040>) completed
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DC6C265120>)
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DC6C265120>) completed
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6C265120>)
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6C265120>) completed
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6C269140>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6C269140>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6C269140>)
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6C269140>) completed
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6C269140>)
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6C269140>) completed
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6C265120>)
2025-06-19 11:05:06,828 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6C265120>) completed
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6C2691C0>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6C2691C0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6C2691C0>)
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6C2691C0>) completed
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6C2691C0>)
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6C2691C0>) completed
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6C265120>)
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6C265120>) completed
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6C269340>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6C269340>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6C269340>)
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6C269340>) completed
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6C269340>)
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6C269340>) completed
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6C265120>)
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6C265120>) completed
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6C2692C0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6C2692C0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6C2692C0>)
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6C2692C0>) completed
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6C2692C0>)
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6C2692C0>) completed
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001DC6C265120>)
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001DC6C265120>) completed
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DC6C265120>)
2025-06-19 11:05:06,844 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DC6C265120>) completed
2025-06-19 11:05:06,844 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-19 11:05:06,844 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:05:06,844 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:05:07,058 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:05:07,058 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:05:07,273 - ultibot_backend.services.order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:05:07,273 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:05:07,273 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: oJRng... (truncada por seguridad)
2025-06-19 11:05:07,273 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:05:07,277 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-3 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:05:07,277 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:05:07,278 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:05:07,278 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:05:07,282 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:05:07,284 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:125 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 11:05:07,288 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:07,288 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:07,289 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6C3076C0>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0))
2025-06-19 11:05:07,289 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001DC6C3076C0>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0)) completed
2025-06-19 11:05:07,289 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6C3076C0>)
2025-06-19 11:05:07,290 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001DC6C3076C0>) completed
2025-06-19 11:05:07,290 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6C3076C0>)
2025-06-19 11:05:07,290 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001DC6C3076C0>) completed
2025-06-19 11:05:07,290 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:138 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-19 11:05:07,291 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:05:07,291 - httpx - INFO - [MainThread] - _client.py:1038 - HTTP Request: GET http://testserver/api/v1/performance/strategies "HTTP/1.1 200 OK"
2025-06-19 11:05:07,643 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:05:07,644 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:05:07,644 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:05:07,644 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:05:07,646 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:05:07,647 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:05:07,648 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:07,648 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:07,648 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:07,649 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 11:05:07,649 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001DC6AED9C60>)
2025-06-19 11:05:07,650 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001DC6AED9C60>) completed
2025-06-19 11:05:07,650 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001DC6AEA46D0>)
2025-06-19 11:05:07,650 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001DC6AEA46D0>) completed
2025-06-19 15:05:13,358 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:05:13,360 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:05:13,361 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:05:13,363 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:33006 - "GET /health HTTP/1.1" 200
2025-06-19 15:05:43,390 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:05:43,391 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:05:43,392 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:05:43,393 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:49618 - "GET /health HTTP/1.1" 200
2025-06-19 15:06:13,418 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:06:13,419 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:06:13,421 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:06:13,421 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:44874 - "GET /health HTTP/1.1" 200
2025-06-19 15:06:43,447 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:06:43,448 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:06:43,449 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:06:43,450 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:55392 - "GET /health HTTP/1.1" 200
2025-06-19 15:07:13,475 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:07:13,476 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:07:13,477 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:07:13,477 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:49162 - "GET /health HTTP/1.1" 200
2025-06-19 15:07:43,502 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:07:43,505 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:07:43,506 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:07:43,508 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:40028 - "GET /health HTTP/1.1" 200
2025-06-19 15:08:13,535 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:08:13,537 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:08:13,538 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:08:13,539 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:56014 - "GET /health HTTP/1.1" 200
2025-06-19 11:08:21,648 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:08:21,648 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 11:08:21,673 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 11:08:21,817 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:08:21,818 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:08:21,819 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpbanjjee8\test_db.sqlite
2025-06-19 11:08:21,832 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x00000196E0CA6B60>
2025-06-19 11:08:21,833 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x00000196E0CA6B60> completed
2025-06-19 11:08:21,834 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000196E0CA8400>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000196E0CA5E40>, deterministic=True)
2025-06-19 11:08:21,834 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000196E0CA8400>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000196E0CA5E40>, deterministic=True) completed
2025-06-19 11:08:21,835 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000196E0CA8400>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:08:21,835 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000196E0CA8400>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:08:21,835 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:21,835 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:21,835 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5DC0>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:08:21,836 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5DC0>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:08:21,836 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC5DC0>)
2025-06-19 11:08:21,836 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC5DC0>) completed
2025-06-19 11:08:21,836 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5DC0>)
2025-06-19 11:08:21,836 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5DC0>) completed
2025-06-19 11:08:21,837 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:21,837 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:21,838 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:21,838 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:21,838 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5BC0>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:08:21,839 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5BC0>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:08:21,839 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC5BC0>)
2025-06-19 11:08:21,839 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC5BC0>) completed
2025-06-19 11:08:21,839 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5BC0>)
2025-06-19 11:08:21,839 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5BC0>) completed
2025-06-19 11:08:21,840 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:21,840 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:21,840 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5CC0>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 11:08:21,840 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5CC0>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 11:08:21,841 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC5CC0>)
2025-06-19 11:08:21,841 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC5CC0>) completed
2025-06-19 11:08:21,841 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5CC0>)
2025-06-19 11:08:21,841 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5CC0>) completed
2025-06-19 11:08:21,842 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:21,842 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:21,842 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5D40>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:08:21,842 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5D40>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:08:21,842 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC5D40>)
2025-06-19 11:08:21,842 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC5D40>) completed
2025-06-19 11:08:21,843 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5D40>)
2025-06-19 11:08:21,843 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5D40>) completed
2025-06-19 11:08:21,843 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:21,843 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:21,843 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5E40>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 11:08:21,844 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5E40>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 11:08:21,844 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC5E40>)
2025-06-19 11:08:21,844 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC5E40>) completed
2025-06-19 11:08:21,844 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5E40>)
2025-06-19 11:08:21,844 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5E40>) completed
2025-06-19 11:08:21,845 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:21,845 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:21,845 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5EC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:08:21,845 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5EC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:08:21,846 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC5EC0>)
2025-06-19 11:08:21,846 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC5EC0>) completed
2025-06-19 11:08:21,846 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5EC0>)
2025-06-19 11:08:21,846 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5EC0>) completed
2025-06-19 11:08:21,847 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:21,847 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:21,847 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC6040>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 11:08:21,847 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC6040>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC6040>)
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC6040>) completed
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC6040>)
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC6040>) completed
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5FC0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5FC0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC5FC0>)
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC5FC0>) completed
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5FC0>)
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5FC0>) completed
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC61C0>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC61C0>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC61C0>)
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0CC61C0>) completed
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC61C0>)
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC61C0>) completed
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:21,848 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC6340>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 11:08:21,857 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC6340>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 11:08:21,857 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC6340>)
2025-06-19 11:08:21,857 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC6340>) completed
2025-06-19 11:08:21,857 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:21,857 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:21,857 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5F40>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:08:21,857 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5F40>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:08:21,857 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5F40>)
2025-06-19 11:08:21,857 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5F40>) completed
2025-06-19 11:08:21,857 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:21,857 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:21,857 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5A40>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:08:21,857 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC5A40>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:08:21,864 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5A40>)
2025-06-19 11:08:21,864 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC5A40>) completed
2025-06-19 11:08:21,865 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:21,865 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:21,865 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC60C0>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:08:21,865 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0CC60C0>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:08:21,865 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC60C0>)
2025-06-19 11:08:21,865 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0CC60C0>) completed
2025-06-19 11:08:21,865 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:21,865 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:21,865 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:21,865 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:21,865 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:08:21,873 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:08:21,873 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: R7qTA... (truncada por seguridad)
2025-06-19 11:08:21,875 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x00000196E0CCE700>
2025-06-19 11:08:21,875 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x00000196E0CCE700> completed
2025-06-19 11:08:21,875 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000196E0D95A80>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000196E0CA5E40>, deterministic=True)
2025-06-19 11:08:21,875 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000196E0D95A80>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000196E0CA5E40>, deterministic=True) completed
2025-06-19 11:08:21,875 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000196E0D95A80>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:08:21,875 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000196E0D95A80>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:08:21,875 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0D95A80>)
2025-06-19 11:08:21,875 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0D95A80>) completed
2025-06-19 11:08:21,875 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0D8F8C0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 11:08:21,875 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E0D8F8C0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 11:08:21,875 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0D8F8C0>)
2025-06-19 11:08:21,875 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E0D8F8C0>) completed
2025-06-19 11:08:21,875 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0D8F8C0>)
2025-06-19 11:08:21,875 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E0D8F8C0>) completed
2025-06-19 11:08:21,875 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:08:21,875 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000196E0D95A80>)
2025-06-19 11:08:21,880 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000196E0D95A80>) completed
2025-06-19 11:08:21,881 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000196E0D95A80>)
2025-06-19 11:08:21,881 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000196E0D95A80>) completed
2025-06-19 11:08:21,881 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:08:21,881 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:08:21,897 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:08:21,965 - asyncio - DEBUG - [Thread-3 (run_blocking_portal)] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:08:21,965 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:08:21,965 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:08:21,965 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:08:21,965 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpbanjjee8\test_db.sqlite
2025-06-19 11:08:21,965 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing <function connect.<locals>.connector at 0x00000196E214DBC0>
2025-06-19 11:08:21,973 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation <function connect.<locals>.connector at 0x00000196E214DBC0> completed
2025-06-19 11:08:21,973 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000196E1ED0F40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000196E214D4E0>, deterministic=True)
2025-06-19 11:08:21,973 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000196E1ED0F40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000196E214D4E0>, deterministic=True) completed
2025-06-19 11:08:21,973 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000196E1ED0F40>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:08:21,973 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000196E1ED0F40>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:08:21,973 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E1ED0F40>)
2025-06-19 11:08:21,973 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E1ED0F40>) completed
2025-06-19 11:08:21,975 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E2151340>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:08:21,975 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E2151340>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:08:21,975 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E2151340>)
2025-06-19 11:08:21,975 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E2151340>) completed
2025-06-19 11:08:21,975 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E2151340>)
2025-06-19 11:08:21,975 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E2151340>) completed
2025-06-19 11:08:21,975 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000196E1ED0F40>)
2025-06-19 11:08:21,975 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000196E1ED0F40>) completed
2025-06-19 11:08:21,975 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E1ED0F40>)
2025-06-19 11:08:21,975 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E1ED0F40>) completed
2025-06-19 11:08:21,978 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E2151440>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E2151440>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E2151440>)
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E2151440>) completed
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E2151440>)
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E2151440>) completed
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E1ED0F40>)
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E1ED0F40>) completed
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E21514C0>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E21514C0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E21514C0>)
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E21514C0>) completed
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E21514C0>)
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E21514C0>) completed
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E1ED0F40>)
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E1ED0F40>) completed
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E2151640>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E2151640>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E2151640>)
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E2151640>) completed
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E2151640>)
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E2151640>) completed
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E1ED0F40>)
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E1ED0F40>) completed
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E21515C0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E21515C0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E21515C0>)
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E21515C0>) completed
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E21515C0>)
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E21515C0>) completed
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000196E1ED0F40>)
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000196E1ED0F40>) completed
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000196E1ED0F40>)
2025-06-19 11:08:21,979 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000196E1ED0F40>) completed
2025-06-19 11:08:21,979 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-19 11:08:21,979 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:08:21,979 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:08:22,189 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:08:22,190 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:08:22,381 - ultibot_backend.services.order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:08:22,381 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:08:22,381 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: R7qTA... (truncada por seguridad)
2025-06-19 11:08:22,381 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:08:22,381 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-3 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:08:22,381 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:08:22,381 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:08:22,381 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:08:22,392 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:08:22,392 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:125 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 11:08:22,399 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:22,399 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:22,399 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E21CB9C0>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0))
2025-06-19 11:08:22,399 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000196E21CB9C0>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0)) completed
2025-06-19 11:08:22,399 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E21CB9C0>)
2025-06-19 11:08:22,399 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000196E21CB9C0>) completed
2025-06-19 11:08:22,399 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E21CB9C0>)
2025-06-19 11:08:22,399 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000196E21CB9C0>) completed
2025-06-19 11:08:22,399 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:142 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-19 11:08:22,399 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:08:22,399 - httpx - INFO - [MainThread] - _client.py:1038 - HTTP Request: GET http://testserver/api/v1/performance/strategies "HTTP/1.1 200 OK"
2025-06-19 11:08:22,673 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:08:22,673 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:08:22,673 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:08:22,673 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:08:22,673 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:08:22,680 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:08:22,680 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:22,680 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:22,681 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:22,681 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 11:08:22,682 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000196E0D95A80>)
2025-06-19 11:08:22,682 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000196E0D95A80>) completed
2025-06-19 11:08:22,683 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000196E0CA8400>)
2025-06-19 11:08:22,683 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000196E0CA8400>) completed
2025-06-19 15:08:43,564 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:08:43,566 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:08:43,567 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:08:43,568 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:45516 - "GET /health HTTP/1.1" 200
2025-06-19 15:09:13,592 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:09:13,593 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:09:13,594 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:09:13,595 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:35984 - "GET /health HTTP/1.1" 200
2025-06-19 11:09:38,479 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:09:38,479 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 11:09:38,494 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 11:09:38,624 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:09:38,624 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:09:38,624 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpbcm9hgkw\test_db.sqlite
2025-06-19 11:09:38,642 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x0000026A034DA700>
2025-06-19 11:09:38,642 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x0000026A034DA700> completed
2025-06-19 11:09:38,642 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026A034E44F0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000026A034D99E0>, deterministic=True)
2025-06-19 11:09:38,642 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026A034E44F0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000026A034D99E0>, deterministic=True) completed
2025-06-19 11:09:38,642 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026A034E44F0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:09:38,642 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026A034E44F0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:09:38,642 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:38,642 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:38,642 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DD740>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:09:38,642 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DD740>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:09:38,642 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A034DD740>)
2025-06-19 11:09:38,642 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A034DD740>) completed
2025-06-19 11:09:38,649 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DD740>)
2025-06-19 11:09:38,649 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DD740>) completed
2025-06-19 11:09:38,649 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:38,650 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:38,650 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:38,651 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:38,651 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DD540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:09:38,651 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DD540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:09:38,652 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A034DD540>)
2025-06-19 11:09:38,652 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A034DD540>) completed
2025-06-19 11:09:38,653 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DD540>)
2025-06-19 11:09:38,653 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DD540>) completed
2025-06-19 11:09:38,653 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:38,653 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:38,654 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DD640>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 11:09:38,654 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DD640>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 11:09:38,654 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A034DD640>)
2025-06-19 11:09:38,654 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A034DD640>) completed
2025-06-19 11:09:38,654 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DD640>)
2025-06-19 11:09:38,655 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DD640>) completed
2025-06-19 11:09:38,655 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:38,655 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:38,655 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DD6C0>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:09:38,655 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DD6C0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:09:38,656 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A034DD6C0>)
2025-06-19 11:09:38,656 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A034DD6C0>) completed
2025-06-19 11:09:38,656 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DD6C0>)
2025-06-19 11:09:38,657 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DD6C0>) completed
2025-06-19 11:09:38,658 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:38,658 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:38,658 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A0333AE40>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 11:09:38,658 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A0333AE40>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 11:09:38,658 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A0333AE40>)
2025-06-19 11:09:38,658 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A0333AE40>) completed
2025-06-19 11:09:38,658 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A0333AE40>)
2025-06-19 11:09:38,658 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A0333AE40>) completed
2025-06-19 11:09:38,658 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:38,658 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:38,658 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A0333AEC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:09:38,658 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A0333AEC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:09:38,658 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A0333AEC0>)
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A0333AEC0>) completed
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A0333AEC0>)
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A0333AEC0>) completed
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DD7C0>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DD7C0>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A034DD7C0>)
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A034DD7C0>) completed
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DD7C0>)
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DD7C0>) completed
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DD840>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DD840>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A034DD840>)
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A034DD840>) completed
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DD840>)
2025-06-19 11:09:38,661 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DD840>) completed
2025-06-19 11:09:38,665 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:38,665 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:38,666 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DD9C0>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 11:09:38,666 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DD9C0>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 11:09:38,666 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A034DD9C0>)
2025-06-19 11:09:38,666 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A034DD9C0>) completed
2025-06-19 11:09:38,667 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DD9C0>)
2025-06-19 11:09:38,667 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DD9C0>) completed
2025-06-19 11:09:38,668 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:38,668 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:38,668 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DDB40>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DDB40>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DDB40>)
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DDB40>) completed
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DD440>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DD440>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DD440>)
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DD440>) completed
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DEEC0>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DEEC0>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DEEC0>)
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DEEC0>) completed
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:38,671 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DDA40>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:09:38,682 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A034DDA40>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:09:38,682 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DDA40>)
2025-06-19 11:09:38,683 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A034DDA40>) completed
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:38,684 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:09:38,684 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:09:38,684 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: Mruhj... (truncada por seguridad)
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x0000026A03516520>
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x0000026A03516520> completed
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026A0352D6C0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000026A034D99E0>, deterministic=True)
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026A0352D6C0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000026A034D99E0>, deterministic=True) completed
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026A0352D6C0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026A0352D6C0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A0352D6C0>)
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A0352D6C0>) completed
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A035068C0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A035068C0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A035068C0>)
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A035068C0>) completed
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A035068C0>)
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A035068C0>) completed
2025-06-19 11:09:38,684 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026A0352D6C0>)
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026A0352D6C0>) completed
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026A0352D6C0>)
2025-06-19 11:09:38,684 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026A0352D6C0>) completed
2025-06-19 11:09:38,684 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:09:38,684 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:09:38,712 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:09:38,728 - asyncio - DEBUG - [Thread-3 (run_blocking_portal)] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:09:38,730 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:09:38,730 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:09:38,730 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:09:38,730 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpbcm9hgkw\test_db.sqlite
2025-06-19 11:09:38,732 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing <function connect.<locals>.connector at 0x0000026A04881D00>
2025-06-19 11:09:38,732 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation <function connect.<locals>.connector at 0x0000026A04881D00> completed
2025-06-19 11:09:38,732 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026A04884F40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000026A04881620>, deterministic=True)
2025-06-19 11:09:38,733 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026A04884F40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000026A04881620>, deterministic=True) completed
2025-06-19 11:09:38,733 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026A04884F40>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:09:38,733 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000026A04884F40>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:09:38,733 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A04884F40>)
2025-06-19 11:09:38,734 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A04884F40>) completed
2025-06-19 11:09:38,734 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A04888FC0>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:09:38,734 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A04888FC0>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:09:38,734 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A04888FC0>)
2025-06-19 11:09:38,735 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A04888FC0>) completed
2025-06-19 11:09:38,735 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A04888FC0>)
2025-06-19 11:09:38,735 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A04888FC0>) completed
2025-06-19 11:09:38,735 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026A04884F40>)
2025-06-19 11:09:38,735 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026A04884F40>) completed
2025-06-19 11:09:38,736 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A04884F40>)
2025-06-19 11:09:38,736 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A04884F40>) completed
2025-06-19 11:09:38,736 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A048890C0>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:09:38,737 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A048890C0>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:09:38,737 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A048890C0>)
2025-06-19 11:09:38,737 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A048890C0>) completed
2025-06-19 11:09:38,737 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A048890C0>)
2025-06-19 11:09:38,737 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A048890C0>) completed
2025-06-19 11:09:38,738 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A04884F40>)
2025-06-19 11:09:38,738 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A04884F40>) completed
2025-06-19 11:09:38,738 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A04889140>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:09:38,738 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A04889140>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:09:38,739 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A04889140>)
2025-06-19 11:09:38,739 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A04889140>) completed
2025-06-19 11:09:38,739 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A04889140>)
2025-06-19 11:09:38,739 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A04889140>) completed
2025-06-19 11:09:38,739 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A04884F40>)
2025-06-19 11:09:38,740 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A04884F40>) completed
2025-06-19 11:09:38,740 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A048892C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:09:38,740 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A048892C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:09:38,740 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A048892C0>)
2025-06-19 11:09:38,740 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A048892C0>) completed
2025-06-19 11:09:38,740 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A048892C0>)
2025-06-19 11:09:38,740 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A048892C0>) completed
2025-06-19 11:09:38,740 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A04884F40>)
2025-06-19 11:09:38,740 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A04884F40>) completed
2025-06-19 11:09:38,740 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A04889240>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:09:38,742 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A04889240>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:09:38,742 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A04889240>)
2025-06-19 11:09:38,742 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A04889240>) completed
2025-06-19 11:09:38,742 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A04889240>)
2025-06-19 11:09:38,742 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A04889240>) completed
2025-06-19 11:09:38,742 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000026A04884F40>)
2025-06-19 11:09:38,742 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000026A04884F40>) completed
2025-06-19 11:09:38,742 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026A04884F40>)
2025-06-19 11:09:38,742 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026A04884F40>) completed
2025-06-19 11:09:38,744 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-19 11:09:38,744 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:09:38,744 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:09:38,939 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:09:38,942 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:09:39,142 - ultibot_backend.services.order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:09:39,142 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:09:39,142 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: Mruhj... (truncada por seguridad)
2025-06-19 11:09:39,142 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:09:39,144 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-3 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:09:39,144 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:09:39,144 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:09:39,144 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:09:39,149 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:09:39,149 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:125 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 11:09:39,149 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A04884F40>)
2025-06-19 11:09:39,149 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000026A04884F40>) completed
2025-06-19 11:09:39,149 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A048FB3C0>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0))
2025-06-19 11:09:39,149 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000026A048FB3C0>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0)) completed
2025-06-19 11:09:39,149 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A048FB3C0>)
2025-06-19 11:09:39,149 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000026A048FB3C0>) completed
2025-06-19 11:09:39,149 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A048FB3C0>)
2025-06-19 11:09:39,149 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000026A048FB3C0>) completed
2025-06-19 11:09:39,149 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:142 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-19 11:09:39,149 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:09:39,149 - httpx - INFO - [MainThread] - _client.py:1038 - HTTP Request: GET http://testserver/api/v1/performance/strategies "HTTP/1.1 200 OK"
2025-06-19 11:09:39,509 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:09:39,509 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:09:39,509 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:09:39,509 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:09:39,509 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:09:39,509 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:09:39,515 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:39,515 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:39,516 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:39,517 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:39,517 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000026A0352D6C0>)
2025-06-19 11:09:39,518 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000026A0352D6C0>) completed
2025-06-19 11:09:39,518 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000026A034E44F0>)
2025-06-19 11:09:39,519 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000026A034E44F0>) completed
2025-06-19 11:09:39,618 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - [MainThread] - base.py:1032 - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <Connection(Thread-4, started daemon 35396)>>, which will be dropped, as it cannot be safely terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2025-06-19 15:09:43,634 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:09:43,635 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:09:43,637 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:09:43,638 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:47468 - "GET /health HTTP/1.1" 200
2025-06-19 15:10:13,665 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:10:13,667 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:10:13,668 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:10:13,669 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:41940 - "GET /health HTTP/1.1" 200
2025-06-19 15:10:43,695 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:10:43,697 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:10:43,698 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:10:43,699 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:44288 - "GET /health HTTP/1.1" 200
2025-06-19 11:11:06,964 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:11:06,976 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 11:11:06,995 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 11:11:07,105 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:11:07,105 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:11:07,116 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpi5u8s9ez\test_db.sqlite
2025-06-19 11:11:07,124 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x0000027AA208EB60>
2025-06-19 11:11:07,124 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x0000027AA208EB60> completed
2025-06-19 11:11:07,124 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000027AA20984F0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000027AA208DE40>, deterministic=True)
2025-06-19 11:11:07,124 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000027AA20984F0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000027AA208DE40>, deterministic=True) completed
2025-06-19 11:11:07,124 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000027AA20984F0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:11:07,124 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000027AA20984F0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:11:07,124 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,124 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,124 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA20898C0>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:11:07,124 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA20898C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:11:07,124 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA20898C0>)
2025-06-19 11:11:07,124 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA20898C0>) completed
2025-06-19 11:11:07,134 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA20898C0>)
2025-06-19 11:11:07,134 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA20898C0>) completed
2025-06-19 11:11:07,134 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,135 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,135 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,135 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,136 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA20896C0>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:11:07,136 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA20896C0>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:11:07,137 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA20896C0>)
2025-06-19 11:11:07,137 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA20896C0>) completed
2025-06-19 11:11:07,137 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA20896C0>)
2025-06-19 11:11:07,137 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA20896C0>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA20897C0>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA20897C0>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA20897C0>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA20897C0>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA20897C0>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA20897C0>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089840>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089840>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA2089840>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA2089840>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089840>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089840>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089940>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089940>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA2089940>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA2089940>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089940>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089940>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA20899C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA20899C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA20899C0>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA20899C0>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA20899C0>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA20899C0>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089B40>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089B40>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA2089B40>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA2089B40>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089B40>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089B40>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089AC0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089AC0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA2089AC0>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA2089AC0>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089AC0>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089AC0>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089CC0>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089CC0>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA2089CC0>)
2025-06-19 11:11:07,138 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA2089CC0>) completed
2025-06-19 11:11:07,151 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089CC0>)
2025-06-19 11:11:07,151 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089CC0>) completed
2025-06-19 11:11:07,151 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,151 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,152 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089E40>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 11:11:07,156 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089E40>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 11:11:07,156 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089E40>)
2025-06-19 11:11:07,156 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089E40>) completed
2025-06-19 11:11:07,156 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,157 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,157 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089A40>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:11:07,157 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089A40>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:11:07,157 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089A40>)
2025-06-19 11:11:07,157 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089A40>) completed
2025-06-19 11:11:07,157 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,157 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,157 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089540>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:11:07,157 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089540>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:11:07,157 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089540>)
2025-06-19 11:11:07,157 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089540>) completed
2025-06-19 11:11:07,157 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,157 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,157 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089D40>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:11:07,166 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA2089D40>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:11:07,166 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089D40>)
2025-06-19 11:11:07,166 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA2089D40>) completed
2025-06-19 11:11:07,166 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,166 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,167 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,167 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,168 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:11:07,171 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:11:07,171 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: LsOuP... (truncada por seguridad)
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x0000027AA20A87C0>
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x0000027AA20A87C0> completed
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000027AA20C9A80>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000027AA208DE40>, deterministic=True)
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000027AA20C9A80>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000027AA208DE40>, deterministic=True) completed
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000027AA20C9A80>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000027AA20C9A80>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20C9A80>)
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA20C9A80>) completed
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA20C7840>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA20C7840>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA20C7840>)
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA20C7840>) completed
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA20C7840>)
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA20C7840>) completed
2025-06-19 11:11:07,171 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000027AA20C9A80>)
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000027AA20C9A80>) completed
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000027AA20C9A80>)
2025-06-19 11:11:07,171 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000027AA20C9A80>) completed
2025-06-19 11:11:07,171 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:11:07,171 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:11:07,195 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:11:07,198 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2725728108176'>
2025-06-19 11:11:07,211 - asyncio - DEBUG - [Thread-3 (run_blocking_portal)] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:11:07,213 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:11:07,213 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:11:07,213 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:11:07,213 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpi5u8s9ez\test_db.sqlite
2025-06-19 11:11:07,214 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing <function connect.<locals>.connector at 0x0000027AA342E020>
2025-06-19 11:11:07,214 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation <function connect.<locals>.connector at 0x0000027AA342E020> completed
2025-06-19 11:11:07,215 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000027AA3438F40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000027AA342D940>, deterministic=True)
2025-06-19 11:11:07,215 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000027AA3438F40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000027AA342D940>, deterministic=True) completed
2025-06-19 11:11:07,215 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000027AA3438F40>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:11:07,215 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000027AA3438F40>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:11:07,216 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA3438F40>)
2025-06-19 11:11:07,216 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA3438F40>) completed
2025-06-19 11:11:07,216 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA3431440>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:11:07,216 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA3431440>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:11:07,216 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA3431440>)
2025-06-19 11:11:07,216 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA3431440>) completed
2025-06-19 11:11:07,217 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA3431440>)
2025-06-19 11:11:07,217 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA3431440>) completed
2025-06-19 11:11:07,217 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000027AA3438F40>)
2025-06-19 11:11:07,217 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000027AA3438F40>) completed
2025-06-19 11:11:07,217 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA3438F40>)
2025-06-19 11:11:07,219 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA3438F40>) completed
2025-06-19 11:11:07,219 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA3431540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:11:07,220 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA3431540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:11:07,220 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA3431540>)
2025-06-19 11:11:07,220 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA3431540>) completed
2025-06-19 11:11:07,221 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA3431540>)
2025-06-19 11:11:07,221 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA3431540>) completed
2025-06-19 11:11:07,221 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA3438F40>)
2025-06-19 11:11:07,221 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA3438F40>) completed
2025-06-19 11:11:07,222 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA34315C0>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:11:07,222 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA34315C0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:11:07,222 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA34315C0>)
2025-06-19 11:11:07,222 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA34315C0>) completed
2025-06-19 11:11:07,222 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA34315C0>)
2025-06-19 11:11:07,223 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA34315C0>) completed
2025-06-19 11:11:07,223 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA3438F40>)
2025-06-19 11:11:07,223 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA3438F40>) completed
2025-06-19 11:11:07,223 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA3431740>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:11:07,224 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA3431740>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:11:07,224 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA3431740>)
2025-06-19 11:11:07,224 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA3431740>) completed
2025-06-19 11:11:07,224 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA3431740>)
2025-06-19 11:11:07,224 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA3431740>) completed
2025-06-19 11:11:07,224 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA3438F40>)
2025-06-19 11:11:07,225 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA3438F40>) completed
2025-06-19 11:11:07,225 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA34316C0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:11:07,225 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA34316C0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:11:07,225 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA34316C0>)
2025-06-19 11:11:07,225 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA34316C0>) completed
2025-06-19 11:11:07,226 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA34316C0>)
2025-06-19 11:11:07,226 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA34316C0>) completed
2025-06-19 11:11:07,226 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000027AA3438F40>)
2025-06-19 11:11:07,226 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000027AA3438F40>) completed
2025-06-19 11:11:07,227 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000027AA3438F40>)
2025-06-19 11:11:07,227 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000027AA3438F40>) completed
2025-06-19 11:11:07,227 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-19 11:11:07,227 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:11:07,228 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:11:07,429 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:11:07,432 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:11:07,618 - ultibot_backend.services.order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:11:07,618 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:11:07,618 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: LsOuP... (truncada por seguridad)
2025-06-19 11:11:07,618 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:11:07,623 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-3 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:11:07,623 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x0000027AA3435B90>
2025-06-19 11:11:07,623 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:11:07,623 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:11:07,623 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:11:07,626 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:11:07,626 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:129 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 11:11:07,626 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:138 - Using injected persistence_service: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x0000027AA3435B90>
2025-06-19 11:11:07,626 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA3438F40>)
2025-06-19 11:11:07,631 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000027AA3438F40>) completed
2025-06-19 11:11:07,631 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA34AB840>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0))
2025-06-19 11:11:07,631 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000027AA34AB840>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0)) completed
2025-06-19 11:11:07,631 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA34AB840>)
2025-06-19 11:11:07,631 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000027AA34AB840>) completed
2025-06-19 11:11:07,631 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA34AB840>)
2025-06-19 11:11:07,631 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000027AA34AB840>) completed
2025-06-19 11:11:07,633 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:149 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-19 11:11:07,633 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:11:07,635 - httpx - INFO - [MainThread] - _client.py:1038 - HTTP Request: GET http://testserver/api/v1/performance/strategies "HTTP/1.1 200 OK"
2025-06-19 11:11:07,979 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:11:07,979 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:11:07,979 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:11:07,979 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:11:07,987 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:11:07,988 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:11:07,988 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,989 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,989 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,989 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:07,990 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000027AA20C9A80>)
2025-06-19 11:11:07,991 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000027AA20C9A80>) completed
2025-06-19 11:11:07,991 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000027AA20984F0>)
2025-06-19 11:11:07,991 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000027AA20984F0>) completed
2025-06-19 11:11:08,109 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - [MainThread] - base.py:1032 - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <Connection(Thread-4, started daemon 8132)>>, which will be dropped, as it cannot be safely terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2025-06-19 15:11:13,725 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:11:13,726 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:11:13,727 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:11:13,728 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:41170 - "GET /health HTTP/1.1" 200
2025-06-19 11:11:31,153 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:11:31,153 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 11:11:31,169 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 11:11:31,292 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:11:31,292 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:11:31,301 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpendyonc5\test_db.sqlite
2025-06-19 11:11:31,312 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x0000024ECFE5EAC0>
2025-06-19 11:11:31,312 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x0000024ECFE5EAC0> completed
2025-06-19 11:11:31,312 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024ECFE644F0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000024ECFE5DDA0>, deterministic=True)
2025-06-19 11:11:31,312 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024ECFE644F0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000024ECFE5DDA0>, deterministic=True) completed
2025-06-19 11:11:31,312 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024ECFE644F0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:11:31,312 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024ECFE644F0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:11:31,312 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:11:31,312 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:11:31,312 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE598C0>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:11:31,312 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE598C0>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:11:31,318 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE598C0>)
2025-06-19 11:11:31,318 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE598C0>) completed
2025-06-19 11:11:31,318 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE598C0>)
2025-06-19 11:11:31,318 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE598C0>) completed
2025-06-19 11:11:31,319 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:11:31,319 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:11:31,320 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:11:31,320 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:11:31,321 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE596C0>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:11:31,322 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE596C0>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:11:31,322 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE596C0>)
2025-06-19 11:11:31,322 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE596C0>) completed
2025-06-19 11:11:31,323 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE596C0>)
2025-06-19 11:11:31,323 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE596C0>) completed
2025-06-19 11:11:31,323 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE597C0>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE597C0>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE597C0>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE597C0>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE597C0>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE597C0>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59840>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59840>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE59840>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE59840>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59840>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59840>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59940>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59940>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE59940>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE59940>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59940>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59940>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE599C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE599C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE599C0>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE599C0>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE599C0>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE599C0>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59B40>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59B40>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE59B40>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE59B40>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59B40>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59B40>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59AC0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59AC0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE59AC0>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE59AC0>) completed
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59AC0>)
2025-06-19 11:11:31,324 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59AC0>) completed
2025-06-19 11:11:31,334 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:11:31,334 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:11:31,334 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59CC0>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 11:11:31,334 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59CC0>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 11:11:31,336 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE59CC0>)
2025-06-19 11:11:31,336 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE59CC0>) completed
2025-06-19 11:11:31,336 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59CC0>)
2025-06-19 11:11:31,336 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59CC0>) completed
2025-06-19 11:11:31,336 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:11:31,336 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:11:31,337 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59E40>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 11:11:31,341 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59E40>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 11:11:31,341 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59E40>)
2025-06-19 11:11:31,341 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59E40>) completed
2025-06-19 11:11:31,342 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:11:31,342 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:11:31,343 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59A40>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:11:31,343 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59A40>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:11:31,343 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59A40>)
2025-06-19 11:11:31,343 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59A40>) completed
2025-06-19 11:11:31,343 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:11:31,343 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:11:31,343 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59540>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:11:31,343 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59540>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:11:31,343 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59540>)
2025-06-19 11:11:31,343 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59540>) completed
2025-06-19 11:11:31,343 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:11:31,343 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:11:31,343 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59D40>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:11:31,354 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE59D40>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:11:31,354 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59D40>)
2025-06-19 11:11:31,355 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE59D40>) completed
2025-06-19 11:11:31,355 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:11:31,355 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:11:31,355 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:11:31,355 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:11:31,355 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:11:31,355 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:11:31,355 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: 0M8iD... (truncada por seguridad)
2025-06-19 11:11:31,355 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x0000024ECFE90720>
2025-06-19 11:11:31,355 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x0000024ECFE90720> completed
2025-06-19 11:11:31,355 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024ECFE99A80>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000024ECFE5DDA0>, deterministic=True)
2025-06-19 11:11:31,364 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024ECFE99A80>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000024ECFE5DDA0>, deterministic=True) completed
2025-06-19 11:11:31,364 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024ECFE99A80>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:11:31,364 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024ECFE99A80>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:11:31,364 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE99A80>)
2025-06-19 11:11:31,364 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ECFE99A80>) completed
2025-06-19 11:11:31,364 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE97740>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 11:11:31,364 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ECFE97740>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 11:11:31,364 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE97740>)
2025-06-19 11:11:31,364 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ECFE97740>) completed
2025-06-19 11:11:31,364 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE97740>)
2025-06-19 11:11:31,364 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ECFE97740>) completed
2025-06-19 11:11:31,364 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:11:31,364 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024ECFE99A80>)
2025-06-19 11:11:31,364 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024ECFE99A80>) completed
2025-06-19 11:11:31,364 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024ECFE99A80>)
2025-06-19 11:11:31,364 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024ECFE99A80>) completed
2025-06-19 11:11:31,368 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:11:31,368 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:11:31,370 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:11:31,386 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2537519088080'>
2025-06-19 11:11:31,399 - asyncio - DEBUG - [Thread-3 (run_blocking_portal)] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:11:31,401 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:11:31,401 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:11:31,401 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:11:31,401 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpendyonc5\test_db.sqlite
2025-06-19 11:11:31,402 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing <function connect.<locals>.connector at 0x0000024ED1231F80>
2025-06-19 11:11:31,402 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation <function connect.<locals>.connector at 0x0000024ED1231F80> completed
2025-06-19 11:11:31,402 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024ED123CF40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000024ED12318A0>, deterministic=True)
2025-06-19 11:11:31,403 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024ED123CF40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000024ED12318A0>, deterministic=True) completed
2025-06-19 11:11:31,403 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024ED123CF40>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:11:31,403 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000024ED123CF40>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:11:31,403 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ED123CF40>)
2025-06-19 11:11:31,404 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ED123CF40>) completed
2025-06-19 11:11:31,404 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ED1239340>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:11:31,404 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ED1239340>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:11:31,404 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ED1239340>)
2025-06-19 11:11:31,404 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ED1239340>) completed
2025-06-19 11:11:31,405 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ED1239340>)
2025-06-19 11:11:31,405 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ED1239340>) completed
2025-06-19 11:11:31,405 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024ED123CF40>)
2025-06-19 11:11:31,405 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024ED123CF40>) completed
2025-06-19 11:11:31,406 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ED123CF40>)
2025-06-19 11:11:31,406 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ED123CF40>) completed
2025-06-19 11:11:31,406 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ED1239440>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:11:31,407 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ED1239440>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:11:31,407 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ED1239440>)
2025-06-19 11:11:31,407 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ED1239440>) completed
2025-06-19 11:11:31,408 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ED1239440>)
2025-06-19 11:11:31,408 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ED1239440>) completed
2025-06-19 11:11:31,408 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ED123CF40>)
2025-06-19 11:11:31,408 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ED123CF40>) completed
2025-06-19 11:11:31,408 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ED12394C0>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:11:31,409 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ED12394C0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:11:31,409 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ED12394C0>)
2025-06-19 11:11:31,409 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ED12394C0>) completed
2025-06-19 11:11:31,409 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ED12394C0>)
2025-06-19 11:11:31,409 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ED12394C0>) completed
2025-06-19 11:11:31,410 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ED123CF40>)
2025-06-19 11:11:31,410 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ED123CF40>) completed
2025-06-19 11:11:31,410 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ED1239640>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:11:31,410 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ED1239640>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:11:31,410 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ED1239640>)
2025-06-19 11:11:31,411 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ED1239640>) completed
2025-06-19 11:11:31,411 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ED1239640>)
2025-06-19 11:11:31,411 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ED1239640>) completed
2025-06-19 11:11:31,411 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ED123CF40>)
2025-06-19 11:11:31,412 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ED123CF40>) completed
2025-06-19 11:11:31,412 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ED12395C0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:11:31,412 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ED12395C0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:11:31,412 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ED12395C0>)
2025-06-19 11:11:31,412 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ED12395C0>) completed
2025-06-19 11:11:31,413 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ED12395C0>)
2025-06-19 11:11:31,413 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ED12395C0>) completed
2025-06-19 11:11:31,413 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000024ED123CF40>)
2025-06-19 11:11:31,413 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000024ED123CF40>) completed
2025-06-19 11:11:31,413 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024ED123CF40>)
2025-06-19 11:11:31,414 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024ED123CF40>) completed
2025-06-19 11:11:31,414 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-19 11:11:31,414 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:11:31,415 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:11:31,606 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:11:31,607 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:11:31,805 - ultibot_backend.services.order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:11:31,815 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:11:31,815 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: 0M8iD... (truncada por seguridad)
2025-06-19 11:11:31,815 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:11:31,818 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-3 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:11:31,818 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x0000024ED12373D0>
2025-06-19 11:11:31,818 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:11:31,818 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:11:31,818 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:11:31,822 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:11:31,824 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:129 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 11:11:31,824 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:138 - Using injected persistence_service: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x0000024ED12373D0>
2025-06-19 11:11:31,829 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ED123CF40>)
2025-06-19 11:11:31,829 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000024ED123CF40>) completed
2025-06-19 11:11:31,829 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ED12CF740>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0))
2025-06-19 11:11:31,829 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000024ED12CF740>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0)) completed
2025-06-19 11:11:31,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ED12CF740>)
2025-06-19 11:11:31,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000024ED12CF740>) completed
2025-06-19 11:11:31,830 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ED12CF740>)
2025-06-19 11:11:31,830 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000024ED12CF740>) completed
2025-06-19 11:11:31,831 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:149 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-19 11:11:31,832 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:11:31,832 - httpx - INFO - [MainThread] - _client.py:1038 - HTTP Request: GET http://testserver/api/v1/performance/strategies "HTTP/1.1 200 OK"
2025-06-19 15:11:43,752 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:11:43,753 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:11:43,754 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:11:43,755 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:53740 - "GET /health HTTP/1.1" 200
2025-06-19 15:12:13,795 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:12:13,796 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:12:13,798 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:12:13,798 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:38926 - "GET /health HTTP/1.1" 200
2025-06-19 15:12:43,829 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:12:43,830 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:12:43,832 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:12:43,838 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:43332 - "GET /health HTTP/1.1" 200
2025-06-19 15:13:13,864 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:13:13,865 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:13:13,866 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:13:13,867 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:33558 - "GET /health HTTP/1.1" 200
2025-06-19 15:13:43,894 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:13:43,896 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:13:43,898 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:13:43,899 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:39060 - "GET /health HTTP/1.1" 200
2025-06-19 15:14:13,927 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:14:13,930 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:14:13,931 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:14:13,932 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:51624 - "GET /health HTTP/1.1" 200
2025-06-19 15:14:43,958 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:14:43,959 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:14:43,960 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:14:43,961 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:48334 - "GET /health HTTP/1.1" 200
2025-06-19 15:15:13,986 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:15:13,987 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:15:13,988 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:15:13,989 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:53208 - "GET /health HTTP/1.1" 200
2025-06-19 15:15:44,015 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:15:44,016 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:15:44,017 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:15:44,018 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:43744 - "GET /health HTTP/1.1" 200
2025-06-19 15:16:14,046 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:16:14,047 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:16:14,048 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:16:14,049 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:41754 - "GET /health HTTP/1.1" 200
2025-06-19 15:16:44,076 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:16:44,078 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:16:44,078 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:16:44,079 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:40982 - "GET /health HTTP/1.1" 200
2025-06-19 15:17:14,106 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:17:14,107 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:17:14,108 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:17:14,109 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:47820 - "GET /health HTTP/1.1" 200
2025-06-19 15:17:44,133 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:17:44,135 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:17:44,136 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:17:44,137 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:54954 - "GET /health HTTP/1.1" 200
2025-06-19 15:18:14,164 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:18:14,166 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:18:14,167 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:18:14,168 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:42454 - "GET /health HTTP/1.1" 200
2025-06-19 15:18:44,197 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:18:44,198 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:18:44,199 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:18:44,200 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:45054 - "GET /health HTTP/1.1" 200
2025-06-19 11:18:50,866 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:18:50,960 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:18:50,960 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:18:50,971 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:18:50,976 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:18:50,980 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:18:50,983 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:18:50,995 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:18:50,996 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:18:50,997 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:18:50,998 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000024ECFE99A80>)
2025-06-19 11:18:51,000 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000024ECFE99A80>) completed
2025-06-19 11:18:51,000 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000024ECFE644F0>)
2025-06-19 11:18:51,000 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000024ECFE644F0>) completed
2025-06-19 11:18:51,067 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - [MainThread] - base.py:1032 - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <Connection(Thread-4, started daemon 35204)>>, which will be dropped, as it cannot be safely terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2025-06-19 15:19:14,227 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:19:14,229 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:19:14,230 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:19:14,231 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:46842 - "GET /health HTTP/1.1" 200
2025-06-19 15:19:44,260 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:19:44,262 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:19:44,264 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:19:44,265 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:42670 - "GET /health HTTP/1.1" 200
2025-06-19 15:20:14,296 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:20:14,297 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:20:14,299 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:20:14,299 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:44972 - "GET /health HTTP/1.1" 200
2025-06-19 15:20:44,325 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:20:44,326 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:20:44,327 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:20:44,328 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:46706 - "GET /health HTTP/1.1" 200
2025-06-19 15:21:14,350 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:21:14,351 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:21:14,352 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:21:14,353 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:54704 - "GET /health HTTP/1.1" 200
2025-06-19 11:21:29,963 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:21:29,963 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 11:21:29,978 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 11:21:30,130 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:21:30,130 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:21:30,130 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpnjvg5ppt\test_db.sqlite
2025-06-19 11:21:30,149 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000001F3F12EA7A0>
2025-06-19 11:21:30,151 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000001F3F12EA7A0> completed
2025-06-19 11:21:30,152 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F3F12804F0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001F3F12E9A80>, deterministic=True)
2025-06-19 11:21:30,152 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F3F12804F0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001F3F12E9A80>, deterministic=True) completed
2025-06-19 11:21:30,152 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F3F12804F0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:21:30,152 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F3F12804F0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F1299E40>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F1299E40>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F1299E40>)
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F1299E40>) completed
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F1299E40>)
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F1299E40>) completed
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F1299C40>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F1299C40>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F1299C40>)
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F1299C40>) completed
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F1299C40>)
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F1299C40>) completed
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F1299D40>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F1299D40>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F1299D40>)
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F1299D40>) completed
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F1299D40>)
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F1299D40>) completed
2025-06-19 11:21:30,153 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F1299DC0>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F1299DC0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F1299DC0>)
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F1299DC0>) completed
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F1299DC0>)
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F1299DC0>) completed
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F1299EC0>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F1299EC0>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F1299EC0>)
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F1299EC0>) completed
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F1299EC0>)
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F1299EC0>) completed
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,159 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:30,162 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F1299F40>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:21:30,162 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F1299F40>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:21:30,162 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F1299F40>)
2025-06-19 11:21:30,164 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F1299F40>) completed
2025-06-19 11:21:30,164 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F1299F40>)
2025-06-19 11:21:30,164 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F1299F40>) completed
2025-06-19 11:21:30,164 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,164 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:30,164 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F129A0C0>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 11:21:30,164 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F129A0C0>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:21:30,165 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F129A0C0>)
2025-06-19 11:21:30,165 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F129A0C0>) completed
2025-06-19 11:21:30,165 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F129A0C0>)
2025-06-19 11:21:30,165 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F129A0C0>) completed
2025-06-19 11:21:30,166 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,166 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:30,166 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F129A040>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:21:30,166 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F129A040>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:21:30,167 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F129A040>)
2025-06-19 11:21:30,167 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F129A040>) completed
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F129A040>)
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F129A040>) completed
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F129A240>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F129A240>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F129A240>)
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F129A240>) completed
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F129A240>)
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F129A240>) completed
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F129A3C0>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F129A3C0>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F129A3C0>)
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F129A3C0>) completed
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F1299FC0>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F1299FC0>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F1299FC0>)
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F1299FC0>) completed
2025-06-19 11:21:30,168 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,179 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:30,179 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F1299AC0>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:21:30,180 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F1299AC0>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:21:30,180 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F1299AC0>)
2025-06-19 11:21:30,180 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F1299AC0>) completed
2025-06-19 11:21:30,180 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,180 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:30,180 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F129A140>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:21:30,180 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F129A140>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:21:30,180 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F129A140>)
2025-06-19 11:21:30,180 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F129A140>) completed
2025-06-19 11:21:30,180 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,180 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:30,180 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,180 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:30,180 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:21:30,180 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:21:30,180 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: VAm5P... (truncada por seguridad)
2025-06-19 11:21:30,195 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x000001F3F135E3E0>
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x000001F3F135E3E0> completed
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F3F1361A80>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001F3F12E9A80>, deterministic=True)
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F3F1361A80>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001F3F12E9A80>, deterministic=True) completed
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F3F1361A80>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F3F1361A80>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F1361A80>)
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F1361A80>) completed
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F12A03C0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F12A03C0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F12A03C0>)
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F12A03C0>) completed
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F12A03C0>)
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F12A03C0>) completed
2025-06-19 11:21:30,197 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F3F1361A80>)
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F3F1361A80>) completed
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F3F1361A80>)
2025-06-19 11:21:30,197 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F3F1361A80>) completed
2025-06-19 11:21:30,197 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:21:30,197 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:21:30,275 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:21:30,279 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2147234859472'>
2025-06-19 11:21:30,292 - asyncio - DEBUG - [Thread-3 (run_blocking_portal)] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:21:30,294 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:21:30,294 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:21:30,294 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:21:30,294 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpnjvg5ppt\test_db.sqlite
2025-06-19 11:21:30,296 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing <function connect.<locals>.connector at 0x000001F3F27299E0>
2025-06-19 11:21:30,296 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation <function connect.<locals>.connector at 0x000001F3F27299E0> completed
2025-06-19 11:21:30,296 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F3F2730F40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001F3F2729300>, deterministic=True)
2025-06-19 11:21:30,297 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F3F2730F40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001F3F2729300>, deterministic=True) completed
2025-06-19 11:21:30,297 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F3F2730F40>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:21:30,297 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001F3F2730F40>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:21:30,297 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F2730F40>)
2025-06-19 11:21:30,297 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F2730F40>) completed
2025-06-19 11:21:30,297 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F272E040>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:21:30,297 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F272E040>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:21:30,299 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F272E040>)
2025-06-19 11:21:30,299 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F272E040>) completed
2025-06-19 11:21:30,299 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F272E040>)
2025-06-19 11:21:30,299 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F272E040>) completed
2025-06-19 11:21:30,299 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F3F2730F40>)
2025-06-19 11:21:30,300 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F3F2730F40>) completed
2025-06-19 11:21:30,300 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F2730F40>)
2025-06-19 11:21:30,300 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F2730F40>) completed
2025-06-19 11:21:30,300 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F272E140>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:21:30,301 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F272E140>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:21:30,301 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F272E140>)
2025-06-19 11:21:30,301 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F272E140>) completed
2025-06-19 11:21:30,301 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F272E140>)
2025-06-19 11:21:30,302 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F272E140>) completed
2025-06-19 11:21:30,302 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F2730F40>)
2025-06-19 11:21:30,302 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F2730F40>) completed
2025-06-19 11:21:30,302 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F272E1C0>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:21:30,303 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F272E1C0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:21:30,303 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F272E1C0>)
2025-06-19 11:21:30,303 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F272E1C0>) completed
2025-06-19 11:21:30,303 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F272E1C0>)
2025-06-19 11:21:30,303 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F272E1C0>) completed
2025-06-19 11:21:30,304 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F2730F40>)
2025-06-19 11:21:30,304 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F2730F40>) completed
2025-06-19 11:21:30,304 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F272E340>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:21:30,304 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F272E340>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:21:30,305 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F272E340>)
2025-06-19 11:21:30,305 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F272E340>) completed
2025-06-19 11:21:30,305 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F272E340>)
2025-06-19 11:21:30,305 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F272E340>) completed
2025-06-19 11:21:30,305 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F2730F40>)
2025-06-19 11:21:30,305 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F2730F40>) completed
2025-06-19 11:21:30,306 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F272E2C0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:21:30,306 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F272E2C0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:21:30,306 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F272E2C0>)
2025-06-19 11:21:30,306 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F272E2C0>) completed
2025-06-19 11:21:30,307 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F272E2C0>)
2025-06-19 11:21:30,307 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F272E2C0>) completed
2025-06-19 11:21:30,307 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F3F2730F40>)
2025-06-19 11:21:30,307 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001F3F2730F40>) completed
2025-06-19 11:21:30,307 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F3F2730F40>)
2025-06-19 11:21:30,307 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F3F2730F40>) completed
2025-06-19 11:21:30,307 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-19 11:21:30,308 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:21:30,308 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:21:30,524 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:21:30,525 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:21:30,723 - ultibot_backend.services.order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:21:30,723 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:21:30,724 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: VAm5P... (truncada por seguridad)
2025-06-19 11:21:30,724 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:21:30,727 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-3 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:21:30,727 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000001F3F27352D0>
2025-06-19 11:21:30,727 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:21:30,727 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:21:30,727 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:21:30,731 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:21:30,731 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:129 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 11:21:30,732 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:138 - Using injected persistence_service: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000001F3F27352D0>
2025-06-19 11:21:30,736 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F2730F40>)
2025-06-19 11:21:30,737 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001F3F2730F40>) completed
2025-06-19 11:21:30,737 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F27B44C0>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0))
2025-06-19 11:21:30,737 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001F3F27B44C0>, 'SELECT trades.id, trades.user_id, trades.data, trades.position_status, trades.mode, trades.symbol, trades.created_at, trades.updated_at, trades.closed_at \nFROM trades \nWHERE trades.user_id = ? AND trades.mode = ? AND trades.position_status = ? ORDER BY trades.created_at DESC\n LIMIT ? OFFSET ?', ('00000000000000000000000000000001', '', 'closed', 100, 0)) completed
2025-06-19 11:21:30,737 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F27B44C0>)
2025-06-19 11:21:30,738 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001F3F27B44C0>) completed
2025-06-19 11:21:30,738 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F27B44C0>)
2025-06-19 11:21:30,738 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001F3F27B44C0>) completed
2025-06-19 11:21:30,738 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:149 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-19 11:21:30,739 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:21:30,739 - httpx - INFO - [MainThread] - _client.py:1038 - HTTP Request: GET http://testserver/api/v1/performance/strategies "HTTP/1.1 200 OK"
2025-06-19 11:21:30,997 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:21:30,997 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:21:30,997 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:21:30,997 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:21:30,997 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:21:30,997 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:21:30,997 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:30,997 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:31,009 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:31,009 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:31,009 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F3F1361A80>)
2025-06-19 11:21:31,009 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F3F1361A80>) completed
2025-06-19 11:21:31,009 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F3F12804F0>)
2025-06-19 11:21:31,009 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001F3F12804F0>) completed
2025-06-19 11:21:31,114 - sqlalchemy.pool.impl.AsyncAdaptedQueuePool - ERROR - [MainThread] - base.py:1032 - The garbage collector is trying to clean up non-checked-in connection <AdaptedConnection <Connection(Thread-4, started daemon 19116)>>, which will be dropped, as it cannot be safely terminated.  Please ensure that SQLAlchemy pooled connections are returned to the pool explicitly, either by calling ``close()`` or by using appropriate context managers to manage their lifecycle.
2025-06-19 15:21:44,376 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:21:44,378 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:21:44,379 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:21:44,379 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:44380 - "GET /health HTTP/1.1" 200
2025-06-19 15:22:14,403 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:22:14,404 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:22:14,405 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:22:14,406 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:41778 - "GET /health HTTP/1.1" 200
2025-06-19 15:22:44,431 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:22:44,433 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:22:44,434 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:22:44,434 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:57896 - "GET /health HTTP/1.1" 200
2025-06-19 15:23:14,458 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:23:14,459 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:23:14,460 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:23:14,461 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:52980 - "GET /health HTTP/1.1" 200
2025-06-19 15:23:44,484 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:23:44,486 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:23:44,487 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:23:44,488 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:33310 - "GET /health HTTP/1.1" 200
2025-06-19 15:24:14,516 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:24:14,518 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:24:14,519 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:24:14,520 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:56604 - "GET /health HTTP/1.1" 200
2025-06-19 15:24:44,620 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:24:44,627 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:24:44,629 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:24:44,630 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:37998 - "GET /health HTTP/1.1" 200
2025-06-19 11:24:49,271 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:24:49,271 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 11:24:49,300 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 11:24:49,469 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:24:49,469 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:24:49,469 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpmqi2zwx_\test_db.sqlite
2025-06-19 11:24:49,492 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x000001B46E6B6DE0>
2025-06-19 11:24:49,494 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x000001B46E6B6DE0> completed
2025-06-19 11:24:49,495 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001B46E8A4220>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001B46E89DEE0>, deterministic=True)
2025-06-19 11:24:49,495 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001B46E8A4220>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001B46E89DEE0>, deterministic=True) completed
2025-06-19 11:24:49,495 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001B46E8A4220>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:24:49,495 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001B46E8A4220>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:24:49,495 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:49,495 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:49,500 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E895740>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:24:49,500 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E895740>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:24:49,501 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E895740>)
2025-06-19 11:24:49,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E895740>) completed
2025-06-19 11:24:49,501 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E895740>)
2025-06-19 11:24:49,501 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E895740>) completed
2025-06-19 11:24:49,501 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:49,502 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:49,503 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:49,503 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:49,503 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E895540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:24:49,503 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E895540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:24:49,506 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E895540>)
2025-06-19 11:24:49,506 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E895540>) completed
2025-06-19 11:24:49,506 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E895540>)
2025-06-19 11:24:49,507 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E895540>) completed
2025-06-19 11:24:49,507 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:49,507 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:49,509 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E895640>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 11:24:49,509 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E895640>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 11:24:49,509 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E895640>)
2025-06-19 11:24:49,509 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E895640>) completed
2025-06-19 11:24:49,509 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E895640>)
2025-06-19 11:24:49,509 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E895640>) completed
2025-06-19 11:24:49,511 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:49,511 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:49,511 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E8956C0>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:24:49,511 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E8956C0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:24:49,512 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E8956C0>)
2025-06-19 11:24:49,512 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E8956C0>) completed
2025-06-19 11:24:49,512 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E8956C0>)
2025-06-19 11:24:49,512 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E8956C0>) completed
2025-06-19 11:24:49,512 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:49,512 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:49,512 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E8957C0>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 11:24:49,512 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E8957C0>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 11:24:49,516 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E8957C0>)
2025-06-19 11:24:49,516 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E8957C0>) completed
2025-06-19 11:24:49,516 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E8957C0>)
2025-06-19 11:24:49,517 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E8957C0>) completed
2025-06-19 11:24:49,517 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:49,517 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:49,519 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E895840>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:24:49,519 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E895840>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:24:49,519 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E895840>)
2025-06-19 11:24:49,520 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E895840>) completed
2025-06-19 11:24:49,520 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E895840>)
2025-06-19 11:24:49,521 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E895840>) completed
2025-06-19 11:24:49,522 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:49,522 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:49,523 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E8959C0>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 11:24:49,523 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E8959C0>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:24:49,523 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E8959C0>)
2025-06-19 11:24:49,523 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E8959C0>) completed
2025-06-19 11:24:49,525 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E8959C0>)
2025-06-19 11:24:49,525 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E8959C0>) completed
2025-06-19 11:24:49,526 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:49,526 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:49,526 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E895940>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:24:49,526 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E895940>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:24:49,526 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E895940>)
2025-06-19 11:24:49,526 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E895940>) completed
2025-06-19 11:24:49,526 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E895940>)
2025-06-19 11:24:49,526 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E895940>) completed
2025-06-19 11:24:49,526 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:49,526 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:49,526 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E895B40>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 11:24:49,526 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E895B40>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 11:24:49,529 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E895B40>)
2025-06-19 11:24:49,529 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E895B40>) completed
2025-06-19 11:24:49,530 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E895B40>)
2025-06-19 11:24:49,530 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E895B40>) completed
2025-06-19 11:24:49,530 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:49,532 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:49,534 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E895CC0>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 11:24:49,538 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E895CC0>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 11:24:49,538 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E895CC0>)
2025-06-19 11:24:49,538 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E895CC0>) completed
2025-06-19 11:24:49,543 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:49,543 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:49,544 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E8958C0>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:24:49,548 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E8958C0>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:24:49,548 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E8958C0>)
2025-06-19 11:24:49,548 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E8958C0>) completed
2025-06-19 11:24:49,549 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:49,550 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:49,551 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E897040>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:24:49,563 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E897040>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:24:49,566 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E897040>)
2025-06-19 11:24:49,566 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E897040>) completed
2025-06-19 11:24:49,566 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:49,566 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:49,566 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E895BC0>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:24:49,574 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E895BC0>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:24:49,575 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E895BC0>)
2025-06-19 11:24:49,575 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E895BC0>) completed
2025-06-19 11:24:49,576 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:49,576 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:49,577 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:49,577 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:49,578 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:24:49,585 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:24:49,586 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: FJI7Y... (truncada por seguridad)
2025-06-19 11:24:49,587 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x000001B46E8B2A20>
2025-06-19 11:24:49,589 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x000001B46E8B2A20> completed
2025-06-19 11:24:49,590 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001B46E8F98A0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001B46E89DEE0>, deterministic=True)
2025-06-19 11:24:49,590 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001B46E8F98A0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x000001B46E89DEE0>, deterministic=True) completed
2025-06-19 11:24:49,590 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001B46E8F98A0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:24:49,590 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x000001B46E8F98A0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:24:49,591 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8F98A0>)
2025-06-19 11:24:49,591 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x000001B46E8F98A0>) completed
2025-06-19 11:24:49,592 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E8CF440>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 11:24:49,593 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x000001B46E8CF440>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 11:24:49,593 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E8CF440>)
2025-06-19 11:24:49,593 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x000001B46E8CF440>) completed
2025-06-19 11:24:49,594 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E8CF440>)
2025-06-19 11:24:49,594 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x000001B46E8CF440>) completed
2025-06-19 11:24:49,594 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:24:49,594 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001B46E8F98A0>)
2025-06-19 11:24:49,595 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001B46E8F98A0>) completed
2025-06-19 11:24:49,595 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001B46E8F98A0>)
2025-06-19 11:24:49,595 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001B46E8F98A0>) completed
2025-06-19 11:24:49,595 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:24:49,596 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:24:49,612 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:24:50,178 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:24:50,182 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:24:50,183 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:50,184 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:50,184 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:50,184 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 11:24:50,186 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001B46E8F98A0>)
2025-06-19 11:24:50,186 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001B46E8F98A0>) completed
2025-06-19 11:24:50,187 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x000001B46E8A4220>)
2025-06-19 11:24:50,187 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x000001B46E8A4220>) completed
2025-06-19 15:25:14,683 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:25:14,687 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:25:14,691 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:25:14,693 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:58296 - "GET /health HTTP/1.1" 200
2025-06-19 11:25:42,584 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:25:42,584 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 11:25:42,601 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 11:25:42,775 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:25:42,775 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:25:42,775 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpbpqagb6k\test_db.sqlite
2025-06-19 11:25:42,792 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x00000109F74E6DE0>
2025-06-19 11:25:42,792 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x00000109F74E6DE0> completed
2025-06-19 11:25:42,792 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000109F76D4220>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000109F76CDEE0>, deterministic=True)
2025-06-19 11:25:42,792 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000109F76D4220>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000109F76CDEE0>, deterministic=True) completed
2025-06-19 11:25:42,792 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000109F76D4220>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:25:42,792 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000109F76D4220>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:25:42,792 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:42,803 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:42,803 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C5740>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:25:42,803 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C5740>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C5740>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C5740>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C5740>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C5740>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C5540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C5540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C5540>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C5540>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C5540>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C5540>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C5640>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C5640>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C5640>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C5640>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C5640>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C5640>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C56C0>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C56C0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C56C0>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C56C0>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C56C0>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C56C0>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C57C0>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C57C0>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C57C0>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C57C0>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C57C0>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C57C0>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C5840>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C5840>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C5840>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C5840>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C5840>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C5840>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C59C0>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C59C0>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C59C0>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C59C0>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C59C0>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C59C0>) completed
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:42,805 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:42,817 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C5940>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:25:42,817 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C5940>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:25:42,817 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C5940>)
2025-06-19 11:25:42,817 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C5940>) completed
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C5940>)
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C5940>) completed
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C5B40>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C5B40>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C5B40>)
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76C5B40>) completed
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C5B40>)
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C5B40>) completed
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C5CC0>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C5CC0>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C5CC0>)
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C5CC0>) completed
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C58C0>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C58C0>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C58C0>)
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C58C0>) completed
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C7040>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C7040>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C7040>)
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C7040>) completed
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:42,819 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C5BC0>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:25:42,834 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76C5BC0>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:25:42,837 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C5BC0>)
2025-06-19 11:25:42,837 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76C5BC0>) completed
2025-06-19 11:25:42,837 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:42,837 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:42,837 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:42,837 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:42,837 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:25:42,851 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:25:42,851 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: 1FaaN... (truncada por seguridad)
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x00000109F76E2A20>
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x00000109F76E2A20> completed
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000109F77298A0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000109F76CDEE0>, deterministic=True)
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000109F77298A0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x00000109F76CDEE0>, deterministic=True) completed
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000109F77298A0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x00000109F77298A0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F77298A0>)
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x00000109F77298A0>) completed
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76FF440>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x00000109F76FF440>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76FF440>)
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x00000109F76FF440>) completed
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76FF440>)
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x00000109F76FF440>) completed
2025-06-19 11:25:42,855 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000109F77298A0>)
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000109F77298A0>) completed
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000109F77298A0>)
2025-06-19 11:25:42,855 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000109F77298A0>) completed
2025-06-19 11:25:42,855 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:25:42,855 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:25:42,869 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:25:43,275 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:25:43,277 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:25:43,281 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:43,282 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:43,283 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:43,284 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 11:25:43,293 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000109F77298A0>)
2025-06-19 11:25:43,293 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000109F77298A0>) completed
2025-06-19 11:25:43,293 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x00000109F76D4220>)
2025-06-19 11:25:43,299 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x00000109F76D4220>) completed
2025-06-19 15:25:44,735 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:25:44,740 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:25:44,743 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:25:44,745 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:51532 - "GET /health HTTP/1.1" 200
2025-06-19 15:26:14,796 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:26:14,801 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:26:14,807 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:26:14,811 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:45396 - "GET /health HTTP/1.1" 200
2025-06-19 11:26:33,059 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:26:33,059 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 11:26:33,078 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 11:26:33,227 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:26:33,227 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:26:33,227 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpmrvqxy9h\test_db.sqlite
2025-06-19 11:26:33,254 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x0000028B14406DE0>
2025-06-19 11:26:33,254 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x0000028B14406DE0> completed
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000028B145F4220>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000028B145EDEE0>, deterministic=True)
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000028B145F4220>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000028B145EDEE0>, deterministic=True) completed
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000028B145F4220>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000028B145F4220>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E5740>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E5740>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E5740>)
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E5740>) completed
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E5740>)
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E5740>) completed
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E5540>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E5540>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E5540>)
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E5540>) completed
2025-06-19 11:26:33,261 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E5540>)
2025-06-19 11:26:33,268 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E5540>) completed
2025-06-19 11:26:33,268 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:33,268 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:33,270 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E5640>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 11:26:33,270 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E5640>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 11:26:33,270 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E5640>)
2025-06-19 11:26:33,270 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E5640>) completed
2025-06-19 11:26:33,270 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E5640>)
2025-06-19 11:26:33,270 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E5640>) completed
2025-06-19 11:26:33,272 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:33,272 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:33,272 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E56C0>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:26:33,272 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E56C0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:26:33,274 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E56C0>)
2025-06-19 11:26:33,275 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E56C0>) completed
2025-06-19 11:26:33,275 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E56C0>)
2025-06-19 11:26:33,275 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E56C0>) completed
2025-06-19 11:26:33,275 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:33,275 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:33,278 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E57C0>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 11:26:33,278 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E57C0>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 11:26:33,278 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E57C0>)
2025-06-19 11:26:33,280 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E57C0>) completed
2025-06-19 11:26:33,280 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E57C0>)
2025-06-19 11:26:33,280 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E57C0>) completed
2025-06-19 11:26:33,280 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:33,280 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:33,280 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E5840>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:26:33,280 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E5840>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:26:33,280 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E5840>)
2025-06-19 11:26:33,280 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E5840>) completed
2025-06-19 11:26:33,280 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E5840>)
2025-06-19 11:26:33,280 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E5840>) completed
2025-06-19 11:26:33,280 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:33,283 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:33,283 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E59C0>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 11:26:33,283 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E59C0>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:26:33,283 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E59C0>)
2025-06-19 11:26:33,283 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E59C0>) completed
2025-06-19 11:26:33,285 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E59C0>)
2025-06-19 11:26:33,285 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E59C0>) completed
2025-06-19 11:26:33,287 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:33,287 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:33,288 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E5940>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:26:33,288 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E5940>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:26:33,289 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E5940>)
2025-06-19 11:26:33,289 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E5940>) completed
2025-06-19 11:26:33,289 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E5940>)
2025-06-19 11:26:33,289 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E5940>) completed
2025-06-19 11:26:33,289 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:33,289 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:33,289 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E5B40>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 11:26:33,289 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E5B40>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 11:26:33,289 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E5B40>)
2025-06-19 11:26:33,289 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B145E5B40>) completed
2025-06-19 11:26:33,289 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E5B40>)
2025-06-19 11:26:33,289 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E5B40>) completed
2025-06-19 11:26:33,292 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:33,292 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:33,292 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E5CC0>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 11:26:33,292 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E5CC0>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 11:26:33,292 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E5CC0>)
2025-06-19 11:26:33,292 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E5CC0>) completed
2025-06-19 11:26:33,292 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:33,292 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:33,292 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E58C0>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:26:33,307 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E58C0>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:26:33,307 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E58C0>)
2025-06-19 11:26:33,307 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E58C0>) completed
2025-06-19 11:26:33,309 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:33,309 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:33,309 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E7040>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:26:33,319 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E7040>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:26:33,320 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E7040>)
2025-06-19 11:26:33,320 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E7040>) completed
2025-06-19 11:26:33,320 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:33,320 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:33,324 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E5BC0>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:26:33,333 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B145E5BC0>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:26:33,336 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E5BC0>)
2025-06-19 11:26:33,336 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B145E5BC0>) completed
2025-06-19 11:26:33,338 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:33,338 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:33,338 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:33,338 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:33,338 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:26:33,344 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:26:33,344 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: 0Qr8t... (truncada por seguridad)
2025-06-19 11:26:33,346 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x0000028B14602A20>
2025-06-19 11:26:33,346 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x0000028B14602A20> completed
2025-06-19 11:26:33,346 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000028B146498A0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000028B145EDEE0>, deterministic=True)
2025-06-19 11:26:33,346 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000028B146498A0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000028B145EDEE0>, deterministic=True) completed
2025-06-19 11:26:33,346 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000028B146498A0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:26:33,346 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000028B146498A0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:26:33,346 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B146498A0>)
2025-06-19 11:26:33,350 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B146498A0>) completed
2025-06-19 11:26:33,350 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B1461B4C0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 11:26:33,350 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B1461B4C0>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 11:26:33,351 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B1461B4C0>)
2025-06-19 11:26:33,351 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B1461B4C0>) completed
2025-06-19 11:26:33,351 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B1461B4C0>)
2025-06-19 11:26:33,352 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B1461B4C0>) completed
2025-06-19 11:26:33,352 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:26:33,352 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028B146498A0>)
2025-06-19 11:26:33,352 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028B146498A0>) completed
2025-06-19 11:26:33,352 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028B146498A0>)
2025-06-19 11:26:33,352 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028B146498A0>) completed
2025-06-19 11:26:33,354 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:26:33,354 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:26:33,371 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:26:33,388 - asyncio - DEBUG - [Thread-3 (run_blocking_portal)] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:26:33,390 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:26:33,390 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:26:33,390 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:26:33,390 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpmrvqxy9h\test_db.sqlite
2025-06-19 11:26:33,390 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing <function connect.<locals>.connector at 0x0000028B159CE160>
2025-06-19 11:26:33,390 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation <function connect.<locals>.connector at 0x0000028B159CE160> completed
2025-06-19 11:26:33,390 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000028B159D1120>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000028B159CDA80>, deterministic=True)
2025-06-19 11:26:33,390 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000028B159D1120>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000028B159CDA80>, deterministic=True) completed
2025-06-19 11:26:33,390 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000028B159D1120>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:26:33,390 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000028B159D1120>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:26:33,390 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B159D1120>)
2025-06-19 11:26:33,390 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B159D1120>) completed
2025-06-19 11:26:33,390 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B159C9BC0>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:26:33,390 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B159C9BC0>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:26:33,390 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B159C9BC0>)
2025-06-19 11:26:33,390 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B159C9BC0>) completed
2025-06-19 11:26:33,390 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B159C9BC0>)
2025-06-19 11:26:33,390 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B159C9BC0>) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028B159D1120>)
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028B159D1120>) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B159D1120>)
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B159D1120>) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B159C9CC0>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B159C9CC0>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B159C9CC0>)
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B159C9CC0>) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B159C9CC0>)
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B159C9CC0>) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B159D1120>)
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B159D1120>) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B159C9D40>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B159C9D40>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B159C9D40>)
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B159C9D40>) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B159C9D40>)
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B159C9D40>) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B159D1120>)
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B159D1120>) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B159C9EC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B159C9EC0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B159C9EC0>)
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B159C9EC0>) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B159C9EC0>)
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B159C9EC0>) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B159D1120>)
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000028B159D1120>) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B159C9E40>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000028B159C9E40>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B159C9E40>)
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000028B159C9E40>) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B159C9E40>)
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000028B159C9E40>) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000028B159D1120>)
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000028B159D1120>) completed
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028B159D1120>)
2025-06-19 11:26:33,396 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028B159D1120>) completed
2025-06-19 11:26:33,396 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-19 11:26:33,406 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:26:33,406 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:26:33,615 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:26:33,615 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:26:33,842 - ultibot_backend.services.order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:26:33,842 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:26:33,842 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: 0Qr8t... (truncada por seguridad)
2025-06-19 11:26:33,842 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:26:33,842 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-3 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:26:33,845 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x0000028B159D5E90>
2025-06-19 11:26:33,845 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:26:33,845 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:26:33,845 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:26:33,845 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2796365839632'>
2025-06-19 11:26:33,845 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:26:33,845 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:26:33,848 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:26:33,848 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:26:34,238 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:26:34,241 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:26:34,241 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:34,241 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:34,242 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:34,242 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 11:26:34,242 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000028B146498A0>)
2025-06-19 11:26:34,242 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000028B146498A0>) completed
2025-06-19 11:26:34,242 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000028B145F4220>)
2025-06-19 11:26:34,242 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000028B145F4220>) completed
2025-06-19 15:26:44,855 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:26:44,859 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:26:44,862 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:26:44,864 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:53662 - "GET /health HTTP/1.1" 200
2025-06-19 15:27:14,926 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:27:14,929 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:27:14,932 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:27:14,935 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:35716 - "GET /health HTTP/1.1" 200
2025-06-19 15:27:44,987 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:27:45,007 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:27:45,010 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:27:45,012 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:37850 - "GET /health HTTP/1.1" 200
2025-06-19 15:28:15,078 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:28:15,082 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:28:15,083 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:28:15,086 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:45930 - "GET /health HTTP/1.1" 200
2025-06-19 15:28:45,127 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:28:45,131 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:28:45,136 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:28:45,139 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:47608 - "GET /health HTTP/1.1" 200
2025-06-19 11:28:52,484 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:28:52,484 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 11:28:52,503 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 11:28:52,680 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:28:52,680 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:28:52,688 - tests.conftest - INFO - [MainThread] - conftest.py:45 - Entorno de prueba configurado. DATABASE_URL: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpvs9wcjoh\test_db.sqlite
2025-06-19 11:28:52,702 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing <function connect.<locals>.connector at 0x0000025A50D7A840>
2025-06-19 11:28:52,702 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation <function connect.<locals>.connector at 0x0000025A50D7A840> completed
2025-06-19 11:28:52,707 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025A50D844F0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000025A50D79B20>, deterministic=True)
2025-06-19 11:28:52,707 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025A50D844F0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000025A50D79B20>, deterministic=True) completed
2025-06-19 11:28:52,707 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025A50D844F0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:28:52,707 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025A50D844F0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:28:52,709 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:52,709 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:52,709 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7D840>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:28:52,709 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7D840>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:28:52,709 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50D7D840>)
2025-06-19 11:28:52,709 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50D7D840>) completed
2025-06-19 11:28:52,710 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7D840>)
2025-06-19 11:28:52,710 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7D840>) completed
2025-06-19 11:28:52,710 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:52,710 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:52,713 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:52,714 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:52,714 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7D640>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:28:52,714 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7D640>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:28:52,714 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50D7D640>)
2025-06-19 11:28:52,714 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50D7D640>) completed
2025-06-19 11:28:52,714 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7D640>)
2025-06-19 11:28:52,714 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7D640>) completed
2025-06-19 11:28:52,714 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:52,714 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:52,714 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7D740>, 'PRAGMA temp.table_info("user_configurations")', ())
2025-06-19 11:28:52,718 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7D740>, 'PRAGMA temp.table_info("user_configurations")', ()) completed
2025-06-19 11:28:52,718 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50D7D740>)
2025-06-19 11:28:52,718 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50D7D740>) completed
2025-06-19 11:28:52,718 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7D740>)
2025-06-19 11:28:52,718 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7D740>) completed
2025-06-19 11:28:52,718 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:52,718 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:52,718 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7D7C0>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:28:52,718 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7D7C0>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:28:52,718 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50D7D7C0>)
2025-06-19 11:28:52,718 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50D7D7C0>) completed
2025-06-19 11:28:52,718 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7D7C0>)
2025-06-19 11:28:52,718 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7D7C0>) completed
2025-06-19 11:28:52,723 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:52,723 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:52,723 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7D8C0>, 'PRAGMA temp.table_info("trades")', ())
2025-06-19 11:28:52,725 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7D8C0>, 'PRAGMA temp.table_info("trades")', ()) completed
2025-06-19 11:28:52,727 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50D7D8C0>)
2025-06-19 11:28:52,727 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50D7D8C0>) completed
2025-06-19 11:28:52,727 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7D8C0>)
2025-06-19 11:28:52,727 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7D8C0>) completed
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50BDB040>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50BDB040>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50BDB040>)
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50BDB040>) completed
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50BDB040>)
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50BDB040>) completed
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50BDAFC0>, 'PRAGMA temp.table_info("portfolio_snapshots")', ())
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50BDAFC0>, 'PRAGMA temp.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50BDAFC0>)
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50BDAFC0>) completed
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50BDAFC0>)
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50BDAFC0>) completed
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7D9C0>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7D9C0>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50D7D9C0>)
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50D7D9C0>) completed
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7D9C0>)
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7D9C0>) completed
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7DAC0>, 'PRAGMA temp.table_info("opportunities")', ())
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7DAC0>, 'PRAGMA temp.table_info("opportunities")', ()) completed
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50D7DAC0>)
2025-06-19 11:28:52,728 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50D7DAC0>) completed
2025-06-19 11:28:52,737 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7DAC0>)
2025-06-19 11:28:52,737 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7DAC0>) completed
2025-06-19 11:28:52,739 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:52,739 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:52,739 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7DC40>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ())
2025-06-19 11:28:52,741 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7DC40>, '\nCREATE TABLE user_configurations (\n\tid VARCHAR NOT NULL, \n\tuser_id VARCHAR NOT NULL, \n\ttelegram_chat_id VARCHAR, \n\tnotification_preferences TEXT, \n\tenable_telegram_notifications BOOLEAN, \n\tdefault_paper_trading_capital FLOAT, \n\tpaper_trading_active BOOLEAN, \n\tpaper_trading_assets TEXT, \n\twatchlists TEXT, \n\tfavorite_pairs TEXT, \n\trisk_profile TEXT, \n\trisk_profile_settings TEXT, \n\treal_trading_settings TEXT, \n\tai_strategy_configurations TEXT, \n\tai_analysis_confidence_thresholds TEXT, \n\tmcp_server_preferences TEXT, \n\tselected_theme VARCHAR, \n\tdashboard_layout_profiles TEXT, \n\tactive_dashboard_layout_profile_id VARCHAR, \n\tdashboard_layout_config TEXT, \n\tcloud_sync_preferences TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tPRIMARY KEY (id), \n\tUNIQUE (user_id)\n)\n\n', ()) completed
2025-06-19 11:28:52,741 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7DC40>)
2025-06-19 11:28:52,741 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7DC40>) completed
2025-06-19 11:28:52,741 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:52,741 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:52,741 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7D940>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:28:52,747 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7D940>, '\nCREATE TABLE trades (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tdata TEXT NOT NULL, \n\tposition_status VARCHAR NOT NULL, \n\tmode VARCHAR NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tclosed_at DATETIME, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:28:52,747 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7D940>)
2025-06-19 11:28:52,747 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7D940>) completed
2025-06-19 11:28:52,747 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:52,749 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:52,749 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7EFC0>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:28:52,749 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7EFC0>, '\nCREATE TABLE portfolio_snapshots (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\ttimestamp DATETIME NOT NULL, \n\tdata TEXT NOT NULL, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:28:52,749 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7EFC0>)
2025-06-19 11:28:52,749 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7EFC0>) completed
2025-06-19 11:28:52,749 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:52,753 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:52,753 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7DB40>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ())
2025-06-19 11:28:52,757 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50D7DB40>, '\nCREATE TABLE opportunities (\n\tid TEXT NOT NULL, \n\tuser_id TEXT NOT NULL, \n\tsymbol VARCHAR NOT NULL, \n\tdetected_at DATETIME NOT NULL, \n\tsource_type VARCHAR NOT NULL, \n\tsource_name VARCHAR NOT NULL, \n\tsource_data TEXT, \n\tinitial_signal TEXT, \n\tsystem_calculated_priority_score FLOAT, \n\tlast_priority_calculation_at DATETIME, \n\tstatus VARCHAR NOT NULL, \n\tstatus_reason_code VARCHAR, \n\tstatus_reason_text TEXT, \n\tai_analysis TEXT, \n\tinvestigation_details TEXT, \n\tuser_feedback TEXT, \n\tlinked_trade_ids TEXT, \n\texpires_at DATETIME, \n\texpiration_logic TEXT, \n\tpost_trade_feedback TEXT, \n\tpost_facto_simulation_results TEXT, \n\tcreated_at DATETIME, \n\tupdated_at DATETIME, \n\tstrategy_id TEXT, \n\tPRIMARY KEY (id)\n)\n\n', ()) completed
2025-06-19 11:28:52,760 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7DB40>)
2025-06-19 11:28:52,760 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50D7DB40>) completed
2025-06-19 11:28:52,760 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:52,760 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:52,760 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:52,760 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:52,762 - asyncio - DEBUG - [MainThread] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:28:52,769 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:28:52,771 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: Cof5Z... (truncada por seguridad)
2025-06-19 11:28:52,774 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing <function connect.<locals>.connector at 0x0000025A50DB1BC0>
2025-06-19 11:28:52,778 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation <function connect.<locals>.connector at 0x0000025A50DB1BC0> completed
2025-06-19 11:28:52,778 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025A50DD96C0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000025A50D79B20>, deterministic=True)
2025-06-19 11:28:52,778 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025A50DD96C0>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000025A50D79B20>, deterministic=True) completed
2025-06-19 11:28:52,779 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025A50DD96C0>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:28:52,779 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025A50DD96C0>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:28:52,779 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50DD96C0>)
2025-06-19 11:28:52,780 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A50DD96C0>) completed
2025-06-19 11:28:52,781 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50DA7A40>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',))
2025-06-19 11:28:52,781 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A50DA7A40>, 'SELECT * FROM user_configurations WHERE user_id = ? LIMIT 1', ('00000000-0000-0000-0000-000000000001',)) completed
2025-06-19 11:28:52,781 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50DA7A40>)
2025-06-19 11:28:52,781 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A50DA7A40>) completed
2025-06-19 11:28:52,781 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50DA7A40>)
2025-06-19 11:28:52,781 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A50DA7A40>) completed
2025-06-19 11:28:52,781 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:28:52,781 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025A50DD96C0>)
2025-06-19 11:28:52,781 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025A50DD96C0>) completed
2025-06-19 11:28:52,781 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025A50DD96C0>)
2025-06-19 11:28:52,781 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025A50DD96C0>) completed
2025-06-19 11:28:52,781 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:28:52,785 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:28:52,802 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:28:52,802 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2586925855184'>
2025-06-19 11:28:52,819 - asyncio - DEBUG - [Thread-3 (run_blocking_portal)] - selector_events.py:54 - Using selector: SelectSelector
2025-06-19 11:28:52,823 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:28:52,823 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:28:52,823 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:28:52,823 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpvs9wcjoh\test_db.sqlite
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing <function connect.<locals>.connector at 0x0000025A5212E3E0>
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation <function connect.<locals>.connector at 0x0000025A5212E3E0> completed
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025A52134F40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000025A5212DD00>, deterministic=True)
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025A52134F40>, 'regexp', 2, <function SQLiteDialect_pysqlite.on_connect.<locals>.regexp at 0x0000025A5212DD00>, deterministic=True) completed
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025A52134F40>, 'floor', 1, <built-in function floor>, deterministic=True)
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method create_function of sqlite3.Connection object at 0x0000025A52134F40>, 'floor', 1, <built-in function floor>, deterministic=True) completed
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A52134F40>)
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A52134F40>) completed
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A52125DC0>, 'PRAGMA read_uncommitted', [])
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A52125DC0>, 'PRAGMA read_uncommitted', []) completed
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A52125DC0>)
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A52125DC0>) completed
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A52125DC0>)
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A52125DC0>) completed
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025A52134F40>)
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025A52134F40>) completed
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A52134F40>)
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A52134F40>) completed
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A52125EC0>, 'PRAGMA main.table_info("user_configurations")', ())
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A52125EC0>, 'PRAGMA main.table_info("user_configurations")', ()) completed
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A52125EC0>)
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A52125EC0>) completed
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A52125EC0>)
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A52125EC0>) completed
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A52134F40>)
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A52134F40>) completed
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A52125F40>, 'PRAGMA main.table_info("trades")', ())
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A52125F40>, 'PRAGMA main.table_info("trades")', ()) completed
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A52125F40>)
2025-06-19 11:28:52,825 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A52125F40>) completed
2025-06-19 11:28:52,834 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A52125F40>)
2025-06-19 11:28:52,834 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A52125F40>) completed
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A52134F40>)
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A52134F40>) completed
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A521260C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ())
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A521260C0>, 'PRAGMA main.table_info("portfolio_snapshots")', ()) completed
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A521260C0>)
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A521260C0>) completed
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A521260C0>)
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A521260C0>) completed
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A52134F40>)
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method cursor of sqlite3.Connection object at 0x0000025A52134F40>) completed
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A52126040>, 'PRAGMA main.table_info("opportunities")', ())
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method execute of sqlite3.Cursor object at 0x0000025A52126040>, 'PRAGMA main.table_info("opportunities")', ()) completed
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A52126040>)
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method fetchall of sqlite3.Cursor object at 0x0000025A52126040>) completed
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A52126040>)
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Cursor object at 0x0000025A52126040>) completed
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000025A52134F40>)
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method commit of sqlite3.Connection object at 0x0000025A52134F40>) completed
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025A52134F40>)
2025-06-19 11:28:52,835 - aiosqlite - DEBUG - [Thread-4] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025A52134F40>) completed
2025-06-19 11:28:52,835 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-19 11:28:52,835 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:28:52,835 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:28:53,121 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:82 - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-19 11:28:53,123 - httpx - DEBUG - [Thread-3 (run_blocking_portal)] - _config.py:148 - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-19 11:28:53,374 - ultibot_backend.services.order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:28:53,374 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:28:53,374 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: Cof5Z... (truncada por seguridad)
2025-06-19 11:28:53,374 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:28:53,374 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-3 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:28:53,374 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x0000025A52131E50>
2025-06-19 11:28:53,374 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:28:53,374 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:28:53,374 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:28:53,385 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:28:53,385 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:129 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 11:28:53,385 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:138 - Using injected persistence_service: <AsyncMock spec='SupabasePersistenceService' id='2586925855184'>
2025-06-19 11:28:53,387 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:149 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-19 11:28:53,387 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:28:53,388 - httpx - INFO - [MainThread] - _client.py:1038 - HTTP Request: GET http://testserver/api/v1/performance/strategies "HTTP/1.1 200 OK"
2025-06-19 11:28:53,391 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:28:53,391 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:28:53,391 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:28:53,391 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:28:53,391 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:28:53,391 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:28:53,391 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:53,391 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:53,391 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:53,391 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method rollback of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 11:28:53,391 - aiosqlite - DEBUG - [Thread-2] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000025A50DD96C0>)
2025-06-19 11:28:53,391 - aiosqlite - DEBUG - [Thread-2] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000025A50DD96C0>) completed
2025-06-19 11:28:53,391 - aiosqlite - DEBUG - [Thread-1] - core.py:104 - executing functools.partial(<built-in method close of sqlite3.Connection object at 0x0000025A50D844F0>)
2025-06-19 11:28:53,391 - aiosqlite - DEBUG - [Thread-1] - core.py:106 - operation functools.partial(<built-in method close of sqlite3.Connection object at 0x0000025A50D844F0>) completed
2025-06-19 15:29:15,195 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:29:15,199 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:29:15,202 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:29:15,204 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:39888 - "GET /health HTTP/1.1" 200
2025-06-19 11:29:45,098 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:29:45,099 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 11:29:45,117 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 15:29:45,252 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:29:45,257 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:29:45,260 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:29:45,262 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:35448 - "GET /health HTTP/1.1" 200
2025-06-19 11:29:45,330 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-19 11:29:45,654 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-19 11:29:45,661 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-19 11:29:45,662 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-19 11:29:45,662 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-19 11:29:45,741 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-19 11:29:45,744 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-19 11:29:46,757 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:46,757 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:46,766 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:46,766 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:46,766 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:46,784 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:46,784 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2369638368976'>
2025-06-19 11:29:46,801 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:29:46,801 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:29:46,801 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:29:46,801 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:57 - Corrected SQLite URL to use aiosqlite: sqlite+aiosqlite:///C:\Users\zamor\AppData\Local\Temp\tmpce5ech1o\test_db.sqlite
2025-06-19 11:29:46,820 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:77 - Database tables created and session factory initialized successfully
2025-06-19 11:29:47,230 - ultibot_backend.services.order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:47,231 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:47,231 - ultibot_backend.services.credential_service - INFO - [Thread-3 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:47,232 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-3 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:29:47,234 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-3 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:47,234 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000227B9AED550>
2025-06-19 11:29:47,234 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:29:47,234 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:29:47,234 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:29:47,240 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:29:47,242 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:129 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 11:29:47,242 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:138 - Using injected persistence_service: <AsyncMock spec='SupabasePersistenceService' id='2369638368976'>
2025-06-19 11:29:47,244 - ultibot_backend.services.performance_service - INFO - [Thread-3 (run_blocking_portal)] - performance_service.py:149 - No closed trades found for user 00000000-0000-0000-0000-000000000001 with mode_filter: None
2025-06-19 11:29:47,246 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:29:47,247 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:29:47,248 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:29:47,248 - ultibot_backend.dependencies - INFO - [Thread-3 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:29:47,249 - ultibot_backend - INFO - [Thread-3 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:29:47,250 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:47,252 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:47,263 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:47,263 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:47,267 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:47,269 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:47,269 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:47,272 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:47,272 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2369640653328'>
2025-06-19 11:29:47,273 - ultibot_backend - INFO - [Thread-5 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:29:47,273 - ultibot_backend - INFO - [Thread-5 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:29:47,273 - ultibot_backend.dependencies - INFO - [Thread-5 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:29:47,672 - ultibot_backend.services.order_execution_service - INFO - [Thread-5 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:47,674 - ultibot_backend.services.credential_service - INFO - [Thread-5 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:47,674 - ultibot_backend.services.credential_service - INFO - [Thread-5 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:47,674 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-5 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:29:47,676 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-5 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:47,676 - ultibot_backend.services.performance_service - INFO - [Thread-5 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000227B97A9A10>
2025-06-19 11:29:47,676 - ultibot_backend.dependencies - INFO - [Thread-5 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:29:47,676 - ultibot_backend - INFO - [Thread-5 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:29:47,676 - ultibot_backend - INFO - [Thread-5 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:29:47,676 - ultibot_backend - INFO - [Thread-5 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:29:47,676 - ultibot_backend.services.performance_service - INFO - [Thread-5 (run_blocking_portal)] - performance_service.py:129 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-19 11:29:47,676 - ultibot_backend.services.performance_service - INFO - [Thread-5 (run_blocking_portal)] - performance_service.py:138 - Using injected persistence_service: <AsyncMock spec='SupabasePersistenceService' id='2369640653328'>
2025-06-19 11:29:47,676 - ultibot_backend.services.performance_service - INFO - [Thread-5 (run_blocking_portal)] - performance_service.py:189 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-19 11:29:47,676 - ultibot_backend - INFO - [Thread-5 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:29:47,676 - ultibot_backend - INFO - [Thread-5 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:29:47,676 - ultibot_backend.dependencies - INFO - [Thread-5 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:29:47,676 - ultibot_backend.dependencies - INFO - [Thread-5 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:29:47,684 - ultibot_backend - INFO - [Thread-5 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:29:47,684 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:47,686 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:47,695 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:47,695 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:47,700 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:47,701 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:47,701 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:47,701 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:47,701 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2369642283088'>
2025-06-19 11:29:47,701 - ultibot_backend - INFO - [Thread-6 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:29:47,701 - ultibot_backend - INFO - [Thread-6 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:29:47,701 - ultibot_backend.dependencies - INFO - [Thread-6 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:29:48,117 - ultibot_backend.services.order_execution_service - INFO - [Thread-6 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:48,117 - ultibot_backend.services.credential_service - INFO - [Thread-6 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:48,119 - ultibot_backend.services.credential_service - INFO - [Thread-6 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:48,119 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-6 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:29:48,121 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-6 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:48,121 - ultibot_backend.services.performance_service - INFO - [Thread-6 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000227B9742110>
2025-06-19 11:29:48,121 - ultibot_backend.dependencies - INFO - [Thread-6 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:29:48,121 - ultibot_backend - INFO - [Thread-6 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:29:48,121 - ultibot_backend - INFO - [Thread-6 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:29:48,125 - ultibot_backend - INFO - [Thread-6 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:29:48,125 - ultibot_backend.services.performance_service - INFO - [Thread-6 (run_blocking_portal)] - performance_service.py:129 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.REAL
2025-06-19 11:29:48,125 - ultibot_backend.services.performance_service - INFO - [Thread-6 (run_blocking_portal)] - performance_service.py:138 - Using injected persistence_service: <AsyncMock spec='SupabasePersistenceService' id='2369642283088'>
2025-06-19 11:29:48,125 - ultibot_backend.services.performance_service - INFO - [Thread-6 (run_blocking_portal)] - performance_service.py:189 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-19 11:29:48,125 - ultibot_backend - INFO - [Thread-6 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:29:48,125 - ultibot_backend - INFO - [Thread-6 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:29:48,125 - ultibot_backend.dependencies - INFO - [Thread-6 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:29:48,125 - ultibot_backend.dependencies - INFO - [Thread-6 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:29:48,125 - ultibot_backend - INFO - [Thread-6 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:29:48,125 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:48,135 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:48,144 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:48,144 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:48,144 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:48,150 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:48,150 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:48,156 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:48,156 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2369638440144'>
2025-06-19 11:29:48,156 - ultibot_backend - INFO - [Thread-7 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:29:48,156 - ultibot_backend - INFO - [Thread-7 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:29:48,156 - ultibot_backend.dependencies - INFO - [Thread-7 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:29:48,554 - ultibot_backend.services.order_execution_service - INFO - [Thread-7 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:48,554 - ultibot_backend.services.credential_service - INFO - [Thread-7 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:48,556 - ultibot_backend.services.credential_service - INFO - [Thread-7 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:48,556 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-7 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:29:48,558 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-7 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:48,560 - ultibot_backend.services.performance_service - INFO - [Thread-7 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000227B9742110>
2025-06-19 11:29:48,560 - ultibot_backend.dependencies - INFO - [Thread-7 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:29:48,560 - ultibot_backend - INFO - [Thread-7 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:29:48,560 - ultibot_backend - INFO - [Thread-7 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:29:48,560 - ultibot_backend - INFO - [Thread-7 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:29:48,560 - ultibot_backend.services.performance_service - INFO - [Thread-7 (run_blocking_portal)] - performance_service.py:129 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 11:29:48,560 - ultibot_backend.services.performance_service - INFO - [Thread-7 (run_blocking_portal)] - performance_service.py:138 - Using injected persistence_service: <AsyncMock spec='SupabasePersistenceService' id='2369638440144'>
2025-06-19 11:29:48,560 - ultibot_backend.services.performance_service - INFO - [Thread-7 (run_blocking_portal)] - performance_service.py:189 - Generated 2 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-19 11:29:48,560 - ultibot_backend - INFO - [Thread-7 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:29:48,945 - ultibot_backend - INFO - [Thread-7 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:29:48,945 - ultibot_backend.dependencies - INFO - [Thread-7 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:29:48,955 - ultibot_backend.dependencies - INFO - [Thread-7 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:29:48,955 - ultibot_backend - INFO - [Thread-7 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:29:48,958 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:48,958 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:48,964 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:48,964 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:48,972 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:48,976 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:48,978 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:48,981 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:48,981 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2369642412944'>
2025-06-19 11:29:48,985 - ultibot_backend - INFO - [Thread-8 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:29:48,988 - ultibot_backend - INFO - [Thread-8 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:29:48,988 - ultibot_backend.dependencies - INFO - [Thread-8 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:29:49,387 - ultibot_backend.services.order_execution_service - INFO - [Thread-8 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:49,387 - ultibot_backend.services.credential_service - INFO - [Thread-8 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:49,387 - ultibot_backend.services.credential_service - INFO - [Thread-8 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:49,387 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-8 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:29:49,388 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-8 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:49,388 - ultibot_backend.services.performance_service - INFO - [Thread-8 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000227B97A8590>
2025-06-19 11:29:49,388 - ultibot_backend.dependencies - INFO - [Thread-8 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:29:49,388 - ultibot_backend - INFO - [Thread-8 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:29:49,388 - ultibot_backend - INFO - [Thread-8 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:29:49,388 - ultibot_backend - INFO - [Thread-8 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:29:49,388 - ultibot_backend.services.performance_service - INFO - [Thread-8 (run_blocking_portal)] - performance_service.py:129 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: OperatingMode.PAPER
2025-06-19 11:29:49,395 - ultibot_backend.services.performance_service - INFO - [Thread-8 (run_blocking_portal)] - performance_service.py:138 - Using injected persistence_service: <AsyncMock spec='SupabasePersistenceService' id='2369642412944'>
2025-06-19 11:29:49,395 - ultibot_backend.services.performance_service - INFO - [Thread-8 (run_blocking_portal)] - performance_service.py:189 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-19 11:29:49,395 - ultibot_backend - INFO - [Thread-8 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:29:49,396 - ultibot_backend - INFO - [Thread-8 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:29:49,398 - ultibot_backend.dependencies - INFO - [Thread-8 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:29:49,398 - ultibot_backend.dependencies - INFO - [Thread-8 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:29:49,398 - ultibot_backend - INFO - [Thread-8 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:29:49,398 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:49,398 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:49,409 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:49,409 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:49,409 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:49,409 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:49,409 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:49,418 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:49,420 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2369644937680'>
2025-06-19 11:29:49,420 - ultibot_backend - INFO - [Thread-9 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:29:49,420 - ultibot_backend - INFO - [Thread-9 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:29:49,420 - ultibot_backend.dependencies - INFO - [Thread-9 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:29:49,875 - ultibot_backend.services.order_execution_service - INFO - [Thread-9 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:49,875 - ultibot_backend.services.credential_service - INFO - [Thread-9 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:49,875 - ultibot_backend.services.credential_service - INFO - [Thread-9 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:49,875 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-9 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:29:49,877 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-9 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:49,877 - ultibot_backend.services.performance_service - INFO - [Thread-9 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000227B9742E50>
2025-06-19 11:29:49,877 - ultibot_backend.dependencies - INFO - [Thread-9 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:29:49,879 - ultibot_backend - INFO - [Thread-9 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:29:49,879 - ultibot_backend - INFO - [Thread-9 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:29:49,880 - ultibot_backend - INFO - [Thread-9 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:29:49,880 - ultibot_backend - INFO - [Thread-9 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 422
2025-06-19 11:29:49,892 - ultibot_backend - INFO - [Thread-9 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:29:49,892 - ultibot_backend.dependencies - INFO - [Thread-9 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:29:49,892 - ultibot_backend.dependencies - INFO - [Thread-9 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:29:49,892 - ultibot_backend - INFO - [Thread-9 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:29:49,894 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:49,894 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:49,899 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:49,899 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:49,899 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:49,899 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:49,899 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:49,913 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:49,913 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2369644276176'>
2025-06-19 11:29:49,913 - ultibot_backend - INFO - [Thread-10 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:29:49,913 - ultibot_backend - INFO - [Thread-10 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:29:49,913 - ultibot_backend.dependencies - INFO - [Thread-10 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:29:50,418 - ultibot_backend.services.order_execution_service - INFO - [Thread-10 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:50,418 - ultibot_backend.services.credential_service - INFO - [Thread-10 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:50,418 - ultibot_backend.services.credential_service - INFO - [Thread-10 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:50,418 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-10 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:29:50,421 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-10 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:50,423 - ultibot_backend.services.performance_service - INFO - [Thread-10 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000227B9B63950>
2025-06-19 11:29:50,423 - ultibot_backend.dependencies - INFO - [Thread-10 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:29:50,423 - ultibot_backend - INFO - [Thread-10 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:29:50,423 - ultibot_backend - INFO - [Thread-10 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:29:50,423 - ultibot_backend - INFO - [Thread-10 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/performance/strategies
2025-06-19 11:29:50,423 - ultibot_backend.services.performance_service - INFO - [Thread-10 (run_blocking_portal)] - performance_service.py:129 - Fetching performance data for user 00000000-0000-0000-0000-000000000001, mode_filter: None
2025-06-19 11:29:50,423 - ultibot_backend.services.performance_service - INFO - [Thread-10 (run_blocking_portal)] - performance_service.py:138 - Using injected persistence_service: <AsyncMock spec='SupabasePersistenceService' id='2369644276176'>
2025-06-19 11:29:50,423 - ultibot_backend.services.performance_service - INFO - [Thread-10 (run_blocking_portal)] - performance_service.py:189 - Generated 1 performance entries for user 00000000-0000-0000-0000-000000000001
2025-06-19 11:29:50,423 - ultibot_backend - INFO - [Thread-10 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/performance/strategies - Status: 200
2025-06-19 11:29:50,439 - ultibot_backend - INFO - [Thread-10 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:29:50,439 - ultibot_backend.dependencies - INFO - [Thread-10 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:29:50,439 - ultibot_backend.dependencies - INFO - [Thread-10 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:29:50,439 - ultibot_backend - INFO - [Thread-10 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:29:50,439 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:50,439 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:50,455 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:50,455 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:50,457 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:50,457 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:50,457 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:50,457 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:50,457 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2369642292816'>
2025-06-19 11:29:50,468 - ultibot_backend - INFO - [Thread-11 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:29:50,468 - ultibot_backend - INFO - [Thread-11 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:29:50,468 - ultibot_backend.dependencies - INFO - [Thread-11 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:29:50,917 - ultibot_backend.services.order_execution_service - INFO - [Thread-11 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:50,917 - ultibot_backend.services.credential_service - INFO - [Thread-11 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:50,917 - ultibot_backend.services.credential_service - INFO - [Thread-11 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:50,918 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-11 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:29:50,918 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-11 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:50,918 - ultibot_backend.services.performance_service - INFO - [Thread-11 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000227B9CE6CD0>
2025-06-19 11:29:50,918 - ultibot_backend.dependencies - INFO - [Thread-11 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:29:50,918 - ultibot_backend - INFO - [Thread-11 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:29:50,918 - ultibot_backend - INFO - [Thread-11 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:29:50,922 - ultibot_backend - INFO - [Thread-11 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/config
2025-06-19 11:29:50,923 - ultibot_backend - INFO - [Thread-11 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/config - Status: 500
2025-06-19 11:29:50,926 - ultibot_backend - INFO - [Thread-11 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:29:50,926 - ultibot_backend.dependencies - INFO - [Thread-11 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:29:50,933 - ultibot_backend.dependencies - INFO - [Thread-11 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:29:50,933 - ultibot_backend - INFO - [Thread-11 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:29:50,933 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:50,933 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:50,949 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:50,951 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:50,956 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:50,956 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:50,956 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:50,956 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:50,956 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2369644034064'>
2025-06-19 11:29:50,956 - ultibot_backend - INFO - [Thread-12 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:29:50,956 - ultibot_backend - INFO - [Thread-12 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:29:50,956 - ultibot_backend.dependencies - INFO - [Thread-12 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:29:51,385 - ultibot_backend.services.order_execution_service - INFO - [Thread-12 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:51,385 - ultibot_backend.services.credential_service - INFO - [Thread-12 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:51,387 - ultibot_backend.services.credential_service - INFO - [Thread-12 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:51,387 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-12 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:29:51,390 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-12 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:51,390 - ultibot_backend.services.performance_service - INFO - [Thread-12 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000227B9AFE490>
2025-06-19 11:29:51,390 - ultibot_backend.dependencies - INFO - [Thread-12 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:29:51,390 - ultibot_backend - INFO - [Thread-12 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:29:51,390 - ultibot_backend - INFO - [Thread-12 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:29:51,390 - ultibot_backend - INFO - [Thread-12 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/config
2025-06-19 11:29:51,394 - ultibot_backend - INFO - [Thread-12 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/config - Status: 500
2025-06-19 11:29:51,401 - ultibot_backend - INFO - [Thread-12 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:29:51,401 - ultibot_backend.dependencies - INFO - [Thread-12 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:29:51,401 - ultibot_backend.dependencies - INFO - [Thread-12 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:29:51,401 - ultibot_backend - INFO - [Thread-12 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:29:51,401 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:51,406 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:51,414 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:51,414 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:51,414 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:51,414 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:51,414 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:51,423 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:51,423 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2369645018960'>
2025-06-19 11:29:51,423 - ultibot_backend - INFO - [Thread-13 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:29:51,423 - ultibot_backend - INFO - [Thread-13 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:29:51,423 - ultibot_backend.dependencies - INFO - [Thread-13 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:29:51,896 - ultibot_backend.services.order_execution_service - INFO - [Thread-13 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:51,896 - ultibot_backend.services.credential_service - INFO - [Thread-13 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:51,896 - ultibot_backend.services.credential_service - INFO - [Thread-13 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:51,896 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-13 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:29:51,901 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-13 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:51,901 - ultibot_backend.services.performance_service - INFO - [Thread-13 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000227B979B090>
2025-06-19 11:29:51,901 - ultibot_backend.dependencies - INFO - [Thread-13 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:29:51,901 - ultibot_backend - INFO - [Thread-13 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:29:51,901 - ultibot_backend - INFO - [Thread-13 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:29:51,906 - ultibot_backend - INFO - [Thread-13 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/config
2025-06-19 11:29:51,906 - ultibot_backend - INFO - [Thread-13 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/config - Status: 500
2025-06-19 11:29:51,913 - ultibot_backend - INFO - [Thread-13 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:29:51,913 - ultibot_backend.dependencies - INFO - [Thread-13 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:29:51,913 - ultibot_backend.dependencies - INFO - [Thread-13 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:29:51,913 - ultibot_backend - INFO - [Thread-13 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:29:51,913 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:51,913 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:51,927 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:51,927 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:51,927 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:51,927 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:51,927 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:51,940 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:51,940 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2369645246672'>
2025-06-19 11:29:51,940 - ultibot_backend - INFO - [Thread-14 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:29:51,940 - ultibot_backend - INFO - [Thread-14 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:29:51,940 - ultibot_backend.dependencies - INFO - [Thread-14 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:29:52,340 - ultibot_backend.services.order_execution_service - INFO - [Thread-14 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:52,340 - ultibot_backend.services.credential_service - INFO - [Thread-14 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:52,340 - ultibot_backend.services.credential_service - INFO - [Thread-14 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:52,340 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-14 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:29:52,340 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-14 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:52,340 - ultibot_backend.services.performance_service - INFO - [Thread-14 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000227B9AFE010>
2025-06-19 11:29:52,340 - ultibot_backend.dependencies - INFO - [Thread-14 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:29:52,340 - ultibot_backend - INFO - [Thread-14 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:29:52,340 - ultibot_backend - INFO - [Thread-14 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:29:52,356 - ultibot_backend - INFO - [Thread-14 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/config
2025-06-19 11:29:52,356 - ultibot_backend - INFO - [Thread-14 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/config - Status: 500
2025-06-19 11:29:52,356 - ultibot_backend - INFO - [Thread-14 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:29:52,356 - ultibot_backend.dependencies - INFO - [Thread-14 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:29:52,356 - ultibot_backend.dependencies - INFO - [Thread-14 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:29:52,356 - ultibot_backend - INFO - [Thread-14 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:29:52,356 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:52,356 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:52,373 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:52,373 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:52,373 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:52,373 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:52,373 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:52,373 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:52,373 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2369645246160'>
2025-06-19 11:29:52,373 - ultibot_backend - INFO - [Thread-15 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:29:52,387 - ultibot_backend - INFO - [Thread-15 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:29:52,387 - ultibot_backend.dependencies - INFO - [Thread-15 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:29:52,790 - ultibot_backend.services.order_execution_service - INFO - [Thread-15 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:52,790 - ultibot_backend.services.credential_service - INFO - [Thread-15 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:52,790 - ultibot_backend.services.credential_service - INFO - [Thread-15 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:52,790 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-15 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:29:52,790 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-15 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:52,790 - ultibot_backend.services.performance_service - INFO - [Thread-15 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000227B979A510>
2025-06-19 11:29:52,790 - ultibot_backend.dependencies - INFO - [Thread-15 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:29:52,790 - ultibot_backend - INFO - [Thread-15 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:29:52,790 - ultibot_backend - INFO - [Thread-15 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:29:52,790 - ultibot_backend - INFO - [Thread-15 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: PATCH /api/v1/config
2025-06-19 11:29:52,790 - ultibot_backend - INFO - [Thread-15 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: PATCH /api/v1/config - Status: 422
2025-06-19 11:29:52,803 - ultibot_backend - INFO - [Thread-15 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:29:52,803 - ultibot_backend.dependencies - INFO - [Thread-15 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:29:52,803 - ultibot_backend.dependencies - INFO - [Thread-15 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:29:52,803 - ultibot_backend - INFO - [Thread-15 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:29:52,807 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:52,807 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:52,817 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:132 - Executing trade directly from confirmed opportunity af9f2b0e-e973-4ffe-811a-df3350a8bb64
2025-06-19 11:29:52,817 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:152 - User configuration saved after initializing last_daily_reset for user 710faa21-26a3-48ac-8ec0-a7101a534bf5.
2025-06-19 11:29:52,817 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:205 - Using strategy 'test_strategy' as context for confirmed opportunity af9f2b0e-e973-4ffe-811a-df3350a8bb64
2025-06-19 11:29:52,817 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:430 - Created trade b06d97e5-dbcd-4dcd-bc06-4886f65218f0 from decision 4ca1fc0f-ab42-4db1-8b4a-58fcbec488a1
2025-06-19 11:29:52,817 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:433 - Trade b06d97e5-dbcd-4dcd-bc06-4886f65218f0 persisted before execution.
2025-06-19 11:29:52,823 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:266 - Successfully executed trade b06d97e5-dbcd-4dcd-bc06-4886f65218f0 from confirmed opportunity.
2025-06-19 11:29:52,823 - ultibot_backend.services.trading_engine_service - DEBUG - [MainThread] - trading_engine_service.py:285 - Trade side: buy, OCO side calculated: sell
2025-06-19 11:29:52,823 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:300 - Successfully created OCO order for trade b06d97e5-dbcd-4dcd-bc06-4886f65218f0. OCO List ID: oco_list_123
2025-06-19 11:29:52,823 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:335 - Updated daily_capital_risked_usd for user 710faa21-26a3-48ac-8ec0-a7101a534bf5 to 200.0000000000000000000000000.
2025-06-19 11:29:52,823 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:518 - Updated opportunity af9f2b0e-e973-4ffe-811a-df3350a8bb64 status to converted_to_trade_real: Trade b06d97e5-dbcd-4dcd-bc06-4886f65218f0 executed based on user confirmation.
2025-06-19 11:29:52,825 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:525 - Persisted status update for opportunity af9f2b0e-e973-4ffe-811a-df3350a8bb64
2025-06-19 11:29:52,833 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:132 - Executing trade directly from confirmed opportunity 2367c2b7-b47a-4281-a181-d21d1ac7d9ae
2025-06-19 11:29:52,833 - ultibot_backend.services.trading_engine_service - ERROR - [MainThread] - trading_engine_service.py:190 - L√≠mite de riesgo de capital diario excedido. L√≠mite: 5000.00, Arriesgado: 4800.0, Nuevo Trade: 300.000
2025-06-19 11:29:52,833 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:518 - Updated opportunity 2367c2b7-b47a-4281-a181-d21d1ac7d9ae status to error_in_processing: L√≠mite de riesgo de capital diario excedido. L√≠mite: 5000.00, Arriesgado: 4800.0, Nuevo Trade: 300.000
2025-06-19 11:29:52,833 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:525 - Persisted status update for opportunity 2367c2b7-b47a-4281-a181-d21d1ac7d9ae
2025-06-19 11:29:52,840 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:132 - Executing trade directly from confirmed opportunity db2c4da7-d48a-429d-8958-b9588816f13b
2025-06-19 11:29:52,840 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:143 - Daily capital reset triggered for user 4c607778-3527-43c9-8a64-768caaceda4e. Resetting daily_capital_risked_usd.
2025-06-19 11:29:52,840 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:147 - User configuration saved after daily capital reset for user 4c607778-3527-43c9-8a64-768caaceda4e.
2025-06-19 11:29:52,840 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:205 - Using strategy 'test_strategy' as context for confirmed opportunity db2c4da7-d48a-429d-8958-b9588816f13b
2025-06-19 11:29:52,840 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:430 - Created trade 0affc0c4-17ee-4fc8-9cb3-956b8fc6250c from decision b9c4e1d2-8c82-4624-85bc-dba3e8dbe9c6
2025-06-19 11:29:52,849 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:433 - Trade 0affc0c4-17ee-4fc8-9cb3-956b8fc6250c persisted before execution.
2025-06-19 11:29:52,849 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:266 - Successfully executed trade 0affc0c4-17ee-4fc8-9cb3-956b8fc6250c from confirmed opportunity.
2025-06-19 11:29:52,849 - ultibot_backend.services.trading_engine_service - DEBUG - [MainThread] - trading_engine_service.py:285 - Trade side: buy, OCO side calculated: sell
2025-06-19 11:29:52,849 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:300 - Successfully created OCO order for trade 0affc0c4-17ee-4fc8-9cb3-956b8fc6250c. OCO List ID: <AsyncMock name='mock.create_oco_order().ocoOrderListId' id='2369645794064'>
2025-06-19 11:29:52,849 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:335 - Updated daily_capital_risked_usd for user 4c607778-3527-43c9-8a64-768caaceda4e to 100.000.
2025-06-19 11:29:52,849 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:518 - Updated opportunity db2c4da7-d48a-429d-8958-b9588816f13b status to converted_to_trade_real: Trade 0affc0c4-17ee-4fc8-9cb3-956b8fc6250c executed based on user confirmation.
2025-06-19 11:29:52,849 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:525 - Persisted status update for opportunity db2c4da7-d48a-429d-8958-b9588816f13b
2025-06-19 11:29:52,906 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:52,906 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:52,923 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:52,923 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:52,923 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:52,923 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:52,923 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2369645869648'>
2025-06-19 11:29:52,923 - ultibot_backend - INFO - [Thread-16 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:29:52,923 - ultibot_backend - INFO - [Thread-16 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:29:52,923 - ultibot_backend.dependencies - INFO - [Thread-16 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:29:53,345 - ultibot_backend.services.order_execution_service - INFO - [Thread-16 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:53,345 - ultibot_backend.services.credential_service - INFO - [Thread-16 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:53,345 - ultibot_backend.services.credential_service - INFO - [Thread-16 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:53,353 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-16 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:29:53,356 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-16 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:53,356 - ultibot_backend.services.performance_service - INFO - [Thread-16 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000227B90CBA50>
2025-06-19 11:29:53,356 - ultibot_backend.dependencies - INFO - [Thread-16 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:29:53,356 - ultibot_backend - INFO - [Thread-16 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:29:53,356 - ultibot_backend - INFO - [Thread-16 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:29:53,356 - ultibot_backend - INFO - [Thread-16 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/trades/history/paper
2025-06-19 11:29:53,369 - ultibot_backend.services.trading_report_service - INFO - [Thread-16 (run_blocking_portal)] - trading_report_service.py:74 - Obtenidos 0 trades cerrados para usuario 00000000-0000-0000-0000-000000000001 en modo paper
2025-06-19 11:29:53,372 - ultibot_backend - INFO - [Thread-16 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/trades/history/paper - Status: 200
2025-06-19 11:29:53,373 - ultibot_backend - INFO - [Thread-16 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:29:53,373 - ultibot_backend.dependencies - INFO - [Thread-16 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:29:53,373 - ultibot_backend.dependencies - INFO - [Thread-16 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:29:53,373 - ultibot_backend - INFO - [Thread-16 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:29:53,373 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:53,373 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:53,402 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:53,402 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:53,402 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:53,413 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:53,413 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:53,413 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:53,413 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2369646054032'>
2025-06-19 11:29:53,413 - ultibot_backend - INFO - [Thread-17 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:29:53,413 - ultibot_backend - INFO - [Thread-17 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:29:53,413 - ultibot_backend.dependencies - INFO - [Thread-17 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:29:53,822 - ultibot_backend.services.order_execution_service - INFO - [Thread-17 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:53,823 - ultibot_backend.services.credential_service - INFO - [Thread-17 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:53,823 - ultibot_backend.services.credential_service - INFO - [Thread-17 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:53,823 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-17 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:29:53,823 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-17 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:53,823 - ultibot_backend.services.performance_service - INFO - [Thread-17 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000227B9B63750>
2025-06-19 11:29:53,823 - ultibot_backend.dependencies - INFO - [Thread-17 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:29:53,823 - ultibot_backend - INFO - [Thread-17 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:29:53,823 - ultibot_backend - INFO - [Thread-17 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:29:53,823 - ultibot_backend - INFO - [Thread-17 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/trades/history/paper
2025-06-19 11:29:53,823 - ultibot_backend.services.trading_report_service - INFO - [Thread-17 (run_blocking_portal)] - trading_report_service.py:74 - Obtenidos 0 trades cerrados para usuario 00000000-0000-0000-0000-000000000001 en modo paper
2025-06-19 11:29:53,823 - ultibot_backend - INFO - [Thread-17 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/trades/history/paper - Status: 200
2025-06-19 11:29:53,841 - ultibot_backend - INFO - [Thread-17 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:29:53,841 - ultibot_backend.dependencies - INFO - [Thread-17 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:29:53,841 - ultibot_backend.dependencies - INFO - [Thread-17 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:29:53,841 - ultibot_backend - INFO - [Thread-17 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:29:53,841 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:53,841 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:53,869 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:53,869 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:53,874 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:53,874 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:53,874 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:53,885 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:53,885 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2369642292176'>
2025-06-19 11:29:53,890 - ultibot_backend - INFO - [Thread-18 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:29:53,890 - ultibot_backend - INFO - [Thread-18 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:29:53,890 - ultibot_backend.dependencies - INFO - [Thread-18 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:29:54,307 - ultibot_backend.services.order_execution_service - INFO - [Thread-18 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:54,307 - ultibot_backend.services.credential_service - INFO - [Thread-18 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:54,307 - ultibot_backend.services.credential_service - INFO - [Thread-18 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:54,307 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-18 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:29:54,318 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-18 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:54,318 - ultibot_backend.services.performance_service - INFO - [Thread-18 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000227B9DDEF10>
2025-06-19 11:29:54,318 - ultibot_backend.dependencies - INFO - [Thread-18 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:29:54,321 - ultibot_backend - INFO - [Thread-18 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:29:54,321 - ultibot_backend - INFO - [Thread-18 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:29:54,322 - ultibot_backend - INFO - [Thread-18 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/portfolio/paper/performance_summary
2025-06-19 11:29:54,452 - ultibot_backend.services.trading_report_service - INFO - [Thread-18 (run_blocking_portal)] - trading_report_service.py:74 - Obtenidos 0 trades cerrados para usuario 00000000-0000-0000-0000-000000000001 en modo paper
2025-06-19 11:29:54,458 - ultibot_backend - INFO - [Thread-18 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/portfolio/paper/performance_summary - Status: 200
2025-06-19 11:29:54,472 - ultibot_backend - INFO - [Thread-18 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:29:54,473 - ultibot_backend.dependencies - INFO - [Thread-18 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:29:54,473 - ultibot_backend.dependencies - INFO - [Thread-18 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:29:54,473 - ultibot_backend - INFO - [Thread-18 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:29:54,474 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:54,474 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:54,507 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:54,508 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:54,514 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:54,514 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:54,514 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:54,530 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:54,532 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <AsyncMock spec='SupabasePersistenceService' id='2369646463568'>
2025-06-19 11:29:54,535 - ultibot_backend - INFO - [Thread-19 (run_blocking_portal)] - main.py:75 - Iniciando UltiBot Backend (lifespan)...
2025-06-19 11:29:54,538 - ultibot_backend - INFO - [Thread-19 (run_blocking_portal)] - main.py:80 - DependencyContainer adjuntado a app.state: True
2025-06-19 11:29:54,538 - ultibot_backend.dependencies - INFO - [Thread-19 (run_blocking_portal)] - dependencies.py:118 - Initializing dependency container...
2025-06-19 11:29:54,975 - ultibot_backend.services.order_execution_service - INFO - [Thread-19 (run_blocking_portal)] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:54,975 - ultibot_backend.services.credential_service - INFO - [Thread-19 (run_blocking_portal)] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:54,975 - ultibot_backend.services.credential_service - INFO - [Thread-19 (run_blocking_portal)] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:54,975 - ultibot_backend.services.unified_order_execution_service - INFO - [Thread-19 (run_blocking_portal)] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-19 11:29:54,975 - ultibot_backend.services.ai_orchestrator_service - INFO - [Thread-19 (run_blocking_portal)] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:54,975 - ultibot_backend.services.performance_service - INFO - [Thread-19 (run_blocking_portal)] - performance_service.py:38 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000227B9E15450>
2025-06-19 11:29:54,975 - ultibot_backend.dependencies - INFO - [Thread-19 (run_blocking_portal)] - dependencies.py:196 - Dependency container initialized successfully.
2025-06-19 11:29:54,975 - ultibot_backend - INFO - [Thread-19 (run_blocking_portal)] - main.py:84 - Contenedor de dependencias inicializado en lifespan.
2025-06-19 11:29:54,975 - ultibot_backend - INFO - [Thread-19 (run_blocking_portal)] - main.py:90 - Aplicaci√≥n iniciada correctamente (lifespan).
2025-06-19 11:29:54,985 - ultibot_backend - INFO - [Thread-19 (run_blocking_portal)] - main.py:110 - Middleware: Solicitud entrante: GET /api/v1/portfolio/paper/performance_summary
2025-06-19 11:29:54,992 - ultibot_backend.services.trading_report_service - INFO - [Thread-19 (run_blocking_portal)] - trading_report_service.py:74 - Obtenidos 0 trades cerrados para usuario 00000000-0000-0000-0000-000000000001 en modo paper
2025-06-19 11:29:54,992 - ultibot_backend - INFO - [Thread-19 (run_blocking_portal)] - main.py:112 - Middleware: Solicitud procesada: GET /api/v1/portfolio/paper/performance_summary - Status: 200
2025-06-19 11:29:55,000 - ultibot_backend - INFO - [Thread-19 (run_blocking_portal)] - main.py:93 - Apagando UltiBot Backend (lifespan)...
2025-06-19 11:29:55,000 - ultibot_backend.dependencies - INFO - [Thread-19 (run_blocking_portal)] - dependencies.py:199 - Shutting down dependency container...
2025-06-19 11:29:55,000 - ultibot_backend.dependencies - INFO - [Thread-19 (run_blocking_portal)] - dependencies.py:204 - Dependency container shut down.
2025-06-19 11:29:55,000 - ultibot_backend - INFO - [Thread-19 (run_blocking_portal)] - main.py:96 - Recursos liberados y aplicaci√≥n apagada (lifespan).
2025-06-19 11:29:55,000 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:55,004 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:55,256 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:543 - Processing opportunity f585b02c-185a-4bca-93cf-2d8dd2c5ff37 for symbol BTCUSDT
2025-06-19 11:29:55,256 - ultibot_backend.services.config_service - ERROR - [MainThread] - config_service.py:71 - Error al validar la configuraci√≥n existente para el user_id aec2acb1-b41c-43cf-9d29-63e6c522e9af: ultibot_backend.core.domain_models.user_configuration_models.UserConfiguration() argument after ** must be a mapping, not UserConfiguration
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\config_service.py", line 66, in _load_config_from_db
    user_config = UserConfiguration(**config_data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ultibot_backend.core.domain_models.user_configuration_models.UserConfiguration() argument after ** must be a mapping, not UserConfiguration
2025-06-19 11:29:55,256 - ultibot_backend.services.config_service - WARNING - [MainThread] - config_service.py:72 - Se utilizar√° una configuraci√≥n por defecto en memoria debido a un error de validaci√≥n.
2025-06-19 11:29:55,256 - ultibot_backend.services.strategy_service - ERROR - [MainThread] - strategy_service.py:89 - Error listing strategies for user aec2acb1-b41c-43cf-9d29-63e6c522e9af: Mock object has no attribute 'list_strategy_configs_by_user'
2025-06-19 11:29:55,301 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:543 - Processing opportunity 5985ead8-234c-43ae-9761-5040b834a26f for symbol BTCUSDT
2025-06-19 11:29:55,305 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:696 - Strategy 075fe593-7318-4450-b3d8-19e4cd49e30e can operate autonomously. Proceeding with autonomous logic.
2025-06-19 11:29:55,308 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:543 - Processing opportunity 8edfa539-430b-4adb-a404-8754a7c3b6d5 for symbol ETHUSDT
2025-06-19 11:29:55,308 - ultibot_backend.services.config_service - ERROR - [MainThread] - config_service.py:71 - Error al validar la configuraci√≥n existente para el user_id 7eab10e8-f37f-4009-a86b-447033d00f08: ultibot_backend.core.domain_models.user_configuration_models.UserConfiguration() argument after ** must be a mapping, not UserConfiguration
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\config_service.py", line 66, in _load_config_from_db
    user_config = UserConfiguration(**config_data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ultibot_backend.core.domain_models.user_configuration_models.UserConfiguration() argument after ** must be a mapping, not UserConfiguration
2025-06-19 11:29:55,308 - ultibot_backend.services.config_service - WARNING - [MainThread] - config_service.py:72 - Se utilizar√° una configuraci√≥n por defecto en memoria debido a un error de validaci√≥n.
2025-06-19 11:29:55,308 - ultibot_backend.services.strategy_service - ERROR - [MainThread] - strategy_service.py:89 - Error listing strategies for user 7eab10e8-f37f-4009-a86b-447033d00f08: Mock object has no attribute 'list_strategy_configs_by_user'
2025-06-19 11:29:55,357 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:543 - Processing opportunity bf8cccea-329a-4e56-85c7-eaec73cf7498 for symbol BTCUSDT
2025-06-19 11:29:55,357 - ultibot_backend.services.config_service - ERROR - [MainThread] - config_service.py:71 - Error al validar la configuraci√≥n existente para el user_id 5cc88d34-1bf7-4964-af97-40ac1ae32fdd: ultibot_backend.core.domain_models.user_configuration_models.UserConfiguration() argument after ** must be a mapping, not UserConfiguration
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\config_service.py", line 66, in _load_config_from_db
    user_config = UserConfiguration(**config_data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ultibot_backend.core.domain_models.user_configuration_models.UserConfiguration() argument after ** must be a mapping, not UserConfiguration
2025-06-19 11:29:55,357 - ultibot_backend.services.config_service - WARNING - [MainThread] - config_service.py:72 - Se utilizar√° una configuraci√≥n por defecto en memoria debido a un error de validaci√≥n.
2025-06-19 11:29:55,357 - ultibot_backend.services.strategy_service - ERROR - [MainThread] - strategy_service.py:89 - Error listing strategies for user 5cc88d34-1bf7-4964-af97-40ac1ae32fdd: Mock object has no attribute 'list_strategy_configs_by_user'
2025-06-19 11:29:55,524 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:543 - Processing opportunity 8fd4d2af-f7f6-4355-bf2a-a51fd61770bb for symbol BTCUSDT
2025-06-19 11:29:55,524 - ultibot_backend.services.config_service - ERROR - [MainThread] - config_service.py:71 - Error al validar la configuraci√≥n existente para el user_id 193c858e-e3d3-469a-9bf5-b2b4b47cff3c: ultibot_backend.core.domain_models.user_configuration_models.UserConfiguration() argument after ** must be a mapping, not UserConfiguration
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\config_service.py", line 66, in _load_config_from_db
    user_config = UserConfiguration(**config_data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ultibot_backend.core.domain_models.user_configuration_models.UserConfiguration() argument after ** must be a mapping, not UserConfiguration
2025-06-19 11:29:55,524 - ultibot_backend.services.config_service - WARNING - [MainThread] - config_service.py:72 - Se utilizar√° una configuraci√≥n por defecto en memoria debido a un error de validaci√≥n.
2025-06-19 11:29:55,524 - ultibot_backend.services.strategy_service - ERROR - [MainThread] - strategy_service.py:89 - Error listing strategies for user 193c858e-e3d3-469a-9bf5-b2b4b47cff3c: Mock object has no attribute 'list_strategy_configs_by_user'
2025-06-19 11:29:55,558 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:543 - Processing opportunity c1ba1364-fbf1-45ff-9438-4736695d86e5 for symbol BTCUSDT
2025-06-19 11:29:55,558 - ultibot_backend.services.config_service - ERROR - [MainThread] - config_service.py:71 - Error al validar la configuraci√≥n existente para el user_id bb694b36-579b-4f66-9361-853200e72644: ultibot_backend.core.domain_models.user_configuration_models.UserConfiguration() argument after ** must be a mapping, not UserConfiguration
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\config_service.py", line 66, in _load_config_from_db
    user_config = UserConfiguration(**config_data)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ultibot_backend.core.domain_models.user_configuration_models.UserConfiguration() argument after ** must be a mapping, not UserConfiguration
2025-06-19 11:29:55,558 - ultibot_backend.services.config_service - WARNING - [MainThread] - config_service.py:72 - Se utilizar√° una configuraci√≥n por defecto en memoria debido a un error de validaci√≥n.
2025-06-19 11:29:55,558 - ultibot_backend.services.strategy_service - ERROR - [MainThread] - strategy_service.py:89 - Error listing strategies for user bb694b36-579b-4f66-9361-853200e72644: Mock object has no attribute 'list_strategy_configs_by_user'
2025-06-19 11:29:55,607 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:430 - Created trade 05d3c7c5-8d8b-4cab-8cde-3ffb006e112a from decision d1a717fc-9507-4fc6-ade0-1e14ca3daadf
2025-06-19 11:29:55,607 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:433 - Trade 05d3c7c5-8d8b-4cab-8cde-3ffb006e112a persisted before execution.
2025-06-19 11:29:55,624 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:430 - Created trade d8222011-88ed-4292-af7d-c209b29e43ac from decision 3397dc44-bd2b-42bf-bc6c-0512cce7463d
2025-06-19 11:29:55,624 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:433 - Trade d8222011-88ed-4292-af7d-c209b29e43ac persisted before execution.
2025-06-19 11:29:55,624 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:430 - Created trade 8ca39667-62e8-47af-8947-22e6d24f9ced from decision 3397dc44-bd2b-42bf-bc6c-0512cce7463d
2025-06-19 11:29:55,624 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:433 - Trade 8ca39667-62e8-47af-8947-22e6d24f9ced persisted before execution.
2025-06-19 11:29:55,624 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:55,624 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:55,624 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:55,641 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:55,641 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:55,641 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:55,641 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:132 - Executing trade directly from confirmed opportunity 10ada9e2-e483-48b1-bc50-437840b02593
2025-06-19 11:29:55,651 - ultibot_backend.services.config_service - INFO - [MainThread] - config_service.py:76 - No se encontr√≥ configuraci√≥n para el user_id 4a3dc74c-07d0-4d85-8251-bd1d6fd7f169. Creando y guardando configuraci√≥n por defecto.
2025-06-19 11:29:55,822 - ultibot_backend.services.config_service - INFO - [MainThread] - config_service.py:113 - Configuraci√≥n guardada exitosamente.
2025-06-19 11:29:55,844 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:55,846 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:55,850 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:55,851 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:55,851 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:55,859 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:55,862 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:55,862 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:55,871 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:55,871 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:55,874 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:55,874 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:55,874 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:55,874 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:55,874 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:55,888 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:55,889 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:543 - Processing opportunity 5503bbc5-63b1-4a7b-959b-fc06c14a223c for symbol BTC/USDT
2025-06-19 11:29:55,892 - ultibot_backend.services.config_service - INFO - [MainThread] - config_service.py:76 - No se encontr√≥ configuraci√≥n para el user_id 728583e6-95e6-4b85-b948-b51f791788dc. Creando y guardando configuraci√≥n por defecto.
2025-06-19 11:29:55,904 - ultibot_backend.services.config_service - INFO - [MainThread] - config_service.py:113 - Configuraci√≥n guardada exitosamente.
2025-06-19 11:29:55,906 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:644 - AI profile 'ai-profile-scalping-1' for strategy e1a98062-81fb-4470-ae01-84b515ad98bc not found. Skipping AI analysis.
2025-06-19 11:29:55,906 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:696 - Strategy e1a98062-81fb-4470-ae01-84b515ad98bc can operate autonomously. Proceeding with autonomous logic.
2025-06-19 11:29:55,906 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:518 - Updated opportunity 5503bbc5-63b1-4a7b-959b-fc06c14a223c status to under_evaluation: 1 potential trade decision(s) generated.
2025-06-19 11:29:55,908 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:525 - Persisted status update for opportunity 5503bbc5-63b1-4a7b-959b-fc06c14a223c
2025-06-19 11:29:55,908 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:55,908 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:55,908 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:55,908 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:55,919 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:55,924 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:55,924 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:55,924 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:55,924 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:132 - Executing trade directly from confirmed opportunity 3c6291a8-2fb7-4537-b22a-24ecd0f850fe
2025-06-19 11:29:55,937 - ultibot_backend.services.config_service - INFO - [MainThread] - config_service.py:76 - No se encontr√≥ configuraci√≥n para el user_id 9dc957a7-b225-4597-900d-781f9341630c. Creando y guardando configuraci√≥n por defecto.
2025-06-19 11:29:55,944 - ultibot_backend.services.config_service - INFO - [MainThread] - config_service.py:113 - Configuraci√≥n guardada exitosamente.
2025-06-19 11:29:55,961 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:55,961 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:55,961 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:55,961 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:55,961 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:55,975 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:55,975 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:55,975 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:55,975 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:132 - Executing trade directly from confirmed opportunity 0095b316-2125-4a39-bda4-4c991637bc4d
2025-06-19 11:29:55,990 - ultibot_backend.services.config_service - INFO - [MainThread] - config_service.py:76 - No se encontr√≥ configuraci√≥n para el user_id 8c0e532e-0747-44bb-85e4-45f128f4730b. Creando y guardando configuraci√≥n por defecto.
2025-06-19 11:29:55,990 - ultibot_backend.services.config_service - INFO - [MainThread] - config_service.py:113 - Configuraci√≥n guardada exitosamente.
2025-06-19 11:29:56,007 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:56,007 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:56,007 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:56,007 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:56,007 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:56,024 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:56,024 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:56,024 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:56,024 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:132 - Executing trade directly from confirmed opportunity fcc42367-236f-4e46-a76e-6aac132572e0
2025-06-19 11:29:56,037 - ultibot_backend.services.config_service - INFO - [MainThread] - config_service.py:76 - No se encontr√≥ configuraci√≥n para el user_id 88f06807-442c-4d26-9517-650335a01f33. Creando y guardando configuraci√≥n por defecto.
2025-06-19 11:29:56,040 - ultibot_backend.services.config_service - INFO - [MainThread] - config_service.py:113 - Configuraci√≥n guardada exitosamente.
2025-06-19 11:29:56,058 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:56,058 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:56,069 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:56,069 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:56,073 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:56,073 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:56,073 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:56,085 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:56,090 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:56,090 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:56,101 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:56,101 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:56,101 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:56,107 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:56,117 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:56,117 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:56,123 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:56,123 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:56,133 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:56,133 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:56,133 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:205 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-19 11:29:56,140 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:101 - No se encontr√≥ configuraci√≥n para 00000000-0000-0000-0000-000000000001. Usando valores por defecto.
2025-06-19 11:29:56,140 - ultibot_backend.services.portfolio_service - INFO - [MainThread] - portfolio_service.py:103 - Portafolio de paper trading inicializado para 00000000-0000-0000-0000-000000000001 con capital: 10000.0
2025-06-19 11:29:56,149 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:56,165 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:56,165 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:57,405 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:57,405 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: W6yiL... (truncada por seguridad)
2025-06-19 11:29:57,408 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:143 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-19 11:29:57,408 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:305 - MarketDataService: Iniciando cierre...
2025-06-19 11:29:57,408 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:318 - MarketDataService: Cierre completado.
2025-06-19 11:29:57,460 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:57,460 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: 52SGQ... (truncada por seguridad)
2025-06-19 11:29:57,524 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:57,524 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: 52SGQ... (truncada por seguridad)
2025-06-19 11:29:57,667 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:57,668 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: 52SGQ... (truncada por seguridad)
2025-06-19 11:29:57,689 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:57,689 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: 52SGQ... (truncada por seguridad)
2025-06-19 11:29:57,706 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:57,706 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: 52SGQ... (truncada por seguridad)
2025-06-19 11:29:57,723 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:57,723 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: 52SGQ... (truncada por seguridad)
2025-06-19 11:29:57,734 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:57,734 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: 52SGQ... (truncada por seguridad)
2025-06-19 11:29:57,756 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:57,756 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: 52SGQ... (truncada por seguridad)
2025-06-19 11:29:57,772 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:29 - CredentialService __init__ intentando obtener encryption_key de ENV: Presente
2025-06-19 11:29:57,774 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:35 - Pasando la siguiente clave (str) a Fernet: 52SGQ... (truncada por seguridad)
2025-06-19 11:29:58,064 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:78 - Error al obtener trades cerrados para usuario 03a00a77-7a33-4ca1-b77f-c88ce2c6ac07: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 46, in get_closed_trades
    async with self.session_factory() as session:
TypeError: 'coroutine' object does not support the asynchronous context manager protocol
2025-06-19 11:29:58,079 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:78 - Error al obtener trades cerrados para usuario 708a5c36-287e-4e2b-b4ea-c38920716eb7: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 46, in get_closed_trades
    async with self.session_factory() as session:
TypeError: 'coroutine' object does not support the asynchronous context manager protocol
2025-06-19 11:29:58,092 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:78 - Error al obtener trades cerrados para usuario cb58ef88-fbfb-49af-8034-a6695bd1a90b: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 46, in get_closed_trades
    async with self.session_factory() as session:
TypeError: 'coroutine' object does not support the asynchronous context manager protocol
2025-06-19 11:29:58,106 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:78 - Error al obtener trades cerrados para usuario 51168599-9ed2-4a24-9cd7-4ac954e8f8dd: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 46, in get_closed_trades
    async with self.session_factory() as session:
TypeError: 'coroutine' object does not support the asynchronous context manager protocol
2025-06-19 11:29:58,108 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:78 - Error al obtener trades cerrados para usuario 77473628-4ee0-4396-89d0-d7c6d7fc109a: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 46, in get_closed_trades
    async with self.session_factory() as session:
TypeError: 'coroutine' object does not support the asynchronous context manager protocol
2025-06-19 11:29:58,108 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:189 - Error al calcular m√©tricas de rendimiento para usuario 77473628-4ee0-4396-89d0-d7c6d7fc109a: Error al obtener historial de trades: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 46, in get_closed_trades
    async with self.session_factory() as session:
TypeError: 'coroutine' object does not support the asynchronous context manager protocol

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 104, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 79, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 'coroutine' object does not support the asynchronous context manager protocol
2025-06-19 11:29:58,126 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:78 - Error al obtener trades cerrados para usuario 82284bd4-7fbf-45e5-9663-92c759281c4d: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 46, in get_closed_trades
    async with self.session_factory() as session:
TypeError: 'coroutine' object does not support the asynchronous context manager protocol
2025-06-19 11:29:58,126 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:189 - Error al calcular m√©tricas de rendimiento para usuario 82284bd4-7fbf-45e5-9663-92c759281c4d: Error al obtener historial de trades: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 46, in get_closed_trades
    async with self.session_factory() as session:
TypeError: 'coroutine' object does not support the asynchronous context manager protocol

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 104, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 79, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 'coroutine' object does not support the asynchronous context manager protocol
2025-06-19 11:29:58,147 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:78 - Error al obtener trades cerrados para usuario eb3df7c7-728b-4115-9c38-33f507f2129b: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 46, in get_closed_trades
    async with self.session_factory() as session:
TypeError: 'coroutine' object does not support the asynchronous context manager protocol
2025-06-19 11:29:58,147 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:189 - Error al calcular m√©tricas de rendimiento para usuario eb3df7c7-728b-4115-9c38-33f507f2129b: Error al obtener historial de trades: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 46, in get_closed_trades
    async with self.session_factory() as session:
TypeError: 'coroutine' object does not support the asynchronous context manager protocol

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 104, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 79, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 'coroutine' object does not support the asynchronous context manager protocol
2025-06-19 11:29:58,169 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:78 - Error al obtener trades cerrados para usuario 0d07a83f-e066-4648-a123-a8bd7e08f25d: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 46, in get_closed_trades
    async with self.session_factory() as session:
TypeError: 'coroutine' object does not support the asynchronous context manager protocol
2025-06-19 11:29:58,169 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:189 - Error al calcular m√©tricas de rendimiento para usuario 0d07a83f-e066-4648-a123-a8bd7e08f25d: Error al obtener historial de trades: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 46, in get_closed_trades
    async with self.session_factory() as session:
TypeError: 'coroutine' object does not support the asynchronous context manager protocol

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 104, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 79, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 'coroutine' object does not support the asynchronous context manager protocol
2025-06-19 11:29:58,189 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:78 - Error al obtener trades cerrados para usuario 384ac4ec-173a-4521-bd62-865cbdbdd266: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 46, in get_closed_trades
    async with self.session_factory() as session:
TypeError: 'coroutine' object does not support the asynchronous context manager protocol
2025-06-19 11:29:58,189 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:189 - Error al calcular m√©tricas de rendimiento para usuario 384ac4ec-173a-4521-bd62-865cbdbdd266: Error al obtener historial de trades: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 46, in get_closed_trades
    async with self.session_factory() as session:
TypeError: 'coroutine' object does not support the asynchronous context manager protocol

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 104, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 79, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 'coroutine' object does not support the asynchronous context manager protocol
2025-06-19 11:29:58,192 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:78 - Error al obtener trades cerrados para usuario 7216b580-64db-45dc-8f70-f92d2c3e9761: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 46, in get_closed_trades
    async with self.session_factory() as session:
TypeError: 'coroutine' object does not support the asynchronous context manager protocol
2025-06-19 11:29:58,192 - ultibot_backend.services.trading_report_service - ERROR - [MainThread] - trading_report_service.py:189 - Error al calcular m√©tricas de rendimiento para usuario 7216b580-64db-45dc-8f70-f92d2c3e9761: Error al obtener historial de trades: 'coroutine' object does not support the asynchronous context manager protocol
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 46, in get_closed_trades
    async with self.session_factory() as session:
TypeError: 'coroutine' object does not support the asynchronous context manager protocol

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 104, in calculate_performance_metrics
    trades = await self.get_closed_trades(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\services\trading_report_service.py", line 79, in get_closed_trades
    raise ReportError(f"Error al obtener historial de trades: {str(e)}")
ultibot_backend.core.exceptions.ReportError: Error al obtener historial de trades: 'coroutine' object does not support the asynchronous context manager protocol
2025-06-19 11:29:58,232 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:543 - Processing opportunity 14159174-83d0-4ed7-aba3-a6850333931e for symbol BTC/USDT
2025-06-19 11:29:58,232 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:696 - Strategy 5433e21d-149a-4f65-850e-7a846db8e034 can operate autonomously. Proceeding with autonomous logic.
2025-06-19 11:29:58,232 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:518 - Updated opportunity 14159174-83d0-4ed7-aba3-a6850333931e status to under_evaluation: 1 potential trade decision(s) generated.
2025-06-19 11:29:58,239 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:525 - Persisted status update for opportunity 14159174-83d0-4ed7-aba3-a6850333931e
2025-06-19 11:29:58,247 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:543 - Processing opportunity 5ca3a6d3-7795-413a-8f05-340a6e8c0f58 for symbol BTC/USDT
2025-06-19 11:29:58,247 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:696 - Strategy fcf77eea-80cb-4bc4-8107-12855ef704b5 can operate autonomously. Proceeding with autonomous logic.
2025-06-19 11:29:58,247 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:518 - Updated opportunity 5ca3a6d3-7795-413a-8f05-340a6e8c0f58 status to under_evaluation: 1 potential trade decision(s) generated.
2025-06-19 11:29:58,247 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:525 - Persisted status update for opportunity 5ca3a6d3-7795-413a-8f05-340a6e8c0f58
2025-06-19 11:29:58,259 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:543 - Processing opportunity 89c3bdb1-36e3-4ded-bb7c-90e2cec42595 for symbol BTC/USDT
2025-06-19 11:29:58,259 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:696 - Strategy 7cc6ea9b-0604-495f-b36f-b84c02040a09 can operate autonomously. Proceeding with autonomous logic.
2025-06-19 11:29:58,259 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:518 - Updated opportunity 89c3bdb1-36e3-4ded-bb7c-90e2cec42595 status to under_evaluation: 1 potential trade decision(s) generated.
2025-06-19 11:29:58,259 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:525 - Persisted status update for opportunity 89c3bdb1-36e3-4ded-bb7c-90e2cec42595
2025-06-19 11:29:58,276 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:543 - Processing opportunity 4e33d255-40bb-4b47-9a3e-f99a83670934 for symbol BTC/USDT
2025-06-19 11:29:58,276 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:696 - Strategy 62f9d684-a687-462c-93ea-46a4c5bb6c72 can operate autonomously. Proceeding with autonomous logic.
2025-06-19 11:29:58,276 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:518 - Updated opportunity 4e33d255-40bb-4b47-9a3e-f99a83670934 status to under_evaluation: 1 potential trade decision(s) generated.
2025-06-19 11:29:58,276 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:525 - Persisted status update for opportunity 4e33d255-40bb-4b47-9a3e-f99a83670934
2025-06-19 11:29:58,291 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:543 - Processing opportunity b14938d9-48aa-4a1d-a414-13fb454b3f8a for symbol BTC/USDT
2025-06-19 11:29:58,291 - ultibot_backend.services.trading_engine_service - WARNING - [MainThread] - trading_engine_service.py:625 - Unknown strategy type 'CUSTOM_UNKNOWN_TYPE' for strategy dd6ddace-6444-4d28-b471-6b8f8dff9114. Recommending investigation.
2025-06-19 11:29:58,291 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:518 - Updated opportunity b14938d9-48aa-4a1d-a414-13fb454b3f8a status to under_evaluation: 1 potential trade decision(s) generated.
2025-06-19 11:29:58,292 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:525 - Persisted status update for opportunity b14938d9-48aa-4a1d-a414-13fb454b3f8a
2025-06-19 11:29:58,303 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:543 - Processing opportunity 9abe86f2-0232-4a1a-82e2-3690be08ce7b for symbol BTC/USDT
2025-06-19 11:29:58,303 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:696 - Strategy 3c819497-d001-435a-9718-1311ff59fc84 can operate autonomously. Proceeding with autonomous logic.
2025-06-19 11:29:58,303 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:518 - Updated opportunity 9abe86f2-0232-4a1a-82e2-3690be08ce7b status to under_evaluation: 1 potential trade decision(s) generated.
2025-06-19 11:29:58,306 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:525 - Persisted status update for opportunity 9abe86f2-0232-4a1a-82e2-3690be08ce7b
2025-06-19 11:29:58,325 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:543 - Processing opportunity 906e7583-02e7-40c2-a2fe-4a15b58563e7 for symbol BTC/USDT
2025-06-19 11:29:58,325 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:696 - Strategy 91f92abe-2cfe-43bd-aa85-e65a39782bfd can operate autonomously. Proceeding with autonomous logic.
2025-06-19 11:29:58,325 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:518 - Updated opportunity 906e7583-02e7-40c2-a2fe-4a15b58563e7 status to under_evaluation: 1 potential trade decision(s) generated.
2025-06-19 11:29:58,325 - ultibot_backend.services.trading_engine_service - INFO - [MainThread] - trading_engine_service.py:525 - Persisted status update for opportunity 906e7583-02e7-40c2-a2fe-4a15b58563e7
2025-06-19 11:30:06,125 - ultibot_backend - INFO - [MainThread] - main.py:65 - Logging configurado exitosamente usando dictConfig.
2025-06-19 11:30:06,125 - ultibot_backend - INFO - [MainThread] - main.py:141 - Registrando routers de la API...
2025-06-19 11:30:06,152 - ultibot_backend - INFO - [MainThread] - main.py:153 - Todos los routers han sido registrados.
2025-06-19 11:30:06,341 - qasync - INFO - [MainThread] - __init__.py:57 - Forcing use of PySide6 as Qt Implementation
2025-06-19 11:30:06,641 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - matplotlib data path: C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\matplotlib\mpl-data
2025-06-19 11:30:06,650 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CONFIGDIR=C:\Users\zamor\.matplotlib
2025-06-19 11:30:06,650 - matplotlib - DEBUG - [MainThread] - __init__.py:1557 - interactive is False
2025-06-19 11:30:06,650 - matplotlib - DEBUG - [MainThread] - __init__.py:1558 - platform is win32
2025-06-19 11:30:06,721 - matplotlib - DEBUG - [MainThread] - __init__.py:342 - CACHEDIR=C:\Users\zamor\.matplotlib
2025-06-19 11:30:06,724 - matplotlib.font_manager - DEBUG - [MainThread] - font_manager.py:1635 - Using fontManager instance from C:\Users\zamor\.matplotlib\fontlist-v390.json
2025-06-19 15:30:15,307 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:30:15,311 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:30:15,315 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:30:15,318 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:50550 - "GET /health HTTP/1.1" 200
2025-06-19 15:30:45,429 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:30:45,436 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:30:45,442 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:30:45,446 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:35020 - "GET /health HTTP/1.1" 200
2025-06-19 15:31:15,506 - ultibot_backend - INFO - [MainThread] - main.py:110 - Middleware: Solicitud entrante: GET /health
2025-06-19 15:31:15,513 - ultibot_backend - DEBUG - [AnyIO worker thread] - main.py:159 - Health check solicitado.
2025-06-19 15:31:15,516 - ultibot_backend - INFO - [MainThread] - main.py:112 - Middleware: Solicitud procesada: GET /health - Status: 200
2025-06-19 15:31:15,519 - uvicorn.access - INFO - [MainThread] - httptools_impl.py:481 - 127.0.0.1:45262 - "GET /health HTTP/1.1" 200
