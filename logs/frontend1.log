2025-06-10 21:21:18,797 - __main__ - INFO - Logging configurado. stdout y stderr redirigidos al archivo de log.
2025-06-10 21:21:18,797 - STDERR - ERROR - C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\main.py:70: DeprecationWarning: sipPyTypeDict() is deprecated, the extension module should use sipPyTypeDictRef() instead
2025-06-10 21:21:18,797 - STDERR - ERROR -   class AppController(QObject):
2025-06-10 21:21:18,810 - __main__ - INFO - Stylesheet cargado exitosamente.
2025-06-10 21:21:18,990 - src.ultibot_ui.services.trading_mode_state - INFO - TradingModeStateManager initialized with mode: PAPER
2025-06-10 21:21:18,990 - __main__ - INFO - Iniciando inicialización asíncrona...
2025-06-10 21:21:21,005 - src.ultibot_ui.services.api_client - INFO - Obteniendo configuración de usuario.
2025-06-10 21:21:21,006 - STDOUT - INFO - Solicitando configuración de usuario al backend...
2025-06-10 21:21:21,006 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/config
2025-06-10 21:21:21,804 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/config "HTTP/1.1 200 OK"
2025-06-10 21:21:21,804 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/config "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:21:21,804 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 21:21:21,804 - __main__ - INFO - Configuración recibida para el ID de usuario: 22c5a278-da81-4fc5-8296-92cdb59670e3
2025-06-10 21:21:21,804 - src.ultibot_ui.services.trading_mode_state - INFO - Syncing trading mode with backend...
2025-06-10 21:21:21,804 - src.ultibot_ui.services.api_client - INFO - Getting trading mode from backend.
2025-06-10 21:21:21,804 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/trading-mode
2025-06-10 21:21:21,810 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading-mode "HTTP/1.1 200 OK"
2025-06-10 21:21:21,810 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/trading-mode "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:21:21,810 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 21:21:21,810 - src.ultibot_ui.windows.main_window - INFO - TaskManager inicializado con un máximo de 10 hilos.
QPropertyAnimation: you're trying to animate a non-existing property hover_progress of your QObject
QPropertyAnimation: you're trying to animate a non-existing property glow_opacity of your QObject
Unknown property box-shadow
QPropertyAnimation: you're trying to animate a non-existing property hover_progress of your QObject
QPropertyAnimation: you're trying to animate a non-existing property glow_opacity of your QObject
Unknown property box-shadow
QPropertyAnimation: you're trying to animate a non-existing property hover_progress of your QObject
QPropertyAnimation: you're trying to animate a non-existing property glow_opacity of your QObject
Unknown property box-shadow
QPropertyAnimation: you're trying to animate a non-existing property hover_progress of your QObject
QPropertyAnimation: you're trying to animate a non-existing property glow_opacity of your QObject
Unknown property box-shadow
QPropertyAnimation: you're trying to animate a non-existing property hover_progress of your QObject
QPropertyAnimation: you're trying to animate a non-existing property glow_opacity of your QObject
Unknown property box-shadow
QPropertyAnimation: you're trying to animate a non-existing property hover_progress of your QObject
QPropertyAnimation: you're trying to animate a non-existing property glow_opacity of your QObject
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
QPropertyAnimation: you're trying to animate a non-existing property glow_opacity of your QObject
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
QPropertyAnimation: you're trying to animate a non-existing property spotlight_opacity of your QObject
QPropertyAnimation: you're trying to animate a non-existing property spotlight_opacity of your QObject
QPropertyAnimation: you're trying to animate a non-existing property spotlight_opacity of your QObject
2025-06-10 21:21:22,102 - src.ultibot_ui.widgets.portfolio_widget - INFO - Timer de actualización del portafolio iniciado.
2025-06-10 21:21:22,102 - src.ultibot_ui.widgets.chart_widget - INFO - Solicitando datos para BTCUSDT - 1h usando TaskManager
2025-06-10 21:21:22,110 - src.ultibot_ui.windows.dashboard_view - INFO - DashboardView: _initialize_async_components INVOCADO
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property -webkit-background-clip
Unknown property -webkit-background-clip
Unknown property backdrop-filter
Unknown property box-shadow
Unknown property backdrop-filter
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property backdrop-filter
Unknown property backdrop-filter
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property backdrop-filter
Unknown property backdrop-filter
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
2025-06-10 21:21:22,123 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: __init__ called.
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
2025-06-10 21:21:22,150 - src.ultibot_ui.windows.history_view - INFO - HistoryView inicializada para usuario 22c5a278-da81-4fc5-8296-92cdb59670e3
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
2025-06-10 21:21:22,157 - src.ultibot_ui.services.ui_strategy_service - INFO - UIStrategyService: Iniciando fetch_strategies a través de TaskManager.
2025-06-10 21:21:22,157 - src.ultibot_ui.windows.main_window - INFO - MainWindow: Iniciada la obtención de estrategias.
2025-06-10 21:21:22,157 - src.ultibot_ui.windows.main_window - INFO - Central widget y vistas configuradas.
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property -webkit-background-clip
Unknown property -webkit-background-clip
Unknown property -webkit-background-clip
Unknown property backdrop-filter
Unknown property backdrop-filter
Unknown property box-shadow
Unknown property backdrop-filter
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property backdrop-filter
Unknown property backdrop-filter
Unknown property backdrop-filter
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property backdrop-filter
Unknown property backdrop-filter
Unknown property backdrop-filter
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property -webkit-background-clip
Unknown property -webkit-background-clip
Unknown property -webkit-background-clip
Unknown property backdrop-filter
Unknown property backdrop-filter
Unknown property box-shadow
Unknown property backdrop-filter
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property backdrop-filter
Unknown property backdrop-filter
Unknown property backdrop-filter
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property backdrop-filter
Unknown property backdrop-filter
Unknown property backdrop-filter
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
2025-06-10 21:21:22,192 - src.ultibot_ui.windows.main_window - INFO - MainWindow inicializada y visible.
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
2025-06-10 21:21:22,565 - __main__ - INFO - Ventana principal mostrada.
2025-06-10 21:21:22,617 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Fetching portfolio snapshot.
2025-06-10 21:21:22,618 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/market/klines
2025-06-10 21:21:22,618 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades, modo: both, filtros: {'trading_mode': 'both'}
2025-06-10 21:21:22,618 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/trades
2025-06-10 21:21:22,627 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/strategies/strategies
2025-06-10 21:21:22,628 - src.ultibot_ui.services.trading_mode_state - INFO - Syncing trading mode with backend...
2025-06-10 21:21:22,628 - src.ultibot_ui.services.api_client - INFO - Getting trading mode from backend.
2025-06-10 21:21:22,628 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/trading-mode
2025-06-10 21:21:22,628 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/performance/metrics
2025-06-10 21:21:22,628 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades, modo: paper, filtros: {'trading_mode': 'paper', 'date_from': '2025-05-11', 'date_to': '2025-06-10', 'limit': 500, 'offset': 0}
2025-06-10 21:21:22,628 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/trades
2025-06-10 21:21:22,892 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading-mode "HTTP/1.1 200 OK"
2025-06-10 21:21:22,892 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/trading-mode "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:21:22,892 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 21:21:22,892 - src.ultibot_ui.windows.main_window - INFO - Initial trading mode synced successfully.
2025-06-10 21:21:23,209 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/performance/metrics?trading_mode=paper&date_from=2025-05-11&date_to=2025-06-10 "HTTP/1.1 200 OK"
2025-06-10 21:21:23,210 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/performance/metrics "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:21:23,210 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 21:21:23,210 - src.ultibot_ui.widgets.paper_trading_report_widget - INFO - Métricas de rendimiento cargadas exitosamente
2025-06-10 21:21:23,288 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades?trading_mode=paper&date_from=2025-05-11&date_to=2025-06-10&limit=500&offset=0 "HTTP/1.1 200 OK"
2025-06-10 21:21:23,290 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/trades "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:21:23,290 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 21:21:23,290 - src.ultibot_ui.widgets.paper_trading_report_widget - INFO - Trades cargados exitosamente: 0 trades
2025-06-10 21:21:23,330 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/strategies/strategies "HTTP/1.1 200 OK"
2025-06-10 21:21:23,340 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/strategies/strategies "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:21:23,340 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 21:21:23,340 - src.ultibot_ui.views.strategies_view - INFO - Strategies view updated with 2 strategies.
2025-06-10 21:21:23,340 - src.ultibot_ui.services.ui_strategy_service - INFO - UIStrategyService: Se obtuvieron y emitieron 2 estrategias exitosamente.
2025-06-10 21:21:23,440 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades?trading_mode=both "HTTP/1.1 200 OK"
2025-06-10 21:21:23,440 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/trades "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:21:23,440 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 21:21:23,440 - src.ultibot_ui.windows.dashboard_view - INFO - DashboardView: 0 trades cargados para el análisis de desempeño.
2025-06-10 21:21:23,440 - src.ultibot_ui.windows.dashboard_view - INFO - DashboardView: Inicialización de componentes asíncronos completada.
2025-06-10 21:21:23,440 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: PAPER
2025-06-10 21:21:23,443 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot del portafolio para 22c5a278-da81-4fc5-8296-92cdb59670e3, modo: PAPER
2025-06-10 21:21:23,443 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/portfolio/snapshot
2025-06-10 21:21:23,443 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades, modo: PAPER, filtros: {'trading_mode': 'PAPER', 'status': 'open'}
2025-06-10 21:21:23,443 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/trades
2025-06-10 21:21:23,443 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot?user_id=22c5a278-da81-4fc5-8296-92cdb59670e3&trading_mode=PAPER "HTTP/1.1 422 Unprocessable Entity"
2025-06-10 21:21:23,443 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/portfolio/snapshot "HTTP/HTTP/1.1 422 Unprocessable Entity"
2025-06-10 21:21:23,443 - STDOUT - INFO - Respuesta recibida: Estado 422 Unprocessable Entity
2025-06-10 21:21:23,443 - src.ultibot_ui.services.api_client - ERROR - Error HTTP 422 para GET /api/v1/portfolio/snapshot: {"detail":[{"type":"literal_error","loc":["query","trading_mode"],"msg":"Input should be 'paper', 'real' or 'both'","input":"PAPER","ctx":{"expected":"'paper', 'real' or 'both'"}}]}
2025-06-10 21:21:23,443 - STDOUT - INFO - ERROR API: Error HTTP 422 para GET /api/v1/portfolio/snapshot: {"detail":[{"type":"literal_error","loc":["query","trading_mode"],"msg":"Input should be 'paper', 'real' or 'both'","input":"PAPER","ctx":{"expected":"'paper', 'real' or 'both'"}}]}
2025-06-10 21:21:23,443 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades?trading_mode=PAPER&status=open "HTTP/1.1 422 Unprocessable Entity"
2025-06-10 21:21:23,443 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/trades "HTTP/HTTP/1.1 422 Unprocessable Entity"
2025-06-10 21:21:23,443 - STDOUT - INFO - Respuesta recibida: Estado 422 Unprocessable Entity
2025-06-10 21:21:23,443 - src.ultibot_ui.services.api_client - ERROR - Error HTTP 422 para GET /api/v1/trades: {"detail":[{"type":"literal_error","loc":["query","trading_mode"],"msg":"Input should be 'paper', 'real' or 'both'","input":"PAPER","ctx":{"expected":"'paper', 'real' or 'both'"}}]}
2025-06-10 21:21:23,443 - STDOUT - INFO - ERROR API: Error HTTP 422 para GET /api/v1/trades: {"detail":[{"type":"literal_error","loc":["query","trading_mode"],"msg":"Input should be 'paper', 'real' or 'both'","input":"PAPER","ctx":{"expected":"'paper', 'real' or 'both'"}}]}
2025-06-10 21:21:23,443 - src.ultibot_ui.widgets.portfolio_widget - INFO - DATOS COMPLETOS RECIBIDOS EN HANDLER: {'portfolio_snapshot': APIError([{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]), 'open_trades': APIError([{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]), 'trading_mode': 'PAPER'}
2025-06-10 21:21:23,443 - src.ultibot_ui.widgets.portfolio_widget - ERROR - Error al obtener snapshot de portafolio: Error de API (422): [{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 45, in _make_request
    response.raise_for_status()
  File "C:\Users\zamor\AppData\Local\pypoetry\Cache\virtualenvs\ultibotinversiones-UOQi1NQu-py3.11\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '422 Unprocessable Entity' for url 'http://localhost:8000/api/v1/portfolio/snapshot?user_id=22c5a278-da81-4fc5-8296-92cdb59670e3&trading_mode=PAPER'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 103, in get_portfolio_snapshot
    return await self._make_request("GET", "/api/v1/portfolio/snapshot", params=params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 60, in _make_request
    raise APIError(
src.ultibot_ui.services.api_client.APIError: Error de API (422): [{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]
2025-06-10 21:21:23,443 - src.ultibot_ui.widgets.portfolio_widget - ERROR - Error al obtener trades abiertos: Error de API (422): [{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 45, in _make_request
    response.raise_for_status()
  File "C:\Users\zamor\AppData\Local\pypoetry\Cache\virtualenvs\ultibotinversiones-UOQi1NQu-py3.11\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '422 Unprocessable Entity' for url 'http://localhost:8000/api/v1/trades?trading_mode=PAPER&status=open'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 108, in get_trades
    return await self._make_request("GET", "/api/v1/trades", params=params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 60, in _make_request
    raise APIError(
src.ultibot_ui.services.api_client.APIError: Error de API (422): [{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]
2025-06-10 21:21:23,595 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/market/klines?symbol=BTCUSDT&interval=1h&limit=100 "HTTP/1.1 200 OK"
2025-06-10 21:21:23,595 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/market/klines "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:21:23,595 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
QPropertyAnimation: you're trying to animate a non-existing property spotlight_opacity of your QObject
QPropertyAnimation: you're trying to animate a non-existing property spotlight_opacity of your QObject
2025-06-10 21:21:27,115 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 21:21:27,640 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 21:21:27,640 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:21:27,640 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
QPropertyAnimation: you're trying to animate a non-existing property spotlight_opacity of your QObject
QPropertyAnimation: you're trying to animate a non-existing property hover_progress of your QObject
Unknown property box-shadow
QPropertyAnimation: you're trying to animate a non-existing property hover_progress of your QObject
QPropertyAnimation: you're trying to animate a non-existing property glow_opacity of your QObject
Unknown property box-shadow
2025-06-10 21:21:32,123 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
QPropertyAnimation: you're trying to animate a non-existing property hover_progress of your QObject
QPropertyAnimation: you're trying to animate a non-existing property glow_opacity of your QObject
Unknown property box-shadow
QPropertyAnimation: you're trying to animate a non-existing property hover_progress of your QObject
QPropertyAnimation: you're trying to animate a non-existing property glow_opacity of your QObject
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
QPropertyAnimation: you're trying to animate a non-existing property glow_opacity of your QObject
QPropertyAnimation: you're trying to animate a non-existing property glow_opacity of your QObject
2025-06-10 21:21:32,767 - src.ultibot_ui.views.strategies_view - INFO - StrategiesView: Entrando a la vista.
2025-06-10 21:21:32,767 - src.ultibot_ui.widgets.sidebar_navigation_widget - INFO - Navigation requested: strategies
2025-06-10 21:21:32,767 - src.ultibot_ui.views.strategies_view - INFO - Fetching strategies.
2025-06-10 21:21:32,777 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/strategies/strategies
2025-06-10 21:21:33,391 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 21:21:33,391 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:21:33,391 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 21:21:33,883 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/strategies/strategies "HTTP/1.1 200 OK"
2025-06-10 21:21:33,883 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/strategies/strategies "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:21:33,883 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 21:21:33,883 - src.ultibot_ui.views.strategies_view - INFO - Received 2 strategies.
2025-06-10 21:21:33,883 - src.ultibot_ui.views.strategies_view - INFO - Strategies view updated with 2 strategies.
2025-06-10 21:21:37,109 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: PAPER
2025-06-10 21:21:37,110 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot del portafolio para 22c5a278-da81-4fc5-8296-92cdb59670e3, modo: PAPER
2025-06-10 21:21:37,110 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/portfolio/snapshot
2025-06-10 21:21:37,110 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades, modo: PAPER, filtros: {'trading_mode': 'PAPER', 'status': 'open'}
2025-06-10 21:21:37,110 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/trades
2025-06-10 21:21:37,113 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot?user_id=22c5a278-da81-4fc5-8296-92cdb59670e3&trading_mode=PAPER "HTTP/1.1 422 Unprocessable Entity"
2025-06-10 21:21:37,113 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/portfolio/snapshot "HTTP/HTTP/1.1 422 Unprocessable Entity"
2025-06-10 21:21:37,113 - STDOUT - INFO - Respuesta recibida: Estado 422 Unprocessable Entity
2025-06-10 21:21:37,113 - src.ultibot_ui.services.api_client - ERROR - Error HTTP 422 para GET /api/v1/portfolio/snapshot: {"detail":[{"type":"literal_error","loc":["query","trading_mode"],"msg":"Input should be 'paper', 'real' or 'both'","input":"PAPER","ctx":{"expected":"'paper', 'real' or 'both'"}}]}
2025-06-10 21:21:37,113 - STDOUT - INFO - ERROR API: Error HTTP 422 para GET /api/v1/portfolio/snapshot: {"detail":[{"type":"literal_error","loc":["query","trading_mode"],"msg":"Input should be 'paper', 'real' or 'both'","input":"PAPER","ctx":{"expected":"'paper', 'real' or 'both'"}}]}
2025-06-10 21:21:37,113 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades?trading_mode=PAPER&status=open "HTTP/1.1 422 Unprocessable Entity"
2025-06-10 21:21:37,113 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/trades "HTTP/HTTP/1.1 422 Unprocessable Entity"
2025-06-10 21:21:37,113 - STDOUT - INFO - Respuesta recibida: Estado 422 Unprocessable Entity
2025-06-10 21:21:37,113 - src.ultibot_ui.services.api_client - ERROR - Error HTTP 422 para GET /api/v1/trades: {"detail":[{"type":"literal_error","loc":["query","trading_mode"],"msg":"Input should be 'paper', 'real' or 'both'","input":"PAPER","ctx":{"expected":"'paper', 'real' or 'both'"}}]}
2025-06-10 21:21:37,113 - STDOUT - INFO - ERROR API: Error HTTP 422 para GET /api/v1/trades: {"detail":[{"type":"literal_error","loc":["query","trading_mode"],"msg":"Input should be 'paper', 'real' or 'both'","input":"PAPER","ctx":{"expected":"'paper', 'real' or 'both'"}}]}
2025-06-10 21:21:37,113 - src.ultibot_ui.widgets.portfolio_widget - INFO - DATOS COMPLETOS RECIBIDOS EN HANDLER: {'portfolio_snapshot': APIError([{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]), 'open_trades': APIError([{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]), 'trading_mode': 'PAPER'}
2025-06-10 21:21:37,113 - src.ultibot_ui.widgets.portfolio_widget - ERROR - Error al obtener snapshot de portafolio: Error de API (422): [{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 45, in _make_request
    response.raise_for_status()
  File "C:\Users\zamor\AppData\Local\pypoetry\Cache\virtualenvs\ultibotinversiones-UOQi1NQu-py3.11\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '422 Unprocessable Entity' for url 'http://localhost:8000/api/v1/portfolio/snapshot?user_id=22c5a278-da81-4fc5-8296-92cdb59670e3&trading_mode=PAPER'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 103, in get_portfolio_snapshot
    return await self._make_request("GET", "/api/v1/portfolio/snapshot", params=params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 60, in _make_request
    raise APIError(
src.ultibot_ui.services.api_client.APIError: Error de API (422): [{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]
2025-06-10 21:21:37,113 - src.ultibot_ui.widgets.portfolio_widget - ERROR - Error al obtener trades abiertos: Error de API (422): [{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 45, in _make_request
    response.raise_for_status()
  File "C:\Users\zamor\AppData\Local\pypoetry\Cache\virtualenvs\ultibotinversiones-UOQi1NQu-py3.11\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '422 Unprocessable Entity' for url 'http://localhost:8000/api/v1/trades?trading_mode=PAPER&status=open'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 108, in get_trades
    return await self._make_request("GET", "/api/v1/trades", params=params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 60, in _make_request
    raise APIError(
src.ultibot_ui.services.api_client.APIError: Error de API (422): [{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]
2025-06-10 21:21:37,125 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 21:21:38,503 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 21:21:38,503 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:21:38,503 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
Unknown property box-shadow
2025-06-10 21:21:42,120 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 21:21:42,920 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 21:21:42,920 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:21:42,920 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
Unknown property box-shadow
Unknown property box-shadow
2025-06-10 21:21:47,120 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 21:21:48,010 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 21:21:48,010 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:21:48,010 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
Unknown property box-shadow
2025-06-10 21:21:48,350 - src.ultibot_ui.services.api_client - INFO - Creando configuración de escaneo de mercado '1'.
2025-06-10 21:21:48,350 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/market-configuration/configurations
2025-06-10 21:21:48,360 - httpx - INFO - HTTP Request: POST http://localhost:8000/api/v1/market-configuration/configurations "HTTP/1.1 500 Internal Server Error"
2025-06-10 21:21:48,360 - src.ultibot_ui.services.api_client - INFO - HTTP Request: POST /api/v1/market-configuration/configurations "HTTP/HTTP/1.1 500 Internal Server Error"
2025-06-10 21:21:48,360 - STDOUT - INFO - Respuesta recibida: Estado 500 Internal Server Error
2025-06-10 21:21:48,360 - src.ultibot_ui.services.api_client - ERROR - Error HTTP 500 para POST /api/v1/market-configuration/configurations: {"detail":"Failed to create configuration: SupabasePersistenceService.upsert_market_scan_configuration() takes 2 positional arguments but 3 were given"}
2025-06-10 21:21:48,360 - STDOUT - INFO - ERROR API: Error HTTP 500 para POST /api/v1/market-configuration/configurations: {"detail":"Failed to create configuration: SupabasePersistenceService.upsert_market_scan_configuration() takes 2 positional arguments but 3 were given"}
2025-06-10 21:21:48,360 - src.ultibot_ui.workers - ERROR - ApiWorker: APIError: Error de API (500): Failed to create configuration: SupabasePersistenceService.upsert_market_scan_configuration() takes 2 positional arguments but 3 were given
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 45, in _make_request
    response.raise_for_status()
  File "C:\Users\zamor\AppData\Local\pypoetry\Cache\virtualenvs\ultibotinversiones-UOQi1NQu-py3.11\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Server error '500 Internal Server Error' for url 'http://localhost:8000/api/v1/market-configuration/configurations'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\workers.py", line 38, in run
    result = future.result()
             ^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\concurrent\futures\_base.py", line 456, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\concurrent\futures\_base.py", line 401, in __get_result
    raise self._exception
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 302, in create_market_scan_configuration
    response = await self._make_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 60, in _make_request
    raise APIError(
src.ultibot_ui.services.api_client.APIError: Error de API (500): Failed to create configuration: SupabasePersistenceService.upsert_market_scan_configuration() takes 2 positional arguments but 3 were given
2025-06-10 21:21:48,360 - src.ultibot_ui.dialogs.market_scan_config_dialog - ERROR - Error de API al guardar configuración: Error de API (500): Failed to create configuration: SupabasePersistenceService.upsert_market_scan_configuration() takes 2 positional arguments but 3 were given
Unknown property box-shadow
Unknown property box-shadow
2025-06-10 21:21:52,110 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: PAPER
2025-06-10 21:21:52,110 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot del portafolio para 22c5a278-da81-4fc5-8296-92cdb59670e3, modo: PAPER
2025-06-10 21:21:52,110 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/portfolio/snapshot
2025-06-10 21:21:52,110 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades, modo: PAPER, filtros: {'trading_mode': 'PAPER', 'status': 'open'}
2025-06-10 21:21:52,110 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/trades
2025-06-10 21:21:52,110 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot?user_id=22c5a278-da81-4fc5-8296-92cdb59670e3&trading_mode=PAPER "HTTP/1.1 422 Unprocessable Entity"
2025-06-10 21:21:52,110 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/portfolio/snapshot "HTTP/HTTP/1.1 422 Unprocessable Entity"
2025-06-10 21:21:52,110 - STDOUT - INFO - Respuesta recibida: Estado 422 Unprocessable Entity
2025-06-10 21:21:52,110 - src.ultibot_ui.services.api_client - ERROR - Error HTTP 422 para GET /api/v1/portfolio/snapshot: {"detail":[{"type":"literal_error","loc":["query","trading_mode"],"msg":"Input should be 'paper', 'real' or 'both'","input":"PAPER","ctx":{"expected":"'paper', 'real' or 'both'"}}]}
2025-06-10 21:21:52,110 - STDOUT - INFO - ERROR API: Error HTTP 422 para GET /api/v1/portfolio/snapshot: {"detail":[{"type":"literal_error","loc":["query","trading_mode"],"msg":"Input should be 'paper', 'real' or 'both'","input":"PAPER","ctx":{"expected":"'paper', 'real' or 'both'"}}]}
2025-06-10 21:21:52,130 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 21:21:52,360 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades?trading_mode=PAPER&status=open "HTTP/1.1 422 Unprocessable Entity"
2025-06-10 21:21:52,360 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/trades "HTTP/HTTP/1.1 422 Unprocessable Entity"
2025-06-10 21:21:52,360 - STDOUT - INFO - Respuesta recibida: Estado 422 Unprocessable Entity
2025-06-10 21:21:52,360 - src.ultibot_ui.services.api_client - ERROR - Error HTTP 422 para GET /api/v1/trades: {"detail":[{"type":"literal_error","loc":["query","trading_mode"],"msg":"Input should be 'paper', 'real' or 'both'","input":"PAPER","ctx":{"expected":"'paper', 'real' or 'both'"}}]}
2025-06-10 21:21:52,360 - STDOUT - INFO - ERROR API: Error HTTP 422 para GET /api/v1/trades: {"detail":[{"type":"literal_error","loc":["query","trading_mode"],"msg":"Input should be 'paper', 'real' or 'both'","input":"PAPER","ctx":{"expected":"'paper', 'real' or 'both'"}}]}
2025-06-10 21:21:52,360 - src.ultibot_ui.widgets.portfolio_widget - INFO - DATOS COMPLETOS RECIBIDOS EN HANDLER: {'portfolio_snapshot': APIError([{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]), 'open_trades': APIError([{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]), 'trading_mode': 'PAPER'}
2025-06-10 21:21:52,360 - src.ultibot_ui.widgets.portfolio_widget - ERROR - Error al obtener snapshot de portafolio: Error de API (422): [{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 45, in _make_request
    response.raise_for_status()
  File "C:\Users\zamor\AppData\Local\pypoetry\Cache\virtualenvs\ultibotinversiones-UOQi1NQu-py3.11\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '422 Unprocessable Entity' for url 'http://localhost:8000/api/v1/portfolio/snapshot?user_id=22c5a278-da81-4fc5-8296-92cdb59670e3&trading_mode=PAPER'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 103, in get_portfolio_snapshot
    return await self._make_request("GET", "/api/v1/portfolio/snapshot", params=params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 60, in _make_request
    raise APIError(
src.ultibot_ui.services.api_client.APIError: Error de API (422): [{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]
2025-06-10 21:21:52,360 - src.ultibot_ui.widgets.portfolio_widget - ERROR - Error al obtener trades abiertos: Error de API (422): [{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 45, in _make_request
    response.raise_for_status()
  File "C:\Users\zamor\AppData\Local\pypoetry\Cache\virtualenvs\ultibotinversiones-UOQi1NQu-py3.11\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '422 Unprocessable Entity' for url 'http://localhost:8000/api/v1/trades?trading_mode=PAPER&status=open'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 108, in get_trades
    return await self._make_request("GET", "/api/v1/trades", params=params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 60, in _make_request
    raise APIError(
src.ultibot_ui.services.api_client.APIError: Error de API (422): [{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]
2025-06-10 21:21:53,671 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 21:21:53,671 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:21:53,671 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
Unknown property box-shadow
2025-06-10 21:21:55,190 - src.ultibot_ui.windows.main_window - INFO - Diálogo de configuración de escaneo de mercado cerrado
Unknown property box-shadow
Unknown property box-shadow
2025-06-10 21:21:56,264 - src.ultibot_ui.views.strategies_view - INFO - StrategiesView: Saliendo de la vista.
2025-06-10 21:21:56,264 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: Entrando a la vista.
2025-06-10 21:21:56,265 - src.ultibot_ui.widgets.sidebar_navigation_widget - INFO - Navigation requested: opportunities
2025-06-10 21:21:56,265 - src.ultibot_ui.views.opportunities_view - INFO - Fetching Gemini IA opportunities.
2025-06-10 21:21:56,287 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/opportunities/real-trading-candidates
2025-06-10 21:21:57,131 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 21:21:57,965 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 21:21:57,966 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:21:57,966 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 21:22:02,161 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 21:22:02,820 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 21:22:02,820 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:22:02,820 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 21:22:03,830 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/opportunities/real-trading-candidates "HTTP/1.1 200 OK"
2025-06-10 21:22:03,830 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/opportunities/real-trading-candidates "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:22:03,830 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 21:22:03,830 - src.ultibot_ui.views.opportunities_view - INFO - Received 0 opportunities.
2025-06-10 21:22:07,108 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: PAPER
2025-06-10 21:22:07,110 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot del portafolio para 22c5a278-da81-4fc5-8296-92cdb59670e3, modo: PAPER
2025-06-10 21:22:07,110 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/portfolio/snapshot
2025-06-10 21:22:07,110 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades, modo: PAPER, filtros: {'trading_mode': 'PAPER', 'status': 'open'}
2025-06-10 21:22:07,110 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/trades
2025-06-10 21:22:07,110 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot?user_id=22c5a278-da81-4fc5-8296-92cdb59670e3&trading_mode=PAPER "HTTP/1.1 422 Unprocessable Entity"
2025-06-10 21:22:07,110 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/portfolio/snapshot "HTTP/HTTP/1.1 422 Unprocessable Entity"
2025-06-10 21:22:07,110 - STDOUT - INFO - Respuesta recibida: Estado 422 Unprocessable Entity
2025-06-10 21:22:07,110 - src.ultibot_ui.services.api_client - ERROR - Error HTTP 422 para GET /api/v1/portfolio/snapshot: {"detail":[{"type":"literal_error","loc":["query","trading_mode"],"msg":"Input should be 'paper', 'real' or 'both'","input":"PAPER","ctx":{"expected":"'paper', 'real' or 'both'"}}]}
2025-06-10 21:22:07,110 - STDOUT - INFO - ERROR API: Error HTTP 422 para GET /api/v1/portfolio/snapshot: {"detail":[{"type":"literal_error","loc":["query","trading_mode"],"msg":"Input should be 'paper', 'real' or 'both'","input":"PAPER","ctx":{"expected":"'paper', 'real' or 'both'"}}]}
2025-06-10 21:22:07,110 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades?trading_mode=PAPER&status=open "HTTP/1.1 422 Unprocessable Entity"
2025-06-10 21:22:07,110 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/trades "HTTP/HTTP/1.1 422 Unprocessable Entity"
2025-06-10 21:22:07,110 - STDOUT - INFO - Respuesta recibida: Estado 422 Unprocessable Entity
2025-06-10 21:22:07,110 - src.ultibot_ui.services.api_client - ERROR - Error HTTP 422 para GET /api/v1/trades: {"detail":[{"type":"literal_error","loc":["query","trading_mode"],"msg":"Input should be 'paper', 'real' or 'both'","input":"PAPER","ctx":{"expected":"'paper', 'real' or 'both'"}}]}
2025-06-10 21:22:07,110 - STDOUT - INFO - ERROR API: Error HTTP 422 para GET /api/v1/trades: {"detail":[{"type":"literal_error","loc":["query","trading_mode"],"msg":"Input should be 'paper', 'real' or 'both'","input":"PAPER","ctx":{"expected":"'paper', 'real' or 'both'"}}]}
2025-06-10 21:22:07,116 - src.ultibot_ui.widgets.portfolio_widget - INFO - DATOS COMPLETOS RECIBIDOS EN HANDLER: {'portfolio_snapshot': APIError([{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]), 'open_trades': APIError([{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]), 'trading_mode': 'PAPER'}
2025-06-10 21:22:07,116 - src.ultibot_ui.widgets.portfolio_widget - ERROR - Error al obtener snapshot de portafolio: Error de API (422): [{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 45, in _make_request
    response.raise_for_status()
  File "C:\Users\zamor\AppData\Local\pypoetry\Cache\virtualenvs\ultibotinversiones-UOQi1NQu-py3.11\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '422 Unprocessable Entity' for url 'http://localhost:8000/api/v1/portfolio/snapshot?user_id=22c5a278-da81-4fc5-8296-92cdb59670e3&trading_mode=PAPER'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 103, in get_portfolio_snapshot
    return await self._make_request("GET", "/api/v1/portfolio/snapshot", params=params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 60, in _make_request
    raise APIError(
src.ultibot_ui.services.api_client.APIError: Error de API (422): [{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]
2025-06-10 21:22:07,116 - src.ultibot_ui.widgets.portfolio_widget - ERROR - Error al obtener trades abiertos: Error de API (422): [{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 45, in _make_request
    response.raise_for_status()
  File "C:\Users\zamor\AppData\Local\pypoetry\Cache\virtualenvs\ultibotinversiones-UOQi1NQu-py3.11\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '422 Unprocessable Entity' for url 'http://localhost:8000/api/v1/trades?trading_mode=PAPER&status=open'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/422

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 108, in get_trades
    return await self._make_request("GET", "/api/v1/trades", params=params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 60, in _make_request
    raise APIError(
src.ultibot_ui.services.api_client.APIError: Error de API (422): [{'type': 'literal_error', 'loc': ['query', 'trading_mode'], 'msg': "Input should be 'paper', 'real' or 'both'", 'input': 'PAPER', 'ctx': {'expected': "'paper', 'real' or 'both'"}}]
2025-06-10 21:22:07,156 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 21:22:08,160 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 21:22:08,160 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 21:22:08,160 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 21:22:09,700 - src.ultibot_ui.windows.main_window - INFO - Limpiando recursos de MainWindow...
2025-06-10 21:22:09,700 - src.ultibot_ui.windows.dashboard_view - INFO - DashboardView: Iniciando limpieza de tareas.
2025-06-10 21:22:09,700 - src.ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Limpiando hilos y workers activos.
2025-06-10 21:22:09,700 - src.ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Limpieza completada.
2025-06-10 21:22:09,700 - src.ultibot_ui.widgets.chart_widget - INFO - ChartWidget: Limpieza completada.
2025-06-10 21:22:09,700 - src.ultibot_ui.widgets.notification_widget - INFO - NotificationWidget: cleanup called.
2025-06-10 21:22:09,700 - src.ultibot_ui.widgets.notification_widget - INFO - NotificationWidget: Stopping update timer.
2025-06-10 21:22:09,700 - src.ultibot_ui.widgets.notification_widget - INFO - NotificationWidget: cleanup finished.
2025-06-10 21:22:09,700 - src.ultibot_ui.windows.dashboard_view - INFO - DashboardView: Limpieza completada.
2025-06-10 21:22:09,700 - src.ultibot_ui.views.opportunities_view - INFO - Cleaning up OpportunitiesView...
2025-06-10 21:22:09,700 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: Saliendo de la vista.
2025-06-10 21:22:09,700 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView cleanup finished.
2025-06-10 21:22:09,700 - src.ultibot_ui.views.strategies_view - INFO - Cleaning up StrategiesView...
2025-06-10 21:22:09,700 - src.ultibot_ui.views.strategies_view - INFO - StrategiesView: Saliendo de la vista.
2025-06-10 21:22:09,703 - src.ultibot_ui.views.strategies_view - INFO - StrategiesView cleanup finished.
2025-06-10 21:22:09,703 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleaning up...
2025-06-10 21:22:09,703 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleanup finished.
2025-06-10 21:22:09,703 - src.ultibot_ui.widgets.paper_trading_report_widget - INFO - PaperTradingReportWidget cleanup: No hay acciones que tomar.
2025-06-10 21:22:09,703 - src.ultibot_ui.windows.history_view - INFO - HistoryView cleanup completado
2025-06-10 21:22:09,703 - src.ultibot_ui.windows.main_window - INFO - Cerrando el pool de hilos del TaskManager...
2025-06-10 21:22:09,703 - src.ultibot_ui.windows.main_window - INFO - El pool de hilos del TaskManager ha sido cerrado.
2025-06-10 21:22:09,703 - src.ultibot_ui.windows.main_window - INFO - Limpieza de MainWindow finalizada.
Unhandled Python exception
