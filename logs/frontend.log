2025-06-10 18:20:40,640 - __main__ - INFO - Logging configurado. stdout y stderr redirigidos al archivo de log.
2025-06-10 18:20:40,640 - STDERR - ERROR - C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\main.py:70: DeprecationWarning: sipPyTypeDict() is deprecated, the extension module should use sipPyTypeDictRef() instead
2025-06-10 18:20:40,640 - STDERR - ERROR -   class AppController(QObject):
2025-06-10 18:20:40,659 - __main__ - INFO - Stylesheet cargado exitosamente.
2025-06-10 18:20:40,841 - src.ultibot_ui.services.trading_mode_state - INFO - TradingModeStateManager initialized with mode: paper
2025-06-10 18:20:40,842 - __main__ - INFO - Iniciando inicialización asíncrona...
2025-06-10 18:20:42,854 - src.ultibot_ui.services.api_client - INFO - Obteniendo configuración de usuario.
2025-06-10 18:20:42,856 - STDOUT - INFO - Solicitando configuración de usuario al backend...
2025-06-10 18:20:42,856 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/config
2025-06-10 18:20:43,650 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/config "HTTP/1.1 200 OK"
2025-06-10 18:20:43,650 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/config "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:20:43,650 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:20:43,650 - __main__ - INFO - Configuración recibida para el ID de usuario: 6891d984-ac25-4fa9-b0f9-3ed6965cf3d0
2025-06-10 18:20:43,650 - src.ultibot_ui.services.trading_mode_state - INFO - Syncing trading mode with backend...
2025-06-10 18:20:43,650 - src.ultibot_ui.services.api_client - INFO - Getting trading mode from backend.
2025-06-10 18:20:43,650 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/trading-mode
2025-06-10 18:20:43,656 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading-mode "HTTP/1.1 200 OK"
2025-06-10 18:20:43,656 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/trading-mode "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:20:43,656 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:20:43,656 - src.ultibot_ui.windows.main_window - INFO - TaskManager inicializado con un máximo de 10 hilos.
2025-06-10 18:20:43,979 - src.ultibot_ui.widgets.portfolio_widget - INFO - Timer de actualización del portafolio iniciado.
2025-06-10 18:20:43,981 - src.ultibot_ui.widgets.chart_widget - INFO - Solicitando datos para BTCUSDT - 1h usando TaskManager
2025-06-10 18:20:43,990 - src.ultibot_ui.windows.dashboard_view - INFO - DashboardView: _initialize_async_components INVOCADO
2025-06-10 18:20:44,295 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: __init__ called.
2025-06-10 18:20:44,323 - src.ultibot_ui.windows.history_view - INFO - HistoryView inicializada para usuario 6891d984-ac25-4fa9-b0f9-3ed6965cf3d0
2025-06-10 18:20:44,330 - src.ultibot_ui.services.ui_strategy_service - INFO - UIStrategyService: Iniciando fetch_strategies a través de TaskManager.
2025-06-10 18:20:44,330 - src.ultibot_ui.windows.main_window - INFO - MainWindow: Iniciada la obtención de estrategias.
2025-06-10 18:20:44,330 - src.ultibot_ui.windows.main_window - INFO - Central widget y vistas configuradas.
2025-06-10 18:20:44,349 - src.ultibot_ui.windows.main_window - INFO - MainWindow inicializada y visible.
2025-06-10 18:20:44,463 - __main__ - INFO - Ventana principal mostrada.
2025-06-10 18:20:44,539 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Fetching portfolio snapshot.
2025-06-10 18:20:44,539 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/market/klines
2025-06-10 18:20:44,539 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades, modo: both, filtros: {'trading_mode': 'both'}
2025-06-10 18:20:44,539 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/trades
2025-06-10 18:20:44,539 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/strategies/strategies
2025-06-10 18:20:44,539 - src.ultibot_ui.services.trading_mode_state - INFO - Syncing trading mode with backend...
2025-06-10 18:20:44,539 - src.ultibot_ui.services.api_client - INFO - Getting trading mode from backend.
2025-06-10 18:20:44,549 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/trading-mode
2025-06-10 18:20:44,549 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/performance/metrics
2025-06-10 18:20:44,549 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades, modo: paper, filtros: {'trading_mode': 'paper', 'date_from': '2025-05-11', 'date_to': '2025-06-10', 'limit': 500, 'offset': 0}
2025-06-10 18:20:44,549 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/trades
2025-06-10 18:20:44,809 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading-mode "HTTP/1.1 200 OK"
2025-06-10 18:20:44,809 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/trading-mode "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:20:44,809 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:20:44,809 - src.ultibot_ui.windows.main_window - INFO - Initial trading mode synced successfully.
2025-06-10 18:20:45,112 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/performance/metrics?trading_mode=paper&date_from=2025-05-11&date_to=2025-06-10 "HTTP/1.1 200 OK"
2025-06-10 18:20:45,113 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/performance/metrics "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:20:45,113 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:20:45,114 - src.ultibot_ui.widgets.paper_trading_report_widget - INFO - Métricas de rendimiento cargadas exitosamente
2025-06-10 18:20:45,179 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/strategies/strategies "HTTP/1.1 200 OK"
2025-06-10 18:20:45,189 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/strategies/strategies "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:20:45,190 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:20:45,190 - src.ultibot_ui.views.strategies_view - INFO - Strategies view updated with 2 strategies.
2025-06-10 18:20:45,190 - src.ultibot_ui.services.ui_strategy_service - INFO - UIStrategyService: Se obtuvieron y emitieron 2 estrategias exitosamente.
2025-06-10 18:20:45,260 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades?trading_mode=paper&date_from=2025-05-11&date_to=2025-06-10&limit=500&offset=0 "HTTP/1.1 200 OK"
2025-06-10 18:20:45,260 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/trades "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:20:45,260 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:20:45,260 - src.ultibot_ui.widgets.paper_trading_report_widget - INFO - Trades cargados exitosamente: 0 trades
2025-06-10 18:20:45,329 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades?trading_mode=both "HTTP/1.1 200 OK"
2025-06-10 18:20:45,329 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/trades "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:20:45,329 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:20:45,329 - src.ultibot_ui.windows.dashboard_view - INFO - DashboardView: 0 trades cargados para el análisis de desempeño.
2025-06-10 18:20:45,329 - src.ultibot_ui.windows.dashboard_view - INFO - DashboardView: Inicialización de componentes asíncronos completada.
2025-06-10 18:20:45,329 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: paper
2025-06-10 18:20:45,329 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot del portafolio para 6891d984-ac25-4fa9-b0f9-3ed6965cf3d0, modo: paper
2025-06-10 18:20:45,329 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/portfolio/snapshot
2025-06-10 18:20:45,329 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades, modo: paper, filtros: {'trading_mode': 'paper', 'status': 'open'}
2025-06-10 18:20:45,329 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/trades
2025-06-10 18:20:45,573 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/market/klines?symbol=BTCUSDT&interval=1h&limit=100 "HTTP/1.1 200 OK"
2025-06-10 18:20:45,578 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/market/klines "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:20:45,578 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:20:45,735 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades?trading_mode=paper&status=open "HTTP/1.1 200 OK"
2025-06-10 18:20:45,736 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/trades "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:20:45,736 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:20:45,759 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot?user_id=6891d984-ac25-4fa9-b0f9-3ed6965cf3d0&trading_mode=paper "HTTP/1.1 200 OK"
2025-06-10 18:20:45,759 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/portfolio/snapshot "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:20:45,759 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:20:45,759 - src.ultibot_ui.widgets.portfolio_widget - INFO - DATOS COMPLETOS RECIBIDOS EN HANDLER: {'portfolio_snapshot': {'paper_trading': {'available_balance_usdt': 10000.0, 'total_assets_value_usd': 0.0, 'total_portfolio_value_usd': 10000.0, 'assets': [], 'error_message': None}, 'real_trading': {'available_balance_usdt': 0.0, 'total_assets_value_usd': 0.0, 'total_portfolio_value_usd': 0.0, 'assets': [], 'error_message': 'Real trading data not requested'}, 'last_updated': '2025-06-10T22:20:45.757318'}, 'open_trades': [], 'trading_mode': 'paper'}
2025-06-10 18:20:48,975 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 18:20:49,559 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 18:20:49,559 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:20:49,559 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:20:53,981 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 18:20:54,159 - src.ultibot_ui.windows.main_window - ERROR - Error al abrir el diálogo de parámetros de trading: sip.enumtype object 'ScrollBarPolicy' has no member 'ScrollBarNever'
2025-06-10 18:20:54,649 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 18:20:54,649 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:20:54,649 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:20:58,989 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: paper
2025-06-10 18:20:58,990 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 18:20:58,991 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot del portafolio para 6891d984-ac25-4fa9-b0f9-3ed6965cf3d0, modo: paper
2025-06-10 18:20:58,991 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/portfolio/snapshot
2025-06-10 18:20:58,992 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades, modo: paper, filtros: {'trading_mode': 'paper', 'status': 'open'}
2025-06-10 18:20:58,992 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/trades
2025-06-10 18:20:59,869 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades?trading_mode=paper&status=open "HTTP/1.1 200 OK"
2025-06-10 18:20:59,869 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/trades "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:20:59,869 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:00,069 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot?user_id=6891d984-ac25-4fa9-b0f9-3ed6965cf3d0&trading_mode=paper "HTTP/1.1 200 OK"
2025-06-10 18:21:00,069 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/portfolio/snapshot "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:00,069 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:00,069 - src.ultibot_ui.widgets.portfolio_widget - INFO - DATOS COMPLETOS RECIBIDOS EN HANDLER: {'portfolio_snapshot': {'paper_trading': {'available_balance_usdt': 10000.0, 'total_assets_value_usd': 0.0, 'total_portfolio_value_usd': 10000.0, 'assets': [], 'error_message': None}, 'real_trading': {'available_balance_usdt': 0.0, 'total_assets_value_usd': 0.0, 'total_portfolio_value_usd': 0.0, 'assets': [], 'error_message': 'Real trading data not requested'}, 'last_updated': '2025-06-10T22:21:00.069932'}, 'open_trades': [], 'trading_mode': 'paper'}
2025-06-10 18:21:00,948 - src.ultibot_ui.services.api_client - INFO - Obteniendo presets de escaneo.
2025-06-10 18:21:00,948 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/market-configuration/presets
2025-06-10 18:21:00,959 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/market-configuration/presets?include_system=true "HTTP/1.1 500 Internal Server Error"
2025-06-10 18:21:00,959 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/market-configuration/presets "HTTP/HTTP/1.1 500 Internal Server Error"
2025-06-10 18:21:00,959 - STDOUT - INFO - Respuesta recibida: Estado 500 Internal Server Error
2025-06-10 18:21:00,959 - src.ultibot_ui.services.api_client - ERROR - Error HTTP 500 para GET /api/v1/market-configuration/presets: {"detail":"Failed to retrieve presets: 'SupabasePersistenceService' object has no attribute 'list_scan_presets'"}
2025-06-10 18:21:00,959 - STDOUT - INFO - ERROR API: Error HTTP 500 para GET /api/v1/market-configuration/presets: {"detail":"Failed to retrieve presets: 'SupabasePersistenceService' object has no attribute 'list_scan_presets'"}
2025-06-10 18:21:00,959 - src.ultibot_ui.workers - ERROR - ApiWorker: APIError: Error de API (500): Failed to retrieve presets: 'SupabasePersistenceService' object has no attribute 'list_scan_presets'
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 45, in _make_request
    response.raise_for_status()
  File "C:\Users\zamor\AppData\Local\pypoetry\Cache\virtualenvs\ultibotinversiones-UOQi1NQu-py3.11\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Server error '500 Internal Server Error' for url 'http://localhost:8000/api/v1/market-configuration/presets?include_system=true'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\workers.py", line 38, in run
    result = future.result()
             ^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\concurrent\futures\_base.py", line 456, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\concurrent\futures\_base.py", line 401, in __get_result
    raise self._exception
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 188, in get_scan_presets
    response = await self._make_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 60, in _make_request
    raise APIError(
src.ultibot_ui.services.api_client.APIError: Error de API (500): Failed to retrieve presets: 'SupabasePersistenceService' object has no attribute 'list_scan_presets'
2025-06-10 18:21:00,981 - src.ultibot_ui.dialogs.preset_management_dialog - ERROR - Error cargando presets: Error de API (500): Failed to retrieve presets: 'SupabasePersistenceService' object has no attribute 'list_scan_presets'
2025-06-10 18:21:01,097 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 18:21:01,098 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:01,098 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:03,987 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 18:21:04,879 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 18:21:04,879 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:04,879 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:05,249 - src.ultibot_ui.windows.main_window - INFO - Diálogo de gestión de presets cerrado
2025-06-10 18:21:08,979 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 18:21:09,855 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 18:21:09,855 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:09,855 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:13,985 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: paper
2025-06-10 18:21:13,987 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 18:21:13,988 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot del portafolio para 6891d984-ac25-4fa9-b0f9-3ed6965cf3d0, modo: paper
2025-06-10 18:21:13,988 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/portfolio/snapshot
2025-06-10 18:21:13,988 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades, modo: paper, filtros: {'trading_mode': 'paper', 'status': 'open'}
2025-06-10 18:21:13,988 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/trades
2025-06-10 18:21:14,509 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades?trading_mode=paper&status=open "HTTP/1.1 200 OK"
2025-06-10 18:21:14,509 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/trades "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:14,509 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:14,659 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot?user_id=6891d984-ac25-4fa9-b0f9-3ed6965cf3d0&trading_mode=paper "HTTP/1.1 200 OK"
2025-06-10 18:21:14,659 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/portfolio/snapshot "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:14,659 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:14,659 - src.ultibot_ui.widgets.portfolio_widget - INFO - DATOS COMPLETOS RECIBIDOS EN HANDLER: {'portfolio_snapshot': {'paper_trading': {'available_balance_usdt': 10000.0, 'total_assets_value_usd': 0.0, 'total_portfolio_value_usd': 10000.0, 'assets': [], 'error_message': None}, 'real_trading': {'available_balance_usdt': 0.0, 'total_assets_value_usd': 0.0, 'total_portfolio_value_usd': 0.0, 'assets': [], 'error_message': 'Real trading data not requested'}, 'last_updated': '2025-06-10T22:21:14.659634'}, 'open_trades': [], 'trading_mode': 'paper'}
2025-06-10 18:21:14,974 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 18:21:14,974 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:14,974 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:18,982 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 18:21:19,947 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 18:21:19,950 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:19,950 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:23,735 - src.ultibot_ui.dialogs.market_scan_config_dialog - ERROR - Error inesperado al guardar configuración: 'UltiBotAPIClient' object has no attribute 'create_scan_configuration'
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\dialogs\market_scan_config_dialog.py", line 980, in _save_config
    self.api_client.create_scan_configuration(config_data)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'UltiBotAPIClient' object has no attribute 'create_scan_configuration'
2025-06-10 18:21:23,989 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 18:21:24,949 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 18:21:24,949 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:24,949 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:28,978 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: paper
2025-06-10 18:21:28,980 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 18:21:28,980 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot del portafolio para 6891d984-ac25-4fa9-b0f9-3ed6965cf3d0, modo: paper
2025-06-10 18:21:28,980 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/portfolio/snapshot
2025-06-10 18:21:28,980 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades, modo: paper, filtros: {'trading_mode': 'paper', 'status': 'open'}
2025-06-10 18:21:28,980 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/trades
2025-06-10 18:21:29,505 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades?trading_mode=paper&status=open "HTTP/1.1 200 OK"
2025-06-10 18:21:29,505 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/trades "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:29,505 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:29,669 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot?user_id=6891d984-ac25-4fa9-b0f9-3ed6965cf3d0&trading_mode=paper "HTTP/1.1 200 OK"
2025-06-10 18:21:29,669 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/portfolio/snapshot "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:29,669 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:29,679 - src.ultibot_ui.widgets.portfolio_widget - INFO - DATOS COMPLETOS RECIBIDOS EN HANDLER: {'portfolio_snapshot': {'paper_trading': {'available_balance_usdt': 10000.0, 'total_assets_value_usd': 0.0, 'total_portfolio_value_usd': 10000.0, 'assets': [], 'error_message': None}, 'real_trading': {'available_balance_usdt': 0.0, 'total_assets_value_usd': 0.0, 'total_portfolio_value_usd': 0.0, 'assets': [], 'error_message': 'Real trading data not requested'}, 'last_updated': '2025-06-10T22:21:29.669995'}, 'open_trades': [], 'trading_mode': 'paper'}
2025-06-10 18:21:29,939 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 18:21:29,939 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:29,939 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:31,279 - src.ultibot_ui.windows.main_window - INFO - Diálogo de configuración de escaneo de mercado cerrado
2025-06-10 18:21:33,979 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 18:21:34,920 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: Entrando a la vista.
2025-06-10 18:21:34,920 - src.ultibot_ui.views.opportunities_view - INFO - Fetching Gemini IA opportunities.
2025-06-10 18:21:34,939 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/opportunities/real-trading-candidates
2025-06-10 18:21:34,959 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 18:21:34,967 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:34,967 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:37,339 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: Saliendo de la vista.
2025-06-10 18:21:38,279 - src.ultibot_ui.views.strategies_view - INFO - StrategiesView: Entrando a la vista.
2025-06-10 18:21:38,283 - src.ultibot_ui.views.strategies_view - INFO - Fetching strategies.
2025-06-10 18:21:38,286 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/strategies/strategies
2025-06-10 18:21:38,759 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/opportunities/real-trading-candidates "HTTP/1.1 200 OK"
2025-06-10 18:21:38,759 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/opportunities/real-trading-candidates "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:38,760 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:38,760 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView no está activa, ignorando resultado.
2025-06-10 18:21:38,790 - src.ultibot_ui.views.strategies_view - INFO - StrategiesView: Saliendo de la vista.
2025-06-10 18:21:38,988 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/notifications/history
2025-06-10 18:21:39,539 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/strategies/strategies "HTTP/1.1 200 OK"
2025-06-10 18:21:39,539 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/strategies/strategies "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:39,539 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:39,539 - src.ultibot_ui.views.strategies_view - INFO - StrategiesView no está activa, ignorando resultado.
2025-06-10 18:21:39,859 - src.ultibot_ui.views.strategies_view - INFO - StrategiesView: Entrando a la vista.
2025-06-10 18:21:39,859 - src.ultibot_ui.views.strategies_view - INFO - Fetching strategies.
2025-06-10 18:21:39,859 - STDOUT - INFO - Intentando conectar a: http://localhost:8000/api/v1/strategies/strategies
2025-06-10 18:21:39,902 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?limit=20 "HTTP/1.1 200 OK"
2025-06-10 18:21:39,902 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/notifications/history "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:39,902 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:40,875 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/strategies/strategies "HTTP/1.1 200 OK"
2025-06-10 18:21:40,875 - src.ultibot_ui.services.api_client - INFO - HTTP Request: GET /api/v1/strategies/strategies "HTTP/HTTP/1.1 200 OK"
2025-06-10 18:21:40,875 - STDOUT - INFO - Respuesta recibida: Estado 200 OK
2025-06-10 18:21:40,875 - src.ultibot_ui.views.strategies_view - INFO - Received 2 strategies.
2025-06-10 18:21:40,875 - src.ultibot_ui.views.strategies_view - INFO - Strategies view updated with 2 strategies.
2025-06-10 18:21:42,479 - src.ultibot_ui.windows.main_window - INFO - Limpiando recursos de MainWindow...
2025-06-10 18:21:42,479 - src.ultibot_ui.windows.dashboard_view - INFO - DashboardView: Iniciando limpieza de tareas.
2025-06-10 18:21:42,479 - src.ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Limpiando hilos y workers activos.
2025-06-10 18:21:42,479 - src.ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Limpieza completada.
2025-06-10 18:21:42,479 - src.ultibot_ui.widgets.chart_widget - INFO - ChartWidget: Limpieza completada.
2025-06-10 18:21:42,479 - src.ultibot_ui.widgets.notification_widget - INFO - NotificationWidget: cleanup called.
2025-06-10 18:21:42,481 - src.ultibot_ui.widgets.notification_widget - INFO - NotificationWidget: Stopping update timer.
2025-06-10 18:21:42,481 - src.ultibot_ui.widgets.notification_widget - INFO - NotificationWidget: cleanup finished.
2025-06-10 18:21:42,481 - src.ultibot_ui.windows.dashboard_view - INFO - DashboardView: Limpieza completada.
2025-06-10 18:21:42,481 - src.ultibot_ui.views.opportunities_view - INFO - Cleaning up OpportunitiesView...
2025-06-10 18:21:42,481 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: Saliendo de la vista.
2025-06-10 18:21:42,481 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView cleanup finished.
2025-06-10 18:21:42,481 - src.ultibot_ui.views.strategies_view - INFO - Cleaning up StrategiesView...
2025-06-10 18:21:42,481 - src.ultibot_ui.views.strategies_view - INFO - StrategiesView: Saliendo de la vista.
2025-06-10 18:21:42,481 - src.ultibot_ui.views.strategies_view - INFO - StrategiesView cleanup finished.
2025-06-10 18:21:42,481 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleaning up...
2025-06-10 18:21:42,481 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleanup finished.
2025-06-10 18:21:42,481 - src.ultibot_ui.widgets.paper_trading_report_widget - INFO - PaperTradingReportWidget cleanup: No hay acciones que tomar.
2025-06-10 18:21:42,481 - src.ultibot_ui.windows.history_view - INFO - HistoryView cleanup completado
2025-06-10 18:21:42,481 - src.ultibot_ui.windows.main_window - INFO - Cerrando el pool de hilos del TaskManager...
2025-06-10 18:21:42,481 - src.ultibot_ui.windows.main_window - INFO - El pool de hilos del TaskManager ha sido cerrado.
2025-06-10 18:21:42,481 - src.ultibot_ui.windows.main_window - INFO - Limpieza de MainWindow finalizada.
