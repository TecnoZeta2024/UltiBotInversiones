2025-06-04 10:40:50,300 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: capital_status obtenido: True
2025-06-04 10:40:50,449 - src.ultibot_ui.widgets.portfolio_widget - INFO - Worker de actualización finalizado.
2025-06-04 10:40:50,450 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:40:50,450 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:40:50,451 - qasync._QThreadWorker - DEBUG - #7 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:40:50,451 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:40:50,452 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:40:50,643 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 128, 0, <_overlapped.Overlapped object at 0x00000268A7A6E730>)]
2025-06-04 10:40:50,643 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:40:50,644 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:40:49 GMT'), (b'server', b'uvicorn'), (b'content-length', b'58558'), (b'content-type', b'application/json')])
2025-06-04 10:40:50,645 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/market/klines?user_id=00000000-0000-0000-0000-000000000001&symbol=BTCUSDT&interval=1h&limit=200 "HTTP/1.1 200 OK"
2025-06-04 10:40:50,645 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:40:50,646 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:40:50,646 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:40:50,647 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:40:50,648 - httpcore.connection - DEBUG - close.started
2025-06-04 10:40:50,648 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:40:50,707 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A806E8E0>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6EA30>)]
2025-06-04 10:40:50,708 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A806E0C0>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6E670>)]
2025-06-04 10:40:50,708 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A806E8E0>
2025-06-04 10:40:50,709 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A806E0C0>
2025-06-04 10:40:50,710 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268A7ACDE50>
2025-06-04 10:40:50,710 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268A8059A90>
2025-06-04 10:40:50,711 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:40:50,711 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:40:50,712 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:40:50,712 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:40:50,713 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:40:50,713 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:40:50,713 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 125, 0, <_overlapped.Overlapped object at 0x00000268A7A6EA30>)]
2025-06-04 10:40:50,714 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:40:50,714 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:40:50,715 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:40:50,715 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:40:50,716 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:40:50,716 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:40:49 GMT'), (b'server', b'uvicorn'), (b'content-length', b'46'), (b'content-type', b'application/json')])
2025-06-04 10:40:50,716 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/config/real-trading-mode/status "HTTP/1.1 200 OK"
2025-06-04 10:40:50,717 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:40:50,717 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:40:50,717 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:40:50,718 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:40:50,718 - httpcore.connection - DEBUG - close.started
2025-06-04 10:40:50,719 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:40:50,719 - src.ultibot_ui.windows.settings_view - INFO - Estado de operativa real cargado: {'isActive': False, 'executedCount': 0, 'limit': 5}
2025-06-04 10:40:50,846 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 124, 0, <_overlapped.Overlapped object at 0x00000268A7A6E7F0>)]
2025-06-04 10:40:50,847 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:40:50,848 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:40:49 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:40:50,848 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/performance/strategies "HTTP/1.1 200 OK"
2025-06-04 10:40:50,848 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:40:50,849 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:40:50,850 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:40:50,850 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:40:50,850 - httpcore.connection - DEBUG - close.started
2025-06-04 10:40:50,851 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:40:50,851 - src.ultibot_ui.widgets.strategy_performance_table_view - DEBUG - Actualizando modelo de tabla de desempeño con: []
2025-06-04 10:40:50,851 - src.ultibot_ui.windows.dashboard_view - INFO - Datos de desempeño de estrategias cargados y mostrados: 0 registros.
2025-06-04 10:40:50,852 - src.ultibot_ui.windows.dashboard_view - INFO - Datos de desempeño de estrategias cargados.
2025-06-04 10:40:50,852 - src.ultibot_ui.widgets.market_data_widget - INFO - Cargando configuración inicial para MarketDataWidget...
2025-06-04 10:40:50,852 - src.ultibot_ui.services.api_client - INFO - Obteniendo configuración de usuario.
2025-06-04 10:40:50,853 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:40:50,854 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:40:51,045 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:40:51,046 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:40:51,046 - qasync._QThreadWorker - DEBUG - #6 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:40:51,047 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:40:51,047 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:40:51,304 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268A7A33F20>
2025-06-04 10:40:51,305 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:40:51,306 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:40:51,307 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:40:51,308 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:40:51,309 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 127, 0, <_overlapped.Overlapped object at 0x00000268A7A6C630>)]
2025-06-04 10:40:51,309 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:40:51,310 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:40:51,311 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:40:50 GMT'), (b'server', b'uvicorn'), (b'content-length', b'1001'), (b'content-type', b'application/json')])
2025-06-04 10:40:51,311 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/config "HTTP/1.1 200 OK"
2025-06-04 10:40:51,312 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:40:51,313 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:40:51,313 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:40:51,313 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:40:51,314 - httpcore.connection - DEBUG - close.started
2025-06-04 10:40:51,314 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:40:51,315 - src.ultibot_ui.widgets.market_data_widget - INFO - Configuración cargada: Pares seleccionados: ['BTC/USDT', 'ETH/USDT'], Intervalo: 30000ms
2025-06-04 10:40:51,315 - src.ultibot_ui.widgets.market_data_widget - INFO - Actualizando datos de tickers para: ['BTC/USDT', 'ETH/USDT']
2025-06-04 10:40:51,316 - src.ultibot_ui.services.api_client - INFO - Obteniendo datos de ticker para usuario 00000000-0000-0000-0000-000000000001 y símbolos: ['BTC/USDT', 'ETH/USDT']
2025-06-04 10:40:51,316 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:40:51,317 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:40:51,510 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:40:51,510 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:40:51,511 - qasync._QThreadWorker - DEBUG - #8 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:40:51,511 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:40:51,512 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:40:51,774 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8126E80>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6E130>)]
2025-06-04 10:40:51,775 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8126E80>
2025-06-04 10:40:51,776 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture cancelled>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8126980>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6C630>)]
2025-06-04 10:40:51,776 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268A80EC3D0>
2025-06-04 10:40:51,777 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8126980>
2025-06-04 10:40:51,778 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
  File "C:\Users\zamor\AppData\Local\Programs\Python\Python313\Lib\asyncio\windows_events.py", line 600, in finish_connect
    ov.getresult()
    ~~~~~~~~~~~~^^
OSError: [WinError 995] La operación de E/S se anuló por una salida de subproceso o por una solicitud de aplicación
2025-06-04 10:40:51,779 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:40:51,780 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:40:51,780 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:40:51,780 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:40:51,781 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:40:52,107 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 126, 0, <_overlapped.Overlapped object at 0x00000268A7A6C4B0>)]
2025-06-04 10:40:52,108 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:40:52,109 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:40:50 GMT'), (b'server', b'uvicorn'), (b'content-length', b'200'), (b'content-type', b'application/json')])
2025-06-04 10:40:52,109 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/market/tickers?user_id=00000000-0000-0000-0000-000000000001&symbols=BTC%2FUSDT%2CETH%2FUSDT "HTTP/1.1 200 OK"
2025-06-04 10:40:52,110 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:40:52,110 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:40:52,111 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:40:52,111 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:40:52,111 - httpcore.connection - DEBUG - close.started
2025-06-04 10:40:52,112 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:40:52,113 - src.ultibot_ui.windows.dashboard_view - INFO - Configuración inicial de MarketDataWidget cargada.
2025-06-04 10:40:52,113 - src.ultibot_ui.windows.dashboard_view - INFO - Carga secuencial de componentes asíncronos completada.
2025-06-04 10:40:52,113 - src.ultibot_ui.windows.main_window - INFO - MainWindow: DashboardView inicializado. Cargando estrategias...
2025-06-04 10:40:52,114 - src.ultibot_ui.services.api_client - INFO - Obteniendo todas las configuraciones de estrategias.
2025-06-04 10:40:52,114 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:40:52,115 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:40:52,314 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:40:52,315 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:40:52,316 - qasync._QThreadWorker - DEBUG - #4 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:40:52,316 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:40:52,317 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:40:52,569 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB85D9B0>
2025-06-04 10:40:52,570 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:40:52,570 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:40:52,571 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:40:52,572 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:40:52,573 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:40:53,256 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=20, offset=0
2025-06-04 10:40:53,257 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:40:53,258 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:40:53,456 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:40:53,457 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:40:53,458 - qasync._QThreadWorker - DEBUG - #9 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:40:53,458 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:40:53,459 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:40:53,626 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 125, 0, <_overlapped.Overlapped object at 0x00000268A7A6EA30>)]
2025-06-04 10:40:53,627 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:40:53,628 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:40:51 GMT'), (b'server', b'uvicorn'), (b'content-length', b'33'), (b'content-type', b'application/json')])
2025-06-04 10:40:53,628 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/strategies "HTTP/1.1 200 OK"
2025-06-04 10:40:53,628 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:40:53,629 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:40:53,629 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:40:53,630 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:40:53,630 - httpcore.connection - DEBUG - close.started
2025-06-04 10:40:53,630 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:40:53,713 - qasync._QEventLoop - ERROR - Exception in callback Task.task_wakeup()
handle: <Handle Task.task_wakeup()>
Traceback (most recent call last):
  File "C:\Users\zamor\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
RuntimeError: Cannot enter into task <Task cancelling name='Task-14' coro=<NotificationWidget._fetch_notifications.<locals>.fetch_and_add() running at C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\widgets\notification_widget.py:67> wait_for=<Future cancelled>> while another task <Task pending name='Task-13' coro=<StrategyManagementView._load_strategies_async() running at C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\views\strategy_management_view.py:563>> is being executed.
2025-06-04 10:40:55,504 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A81265C0>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6E5B0>)]
2025-06-04 10:40:55,505 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A81265C0>
2025-06-04 10:40:55,505 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
  File "C:\Users\zamor\AppData\Local\Programs\Python\Python313\Lib\asyncio\windows_events.py", line 600, in finish_connect
    ov.getresult()
    ~~~~~~~~~~~~^^
ConnectionRefusedError: [WinError 1225] El equipo remoto rechazó la conexión de red
2025-06-04 10:40:55,506 - qasync._QEventLoop - ERROR - Exception in callback Task.task_wakeup()
handle: <Handle Task.task_wakeup()>
Traceback (most recent call last):
  File "C:\Users\zamor\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
RuntimeError: Cannot enter into task <Task pending name='anyio._core._sockets.connect_tcp.<locals>.try_connect' coro=<connect_tcp.<locals>.try_connect() running at C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\anyio\_core\_sockets.py:175> wait_for=<_OverlappedFuture finished exception=ConnectionRefusedError(22, 'El equipo remoto rechazó la conexión de red', None, 1225, None)> cb=[TaskGroup._spawn.<locals>.task_done() at C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\anyio\_backends\_asyncio.py:794]> while another task <Task pending name='Task-13' coro=<StrategyManagementView._load_strategies_async() running at C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\views\strategy_management_view.py:563>> is being executed.
2025-06-04 10:40:58,256 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=20, offset=0
2025-06-04 10:40:58,257 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:40:58,258 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:40:58,456 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:40:58,457 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:40:58,457 - qasync._QThreadWorker - DEBUG - #1 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:40:58,458 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:40:58,457 - src.ultibot_ui.services.api_client - INFO - Obteniendo oportunidades de trading real pendientes de confirmación.
2025-06-04 10:40:58,458 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:40:58,459 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:40:58,460 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:40:58,651 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:40:58,651 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:40:58,652 - qasync._QThreadWorker - DEBUG - #10 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:40:58,652 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:40:58,653 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:40:58,906 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A81274C0>, 0, 0, <_overlapped.Overlapped object at 0x00000268AB898030>)]
2025-06-04 10:40:58,907 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A81274C0>
2025-06-04 10:40:58,908 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture cancelled>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A81271A0>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6FF30>)]
2025-06-04 10:40:58,909 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268A80F9D90>
2025-06-04 10:40:58,909 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture cancelled>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A80D8EA0>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6FCF0>)]
2025-06-04 10:40:58,909 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A81271A0>
2025-06-04 10:40:58,910 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
  File "C:\Users\zamor\AppData\Local\Programs\Python\Python313\Lib\asyncio\windows_events.py", line 600, in finish_connect
    ov.getresult()
    ~~~~~~~~~~~~^^
OSError: [WinError 995] La operación de E/S se anuló por una salida de subproceso o por una solicitud de aplicación
2025-06-04 10:40:58,912 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:40:58,912 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A80D8EA0>
2025-06-04 10:40:58,912 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
  File "C:\Users\zamor\AppData\Local\Programs\Python\Python313\Lib\asyncio\windows_events.py", line 600, in finish_connect
    ov.getresult()
    ~~~~~~~~~~~~^^
OSError: [WinError 995] La operación de E/S se anuló por una salida de subproceso o por una solicitud de aplicación
2025-06-04 10:40:58,913 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268A7A6FF50>
2025-06-04 10:40:58,913 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:40:58,914 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:40:58,914 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:40:58,914 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:40:58,915 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 132, 0, <_overlapped.Overlapped object at 0x00000268AB898030>)]
2025-06-04 10:40:58,915 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:40:58,916 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:40:58,916 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:40:58,917 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:40:58,917 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:40:58,918 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:40:58,919 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 403, b'Forbidden', [(b'date', b'Wed, 04 Jun 2025 14:40:58 GMT'), (b'server', b'uvicorn'), (b'content-length', b'71'), (b'content-type', b'application/json')])
2025-06-04 10:40:58,919 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/opportunities/real-trading-candidates "HTTP/1.1 403 Forbidden"
2025-06-04 10:40:58,920 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:40:58,920 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:40:58,921 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:40:58,921 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:40:58,922 - httpcore.connection - DEBUG - close.started
2025-06-04 10:40:58,922 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:40:58,923 - src.ultibot_ui.services.api_client - ERROR - HTTP error 403 for GET http://localhost:8000/api/v1/opportunities/real-trading-candidates: {"detail":"El modo de trading real no está activo para este usuario."}
2025-06-04 10:40:58,923 - src.ultibot_ui.windows.dashboard_view - ERROR - Error al verificar oportunidades de trading real pendientes: APIError(status_code=403, message='API request failed with status 403: {"detail":"El modo de trading real no está activo para este usuario."}', response_json={'detail': 'El modo de trading real no está activo para este usuario.'})
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 59, in _make_request
    response.raise_for_status() # Lanza HTTPStatusError para 4xx/5xx
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '403 Forbidden' for url 'http://localhost:8000/api/v1/opportunities/real-trading-candidates'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\dashboard_view.py", line 447, in _check_pending_real_opportunities
    opportunities_data = await self.api_client.get_real_trading_candidates()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 285, in get_real_trading_candidates
    return await self._make_request("GET", "/api/v1/opportunities/real-trading-candidates")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 73, in _make_request
    raise APIError(
    ...<3 lines>...
    )
src.ultibot_ui.services.api_client.APIError: APIError(status_code=403, message='API request failed with status 403: {"detail":"El modo de trading real no está activo para este usuario."}', response_json={'detail': 'El modo de trading real no está activo para este usuario.'})
2025-06-04 10:40:59,086 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 124, 0, <_overlapped.Overlapped object at 0x00000268AB8980F0>)]
2025-06-04 10:40:59,086 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:40:59,087 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:40:58 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:40:59,088 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=20&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:40:59,088 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:40:59,089 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:40:59,089 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:40:59,091 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:40:59,091 - httpcore.connection - DEBUG - close.started
2025-06-04 10:40:59,092 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:03,242 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: paper
2025-06-04 10:41:03,242 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:41:03,258 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=20, offset=0
2025-06-04 10:41:03,258 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:03,259 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: Iniciando actualización para user 00000000-0000-0000-0000-000000000001, modo paper
2025-06-04 10:41:03,260 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot de portafolio para usuario 00000000-0000-0000-0000-000000000001, modo: paper
2025-06-04 10:41:03,260 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:03,260 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:03,261 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:03,574 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:03,575 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:03,575 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:03,576 - qasync._QThreadWorker - DEBUG - #2 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:03,578 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:03,579 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:03,831 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268AB8A2160>, 0, 0, <_overlapped.Overlapped object at 0x00000268AB898930>)]
2025-06-04 10:41:03,832 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268AB8A2160>
2025-06-04 10:41:03,833 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB898950>
2025-06-04 10:41:03,834 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:03,835 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:03,835 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:03,835 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:03,835 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:03,842 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8D8940>
2025-06-04 10:41:03,843 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:03,843 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:03,844 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:03,845 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:03,845 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:03,846 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:03 GMT'), (b'server', b'uvicorn'), (b'content-length', b'355'), (b'content-type', b'application/json')])
2025-06-04 10:41:03,846 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot/00000000-0000-0000-0000-000000000001?trading_mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:41:03,847 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:03,847 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:03,848 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:03,848 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:03,849 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:03,849 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:03,850 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: portfolio_snapshot obtenido: True
2025-06-04 10:41:03,850 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades abiertos para usuario 00000000-0000-0000-0000-000000000001, modo: paper
2025-06-04 10:41:03,851 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:03,852 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:03,955 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 124, 0, <_overlapped.Overlapped object at 0x00000268AB898AB0>)]
2025-06-04 10:41:03,955 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:03,956 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:03 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:03,957 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=20&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:41:03,957 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:03,958 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:03,959 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:03,959 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:03,960 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:03,961 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:04,051 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:04,308 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268A80F12E0>
2025-06-04 10:41:04,309 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:04,310 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:04,311 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:04,312 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:04,312 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:04,313 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:03 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:04,313 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades/00000000-0000-0000-0000-000000000001/open?trading_mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:41:04,314 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:04,314 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:04,314 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:04,315 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:04,315 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:04,316 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:04,317 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: open_trades obtenido: True
2025-06-04 10:41:04,317 - src.ultibot_ui.services.api_client - INFO - Obteniendo estado de gestión de capital.
2025-06-04 10:41:04,318 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:04,318 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:04,443 - src.ultibot_ui.services.trading_mode_state - INFO - Trading mode changed from paper to real
2025-06-04 10:41:04,444 - src.ultibot_ui.windows.dashboard_view - INFO - Dashboard: Trading mode changed to real
2025-06-04 10:41:04,444 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: real
2025-06-04 10:41:04,445 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:41:04,445 - src.ultibot_ui.widgets.trading_mode_selector - DEBUG - External mode change detected: real
2025-06-04 10:41:04,446 - src.ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Modo de trading cambió a real
2025-06-04 10:41:04,447 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: Iniciando actualización para user 00000000-0000-0000-0000-000000000001, modo real
2025-06-04 10:41:04,447 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: real
2025-06-04 10:41:04,447 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot de portafolio para usuario 00000000-0000-0000-0000-000000000001, modo: real
2025-06-04 10:41:04,448 - src.ultibot_ui.widgets.order_form_widget - INFO - OrderFormWidget: Modo de trading cambió a real
2025-06-04 10:41:04,448 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:04,452 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Trading mode changed to real. Refreshing data.
2025-06-04 10:41:04,452 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:04,452 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Fetching portfolio snapshot.
2025-06-04 10:41:04,454 - src.ultibot_ui.widgets.trading_mode_selector - INFO - Toggle button clicked, new mode: real
2025-06-04 10:41:04,455 - src.ultibot_ui.windows.dashboard_view - INFO - Cargando datos de desempeño de estrategias para el modo de filtro: Operativa Real (API param: real)
2025-06-04 10:41:04,456 - src.ultibot_ui.services.api_client - INFO - Obteniendo desempeño de estrategias (usuario implícito por backend) con modo: real
2025-06-04 10:41:04,457 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:04,458 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:04,604 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:04,805 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:04,815 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:04,815 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:04,816 - qasync._QThreadWorker - DEBUG - #5 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:04,816 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:04,817 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:04,858 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268A80D8B90>
2025-06-04 10:41:04,859 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:04,860 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:04,861 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:04,861 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:04,861 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:04,862 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:04 GMT'), (b'server', b'uvicorn'), (b'content-length', b'82'), (b'content-type', b'application/json')])
2025-06-04 10:41:04,863 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading/capital-management/status "HTTP/1.1 200 OK"
2025-06-04 10:41:04,863 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:04,863 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:04,864 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:04,864 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:04,865 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:04,865 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:04,866 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: capital_status obtenido: True
2025-06-04 10:41:04,866 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - Ignorando datos de modo paper, modo actual es real
2025-06-04 10:41:04,866 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:41:04,866 - src.ultibot_ui.widgets.portfolio_widget - INFO - Worker de actualización finalizado.
2025-06-04 10:41:04,867 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: Iniciando actualización para user 00000000-0000-0000-0000-000000000001, modo real
2025-06-04 10:41:04,868 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot de portafolio para usuario 00000000-0000-0000-0000-000000000001, modo: real
2025-06-04 10:41:04,868 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:04,869 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:05,070 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8A1BD0>
2025-06-04 10:41:05,071 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:05,071 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:05,072 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:05,072 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:05,073 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:05,073 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:05,076 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268A80C23C0>
2025-06-04 10:41:05,077 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:05,078 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:05,078 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:05,078 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:05,079 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:05,195 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 124, 0, <_overlapped.Overlapped object at 0x00000268A7A6C870>)]
2025-06-04 10:41:05,196 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:05,197 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:04 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:05,198 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/performance/strategies?mode=real "HTTP/1.1 200 OK"
2025-06-04 10:41:05,198 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:05,199 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:05,199 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:05,199 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:05,200 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:05,200 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:05,200 - src.ultibot_ui.widgets.strategy_performance_table_view - DEBUG - Actualizando modelo de tabla de desempeño con: []
2025-06-04 10:41:05,201 - src.ultibot_ui.windows.dashboard_view - INFO - Datos de desempeño de estrategias cargados y mostrados: 0 registros.
2025-06-04 10:41:05,343 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268F8193950>
2025-06-04 10:41:05,344 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:05,345 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:05,345 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:05,346 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:05,347 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:05,763 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:04 GMT'), (b'server', b'uvicorn'), (b'content-length', b'521'), (b'content-type', b'application/json')])
2025-06-04 10:41:05,763 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot/00000000-0000-0000-0000-000000000001?trading_mode=real "HTTP/1.1 200 OK"
2025-06-04 10:41:05,764 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:05,765 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:05,765 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:05,767 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:05,768 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:05,769 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:05,769 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: portfolio_snapshot obtenido: True
2025-06-04 10:41:05,770 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades abiertos para usuario 00000000-0000-0000-0000-000000000001, modo: real
2025-06-04 10:41:05,770 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:05,771 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:05,895 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:04 GMT'), (b'server', b'uvicorn'), (b'content-length', b'521'), (b'content-type', b'application/json')])
2025-06-04 10:41:05,896 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot/00000000-0000-0000-0000-000000000001?trading_mode=real "HTTP/1.1 200 OK"
2025-06-04 10:41:05,896 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:05,897 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:05,898 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:05,899 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:05,899 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:05,900 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:05,901 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: portfolio_snapshot obtenido: True
2025-06-04 10:41:05,902 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades abiertos para usuario 00000000-0000-0000-0000-000000000001, modo: real
2025-06-04 10:41:05,902 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:05,903 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:06,011 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:06,143 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:06,274 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8ED4D0>
2025-06-04 10:41:06,275 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:06,275 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:06,276 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:06,277 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:06,277 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:06,278 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:05 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:06,279 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades/00000000-0000-0000-0000-000000000001/open?trading_mode=real "HTTP/1.1 200 OK"
2025-06-04 10:41:06,279 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:06,279 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:06,280 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:06,280 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:06,281 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:06,281 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:06,282 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: open_trades obtenido: True
2025-06-04 10:41:06,282 - src.ultibot_ui.services.api_client - INFO - Obteniendo estado de gestión de capital.
2025-06-04 10:41:06,283 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:06,284 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:06,409 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E8050>
2025-06-04 10:41:06,410 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:06,411 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:06,412 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:06,413 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:06,414 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:06,414 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:05 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:06,415 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades/00000000-0000-0000-0000-000000000001/open?trading_mode=real "HTTP/1.1 200 OK"
2025-06-04 10:41:06,415 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:06,416 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:06,416 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:06,418 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:06,418 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:06,419 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:06,420 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: open_trades obtenido: True
2025-06-04 10:41:06,420 - src.ultibot_ui.services.api_client - INFO - Obteniendo estado de gestión de capital.
2025-06-04 10:41:06,421 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:06,422 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:06,524 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:06,658 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:06,792 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8C7D20>
2025-06-04 10:41:06,793 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:06,795 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:06,796 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:06,796 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:06,797 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:06,798 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:06 GMT'), (b'server', b'uvicorn'), (b'content-length', b'82'), (b'content-type', b'application/json')])
2025-06-04 10:41:06,798 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading/capital-management/status "HTTP/1.1 200 OK"
2025-06-04 10:41:06,799 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:06,799 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:06,799 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:06,800 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:06,800 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:06,801 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:06,801 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: capital_status obtenido: True
2025-06-04 10:41:06,804 - src.ultibot_ui.widgets.portfolio_widget - WARNING - Error message in portfolio data (real): No se pudieron obtener los balances de Binance: Error de estado HTTP de Binance API: 401 - {"code":-2015,"msg":"Invalid API-key, IP, or permissions for action."}
2025-06-04 10:41:06,813 - src.ultibot_ui.widgets.portfolio_widget - INFO - Worker de actualización finalizado.
2025-06-04 10:41:06,925 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268A811EC30>
2025-06-04 10:41:06,926 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:06,928 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:06,929 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:06,930 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:06,931 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:06,933 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:06 GMT'), (b'server', b'uvicorn'), (b'content-length', b'82'), (b'content-type', b'application/json')])
2025-06-04 10:41:06,933 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading/capital-management/status "HTTP/1.1 200 OK"
2025-06-04 10:41:06,935 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:06,936 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:06,937 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:06,938 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:06,939 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:06,940 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:06,941 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: capital_status obtenido: True
2025-06-04 10:41:06,946 - src.ultibot_ui.widgets.portfolio_widget - WARNING - Error message in portfolio data (real): No se pudieron obtener los balances de Binance: Error de estado HTTP de Binance API: 401 - {"code":-2015,"msg":"Invalid API-key, IP, or permissions for action."}
2025-06-04 10:41:06,955 - src.ultibot_ui.widgets.portfolio_widget - INFO - Worker de actualización finalizado.
2025-06-04 10:41:08,259 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=20, offset=0
2025-06-04 10:41:08,260 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:08,261 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:08,460 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:08,461 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:08,461 - qasync._QThreadWorker - DEBUG - #3 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:08,462 - src.ultibot_ui.services.api_client - INFO - Obteniendo oportunidades de trading real pendientes de confirmación.
2025-06-04 10:41:08,462 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:08,463 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:08,464 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:08,464 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:08,664 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:08,664 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:08,665 - qasync._QThreadWorker - DEBUG - #7 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:08,665 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:08,666 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:08,916 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8126520>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6E4F0>)]
2025-06-04 10:41:08,916 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8126520>
2025-06-04 10:41:08,918 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8126980>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6CC30>)]
2025-06-04 10:41:08,918 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB861AF0>
2025-06-04 10:41:08,919 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8126980>
2025-06-04 10:41:08,919 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:08,920 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:08,920 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:08,921 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:08,921 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:08,922 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E24E0>
2025-06-04 10:41:08,922 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:08,923 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:08,923 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:08,923 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:08,924 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:08,923 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 132, 0, <_overlapped.Overlapped object at 0x00000268A7A6F9F0>)]
2025-06-04 10:41:08,924 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:08,925 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 403, b'Forbidden', [(b'date', b'Wed, 04 Jun 2025 14:41:08 GMT'), (b'server', b'uvicorn'), (b'content-length', b'71'), (b'content-type', b'application/json')])
2025-06-04 10:41:08,926 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/opportunities/real-trading-candidates "HTTP/1.1 403 Forbidden"
2025-06-04 10:41:08,926 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:08,927 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:08,927 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:08,928 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:08,928 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:08,929 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:08,929 - src.ultibot_ui.services.api_client - ERROR - HTTP error 403 for GET http://localhost:8000/api/v1/opportunities/real-trading-candidates: {"detail":"El modo de trading real no está activo para este usuario."}
2025-06-04 10:41:08,929 - src.ultibot_ui.windows.dashboard_view - ERROR - Error al verificar oportunidades de trading real pendientes: APIError(status_code=403, message='API request failed with status 403: {"detail":"El modo de trading real no está activo para este usuario."}', response_json={'detail': 'El modo de trading real no está activo para este usuario.'})
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 59, in _make_request
    response.raise_for_status() # Lanza HTTPStatusError para 4xx/5xx
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '403 Forbidden' for url 'http://localhost:8000/api/v1/opportunities/real-trading-candidates'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\dashboard_view.py", line 447, in _check_pending_real_opportunities
    opportunities_data = await self.api_client.get_real_trading_candidates()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 285, in get_real_trading_candidates
    return await self._make_request("GET", "/api/v1/opportunities/real-trading-candidates")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 73, in _make_request
    raise APIError(
    ...<3 lines>...
    )
src.ultibot_ui.services.api_client.APIError: APIError(status_code=403, message='API request failed with status 403: {"detail":"El modo de trading real no está activo para este usuario."}', response_json={'detail': 'El modo de trading real no está activo para este usuario.'})
2025-06-04 10:41:09,079 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 124, 0, <_overlapped.Overlapped object at 0x00000268A7A6E070>)]
2025-06-04 10:41:09,079 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:09,080 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:08 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:09,081 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=20&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:41:09,081 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:09,082 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:09,082 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:09,082 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:09,083 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:09,083 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:12,576 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: real
2025-06-04 10:41:12,576 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:41:12,577 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: Iniciando actualización para user 00000000-0000-0000-0000-000000000001, modo real
2025-06-04 10:41:12,578 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot de portafolio para usuario 00000000-0000-0000-0000-000000000001, modo: real
2025-06-04 10:41:12,579 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:12,580 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:12,774 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:13,028 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E2940>
2025-06-04 10:41:13,029 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:13,030 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:13,031 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:13,032 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:13,032 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:13,259 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=20, offset=0
2025-06-04 10:41:13,260 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:13,261 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:13,452 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:13,453 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:13,453 - qasync._QThreadWorker - DEBUG - #6 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:13,454 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:13,455 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:13,638 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:12 GMT'), (b'server', b'uvicorn'), (b'content-length', b'521'), (b'content-type', b'application/json')])
2025-06-04 10:41:13,639 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot/00000000-0000-0000-0000-000000000001?trading_mode=real "HTTP/1.1 200 OK"
2025-06-04 10:41:13,639 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:13,640 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:13,641 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:13,641 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:13,642 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:13,642 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:13,643 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: portfolio_snapshot obtenido: True
2025-06-04 10:41:13,643 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades abiertos para usuario 00000000-0000-0000-0000-000000000001, modo: real
2025-06-04 10:41:13,644 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:13,645 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:13,707 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268AB8F51C0>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6ED30>)]
2025-06-04 10:41:13,709 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268AB8F51C0>
2025-06-04 10:41:13,709 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E3070>
2025-06-04 10:41:13,710 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:13,711 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:13,711 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:13,712 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:13,712 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:13,830 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 124, 0, <_overlapped.Overlapped object at 0x00000268A7A6DCB0>)]
2025-06-04 10:41:13,831 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:13,832 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:13 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:13,832 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=20&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:41:13,833 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:13,834 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:13,834 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:13,834 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:13,835 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:13,835 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:13,850 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:14,103 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E3480>
2025-06-04 10:41:14,104 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:14,105 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:14,106 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:14,106 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:14,107 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:14,108 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:13 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:14,108 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades/00000000-0000-0000-0000-000000000001/open?trading_mode=real "HTTP/1.1 200 OK"
2025-06-04 10:41:14,109 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:14,109 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:14,110 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:14,110 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:14,111 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:14,111 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:14,112 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: open_trades obtenido: True
2025-06-04 10:41:14,112 - src.ultibot_ui.services.api_client - INFO - Obteniendo estado de gestión de capital.
2025-06-04 10:41:14,113 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:14,114 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:14,316 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:14,572 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E3BB0>
2025-06-04 10:41:14,573 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:14,574 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:14,574 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:14,575 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:14,575 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:14,575 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:14 GMT'), (b'server', b'uvicorn'), (b'content-length', b'82'), (b'content-type', b'application/json')])
2025-06-04 10:41:14,576 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading/capital-management/status "HTTP/1.1 200 OK"
2025-06-04 10:41:14,577 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:14,577 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:14,577 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:14,578 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:14,578 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:14,579 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:14,579 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: capital_status obtenido: True
2025-06-04 10:41:14,583 - src.ultibot_ui.widgets.portfolio_widget - WARNING - Error message in portfolio data (real): No se pudieron obtener los balances de Binance: Error de estado HTTP de Binance API: 401 - {"code":-2015,"msg":"Invalid API-key, IP, or permissions for action."}
2025-06-04 10:41:14,591 - src.ultibot_ui.widgets.portfolio_widget - INFO - Worker de actualización finalizado.
2025-06-04 10:41:18,245 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: real
2025-06-04 10:41:18,245 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:41:18,261 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=20, offset=0
2025-06-04 10:41:18,261 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: Iniciando actualización para user 00000000-0000-0000-0000-000000000001, modo real
2025-06-04 10:41:18,261 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:18,262 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot de portafolio para usuario 00000000-0000-0000-0000-000000000001, modo: real
2025-06-04 10:41:18,263 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:18,263 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:18,264 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:18,575 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:18,575 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: Fetching Gemini IA opportunities.
2025-06-04 10:41:18,577 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:18,577 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:18,577 - qasync._QThreadWorker - DEBUG - #8 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:18,578 - src.ultibot_ui.services.api_client - INFO - Obteniendo oportunidades de trading real pendientes de confirmación.
2025-06-04 10:41:18,578 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:18,578 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:18,579 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:18,579 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:18,774 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:18,774 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:18,775 - qasync._QThreadWorker - DEBUG - #4 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:18,775 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:18,776 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:18,829 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E23A0>
2025-06-04 10:41:18,830 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:18,831 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:18,832 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:18,832 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:18,833 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:19,026 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A80D8CC0>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6F930>)]
2025-06-04 10:41:19,027 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268F91ECAE0>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6F1B0>)]
2025-06-04 10:41:19,027 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A80D8CC0>
2025-06-04 10:41:19,029 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268F91ECAE0>
2025-06-04 10:41:19,030 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E15E0>
2025-06-04 10:41:19,030 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E2710>
2025-06-04 10:41:19,030 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:19,031 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:19,031 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:19,032 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:19,032 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:19,032 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:19,033 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:19,033 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:19,034 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:19,034 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 132, 0, <_overlapped.Overlapped object at 0x00000268A7A6FDB0>)]
2025-06-04 10:41:19,034 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:19,035 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:19,035 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 403, b'Forbidden', [(b'date', b'Wed, 04 Jun 2025 14:41:18 GMT'), (b'server', b'uvicorn'), (b'content-length', b'71'), (b'content-type', b'application/json')])
2025-06-04 10:41:19,035 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/opportunities/real-trading-candidates "HTTP/1.1 403 Forbidden"
2025-06-04 10:41:19,036 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:19,037 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:19,037 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:19,038 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:19,038 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:19,039 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:19,039 - src.ultibot_ui.services.api_client - ERROR - HTTP error 403 for GET http://localhost:8000/api/v1/opportunities/real-trading-candidates: {"detail":"El modo de trading real no está activo para este usuario."}
2025-06-04 10:41:19,039 - src.ultibot_ui.windows.dashboard_view - ERROR - Error al verificar oportunidades de trading real pendientes: APIError(status_code=403, message='API request failed with status 403: {"detail":"El modo de trading real no está activo para este usuario."}', response_json={'detail': 'El modo de trading real no está activo para este usuario.'})
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 59, in _make_request
    response.raise_for_status() # Lanza HTTPStatusError para 4xx/5xx
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '403 Forbidden' for url 'http://localhost:8000/api/v1/opportunities/real-trading-candidates'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\dashboard_view.py", line 447, in _check_pending_real_opportunities
    opportunities_data = await self.api_client.get_real_trading_candidates()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 285, in get_real_trading_candidates
    return await self._make_request("GET", "/api/v1/opportunities/real-trading-candidates")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 73, in _make_request
    raise APIError(
    ...<3 lines>...
    )
src.ultibot_ui.services.api_client.APIError: APIError(status_code=403, message='API request failed with status 403: {"detail":"El modo de trading real no está activo para este usuario."}', response_json={'detail': 'El modo de trading real no está activo para este usuario.'})
2025-06-04 10:41:19,378 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:18 GMT'), (b'server', b'uvicorn'), (b'content-length', b'521'), (b'content-type', b'application/json')])
2025-06-04 10:41:19,378 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot/00000000-0000-0000-0000-000000000001?trading_mode=real "HTTP/1.1 200 OK"
2025-06-04 10:41:19,379 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:19,380 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:19,381 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:19,382 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:19,382 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:19,383 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:19,383 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: portfolio_snapshot obtenido: True
2025-06-04 10:41:19,384 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades abiertos para usuario 00000000-0000-0000-0000-000000000001, modo: real
2025-06-04 10:41:19,384 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:19,385 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:19,576 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:19,578 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 124, 0, <_overlapped.Overlapped object at 0x00000268A7A6F930>)]
2025-06-04 10:41:19,579 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:19,580 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:18 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:19,580 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=20&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:41:19,580 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:19,581 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:19,581 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:19,582 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:19,582 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:19,582 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:19,613 - src.ultibot_ui.services.trading_mode_state - INFO - Trading mode changed from real to paper
2025-06-04 10:41:19,615 - src.ultibot_ui.windows.dashboard_view - INFO - Dashboard: Trading mode changed to paper
2025-06-04 10:41:19,615 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: paper
2025-06-04 10:41:19,615 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:41:19,615 - src.ultibot_ui.widgets.trading_mode_selector - DEBUG - External mode change detected: paper
2025-06-04 10:41:19,616 - src.ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Modo de trading cambió a paper
2025-06-04 10:41:19,616 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: Iniciando actualización para user 00000000-0000-0000-0000-000000000001, modo paper
2025-06-04 10:41:19,617 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: paper
2025-06-04 10:41:19,617 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot de portafolio para usuario 00000000-0000-0000-0000-000000000001, modo: paper
2025-06-04 10:41:19,617 - src.ultibot_ui.widgets.order_form_widget - INFO - OrderFormWidget: Modo de trading cambió a paper
2025-06-04 10:41:19,618 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:19,618 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Trading mode changed to paper. Refreshing data.
2025-06-04 10:41:19,619 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:19,619 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Fetching portfolio snapshot.
2025-06-04 10:41:19,620 - src.ultibot_ui.widgets.trading_mode_selector - INFO - Toggle button clicked, new mode: paper
2025-06-04 10:41:19,621 - src.ultibot_ui.windows.dashboard_view - INFO - Cargando datos de desempeño de estrategias para el modo de filtro: Paper Trading (API param: paper)
2025-06-04 10:41:19,622 - src.ultibot_ui.services.api_client - INFO - Obteniendo desempeño de estrategias (usuario implícito por backend) con modo: paper
2025-06-04 10:41:19,622 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:19,623 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:19,829 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB88F1B0>
2025-06-04 10:41:19,830 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:19,830 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:19,831 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:19,831 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:19,831 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:19,832 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:18 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:19,832 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades/00000000-0000-0000-0000-000000000001/open?trading_mode=real "HTTP/1.1 200 OK"
2025-06-04 10:41:19,832 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:19,833 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:19,833 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:19,833 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:19,834 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:19,834 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:19,834 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: open_trades obtenido: True
2025-06-04 10:41:19,835 - src.ultibot_ui.services.api_client - INFO - Obteniendo estado de gestión de capital.
2025-06-04 10:41:19,835 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:19,836 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:19,955 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:19,958 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:19,959 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:19,959 - qasync._QThreadWorker - DEBUG - #9 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:19,959 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:19,960 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:20,090 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:20,208 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8470C0>
2025-06-04 10:41:20,209 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:20,210 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:20,212 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:20,212 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:20,213 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:20,214 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E1EF0>
2025-06-04 10:41:20,214 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:19 GMT'), (b'server', b'uvicorn'), (b'content-length', b'355'), (b'content-type', b'application/json')])
2025-06-04 10:41:20,214 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:20,215 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot/00000000-0000-0000-0000-000000000001?trading_mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:41:20,215 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:20,216 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:20,216 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:20,217 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:20,217 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:20,217 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:20,218 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:20,218 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:20,219 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:20,219 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:20,220 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: portfolio_snapshot obtenido: True
2025-06-04 10:41:20,220 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades abiertos para usuario 00000000-0000-0000-0000-000000000001, modo: paper
2025-06-04 10:41:20,221 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:20,222 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:20,245 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=100, offset=0
2025-06-04 10:41:20,246 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:20,247 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:20,334 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 124, 0, <_overlapped.Overlapped object at 0x00000268A7A6DBF0>)]
2025-06-04 10:41:20,359 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8D3E80>
2025-06-04 10:41:20,360 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:20,360 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:20,361 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:20,361 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:20,361 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:20,362 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:19 GMT'), (b'server', b'uvicorn'), (b'content-length', b'82'), (b'content-type', b'application/json')])
2025-06-04 10:41:20,362 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading/capital-management/status "HTTP/1.1 200 OK"
2025-06-04 10:41:20,363 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:20,364 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:20,364 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:20,364 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:20,365 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:20,365 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:20,365 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: capital_status obtenido: True
2025-06-04 10:41:20,366 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:41:20,366 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: Iniciando actualización para user 00000000-0000-0000-0000-000000000001, modo paper
2025-06-04 10:41:20,367 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot de portafolio para usuario 00000000-0000-0000-0000-000000000001, modo: paper
2025-06-04 10:41:20,367 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:20,368 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:20,571 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:20,614 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:20,615 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - Ignorando datos de modo real, modo actual es paper
2025-06-04 10:41:20,615 - src.ultibot_ui.widgets.portfolio_widget - INFO - Worker de actualización finalizado.
2025-06-04 10:41:20,616 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:20,616 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:20,617 - qasync._QThreadWorker - DEBUG - #1 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:20,617 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:20,618 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:19 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:20,618 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:20,618 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/performance/strategies?mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:41:20,619 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:20,620 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:20,620 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:20,621 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:20,621 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:20,622 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:20,623 - src.ultibot_ui.widgets.strategy_performance_table_view - DEBUG - Actualizando modelo de tabla de desempeño con: []
2025-06-04 10:41:20,623 - src.ultibot_ui.windows.dashboard_view - INFO - Datos de desempeño de estrategias cargados y mostrados: 0 registros.
2025-06-04 10:41:20,686 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:20,832 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268A809B160>
2025-06-04 10:41:20,833 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:20,833 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:20,834 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:20,834 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:20,835 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:20,835 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:19 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:20,836 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades/00000000-0000-0000-0000-000000000001/open?trading_mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:41:20,836 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:20,836 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:20,837 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:20,838 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:20,838 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:20,839 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:20,839 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: open_trades obtenido: True
2025-06-04 10:41:20,840 - src.ultibot_ui.services.api_client - INFO - Obteniendo estado de gestión de capital.
2025-06-04 10:41:20,840 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:20,841 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:20,873 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268A8099540>
2025-06-04 10:41:20,874 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:20,875 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:20,875 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:20,875 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:20,876 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:20,953 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268A809AD00>
2025-06-04 10:41:20,954 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:20,955 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:20,955 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:20,955 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:20,955 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:20,956 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:19 GMT'), (b'server', b'uvicorn'), (b'content-length', b'355'), (b'content-type', b'application/json')])
2025-06-04 10:41:20,956 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot/00000000-0000-0000-0000-000000000001?trading_mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:41:20,957 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:20,957 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:20,958 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:20,959 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:20,959 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:20,960 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:20,960 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: portfolio_snapshot obtenido: True
2025-06-04 10:41:20,961 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades abiertos para usuario 00000000-0000-0000-0000-000000000001, modo: paper
2025-06-04 10:41:20,961 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:20,962 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:20,991 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 124, 0, <_overlapped.Overlapped object at 0x00000268A7A6DBF0>)]
2025-06-04 10:41:20,992 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:20,992 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:19 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:20,993 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=100&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:41:20,993 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:20,994 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:20,994 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:20,994 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:20,995 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:20,995 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:21,080 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:21,203 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:21,309 - src.ultibot_ui.widgets.market_data_widget - INFO - Actualizando datos de tickers para: ['BTC/USDT', 'ETH/USDT']
2025-06-04 10:41:21,310 - src.ultibot_ui.services.api_client - INFO - Obteniendo datos de ticker para usuario 00000000-0000-0000-0000-000000000001 y símbolos: ['BTC/USDT', 'ETH/USDT']
2025-06-04 10:41:21,311 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:21,311 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:21,344 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB90D3B0>
2025-06-04 10:41:21,345 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:21,346 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:21,346 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:21,347 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:21,347 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:21,348 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:20 GMT'), (b'server', b'uvicorn'), (b'content-length', b'82'), (b'content-type', b'application/json')])
2025-06-04 10:41:21,348 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading/capital-management/status "HTTP/1.1 200 OK"
2025-06-04 10:41:21,349 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:21,349 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:21,350 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:21,350 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:21,351 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:21,351 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:21,351 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: capital_status obtenido: True
2025-06-04 10:41:21,456 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268A81123A0>
2025-06-04 10:41:21,457 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:21,458 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:21,458 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:21,459 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:21,459 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:21,460 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:20 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:21,460 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades/00000000-0000-0000-0000-000000000001/open?trading_mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:41:21,461 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:21,461 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:21,461 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:21,462 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:21,462 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:21,462 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:21,463 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: open_trades obtenido: True
2025-06-04 10:41:21,463 - src.ultibot_ui.services.api_client - INFO - Obteniendo estado de gestión de capital.
2025-06-04 10:41:21,463 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:21,464 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:21,524 - src.ultibot_ui.widgets.portfolio_widget - INFO - Worker de actualización finalizado.
2025-06-04 10:41:21,524 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:21,525 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:21,525 - qasync._QThreadWorker - DEBUG - #10 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:21,525 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:21,526 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:21,681 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:21,783 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8127240>, 0, 0, <_overlapped.Overlapped object at 0x00000268AB8996B0>)]
2025-06-04 10:41:21,784 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8127240>
2025-06-04 10:41:21,784 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB90D8B0>
2025-06-04 10:41:21,785 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:21,785 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:21,786 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:21,786 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:21,786 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:21,887 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: paper
2025-06-04 10:41:21,887 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:41:21,909 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: Iniciando actualización para user 00000000-0000-0000-0000-000000000001, modo paper
2025-06-04 10:41:21,909 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot de portafolio para usuario 00000000-0000-0000-0000-000000000001, modo: paper
2025-06-04 10:41:21,910 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:21,911 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:21,942 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB90DC70>
2025-06-04 10:41:21,943 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:21,945 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:21,945 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:21,946 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:21,947 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:21,947 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:20 GMT'), (b'server', b'uvicorn'), (b'content-length', b'82'), (b'content-type', b'application/json')])
2025-06-04 10:41:21,948 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading/capital-management/status "HTTP/1.1 200 OK"
2025-06-04 10:41:21,948 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:21,956 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:21,956 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:21,957 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:21,958 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:21,958 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:21,958 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: capital_status obtenido: True
2025-06-04 10:41:21,962 - src.ultibot_ui.widgets.portfolio_widget - INFO - Worker de actualización finalizado.
2025-06-04 10:41:22,093 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 126, 0, <_overlapped.Overlapped object at 0x00000268AB899230>)]
2025-06-04 10:41:22,094 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:22,095 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:20 GMT'), (b'server', b'uvicorn'), (b'content-length', b'200'), (b'content-type', b'application/json')])
2025-06-04 10:41:22,095 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/market/tickers?user_id=00000000-0000-0000-0000-000000000001&symbols=BTC%2FUSDT%2CETH%2FUSDT "HTTP/1.1 200 OK"
2025-06-04 10:41:22,096 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:22,096 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:22,096 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:22,097 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:22,097 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:22,098 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:22,108 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:22,375 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB896EE0>
2025-06-04 10:41:22,376 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:22,377 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:22,378 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:22,378 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:22,379 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:22,380 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:22 GMT'), (b'server', b'uvicorn'), (b'content-length', b'355'), (b'content-type', b'application/json')])
2025-06-04 10:41:22,381 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot/00000000-0000-0000-0000-000000000001?trading_mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:41:22,381 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:22,381 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:22,382 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:22,382 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:22,383 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:22,383 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:22,384 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: portfolio_snapshot obtenido: True
2025-06-04 10:41:22,384 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades abiertos para usuario 00000000-0000-0000-0000-000000000001, modo: paper
2025-06-04 10:41:22,384 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:22,385 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:22,583 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:22,848 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8D3AC0>
2025-06-04 10:41:22,848 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:22,849 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:22,849 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:22,850 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:22,850 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:22,851 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:22 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:22,852 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades/00000000-0000-0000-0000-000000000001/open?trading_mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:41:22,853 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:22,854 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:22,854 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:22,854 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:22,855 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:22,855 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:22,856 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: open_trades obtenido: True
2025-06-04 10:41:22,857 - src.ultibot_ui.services.api_client - INFO - Obteniendo estado de gestión de capital.
2025-06-04 10:41:22,857 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:22,858 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:23,059 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:23,262 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=20, offset=0
2025-06-04 10:41:23,262 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:23,265 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:23,327 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8476B0>
2025-06-04 10:41:23,328 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:23,328 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:23,329 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:23,329 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:23,330 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:23,330 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:23 GMT'), (b'server', b'uvicorn'), (b'content-length', b'82'), (b'content-type', b'application/json')])
2025-06-04 10:41:23,331 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading/capital-management/status "HTTP/1.1 200 OK"
2025-06-04 10:41:23,331 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:23,332 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:23,332 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:23,333 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:23,333 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:23,334 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:23,334 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: capital_status obtenido: True
2025-06-04 10:41:23,460 - src.ultibot_ui.widgets.portfolio_widget - INFO - Worker de actualización finalizado.
2025-06-04 10:41:23,460 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:23,461 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:23,461 - qasync._QThreadWorker - DEBUG - #2 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:23,462 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:23,463 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:23,716 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268AB8A3D80>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6FF30>)]
2025-06-04 10:41:23,717 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268AB8A3D80>
2025-06-04 10:41:23,718 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8D3480>
2025-06-04 10:41:23,718 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:23,719 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:23,719 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:23,719 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:23,720 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:23,837 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 124, 0, <_overlapped.Overlapped object at 0x00000268A7A6EF70>)]
2025-06-04 10:41:23,838 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:23,838 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:23 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:23,839 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=20&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:41:23,839 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:23,840 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:23,840 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:23,841 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:23,841 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:23,842 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:28,262 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=20, offset=0
2025-06-04 10:41:28,263 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:28,264 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:28,447 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:28,448 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:28,448 - src.ultibot_ui.services.api_client - INFO - Obteniendo oportunidades de trading real pendientes de confirmación.
2025-06-04 10:41:28,448 - qasync._QThreadWorker - DEBUG - #5 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:28,449 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:28,449 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:28,449 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:28,450 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:28,637 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:28,637 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:28,638 - qasync._QThreadWorker - DEBUG - #3 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:28,638 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:28,639 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:28,892 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268AB8A2160>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6F0F0>), (<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268AB8A20C0>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6F270>)]
2025-06-04 10:41:28,893 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268AB8A2160>
2025-06-04 10:41:28,894 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268AB8A20C0>
2025-06-04 10:41:28,895 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E3F70>
2025-06-04 10:41:28,895 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E0230>
2025-06-04 10:41:28,896 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:28,896 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:28,896 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:28,897 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:28,897 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:28,898 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:28,898 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:28,898 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 132, 0, <_overlapped.Overlapped object at 0x00000268A7A6FB70>)]
2025-06-04 10:41:28,898 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:28,899 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:28,899 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:28,900 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:28,901 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 403, b'Forbidden', [(b'date', b'Wed, 04 Jun 2025 14:41:28 GMT'), (b'server', b'uvicorn'), (b'content-length', b'71'), (b'content-type', b'application/json')])
2025-06-04 10:41:28,902 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/opportunities/real-trading-candidates "HTTP/1.1 403 Forbidden"
2025-06-04 10:41:28,902 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:28,903 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:28,903 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:28,903 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:28,904 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:28,904 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:28,904 - src.ultibot_ui.services.api_client - ERROR - HTTP error 403 for GET http://localhost:8000/api/v1/opportunities/real-trading-candidates: {"detail":"El modo de trading real no está activo para este usuario."}
2025-06-04 10:41:28,905 - src.ultibot_ui.windows.dashboard_view - ERROR - Error al verificar oportunidades de trading real pendientes: APIError(status_code=403, message='API request failed with status 403: {"detail":"El modo de trading real no está activo para este usuario."}', response_json={'detail': 'El modo de trading real no está activo para este usuario.'})
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 59, in _make_request
    response.raise_for_status() # Lanza HTTPStatusError para 4xx/5xx
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '403 Forbidden' for url 'http://localhost:8000/api/v1/opportunities/real-trading-candidates'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\dashboard_view.py", line 447, in _check_pending_real_opportunities
    opportunities_data = await self.api_client.get_real_trading_candidates()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 285, in get_real_trading_candidates
    return await self._make_request("GET", "/api/v1/opportunities/real-trading-candidates")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 73, in _make_request
    raise APIError(
    ...<3 lines>...
    )
src.ultibot_ui.services.api_client.APIError: APIError(status_code=403, message='API request failed with status 403: {"detail":"El modo de trading real no está activo para este usuario."}', response_json={'detail': 'El modo de trading real no está activo para este usuario.'})
2025-06-04 10:41:29,018 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 124, 0, <_overlapped.Overlapped object at 0x00000268A7A6F870>)]
2025-06-04 10:41:29,019 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:29,019 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:28 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:29,020 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=20&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:41:29,020 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:29,021 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:29,021 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:29,021 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:29,022 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:29,022 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:33,248 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: paper
2025-06-04 10:41:33,248 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:41:33,250 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: Iniciando actualización para user 00000000-0000-0000-0000-000000000001, modo paper
2025-06-04 10:41:33,250 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot de portafolio para usuario 00000000-0000-0000-0000-000000000001, modo: paper
2025-06-04 10:41:33,251 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:33,252 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:33,263 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=20, offset=0
2025-06-04 10:41:33,264 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:33,264 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:33,540 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:33,554 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:33,555 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:33,555 - qasync._QThreadWorker - DEBUG - #7 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:33,556 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:33,556 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:33,808 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E1630>
2025-06-04 10:41:33,809 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:33,810 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:33,811 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:33,811 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:33,812 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:33,813 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:33 GMT'), (b'server', b'uvicorn'), (b'content-length', b'355'), (b'content-type', b'application/json')])
2025-06-04 10:41:33,813 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot/00000000-0000-0000-0000-000000000001?trading_mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:41:33,814 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:33,814 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:33,814 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:33,815 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:33,815 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:33,816 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:33,816 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: portfolio_snapshot obtenido: True
2025-06-04 10:41:33,817 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades abiertos para usuario 00000000-0000-0000-0000-000000000001, modo: paper
2025-06-04 10:41:33,817 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:33,818 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8126C00>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6DFB0>)]
2025-06-04 10:41:33,818 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:33,819 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8126C00>
2025-06-04 10:41:33,820 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E1B30>
2025-06-04 10:41:33,820 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:33,821 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:33,821 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:33,821 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:33,822 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:33,943 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 124, 0, <_overlapped.Overlapped object at 0x00000268A7A6EDF0>)]
2025-06-04 10:41:33,943 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:33,944 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:33 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:33,945 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=20&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:41:33,945 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:33,946 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:33,946 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:33,947 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:33,947 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:33,948 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:34,006 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:34,265 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E0140>
2025-06-04 10:41:34,266 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:34,267 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:34,267 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:34,268 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:34,268 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:34,269 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:34 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:34,269 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades/00000000-0000-0000-0000-000000000001/open?trading_mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:41:34,270 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:34,270 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:34,270 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:34,271 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:34,271 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:34,272 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:34,272 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: open_trades obtenido: True
2025-06-04 10:41:34,273 - src.ultibot_ui.services.api_client - INFO - Obteniendo estado de gestión de capital.
2025-06-04 10:41:34,273 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:34,274 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:34,465 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:34,719 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB90C4B0>
2025-06-04 10:41:34,720 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:34,721 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:34,721 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:34,721 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:34,722 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:34,722 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:34 GMT'), (b'server', b'uvicorn'), (b'content-length', b'82'), (b'content-type', b'application/json')])
2025-06-04 10:41:34,723 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading/capital-management/status "HTTP/1.1 200 OK"
2025-06-04 10:41:34,723 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:34,724 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:34,724 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:34,725 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:34,725 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:34,725 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:34,726 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: capital_status obtenido: True
2025-06-04 10:41:34,729 - src.ultibot_ui.widgets.portfolio_widget - INFO - Worker de actualización finalizado.
2025-06-04 10:41:38,265 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=20, offset=0
2025-06-04 10:41:38,265 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:38,266 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:38,454 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:38,455 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:38,455 - src.ultibot_ui.services.api_client - INFO - Obteniendo oportunidades de trading real pendientes de confirmación.
2025-06-04 10:41:38,455 - qasync._QThreadWorker - DEBUG - #6 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:38,456 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:38,456 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:38,457 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:38,457 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:38,640 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:38,640 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:38,641 - qasync._QThreadWorker - DEBUG - #8 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:38,641 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:38,643 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:38,892 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8125760>, 0, 0, <_overlapped.Overlapped object at 0x00000268AB899230>)]
2025-06-04 10:41:38,893 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8125760>
2025-06-04 10:41:38,895 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8125760>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6ED30>)]
2025-06-04 10:41:38,895 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E1860>
2025-06-04 10:41:38,896 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8125760>
2025-06-04 10:41:38,896 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:38,897 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:38,898 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:38,898 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:38,898 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:38,899 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB90CB90>
2025-06-04 10:41:38,900 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:38,900 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:38,901 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:38,901 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:38,901 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 132, 0, <_overlapped.Overlapped object at 0x00000268A7A6ED30>)]
2025-06-04 10:41:38,901 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:38,902 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:38,903 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 403, b'Forbidden', [(b'date', b'Wed, 04 Jun 2025 14:41:38 GMT'), (b'server', b'uvicorn'), (b'content-length', b'71'), (b'content-type', b'application/json')])
2025-06-04 10:41:38,903 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/opportunities/real-trading-candidates "HTTP/1.1 403 Forbidden"
2025-06-04 10:41:38,903 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:38,904 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:38,904 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:38,905 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:38,905 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:38,906 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:38,906 - src.ultibot_ui.services.api_client - ERROR - HTTP error 403 for GET http://localhost:8000/api/v1/opportunities/real-trading-candidates: {"detail":"El modo de trading real no está activo para este usuario."}
2025-06-04 10:41:38,906 - src.ultibot_ui.windows.dashboard_view - ERROR - Error al verificar oportunidades de trading real pendientes: APIError(status_code=403, message='API request failed with status 403: {"detail":"El modo de trading real no está activo para este usuario."}', response_json={'detail': 'El modo de trading real no está activo para este usuario.'})
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 59, in _make_request
    response.raise_for_status() # Lanza HTTPStatusError para 4xx/5xx
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '403 Forbidden' for url 'http://localhost:8000/api/v1/opportunities/real-trading-candidates'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\dashboard_view.py", line 447, in _check_pending_real_opportunities
    opportunities_data = await self.api_client.get_real_trading_candidates()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 285, in get_real_trading_candidates
    return await self._make_request("GET", "/api/v1/opportunities/real-trading-candidates")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 73, in _make_request
    raise APIError(
    ...<3 lines>...
    )
src.ultibot_ui.services.api_client.APIError: APIError(status_code=403, message='API request failed with status 403: {"detail":"El modo de trading real no está activo para este usuario."}', response_json={'detail': 'El modo de trading real no está activo para este usuario.'})
2025-06-04 10:41:39,015 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 124, 0, <_overlapped.Overlapped object at 0x00000268AB8995F0>)]
2025-06-04 10:41:39,016 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:39,017 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:38 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:39,017 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=20&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:41:39,017 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:39,018 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:39,018 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:39,019 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:39,019 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:39,019 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:43,266 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=20, offset=0
2025-06-04 10:41:43,267 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:43,269 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:43,453 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:43,454 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:43,455 - qasync._QThreadWorker - DEBUG - #4 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:43,455 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:43,456 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:43,709 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E2210>
2025-06-04 10:41:43,709 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:43,710 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:43,710 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:43,711 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:43,711 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:43,841 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 124, 0, <_overlapped.Overlapped object at 0x00000268A7A6E070>)]
2025-06-04 10:41:43,842 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:43,844 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:42 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:43,844 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=20&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:41:43,845 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:43,845 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:43,846 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:43,846 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:43,847 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:43,847 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:45,549 - src.ultibot_ui.services.api_client - INFO - Actualizando configuración de usuario: {'id': '86e5f6c7-02a0-475b-b277-1fccbf23aa56', 'user_id': '00000000-0000-0000-0000-000000000001', 'enableTelegramNotifications': True, 'defaultPaperTradingCapital': 10000.0, 'paperTradingActive': True, 'realTradingSettings': {'real_trading_mode_active': False, 'real_trades_executed_count': 0, 'max_real_trades': 5, 'daily_capital_risked_usd': 0.0, 'last_daily_reset': '2025-06-04T14:40:47.466980'}, 'selectedTheme': 'dark', 'createdAt': '2025-06-04T14:40:47.466961', 'updatedAt': '2025-06-04T14:40:47.466963'}
2025-06-04 10:41:45,550 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:45,551 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:45,732 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:45,733 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:45,733 - qasync._QThreadWorker - DEBUG - #9 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:45,734 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:45,736 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:45,987 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268AB8F4EA0>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6E730>)]
2025-06-04 10:41:45,988 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268AB8F4EA0>
2025-06-04 10:41:45,989 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB895C70>
2025-06-04 10:41:45,990 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'PATCH']>
2025-06-04 10:41:45,990 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:45,990 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'PATCH']>
2025-06-04 10:41:45,991 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:45,991 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'PATCH']>
2025-06-04 10:41:46,533 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 145, 0, <_overlapped.Overlapped object at 0x00000268AB8995F0>)]
2025-06-04 10:41:46,534 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:46,535 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 500, b'Internal Server Error', [(b'date', b'Wed, 04 Jun 2025 14:41:45 GMT'), (b'server', b'uvicorn'), (b'content-length', b'143'), (b'content-type', b'application/json')])
2025-06-04 10:41:46,535 - httpx - INFO - HTTP Request: PATCH http://localhost:8000/api/v1/config "HTTP/1.1 500 Internal Server Error"
2025-06-04 10:41:46,536 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'PATCH']>
2025-06-04 10:41:46,537 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:46,537 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:46,537 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:46,538 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:46,538 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:46,539 - src.ultibot_ui.services.api_client - ERROR - HTTP error 500 for PATCH http://localhost:8000/api/v1/config: {"detail":"Error al guardar la configuraciรณn: No se pudo guardar la configuración para el usuario 00000000-0000-0000-0000-000000000001."}
2025-06-04 10:41:46,541 - src.ultibot_ui.windows.settings_view - ERROR - Error al guardar la configuración general desde la UI de Settings: APIError(status_code=500, message='API request failed with status 500: {"detail":"Error al guardar la configuraciรณn: No se pudo guardar la configuración para el usuario 00000000-0000-0000-0000-000000000001."}', response_json={'detail': 'Error al guardar la configuraciรณn: No se pudo guardar la configuración para el usuario 00000000-0000-0000-0000-000000000001.'})
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 59, in _make_request
    response.raise_for_status() # Lanza HTTPStatusError para 4xx/5xx
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Server error '500 Internal Server Error' for url 'http://localhost:8000/api/v1/config'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\settings_view.py", line 169, in _save_config
    await self.api_client.update_user_configuration(updated_config_model.model_dump(mode='json', by_alias=True, exclude_none=True))
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 245, in update_user_configuration
    return await self._make_request("PATCH", "/api/v1/config", json=config_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 73, in _make_request
    raise APIError(
    ...<3 lines>...
    )
src.ultibot_ui.services.api_client.APIError: APIError(status_code=500, message='API request failed with status 500: {"detail":"Error al guardar la configuraciรณn: No se pudo guardar la configuración para el usuario 00000000-0000-0000-0000-000000000001."}', response_json={'detail': 'Error al guardar la configuraciรณn: No se pudo guardar la configuración para el usuario 00000000-0000-0000-0000-000000000001.'})
2025-06-04 10:41:48,252 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: paper
2025-06-04 10:41:48,253 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:41:48,255 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: Iniciando actualización para user 00000000-0000-0000-0000-000000000001, modo paper
2025-06-04 10:41:48,255 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot de portafolio para usuario 00000000-0000-0000-0000-000000000001, modo: paper
2025-06-04 10:41:48,256 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:48,257 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:48,266 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=20, offset=0
2025-06-04 10:41:48,267 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:48,268 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:48,544 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:48,555 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: Fetching Gemini IA opportunities.
2025-06-04 10:41:48,556 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:48,557 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:48,557 - src.ultibot_ui.services.api_client - INFO - Obteniendo oportunidades de trading real pendientes de confirmación.
2025-06-04 10:41:48,557 - qasync._QThreadWorker - DEBUG - #1 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:48,557 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:48,558 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:48,558 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:48,559 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:48,740 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:48,740 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:48,741 - qasync._QThreadWorker - DEBUG - #10 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:48,741 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:48,742 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:48,811 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268A80D0C80>
2025-06-04 10:41:48,812 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:48,813 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:48,814 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:48,814 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:48,815 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:48,816 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:48 GMT'), (b'server', b'uvicorn'), (b'content-length', b'355'), (b'content-type', b'application/json')])
2025-06-04 10:41:48,816 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot/00000000-0000-0000-0000-000000000001?trading_mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:41:48,817 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:48,817 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:48,818 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:48,818 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:48,819 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:48,819 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:48,820 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: portfolio_snapshot obtenido: True
2025-06-04 10:41:48,820 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades abiertos para usuario 00000000-0000-0000-0000-000000000001, modo: paper
2025-06-04 10:41:48,821 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:48,822 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:48,997 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8125BC0>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6EDF0>)]
2025-06-04 10:41:48,999 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8125BC0>
2025-06-04 10:41:48,999 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A806E5C0>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6E1F0>)]
2025-06-04 10:41:49,000 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E3250>
2025-06-04 10:41:49,000 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A806E5C0>
2025-06-04 10:41:49,001 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:49,001 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:49,002 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:49,002 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:49,002 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:49,003 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture cancelled>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8125800>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6F270>)]
2025-06-04 10:41:49,003 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E1B80>
2025-06-04 10:41:49,004 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A8125800>
2025-06-04 10:41:49,004 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
  File "C:\Users\zamor\AppData\Local\Programs\Python\Python313\Lib\asyncio\windows_events.py", line 600, in finish_connect
    ov.getresult()
    ~~~~~~~~~~~~^^
OSError: [WinError 995] La operación de E/S se anuló por una salida de subproceso o por una solicitud de aplicación
2025-06-04 10:41:49,005 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:49,006 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:49,006 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:49,007 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 132, 0, <_overlapped.Overlapped object at 0x00000268A7A6EBB0>)]
2025-06-04 10:41:49,007 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:49,008 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:49,008 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:49,008 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:49,009 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 403, b'Forbidden', [(b'date', b'Wed, 04 Jun 2025 14:41:48 GMT'), (b'server', b'uvicorn'), (b'content-length', b'71'), (b'content-type', b'application/json')])
2025-06-04 10:41:49,009 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/opportunities/real-trading-candidates "HTTP/1.1 403 Forbidden"
2025-06-04 10:41:49,010 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:49,010 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:49,011 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:49,011 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:49,011 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:49,012 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:49,012 - src.ultibot_ui.services.api_client - ERROR - HTTP error 403 for GET http://localhost:8000/api/v1/opportunities/real-trading-candidates: {"detail":"El modo de trading real no está activo para este usuario."}
2025-06-04 10:41:49,012 - src.ultibot_ui.windows.dashboard_view - ERROR - Error al verificar oportunidades de trading real pendientes: APIError(status_code=403, message='API request failed with status 403: {"detail":"El modo de trading real no está activo para este usuario."}', response_json={'detail': 'El modo de trading real no está activo para este usuario.'})
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 59, in _make_request
    response.raise_for_status() # Lanza HTTPStatusError para 4xx/5xx
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '403 Forbidden' for url 'http://localhost:8000/api/v1/opportunities/real-trading-candidates'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\dashboard_view.py", line 447, in _check_pending_real_opportunities
    opportunities_data = await self.api_client.get_real_trading_candidates()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 285, in get_real_trading_candidates
    return await self._make_request("GET", "/api/v1/opportunities/real-trading-candidates")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 73, in _make_request
    raise APIError(
    ...<3 lines>...
    )
src.ultibot_ui.services.api_client.APIError: APIError(status_code=403, message='API request failed with status 403: {"detail":"El modo de trading real no está activo para este usuario."}', response_json={'detail': 'El modo de trading real no está activo para este usuario.'})
2025-06-04 10:41:49,253 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 124, 0, <_overlapped.Overlapped object at 0x00000268A7A6EDF0>)]
2025-06-04 10:41:49,254 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:49,255 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:48 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:49,255 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=20&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:41:49,255 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:49,256 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:49,256 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:49,257 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:49,257 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:49,257 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:49,265 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB88F930>
2025-06-04 10:41:49,266 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:49,266 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:49,267 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:49,267 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:49,267 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:49,268 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:48 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:49,268 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades/00000000-0000-0000-0000-000000000001/open?trading_mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:41:49,269 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:49,269 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:49,270 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:49,270 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:49,271 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:49,271 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:49,271 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: open_trades obtenido: True
2025-06-04 10:41:49,272 - src.ultibot_ui.services.api_client - INFO - Obteniendo estado de gestión de capital.
2025-06-04 10:41:49,273 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:49,273 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:49,458 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:49,716 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E3AC0>
2025-06-04 10:41:49,717 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:49,718 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:49,719 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:49,720 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:49,720 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:49,721 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:49 GMT'), (b'server', b'uvicorn'), (b'content-length', b'82'), (b'content-type', b'application/json')])
2025-06-04 10:41:49,722 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading/capital-management/status "HTTP/1.1 200 OK"
2025-06-04 10:41:49,722 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:49,722 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:49,723 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:49,723 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:49,723 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:49,724 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:49,724 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: capital_status obtenido: True
2025-06-04 10:41:49,727 - src.ultibot_ui.widgets.portfolio_widget - INFO - Worker de actualización finalizado.
2025-06-04 10:41:50,251 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=100, offset=0
2025-06-04 10:41:50,252 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:41:50,254 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:41:50,438 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:41:50,439 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:41:50,439 - qasync._QThreadWorker - DEBUG - #2 got callback <function getaddrinfo at 0x00000268F616CEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:41:50,440 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:41:50,441 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:41:50,696 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A806D9E0>, 0, 0, <_overlapped.Overlapped object at 0x00000268A7A6C4B0>)]
2025-06-04 10:41:50,697 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000268A806D9E0>
2025-06-04 10:41:50,698 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x00000268AB8E28F0>
2025-06-04 10:41:50,699 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:41:50,700 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:41:50,700 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:41:50,700 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:41:50,701 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:41:50,834 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x00000268F8016C00>, 124, 0, <_overlapped.Overlapped object at 0x00000268A7A6EBB0>)]
2025-06-04 10:41:50,835 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x00000268F8016C00>
2025-06-04 10:41:50,836 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:41:50 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:41:50,836 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=100&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:41:50,836 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:41:50,837 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:41:50,837 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:41:50,838 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:41:50,838 - httpcore.connection - DEBUG - close.started
2025-06-04 10:41:50,839 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:41:51,161 - src.ultibot_ui.windows.main_window - INFO - [INFO] MainWindow: closeEvent triggered.
2025-06-04 10:41:51,163 - src.ultibot_ui.widgets.market_data_widget - INFO - Limpiando MarketDataWidget...
2025-06-04 10:41:51,163 - src.ultibot_ui.widgets.market_data_widget - INFO - MarketDataWidget limpiado.
2025-06-04 10:41:51,164 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizaciones del portafolio detenidas.
2025-06-04 10:41:51,165 - src.ultibot_ui.windows.history_view - INFO - HistoryView cleanup completado
2025-06-04 10:41:51,166 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: Cleaning up...
2025-06-04 10:41:51,168 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: Cleanup finished.
2025-06-04 10:41:51,168 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleaning up...
2025-06-04 10:41:51,170 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleanup finished.
2025-06-04 10:41:51,192 - qasync._windows._EventPoller - DEBUG - Stopping worker thread...
2025-06-04 10:41:51,203 - qasync._windows._EventWorker - DEBUG - Exiting thread
2025-06-04 10:43:52,564 - __main__ - INFO - Logging configurado con RotatingFileHandler para escribir en logs/frontend.log (max ~100KB).
2025-06-04 10:43:52,576 - asyncio - DEBUG - Using proactor: _IocpProactor
2025-06-04 10:43:52,580 - qasync._windows._EventPoller - DEBUG - Starting (proactor: <_IocpProactor overlapped#=0 result#=0>)...
2025-06-04 10:43:52,580 - qasync._windows._EventWorker - DEBUG - Thread started
2025-06-04 10:43:52,581 - qasync._windows._EventPoller - DEBUG - Stopping worker thread...
2025-06-04 10:43:52,599 - qasync._windows._EventWorker - DEBUG - Exiting thread
2025-06-04 10:43:52,600 - qasync._windows._EventPoller - DEBUG - Starting (proactor: <_IocpProactor overlapped#=0 result#=0>)...
2025-06-04 10:43:52,601 - qasync._windows._EventWorker - DEBUG - Thread started
2025-06-04 10:43:52,602 - __main__ - INFO - Starting to fetch user configuration for 00000000-0000-0000-0000-000000000001 via API worker...
2025-06-04 10:43:52,603 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:43:52,604 - src.ultibot_ui.services.api_client - INFO - Obteniendo configuración de usuario.
2025-06-04 10:43:52,605 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:43:52,606 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:43:52,807 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:43:54,102 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4B9CF2270>
2025-06-04 10:43:54,103 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:43:54,104 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:43:54,104 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:43:54,104 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:43:54,105 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:43:54,110 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:43:53 GMT'), (b'server', b'uvicorn'), (b'content-length', b'1001'), (b'content-type', b'application/json')])
2025-06-04 10:43:54,111 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/config "HTTP/1.1 200 OK"
2025-06-04 10:43:54,111 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:43:54,112 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:43:54,112 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:43:54,113 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:43:54,114 - httpcore.connection - DEBUG - close.started
2025-06-04 10:43:54,114 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:43:54,116 - qasync._windows._EventPoller - DEBUG - Stopping worker thread...
2025-06-04 10:43:54,117 - qasync._windows._EventWorker - DEBUG - Exiting thread
2025-06-04 10:43:54,119 - qasync._windows._EventPoller - DEBUG - Starting (proactor: <_IocpProactor overlapped#=0 result#=0>)...
2025-06-04 10:43:54,119 - qasync._windows._EventWorker - DEBUG - Thread started
2025-06-04 10:43:54,120 - qasync._windows._EventPoller - DEBUG - Stopping worker thread...
2025-06-04 10:43:54,133 - qasync._windows._EventWorker - DEBUG - Exiting thread
2025-06-04 10:43:54,492 - src.ultibot_ui.services.trading_mode_state - INFO - TradingModeStateManager initialized with mode: paper
2025-06-04 10:43:54,492 - src.ultibot_ui.services.trading_mode_state - INFO - Created global trading mode state manager
2025-06-04 10:43:54,493 - src.ultibot_ui.widgets.trading_mode_selector - INFO - TradingModeSelector initialized with style: toggle
2025-06-04 10:43:54,510 - src.ultibot_ui.widgets.portfolio_widget - INFO - Timer de actualización del portafolio iniciado.
2025-06-04 10:43:54,518 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: paper
2025-06-04 10:43:54,519 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:43:54,527 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: Iniciando actualización para user 00000000-0000-0000-0000-000000000001, modo paper
2025-06-04 10:43:54,528 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot de portafolio para usuario 00000000-0000-0000-0000-000000000001, modo: paper
2025-06-04 10:43:54,528 - src.ultibot_ui.widgets.order_form_widget - INFO - OrderFormWidget initialized
2025-06-04 10:43:54,529 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:43:54,541 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:43:54,554 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:43:54,555 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:43:54,555 - src.ultibot_ui.windows.history_view - INFO - HistoryView inicializada para usuario 00000000-0000-0000-0000-000000000001
2025-06-04 10:43:54,556 - src.ultibot_ui.services.api_client - INFO - Obteniendo métricas de rendimiento de paper trading con filtros: {'start_date': '2025-05-05T00:00:00', 'end_date': '2025-06-04T23:59:59.999999'}
2025-06-04 10:43:54,556 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de paper trading para user 00000000-0000-0000-0000-000000000001 con filtros: {'trading_mode': 'paper', 'limit': 500, 'offset': 0, 'date_from': '2025-05-05', 'date_to': '2025-06-04'}
2025-06-04 10:43:54,559 - src.ultibot_ui.windows.main_window - INFO - Central widget y vistas configuradas.
2025-06-04 10:43:54,559 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:43:54,560 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:43:54,560 - src.ultibot_ui.windows.main_window - INFO - MainWindow inicializada y visible.
2025-06-04 10:43:54,561 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:43:54,561 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:43:54,702 - qdarkstyle - DEBUG - Reading QSS file in: :qdarkstyle\dark\darkstyle.qss
2025-06-04 10:43:54,703 - qdarkstyle - INFO - QSS file successfully loaded.
2025-06-04 10:43:54,704 - qdarkstyle - DEBUG - Checking patches for being applied.
2025-06-04 10:43:54,734 - qdarkstyle - INFO - Found version patches to be applied.
2025-06-04 10:43:54,735 - qdarkstyle - INFO - Found application patches to be applied.
2025-06-04 10:43:55,092 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:43:55,092 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:43:55,111 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:43:55,117 - __main__ - INFO - Applied dark theme to all top-level widgets.
2025-06-04 10:43:55,121 - qasync._windows._EventPoller - DEBUG - Starting (proactor: <_IocpProactor overlapped#=0 result#=0>)...
2025-06-04 10:43:55,122 - qasync._windows._EventWorker - DEBUG - Thread started
2025-06-04 10:43:55,138 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: Fetching Gemini IA opportunities.
2025-06-04 10:43:55,143 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Fetching portfolio snapshot.
2025-06-04 10:43:55,144 - root - INFO - Programando carga inicial de estados de trading con ApiWorker.
2025-06-04 10:43:55,145 - root - INFO - Iniciando ApiWorker para _load_initial_paper_trading_status.
2025-06-04 10:43:55,146 - root - INFO - Iniciando ApiWorker para _load_initial_real_trading_status.
2025-06-04 10:43:55,148 - src.ultibot_ui.services.api_client - INFO - Obteniendo datos de velas para BTCUSDT (1h) con parámetros: {'user_id': '00000000-0000-0000-0000-000000000001', 'symbol': 'BTCUSDT', 'interval': '1h', 'limit': 200}
2025-06-04 10:43:55,148 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:43:55,149 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:43:55,345 - src.ultibot_ui.windows.dashboard_view - INFO - Iniciando carga secuencial de componentes asíncronos...
2025-06-04 10:43:55,346 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=100, offset=0
2025-06-04 10:43:55,347 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:43:55,347 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:43:55,385 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BA33B4D0>
2025-06-04 10:43:55,386 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BA33B890>
2025-06-04 10:43:55,386 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BA33FA80>
2025-06-04 10:43:55,388 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:43:55,387 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:43:55,386 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:43:55,388 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:43:55,389 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:43:55,389 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:43:55,390 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:43:55,390 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:43:55,391 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:43:55,391 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:43:55,391 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:43:55,392 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:43:55,392 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:43:55,392 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:43:55,393 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:43:55,393 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:43:54 GMT'), (b'server', b'uvicorn'), (b'content-length', b'355'), (b'content-type', b'application/json')])
2025-06-04 10:43:55,394 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:43:54 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:43:55,394 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot/00000000-0000-0000-0000-000000000001?trading_mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:43:55,395 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades/00000000-0000-0000-0000-000000000001?trading_mode=paper&limit=500&offset=0&date_from=2025-05-05&date_to=2025-06-04 "HTTP/1.1 200 OK"
2025-06-04 10:43:55,395 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:43:55,396 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:43:55,396 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:43:55,396 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:43:55,397 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:43:55,397 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:43:55,397 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:43:55,398 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:43:55,398 - httpcore.connection - DEBUG - close.started
2025-06-04 10:43:55,398 - httpcore.connection - DEBUG - close.started
2025-06-04 10:43:55,399 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:43:55,399 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:43:55,399 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: portfolio_snapshot obtenido: True
2025-06-04 10:43:55,400 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades abiertos para usuario 00000000-0000-0000-0000-000000000001, modo: paper
2025-06-04 10:43:55,401 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:43:55,401 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:43:55,512 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:43:54 GMT'), (b'server', b'uvicorn'), (b'content-length', b'309'), (b'content-type', b'application/json')])
2025-06-04 10:43:55,512 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/paper/performance_summary?start_date=2025-05-05T00%3A00%3A00&end_date=2025-06-04T23%3A59%3A59.999999 "HTTP/1.1 200 OK"
2025-06-04 10:43:55,513 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:43:55,513 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:43:55,514 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:43:55,514 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:43:55,514 - httpcore.connection - DEBUG - close.started
2025-06-04 10:43:55,515 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:43:55,675 - src.ultibot_ui.services.api_client - INFO - Obteniendo configuración de usuario.
2025-06-04 10:43:55,676 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:43:55,677 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:43:55,695 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:43:55,876 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:43:55,877 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:43:55,878 - qasync._QThreadWorker - DEBUG - #4 got callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:43:55,878 - src.ultibot_ui.widgets.paper_trading_report_widget - INFO - Trades cargados exitosamente: 0 trades
2025-06-04 10:43:55,878 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:43:55,879 - src.ultibot_ui.widgets.paper_trading_report_widget - INFO - Métricas de rendimiento cargadas exitosamente
2025-06-04 10:43:55,880 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:43:55,880 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:43:55,880 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:43:55,881 - qasync._QThreadWorker - DEBUG - #2 got callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:43:55,881 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:43:55,881 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:43:55,882 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:43:55,882 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:43:55,882 - qasync._QThreadWorker - DEBUG - #7 got callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:43:55,883 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:43:55,884 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:43:55,953 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BA33D5B0>
2025-06-04 10:43:55,954 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:43:55,955 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:43:55,955 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:43:55,956 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:43:55,956 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:43:55,957 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:43:55 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:43:55,957 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades/00000000-0000-0000-0000-000000000001/open?trading_mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:43:55,958 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:43:55,958 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:43:55,958 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:43:55,959 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:43:55,959 - httpcore.connection - DEBUG - close.started
2025-06-04 10:43:55,959 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:43:55,960 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: open_trades obtenido: True
2025-06-04 10:43:55,960 - src.ultibot_ui.services.api_client - INFO - Obteniendo estado de gestión de capital.
2025-06-04 10:43:55,960 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:43:55,961 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:43:56,152 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000001A48838B600>, 0, 0, <_overlapped.Overlapped object at 0x000001A4B9CBE8B0>)]
2025-06-04 10:43:56,153 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA376700>, 0, 0, <_overlapped.Overlapped object at 0x000001A4B9CBE7F0>), (<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA375C60>, 0, 0, <_overlapped.Overlapped object at 0x000001A4B9CBE970>)]
2025-06-04 10:43:56,154 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000001A48838B600>
2025-06-04 10:43:56,154 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:43:56,155 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA376700>
2025-06-04 10:43:56,156 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA375C60>
2025-06-04 10:43:56,157 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture cancelled>, <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA376200>, 0, 0, <_overlapped.Overlapped object at 0x000001A4B9CBDD70>)]
2025-06-04 10:43:56,157 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BA390CB0>
2025-06-04 10:43:56,158 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BA34A360>
2025-06-04 10:43:56,159 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BDA805A0>
2025-06-04 10:43:56,160 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA376200>
2025-06-04 10:43:56,160 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
  File "C:\Users\zamor\AppData\Local\Programs\Python\Python313\Lib\asyncio\windows_events.py", line 600, in finish_connect
    ov.getresult()
    ~~~~~~~~~~~~^^
OSError: [WinError 995] La operación de E/S se anuló por una salida de subproceso o por una solicitud de aplicación
2025-06-04 10:43:56,161 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:43:56,162 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:43:56,162 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:43:56,163 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:43:56,163 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:43:56,163 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:43:56,164 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:43:56,164 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:43:56,164 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x000001A48A296C00>, 127, 0, <_overlapped.Overlapped object at 0x000001A4B9CBEAF0>)]
2025-06-04 10:43:56,165 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:43:56,165 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:43:56,165 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:43:56,166 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:43:56,166 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:43:56,167 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:43:56,167 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:43:56,167 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x000001A48A296C00>
2025-06-04 10:43:56,168 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:43:55 GMT'), (b'server', b'uvicorn'), (b'content-length', b'1001'), (b'content-type', b'application/json')])
2025-06-04 10:43:56,168 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/config "HTTP/1.1 200 OK"
2025-06-04 10:43:56,169 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:43:56,169 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:43:56,170 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:43:56,170 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:43:56,171 - httpcore.connection - DEBUG - close.started
2025-06-04 10:43:56,171 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:43:56,172 - src.ultibot_ui.windows.settings_view - INFO - Configuración de usuario general cargada en la UI de Settings.
2025-06-04 10:43:56,172 - src.ultibot_ui.services.api_client - INFO - Obteniendo estado del modo de operativa real limitada.
2025-06-04 10:43:56,172 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:43:56,173 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:43:56,294 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x000001A48A296C00>, 124, 0, <_overlapped.Overlapped object at 0x000001A4B9CBEBB0>)]
2025-06-04 10:43:56,372 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x000001A48A296C00>
2025-06-04 10:43:56,373 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:43:56,373 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:43:56,374 - qasync._QThreadWorker - DEBUG - #1 got callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:43:56,374 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:43:56,375 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:43:55 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:43:56,375 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:43:56,375 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=100&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:43:56,376 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:43:56,376 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:43:56,377 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:43:56,377 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:43:56,378 - httpcore.connection - DEBUG - close.started
2025-06-04 10:43:56,379 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:43:56,379 - src.ultibot_ui.windows.dashboard_view - INFO - Notificaciones cargadas y suscripción iniciada.
2025-06-04 10:43:56,379 - src.ultibot_ui.windows.dashboard_view - INFO - Cargando datos de desempeño de estrategias para el modo de filtro: Todos (API param: None)
2025-06-04 10:43:56,380 - src.ultibot_ui.services.api_client - INFO - Obteniendo desempeño de estrategias (usuario implícito por backend) con modo: todos
2025-06-04 10:43:56,380 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:43:56,381 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:43:56,411 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BA385950>
2025-06-04 10:43:56,412 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:43:56,412 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:43:56,412 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:43:56,413 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:43:56,413 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:43:56,413 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:43:55 GMT'), (b'server', b'uvicorn'), (b'content-length', b'82'), (b'content-type', b'application/json')])
2025-06-04 10:43:56,414 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading/capital-management/status "HTTP/1.1 200 OK"
2025-06-04 10:43:56,414 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:43:56,415 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:43:56,415 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:43:56,415 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:43:56,416 - httpcore.connection - DEBUG - close.started
2025-06-04 10:43:56,416 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:43:56,416 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: capital_status obtenido: True
2025-06-04 10:43:56,581 - src.ultibot_ui.widgets.portfolio_widget - INFO - Worker de actualización finalizado.
2025-06-04 10:43:56,582 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:43:56,582 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:43:56,583 - qasync._QThreadWorker - DEBUG - #5 got callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:43:56,583 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:43:56,583 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:43:56,630 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BA387850>
2025-06-04 10:43:56,630 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:43:56,631 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:43:56,632 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:43:56,632 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:43:56,632 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:43:56,633 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x000001A48A296C00>, 125, 0, <_overlapped.Overlapped object at 0x000001A4B9CBEAF0>)]
2025-06-04 10:43:56,633 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x000001A48A296C00>
2025-06-04 10:43:56,634 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:43:55 GMT'), (b'server', b'uvicorn'), (b'content-length', b'46'), (b'content-type', b'application/json')])
2025-06-04 10:43:56,634 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/config/real-trading-mode/status "HTTP/1.1 200 OK"
2025-06-04 10:43:56,634 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:43:56,635 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:43:56,635 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:43:56,636 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:43:56,637 - httpcore.connection - DEBUG - close.started
2025-06-04 10:43:56,638 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:43:56,638 - src.ultibot_ui.windows.settings_view - INFO - Estado de operativa real cargado: {'isActive': False, 'executedCount': 0, 'limit': 5}
2025-06-04 10:43:56,759 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x000001A48A296C00>, 128, 0, <_overlapped.Overlapped object at 0x000001A4B9CBEC70>)]
2025-06-04 10:43:56,760 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x000001A48A296C00>
2025-06-04 10:43:56,761 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:43:55 GMT'), (b'server', b'uvicorn'), (b'content-length', b'58558'), (b'content-type', b'application/json')])
2025-06-04 10:43:56,761 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/market/klines?user_id=00000000-0000-0000-0000-000000000001&symbol=BTCUSDT&interval=1h&limit=200 "HTTP/1.1 200 OK"
2025-06-04 10:43:56,761 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:43:56,762 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:43:56,762 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:43:56,763 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:43:56,764 - httpcore.connection - DEBUG - close.started
2025-06-04 10:43:56,764 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:43:56,847 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA377740>, 0, 0, <_overlapped.Overlapped object at 0x000001A4B9CBD170>)]
2025-06-04 10:43:56,848 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA377740>
2025-06-04 10:43:56,849 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BDAB0050>
2025-06-04 10:43:56,849 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:43:56,850 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:43:56,850 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:43:56,851 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:43:56,851 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:43:56,973 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x000001A48A296C00>, 124, 0, <_overlapped.Overlapped object at 0x000001A4B9CBDCB0>)]
2025-06-04 10:43:56,973 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x000001A48A296C00>
2025-06-04 10:43:56,974 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:43:55 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:43:56,975 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/performance/strategies "HTTP/1.1 200 OK"
2025-06-04 10:43:56,975 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:43:56,976 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:43:56,977 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:43:56,977 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:43:56,977 - httpcore.connection - DEBUG - close.started
2025-06-04 10:43:56,978 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:43:56,978 - src.ultibot_ui.widgets.strategy_performance_table_view - DEBUG - Actualizando modelo de tabla de desempeño con: []
2025-06-04 10:43:56,979 - src.ultibot_ui.windows.dashboard_view - INFO - Datos de desempeño de estrategias cargados y mostrados: 0 registros.
2025-06-04 10:43:56,979 - src.ultibot_ui.windows.dashboard_view - INFO - Datos de desempeño de estrategias cargados.
2025-06-04 10:43:56,979 - src.ultibot_ui.widgets.market_data_widget - INFO - Cargando configuración inicial para MarketDataWidget...
2025-06-04 10:43:56,979 - src.ultibot_ui.services.api_client - INFO - Obteniendo configuración de usuario.
2025-06-04 10:43:56,980 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:43:56,980 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:43:57,173 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:43:57,179 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:43:57,180 - qasync._QThreadWorker - DEBUG - #6 got callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:43:57,180 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:43:57,181 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:43:57,434 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BA397F20>
2025-06-04 10:43:57,434 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:43:57,435 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:43:57,436 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:43:57,436 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:43:57,437 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:43:57,438 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x000001A48A296C00>, 127, 0, <_overlapped.Overlapped object at 0x000001A4B9CBE730>)]
2025-06-04 10:43:57,439 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x000001A48A296C00>
2025-06-04 10:43:57,439 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:43:56 GMT'), (b'server', b'uvicorn'), (b'content-length', b'1001'), (b'content-type', b'application/json')])
2025-06-04 10:43:57,440 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/config "HTTP/1.1 200 OK"
2025-06-04 10:43:57,440 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:43:57,441 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:43:57,441 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:43:57,441 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:43:57,442 - httpcore.connection - DEBUG - close.started
2025-06-04 10:43:57,442 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:43:57,443 - src.ultibot_ui.widgets.market_data_widget - INFO - Configuración cargada: Pares seleccionados: ['BTC/USDT', 'ETH/USDT'], Intervalo: 30000ms
2025-06-04 10:43:57,443 - src.ultibot_ui.widgets.market_data_widget - INFO - Actualizando datos de tickers para: ['BTC/USDT', 'ETH/USDT']
2025-06-04 10:43:57,443 - src.ultibot_ui.services.api_client - INFO - Obteniendo datos de ticker para usuario 00000000-0000-0000-0000-000000000001 y símbolos: ['BTC/USDT', 'ETH/USDT']
2025-06-04 10:43:57,444 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:43:57,444 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:43:57,637 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:43:57,637 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:43:57,638 - qasync._QThreadWorker - DEBUG - #10 got callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:43:57,639 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:43:57,640 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:43:57,901 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA32CAE0>, 0, 0, <_overlapped.Overlapped object at 0x000001A4B9CBE8B0>)]
2025-06-04 10:43:57,903 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA32CAE0>
2025-06-04 10:43:57,905 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BA341710>
2025-06-04 10:43:57,905 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:43:57,906 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:43:57,906 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:43:57,906 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:43:57,907 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:43:58,242 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x000001A48A296C00>, 126, 0, <_overlapped.Overlapped object at 0x000001A4B9CBE4F0>)]
2025-06-04 10:43:58,242 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x000001A48A296C00>
2025-06-04 10:43:58,243 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:43:56 GMT'), (b'server', b'uvicorn'), (b'content-length', b'200'), (b'content-type', b'application/json')])
2025-06-04 10:43:58,243 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/market/tickers?user_id=00000000-0000-0000-0000-000000000001&symbols=BTC%2FUSDT%2CETH%2FUSDT "HTTP/1.1 200 OK"
2025-06-04 10:43:58,244 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:43:58,244 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:43:58,245 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:43:58,245 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:43:58,245 - httpcore.connection - DEBUG - close.started
2025-06-04 10:43:58,246 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:43:58,247 - src.ultibot_ui.windows.dashboard_view - INFO - Configuración inicial de MarketDataWidget cargada.
2025-06-04 10:43:58,247 - src.ultibot_ui.windows.dashboard_view - INFO - Carga secuencial de componentes asíncronos completada.
2025-06-04 10:43:58,247 - src.ultibot_ui.windows.main_window - INFO - MainWindow: DashboardView inicializado. Cargando estrategias...
2025-06-04 10:43:58,248 - src.ultibot_ui.services.api_client - INFO - Obteniendo todas las configuraciones de estrategias.
2025-06-04 10:43:58,248 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:43:58,249 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:43:58,449 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:43:58,450 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:43:58,450 - qasync._QThreadWorker - DEBUG - #9 got callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:43:58,450 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:43:58,451 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:43:58,703 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA376F20>, 0, 0, <_overlapped.Overlapped object at 0x000001A4B9CBE7F0>)]
2025-06-04 10:43:58,704 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA376F20>
2025-06-04 10:43:58,704 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4B9D07CB0>
2025-06-04 10:43:58,705 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:43:58,705 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:43:58,706 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:43:58,706 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:43:58,706 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:43:59,535 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=20, offset=0
2025-06-04 10:43:59,536 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:43:59,537 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:43:59,709 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x000001A48A296C00>, 125, 0, <_overlapped.Overlapped object at 0x000001A4B9CBDFB0>)]
2025-06-04 10:43:59,732 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x000001A48A296C00>
2025-06-04 10:43:59,732 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:43:59,733 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:43:59,733 - qasync._QThreadWorker - DEBUG - #3 got callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:43:59,734 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:43:57 GMT'), (b'server', b'uvicorn'), (b'content-length', b'33'), (b'content-type', b'application/json')])
2025-06-04 10:43:59,734 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:43:59,734 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/strategies "HTTP/1.1 200 OK"
2025-06-04 10:43:59,735 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:43:59,735 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:43:59,737 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:43:59,737 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:43:59,738 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:43:59,738 - httpcore.connection - DEBUG - close.started
2025-06-04 10:43:59,739 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:43:59,759 - qasync._QEventLoop - ERROR - Exception in callback <_asyncio.TaskStepMethWrapper object at 0x000001A4BA373850>()
handle: <Handle <_asyncio.TaskStepMethWrapper object at 0x000001A4BA373850>()>
Traceback (most recent call last):
  File "C:\Users\zamor\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
RuntimeError: Cannot enter into task <Task pending name='anyio._core._sockets.connect_tcp.<locals>.try_connect' coro=<connect_tcp.<locals>.try_connect() running at C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\anyio\_core\_sockets.py:172> cb=[TaskGroup._spawn.<locals>.task_done() at C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\anyio\_backends\_asyncio.py:794]> while another task <Task pending name='Task-13' coro=<StrategyManagementView._load_strategies_async() running at C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\views\strategy_management_view.py:563>> is being executed.
2025-06-04 10:44:00,002 - qasync._QEventLoop - ERROR - Exception in callback Task.task_wakeup()
handle: <Handle Task.task_wakeup()>
Traceback (most recent call last):
  File "C:\Users\zamor\AppData\Local\Programs\Python\Python313\Lib\asyncio\events.py", line 89, in _run
    self._context.run(self._callback, *self._args)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
RuntimeError: Cannot enter into task <Task cancelling name='Task-14' coro=<NotificationWidget._fetch_notifications.<locals>.fetch_and_add() running at C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\widgets\notification_widget.py:65> wait_for=<Future cancelled>> while another task <Task pending name='Task-13' coro=<StrategyManagementView._load_strategies_async() running at C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\views\strategy_management_view.py:563>> is being executed.
2025-06-04 10:44:04,534 - src.ultibot_ui.services.api_client - INFO - Obteniendo oportunidades de trading real pendientes de confirmación.
2025-06-04 10:44:04,535 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:44:04,535 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:44:04,736 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=20, offset=0
2025-06-04 10:44:04,736 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:44:04,737 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:44:04,940 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:44:04,940 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:44:04,941 - qasync._QThreadWorker - DEBUG - #8 got callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:44:04,941 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:44:04,941 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:44:04,942 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:44:04,942 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:44:04,943 - qasync._QThreadWorker - DEBUG - #4 got callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:44:04,944 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:44:04,944 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:44:05,199 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA375B20>, 0, 0, <_overlapped.Overlapped object at 0x000001A4BDAE80F0>)]
2025-06-04 10:44:05,200 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA375B20>
2025-06-04 10:44:05,200 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA375940>, 0, 0, <_overlapped.Overlapped object at 0x000001A4BDAE81B0>)]
2025-06-04 10:44:05,200 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BA34DCC0>
2025-06-04 10:44:05,202 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA375940>
2025-06-04 10:44:05,202 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:44:05,203 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:44:05,203 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:44:05,204 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:44:05,204 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:44:05,204 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x000001A48A296C00>, 132, 0, <_overlapped.Overlapped object at 0x000001A4BDAE80F0>)]
2025-06-04 10:44:05,206 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x000001A48A296C00>
2025-06-04 10:44:05,206 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4B9CBFE90>
2025-06-04 10:44:05,207 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:44:05,208 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 403, b'Forbidden', [(b'date', b'Wed, 04 Jun 2025 14:44:04 GMT'), (b'server', b'uvicorn'), (b'content-length', b'71'), (b'content-type', b'application/json')])
2025-06-04 10:44:05,208 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/opportunities/real-trading-candidates "HTTP/1.1 403 Forbidden"
2025-06-04 10:44:05,209 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:44:05,209 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:44:05,210 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:44:05,210 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:44:05,210 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:44:05,211 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:44:05,211 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:44:05,211 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:44:05,212 - httpcore.connection - DEBUG - close.started
2025-06-04 10:44:05,212 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:44:05,213 - src.ultibot_ui.services.api_client - ERROR - HTTP error 403 for GET http://localhost:8000/api/v1/opportunities/real-trading-candidates: {"detail":"El modo de trading real no está activo para este usuario."}
2025-06-04 10:44:05,213 - src.ultibot_ui.windows.dashboard_view - ERROR - Error al verificar oportunidades de trading real pendientes: APIError(status_code=403, message='API request failed with status 403: {"detail":"El modo de trading real no está activo para este usuario."}', response_json={'detail': 'El modo de trading real no está activo para este usuario.'})
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 59, in _make_request
    response.raise_for_status() # Lanza HTTPStatusError para 4xx/5xx
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '403 Forbidden' for url 'http://localhost:8000/api/v1/opportunities/real-trading-candidates'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\dashboard_view.py", line 447, in _check_pending_real_opportunities
    opportunities_data = await self.api_client.get_real_trading_candidates()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 285, in get_real_trading_candidates
    return await self._make_request("GET", "/api/v1/opportunities/real-trading-candidates")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 73, in _make_request
    raise APIError(
    ...<3 lines>...
    )
src.ultibot_ui.services.api_client.APIError: APIError(status_code=403, message='API request failed with status 403: {"detail":"El modo de trading real no está activo para este usuario."}', response_json={'detail': 'El modo de trading real no está activo para este usuario.'})
2025-06-04 10:44:05,383 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x000001A48A296C00>, 124, 0, <_overlapped.Overlapped object at 0x000001A4B9CBFF30>)]
2025-06-04 10:44:05,384 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x000001A48A296C00>
2025-06-04 10:44:05,385 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:44:04 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:44:05,385 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=20&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:44:05,386 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:44:05,386 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:44:05,387 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:44:05,387 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:44:05,388 - httpcore.connection - DEBUG - close.started
2025-06-04 10:44:05,388 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:44:07,462 - src.ultibot_ui.services.api_client - INFO - Actualizando configuración de usuario: {'id': '86e5f6c7-02a0-475b-b277-1fccbf23aa56', 'user_id': '00000000-0000-0000-0000-000000000001', 'enableTelegramNotifications': True, 'defaultPaperTradingCapital': 10000.0, 'paperTradingActive': True, 'realTradingSettings': {'real_trading_mode_active': False, 'real_trades_executed_count': 0, 'max_real_trades': 5, 'daily_capital_risked_usd': 0.0, 'last_daily_reset': '2025-06-04T14:43:53.612546'}, 'selectedTheme': 'dark', 'createdAt': '2025-06-04T14:43:53.612530', 'updatedAt': '2025-06-04T14:43:53.612531'}
2025-06-04 10:44:07,463 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:44:07,463 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:44:07,661 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:44:07,662 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:44:07,662 - qasync._QThreadWorker - DEBUG - #2 got callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:44:07,663 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:44:07,663 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:44:07,915 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4B9CBF410>
2025-06-04 10:44:07,916 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'PATCH']>
2025-06-04 10:44:07,917 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:44:07,917 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'PATCH']>
2025-06-04 10:44:07,918 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:44:07,918 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'PATCH']>
2025-06-04 10:44:08,042 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x000001A48A296C00>, 145, 0, <_overlapped.Overlapped object at 0x000001A4B9CBE4F0>)]
2025-06-04 10:44:08,042 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x000001A48A296C00>
2025-06-04 10:44:08,043 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 500, b'Internal Server Error', [(b'date', b'Wed, 04 Jun 2025 14:44:07 GMT'), (b'server', b'uvicorn'), (b'content-length', b'143'), (b'content-type', b'application/json')])
2025-06-04 10:44:08,044 - httpx - INFO - HTTP Request: PATCH http://localhost:8000/api/v1/config "HTTP/1.1 500 Internal Server Error"
2025-06-04 10:44:08,044 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'PATCH']>
2025-06-04 10:44:08,045 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:44:08,045 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:44:08,046 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:44:08,046 - httpcore.connection - DEBUG - close.started
2025-06-04 10:44:08,046 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:44:08,047 - src.ultibot_ui.services.api_client - ERROR - HTTP error 500 for PATCH http://localhost:8000/api/v1/config: {"detail":"Error al guardar la configuraciรณn: No se pudo guardar la configuración para el usuario 00000000-0000-0000-0000-000000000001."}
2025-06-04 10:44:08,047 - src.ultibot_ui.windows.settings_view - ERROR - Error al guardar la configuración general desde la UI de Settings: APIError(status_code=500, message='API request failed with status 500: {"detail":"Error al guardar la configuraciรณn: No se pudo guardar la configuración para el usuario 00000000-0000-0000-0000-000000000001."}', response_json={'detail': 'Error al guardar la configuraciรณn: No se pudo guardar la configuración para el usuario 00000000-0000-0000-0000-000000000001.'})
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 59, in _make_request
    response.raise_for_status() # Lanza HTTPStatusError para 4xx/5xx
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Server error '500 Internal Server Error' for url 'http://localhost:8000/api/v1/config'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\settings_view.py", line 169, in _save_config
    await self.api_client.update_user_configuration(updated_config_model.model_dump(mode='json', by_alias=True, exclude_none=True))
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 245, in update_user_configuration
    return await self._make_request("PATCH", "/api/v1/config", json=config_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 73, in _make_request
    raise APIError(
    ...<3 lines>...
    )
src.ultibot_ui.services.api_client.APIError: APIError(status_code=500, message='API request failed with status 500: {"detail":"Error al guardar la configuraciรณn: No se pudo guardar la configuración para el usuario 00000000-0000-0000-0000-000000000001."}', response_json={'detail': 'Error al guardar la configuraciรณn: No se pudo guardar la configuración para el usuario 00000000-0000-0000-0000-000000000001.'})
2025-06-04 10:44:09,514 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: paper
2025-06-04 10:44:09,514 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:44:09,516 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: Iniciando actualización para user 00000000-0000-0000-0000-000000000001, modo paper
2025-06-04 10:44:09,516 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot de portafolio para usuario 00000000-0000-0000-0000-000000000001, modo: paper
2025-06-04 10:44:09,517 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:44:09,518 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:44:09,528 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=20, offset=0
2025-06-04 10:44:09,529 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:44:09,530 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:44:09,825 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:44:09,838 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:44:09,838 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:44:09,840 - qasync._QThreadWorker - DEBUG - #7 got callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:44:09,840 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:44:09,841 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:44:10,089 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BDB28C00>
2025-06-04 10:44:10,090 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:44:10,091 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:44:10,092 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:44:10,093 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:44:10,093 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:44:10,094 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:44:09 GMT'), (b'server', b'uvicorn'), (b'content-length', b'355'), (b'content-type', b'application/json')])
2025-06-04 10:44:10,095 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot/00000000-0000-0000-0000-000000000001?trading_mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:44:10,095 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture cancelled>, <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BDAF6CA0>, 0, 0, <_overlapped.Overlapped object at 0x000001A4BDAE9530>)]
2025-06-04 10:44:10,096 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:44:10,096 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4B9C275F0>
2025-06-04 10:44:10,096 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:44:10,097 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BDAF6CA0>
2025-06-04 10:44:10,097 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:44:10,098 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
  File "C:\Users\zamor\AppData\Local\Programs\Python\Python313\Lib\asyncio\windows_events.py", line 600, in finish_connect
    ov.getresult()
    ~~~~~~~~~~~~^^
OSError: [WinError 995] La operación de E/S se anuló por una salida de subproceso o por una solicitud de aplicación
2025-06-04 10:44:10,098 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:44:10,099 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:44:10,099 - httpcore.connection - DEBUG - close.started
2025-06-04 10:44:10,100 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:44:10,100 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:44:10,100 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:44:10,101 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: portfolio_snapshot obtenido: True
2025-06-04 10:44:10,101 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:44:10,101 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades abiertos para usuario 00000000-0000-0000-0000-000000000001, modo: paper
2025-06-04 10:44:10,102 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:44:10,102 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:44:10,103 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:44:10,308 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:44:10,339 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x000001A48A296C00>, 124, 0, <_overlapped.Overlapped object at 0x000001A4BDAE96B0>)]
2025-06-04 10:44:10,339 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x000001A48A296C00>
2025-06-04 10:44:10,340 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:44:09 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:44:10,341 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=20&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:44:10,341 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:44:10,342 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:44:10,342 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:44:10,343 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:44:10,343 - httpcore.connection - DEBUG - close.started
2025-06-04 10:44:10,344 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:44:10,574 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A48B4FCAF0>
2025-06-04 10:44:10,575 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:44:10,576 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:44:10,577 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:44:10,577 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:44:10,578 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:44:10,578 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:44:09 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:44:10,579 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades/00000000-0000-0000-0000-000000000001/open?trading_mode=paper "HTTP/1.1 200 OK"
2025-06-04 10:44:10,579 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:44:10,580 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:44:10,580 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:44:10,580 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:44:10,581 - httpcore.connection - DEBUG - close.started
2025-06-04 10:44:10,581 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:44:10,582 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: open_trades obtenido: True
2025-06-04 10:44:10,582 - src.ultibot_ui.services.api_client - INFO - Obteniendo estado de gestión de capital.
2025-06-04 10:44:10,583 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:44:10,583 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:44:10,785 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:44:11,056 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BDAF7B10>
2025-06-04 10:44:11,057 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:44:11,058 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:44:11,059 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:44:11,060 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:44:11,061 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:44:11,061 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:44:10 GMT'), (b'server', b'uvicorn'), (b'content-length', b'82'), (b'content-type', b'application/json')])
2025-06-04 10:44:11,062 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading/capital-management/status "HTTP/1.1 200 OK"
2025-06-04 10:44:11,062 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:44:11,063 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:44:11,063 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:44:11,064 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:44:11,064 - httpcore.connection - DEBUG - close.started
2025-06-04 10:44:11,065 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:44:11,065 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: capital_status obtenido: True
2025-06-04 10:44:11,069 - src.ultibot_ui.widgets.portfolio_widget - INFO - Worker de actualización finalizado.
2025-06-04 10:44:11,807 - src.ultibot_ui.services.trading_mode_state - INFO - Trading mode changed from paper to real
2025-06-04 10:44:11,808 - src.ultibot_ui.windows.dashboard_view - INFO - Dashboard: Trading mode changed to real
2025-06-04 10:44:11,808 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: real
2025-06-04 10:44:11,808 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:44:11,809 - src.ultibot_ui.widgets.trading_mode_selector - DEBUG - External mode change detected: real
2025-06-04 10:44:11,810 - src.ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Modo de trading cambió a real
2025-06-04 10:44:11,810 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: Iniciando actualización para user 00000000-0000-0000-0000-000000000001, modo real
2025-06-04 10:44:11,810 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: real
2025-06-04 10:44:11,811 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot de portafolio para usuario 00000000-0000-0000-0000-000000000001, modo: real
2025-06-04 10:44:11,811 - asyncio - DEBUG - Using selector: SelectSelector
2025-06-04 10:44:11,817 - src.ultibot_ui.widgets.order_form_widget - INFO - OrderFormWidget: Modo de trading cambió a real
2025-06-04 10:44:11,818 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:44:11,821 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Trading mode changed to real. Refreshing data.
2025-06-04 10:44:11,821 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: Iniciando actualización para user 00000000-0000-0000-0000-000000000001, modo real
2025-06-04 10:44:11,822 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:44:11,822 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Fetching portfolio snapshot.
2025-06-04 10:44:11,822 - src.ultibot_ui.services.api_client - INFO - Obteniendo snapshot de portafolio para usuario 00000000-0000-0000-0000-000000000001, modo: real
2025-06-04 10:44:11,825 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:44:11,825 - src.ultibot_ui.widgets.trading_mode_selector - INFO - Toggle button clicked, new mode: real
2025-06-04 10:44:11,826 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:44:11,827 - src.ultibot_ui.windows.dashboard_view - INFO - Cargando datos de desempeño de estrategias para el modo de filtro: Operativa Real (API param: real)
2025-06-04 10:44:11,827 - src.ultibot_ui.services.api_client - INFO - Obteniendo desempeño de estrategias (usuario implícito por backend) con modo: real
2025-06-04 10:44:11,829 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:44:11,829 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:44:12,248 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:44:12,253 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:44:12,272 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:44:12,273 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:44:12,273 - qasync._QThreadWorker - DEBUG - #1 got callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:44:12,274 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:44:12,275 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:44:12,507 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BA379C70>
2025-06-04 10:44:12,507 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BDB39250>
2025-06-04 10:44:12,508 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:44:12,509 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:44:12,509 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:44:12,510 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:44:12,511 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:44:12,511 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:44:12,512 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:44:12,513 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:44:12,513 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:44:12,514 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:44:12,528 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BDB39A50>
2025-06-04 10:44:12,529 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:44:12,529 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:44:12,530 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:44:12,530 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:44:12,530 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:44:12,893 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x000001A48A296C00>, 124, 0, <_overlapped.Overlapped object at 0x000001A4B9CBFE70>)]
2025-06-04 10:44:12,893 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x000001A48A296C00>
2025-06-04 10:44:12,894 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:44:11 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:44:12,894 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/performance/strategies?mode=real "HTTP/1.1 200 OK"
2025-06-04 10:44:12,895 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:44:12,895 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:44:12,896 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:44:12,896 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:44:12,897 - httpcore.connection - DEBUG - close.started
2025-06-04 10:44:12,897 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:44:12,897 - src.ultibot_ui.widgets.strategy_performance_table_view - DEBUG - Actualizando modelo de tabla de desempeño con: []
2025-06-04 10:44:12,898 - src.ultibot_ui.windows.dashboard_view - INFO - Datos de desempeño de estrategias cargados y mostrados: 0 registros.
2025-06-04 10:44:13,051 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:44:11 GMT'), (b'server', b'uvicorn'), (b'content-length', b'521'), (b'content-type', b'application/json')])
2025-06-04 10:44:13,051 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot/00000000-0000-0000-0000-000000000001?trading_mode=real "HTTP/1.1 200 OK"
2025-06-04 10:44:13,052 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:44:13,052 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:44:13,053 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:44:13,053 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:44:13,054 - httpcore.connection - DEBUG - close.started
2025-06-04 10:44:13,055 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:44:13,055 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: portfolio_snapshot obtenido: True
2025-06-04 10:44:13,056 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades abiertos para usuario 00000000-0000-0000-0000-000000000001, modo: real
2025-06-04 10:44:13,057 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:44:13,058 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:44:13,168 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:44:11 GMT'), (b'server', b'uvicorn'), (b'content-length', b'521'), (b'content-type', b'application/json')])
2025-06-04 10:44:13,168 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/portfolio/snapshot/00000000-0000-0000-0000-000000000001?trading_mode=real "HTTP/1.1 200 OK"
2025-06-04 10:44:13,169 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:44:13,169 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:44:13,170 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:44:13,170 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:44:13,171 - httpcore.connection - DEBUG - close.started
2025-06-04 10:44:13,171 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:44:13,172 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: portfolio_snapshot obtenido: True
2025-06-04 10:44:13,172 - src.ultibot_ui.services.api_client - INFO - Obteniendo trades abiertos para usuario 00000000-0000-0000-0000-000000000001, modo: real
2025-06-04 10:44:13,173 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:44:13,175 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:44:13,302 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:44:13,422 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:44:13,573 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BDB22B30>
2025-06-04 10:44:13,574 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:44:13,575 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:44:13,576 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:44:13,577 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:44:13,577 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:44:13,578 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:44:12 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:44:13,578 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades/00000000-0000-0000-0000-000000000001/open?trading_mode=real "HTTP/1.1 200 OK"
2025-06-04 10:44:13,579 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:44:13,579 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:44:13,580 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:44:13,581 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:44:13,582 - httpcore.connection - DEBUG - close.started
2025-06-04 10:44:13,582 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:44:13,583 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: open_trades obtenido: True
2025-06-04 10:44:13,583 - src.ultibot_ui.services.api_client - INFO - Obteniendo estado de gestión de capital.
2025-06-04 10:44:13,583 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:44:13,584 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:44:13,692 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4B9D02970>
2025-06-04 10:44:13,693 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:44:13,694 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:44:13,694 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:44:13,695 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:44:13,695 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:44:13,696 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:44:12 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:44:13,697 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trades/00000000-0000-0000-0000-000000000001/open?trading_mode=real "HTTP/1.1 200 OK"
2025-06-04 10:44:13,697 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:44:13,698 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:44:13,698 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:44:13,698 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:44:13,699 - httpcore.connection - DEBUG - close.started
2025-06-04 10:44:13,699 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:44:13,700 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: open_trades obtenido: True
2025-06-04 10:44:13,700 - src.ultibot_ui.services.api_client - INFO - Obteniendo estado de gestión de capital.
2025-06-04 10:44:13,701 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:44:13,702 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:44:13,850 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:44:13,960 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:44:14,107 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BDB26F90>
2025-06-04 10:44:14,109 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:44:14,110 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:44:14,110 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:44:14,111 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:44:14,112 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:44:14,113 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:44:13 GMT'), (b'server', b'uvicorn'), (b'content-length', b'82'), (b'content-type', b'application/json')])
2025-06-04 10:44:14,113 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading/capital-management/status "HTTP/1.1 200 OK"
2025-06-04 10:44:14,114 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:44:14,114 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:44:14,115 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:44:14,115 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:44:14,116 - httpcore.connection - DEBUG - close.started
2025-06-04 10:44:14,116 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:44:14,117 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: capital_status obtenido: True
2025-06-04 10:44:14,120 - src.ultibot_ui.widgets.portfolio_widget - WARNING - Error message in portfolio data (real): No se pudieron obtener los balances de Binance: Error de estado HTTP de Binance API: 401 - {"code":-2015,"msg":"Invalid API-key, IP, or permissions for action."}
2025-06-04 10:44:14,129 - src.ultibot_ui.widgets.portfolio_widget - INFO - Worker de actualización finalizado.
2025-06-04 10:44:14,224 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BDB264B0>
2025-06-04 10:44:14,225 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:44:14,226 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:44:14,227 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:44:14,227 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:44:14,228 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:44:14,229 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:44:13 GMT'), (b'server', b'uvicorn'), (b'content-length', b'82'), (b'content-type', b'application/json')])
2025-06-04 10:44:14,229 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/trading/capital-management/status "HTTP/1.1 200 OK"
2025-06-04 10:44:14,229 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:44:14,230 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:44:14,230 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:44:14,231 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:44:14,231 - httpcore.connection - DEBUG - close.started
2025-06-04 10:44:14,232 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:44:14,233 - src.ultibot_ui.widgets.portfolio_widget - DEBUG - DataUpdateWorker: capital_status obtenido: True
2025-06-04 10:44:14,236 - src.ultibot_ui.widgets.portfolio_widget - WARNING - Error message in portfolio data (real): No se pudieron obtener los balances de Binance: Error de estado HTTP de Binance API: 401 - {"code":-2015,"msg":"Invalid API-key, IP, or permissions for action."}
2025-06-04 10:44:14,247 - src.ultibot_ui.widgets.portfolio_widget - INFO - Worker de actualización finalizado.
2025-06-04 10:44:14,530 - src.ultibot_ui.services.api_client - INFO - Obteniendo oportunidades de trading real pendientes de confirmación.
2025-06-04 10:44:14,530 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:44:14,531 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:44:14,731 - src.ultibot_ui.services.api_client - INFO - Obteniendo historial de notificaciones para usuario 00000000-0000-0000-0000-000000000001 con paginación: limit=20, offset=0
2025-06-04 10:44:14,732 - httpx - DEBUG - load_ssl_context verify=True cert=None trust_env=True http2=False
2025-06-04 10:44:14,733 - httpx - DEBUG - load_verify_locations cafile='C:\\Users\\zamor\\UltiBotInversiones\\.venv\\Lib\\site-packages\\certifi\\cacert.pem'
2025-06-04 10:44:14,933 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:44:14,934 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:44:14,935 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-04 10:44:14,935 - qasync._QThreadWorker - DEBUG - #5 got callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:44:14,935 - qasync.QThreadExecutor - DEBUG - Submitting callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} to thread worker queue
2025-06-04 10:44:14,936 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:44:14,936 - qasync._QThreadWorker - DEBUG - #6 got callback <function getaddrinfo at 0x000001A4883DCEA0> with args (b'localhost', 8000, <AddressFamily.AF_UNSPEC: 0>, <SocketKind.SOCK_STREAM: 1>, 0, 0) and kwargs {} from queue
2025-06-04 10:44:14,937 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:44:14,937 - qasync._QThreadWorker - DEBUG - Invoking callback
2025-06-04 10:44:14,939 - qasync._QThreadWorker - DEBUG - Setting Future result: [(<AddressFamily.AF_INET6: 23>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('::1', 8000, 0, 0)), (<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 0, '', ('127.0.0.1', 8000))]
2025-06-04 10:44:15,189 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA2C6480>, 0, 0, <_overlapped.Overlapped object at 0x000001A4B9CBC930>)]
2025-06-04 10:44:15,191 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4BA2C6480>
2025-06-04 10:44:15,192 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture cancelled>, <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4883A02C0>, 0, 0, <_overlapped.Overlapped object at 0x000001A4B9CBED30>)]
2025-06-04 10:44:15,193 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BA2EB160>
2025-06-04 10:44:15,194 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000001A4883A02C0>
2025-06-04 10:44:15,194 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
  File "C:\Users\zamor\AppData\Local\Programs\Python\Python313\Lib\asyncio\windows_events.py", line 600, in finish_connect
    ov.getresult()
    ~~~~~~~~~~~~^^
OSError: [WinError 995] La operación de E/S se anuló por una salida de subproceso o por una solicitud de aplicación
2025-06-04 10:44:15,195 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:44:15,196 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001A4BDB2E5D0>
2025-06-04 10:44:15,196 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:44:15,197 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:44:15,197 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:44:15,197 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x000001A48A296C00>, 132, 0, <_overlapped.Overlapped object at 0x000001A4B9CBC630>)]
2025-06-04 10:44:15,197 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:44:15,198 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-04 10:44:15,199 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x000001A48A296C00>
2025-06-04 10:44:15,199 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-04 10:44:15,200 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-04 10:44:15,200 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-04 10:44:15,200 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-04 10:44:15,201 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 403, b'Forbidden', [(b'date', b'Wed, 04 Jun 2025 14:44:14 GMT'), (b'server', b'uvicorn'), (b'content-length', b'71'), (b'content-type', b'application/json')])
2025-06-04 10:44:15,201 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/opportunities/real-trading-candidates "HTTP/1.1 403 Forbidden"
2025-06-04 10:44:15,202 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:44:15,202 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:44:15,202 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:44:15,203 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:44:15,203 - httpcore.connection - DEBUG - close.started
2025-06-04 10:44:15,204 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:44:15,204 - src.ultibot_ui.services.api_client - ERROR - HTTP error 403 for GET http://localhost:8000/api/v1/opportunities/real-trading-candidates: {"detail":"El modo de trading real no está activo para este usuario."}
2025-06-04 10:44:15,204 - src.ultibot_ui.windows.dashboard_view - ERROR - Error al verificar oportunidades de trading real pendientes: APIError(status_code=403, message='API request failed with status 403: {"detail":"El modo de trading real no está activo para este usuario."}', response_json={'detail': 'El modo de trading real no está activo para este usuario.'})
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 59, in _make_request
    response.raise_for_status() # Lanza HTTPStatusError para 4xx/5xx
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_models.py", line 763, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
httpx.HTTPStatusError: Client error '403 Forbidden' for url 'http://localhost:8000/api/v1/opportunities/real-trading-candidates'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\dashboard_view.py", line 447, in _check_pending_real_opportunities
    opportunities_data = await self.api_client.get_real_trading_candidates()
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 285, in get_real_trading_candidates
    return await self._make_request("GET", "/api/v1/opportunities/real-trading-candidates")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 73, in _make_request
    raise APIError(
    ...<3 lines>...
    )
src.ultibot_ui.services.api_client.APIError: APIError(status_code=403, message='API request failed with status 403: {"detail":"El modo de trading real no está activo para este usuario."}', response_json={'detail': 'El modo de trading real no está activo para este usuario.'})
2025-06-04 10:44:15,335 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.finish_socket_func at 0x000001A48A296C00>, 124, 0, <_overlapped.Overlapped object at 0x000001A4B9CBC930>)]
2025-06-04 10:44:15,336 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.finish_socket_func at 0x000001A48A296C00>
2025-06-04 10:44:15,337 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 04 Jun 2025 14:44:14 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-04 10:44:15,337 - httpx - INFO - HTTP Request: GET http://localhost:8000/api/v1/notifications/history?user_id=00000000-0000-0000-0000-000000000001&limit=20&offset=0 "HTTP/1.1 200 OK"
2025-06-04 10:44:15,338 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-04 10:44:15,338 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-04 10:44:15,339 - httpcore.http11 - DEBUG - response_closed.started
2025-06-04 10:44:15,339 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-04 10:44:15,340 - httpcore.connection - DEBUG - close.started
2025-06-04 10:44:15,341 - httpcore.connection - DEBUG - close.complete
2025-06-04 10:44:16,737 - src.ultibot_ui.windows.main_window - INFO - [INFO] MainWindow: closeEvent triggered.
2025-06-04 10:44:16,738 - src.ultibot_ui.widgets.market_data_widget - INFO - Limpiando MarketDataWidget...
2025-06-04 10:44:16,738 - src.ultibot_ui.widgets.market_data_widget - INFO - MarketDataWidget limpiado.
2025-06-04 10:44:16,739 - src.ultibot_ui.widgets.portfolio_widget - INFO - Actualizaciones del portafolio detenidas.
2025-06-04 10:44:16,742 - src.ultibot_ui.windows.history_view - INFO - HistoryView cleanup completado
2025-06-04 10:44:16,743 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: Cleaning up...
2025-06-04 10:44:16,744 - src.ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: Cleanup finished.
2025-06-04 10:44:16,744 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleaning up...
2025-06-04 10:44:16,746 - src.ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleanup finished.
2025-06-04 10:44:16,763 - qasync._windows._EventPoller - DEBUG - Stopping worker thread...
2025-06-04 10:44:16,771 - qasync._windows._EventWorker - DEBUG - Exiting thread
