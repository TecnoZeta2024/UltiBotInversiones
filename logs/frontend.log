2025-06-25 14:52:03,209 - __main__ - WARNING - El bucle de eventos no estaba corriendo o no se encontró durante el cierre.
2025-06-25 14:52:03,211 - __main__ - INFO - Aplicación cerrada.
2025-06-25 14:55:58,143 - ultibot_backend - INFO - [MainThread] - main.py:100 - Apagando UltiBot Backend (lifespan)...
2025-06-25 14:55:58,143 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:190 - Shutting down dependency container...
2025-06-25 14:55:58,144 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:40 - Redis client closed.
2025-06-25 14:55:58,144 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container shut down.
2025-06-25 14:55:58,144 - ultibot_backend - INFO - [MainThread] - main.py:103 - Recursos liberados y aplicación apagada (lifespan).
2025-06-25 14:56:02,771 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-25 14:56:02,774 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-25 14:56:02,794 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-25 14:56:02,795 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-25 14:56:02,797 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-25 14:56:02,797 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-25 14:56:02,798 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:107 - Initializing dependency container...
2025-06-25 14:56:02,798 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:46 - Forzando el uso de SQLite local para depuración, ignorando cualquier DATABASE_URL existente.
2025-06-25 14:56:02,798 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:49 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-25 14:56:02,834 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:63 - Database tables created and session factory initialized successfully.
2025-06-25 14:56:03,026 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-25 14:56:03,026 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-25 14:56:03,211 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-25 14:56:03,223 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-25 14:56:03,223 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-25 14:56:03,223 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-25 14:56:03,231 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-25 14:56:03,231 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000001C5D5E1A2D0>
2025-06-25 14:56:03,231 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:187 - Dependency container initialized successfully.
2025-06-25 14:56:03,238 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-25 14:56:03,238 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-25 14:56:07,791 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-25 14:56:07,791 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-25 14:56:07,812 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-25 14:56:07,813 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-25 14:56:07,814 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-25 14:56:07,814 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-25 14:56:07,815 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:107 - Initializing dependency container...
2025-06-25 14:56:07,815 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:46 - Forzando el uso de SQLite local para depuración, ignorando cualquier DATABASE_URL existente.
2025-06-25 14:56:07,815 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:49 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-25 14:56:07,850 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:63 - Database tables created and session factory initialized successfully.
2025-06-25 14:56:08,041 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-25 14:56:08,042 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-25 14:56:08,229 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-25 14:56:08,231 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-25 14:56:08,231 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-25 14:56:08,231 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-25 14:56:08,246 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-25 14:56:08,246 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x0000018DF3BF9810>
2025-06-25 14:56:08,247 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:187 - Dependency container initialized successfully.
2025-06-25 14:56:08,247 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-25 14:56:08,248 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-25 15:06:05,838 - ultibot_backend - INFO - [MainThread] - main.py:100 - Apagando UltiBot Backend (lifespan)...
2025-06-25 15:06:05,838 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:190 - Shutting down dependency container...
2025-06-25 15:06:05,844 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:40 - Redis client closed.
2025-06-25 15:06:05,845 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container shut down.
2025-06-25 15:06:05,845 - ultibot_backend - INFO - [MainThread] - main.py:103 - Recursos liberados y aplicación apagada (lifespan).
2025-06-25 15:06:10,508 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-25 15:06:10,509 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-25 15:06:10,527 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-25 15:06:10,527 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-25 15:06:10,529 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-25 15:06:10,529 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-25 15:06:10,529 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:107 - Initializing dependency container...
2025-06-25 15:06:10,529 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:46 - Forzando el uso de SQLite local para depuración, ignorando cualquier DATABASE_URL existente.
2025-06-25 15:06:10,530 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:49 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-25 15:06:10,567 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:63 - Database tables created and session factory initialized successfully.
2025-06-25 15:06:10,756 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-25 15:06:10,756 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-25 15:06:10,950 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-25 15:06:10,953 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-25 15:06:10,953 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-25 15:06:10,953 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-25 15:06:10,966 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-25 15:06:10,967 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000002031109B390>
2025-06-25 15:06:10,967 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:187 - Dependency container initialized successfully.
2025-06-25 15:06:10,967 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-25 15:06:10,968 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-25 15:06:15,513 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-25 15:06:15,513 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-25 15:06:15,535 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-25 15:06:15,536 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-25 15:06:15,537 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-25 15:06:15,538 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-25 15:06:15,538 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:107 - Initializing dependency container...
2025-06-25 15:06:15,540 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:46 - Forzando el uso de SQLite local para depuración, ignorando cualquier DATABASE_URL existente.
2025-06-25 15:06:15,540 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:49 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-25 15:06:15,580 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:63 - Database tables created and session factory initialized successfully.
2025-06-25 15:06:15,773 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-25 15:06:15,773 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-25 15:06:15,984 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-25 15:06:15,987 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-25 15:06:15,988 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-25 15:06:15,989 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-25 15:06:16,001 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-25 15:06:16,002 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000184A6A6D950>
2025-06-25 15:06:16,002 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:187 - Dependency container initialized successfully.
2025-06-25 15:06:16,003 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-25 15:06:16,003 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-25 15:07:01,127 - asyncio - DEBUG - Using proactor: _IocpProactor
2025-06-25 15:07:01,129 - qasync._windows._EventPoller - DEBUG - Starting (proactor: <_IocpProactor overlapped#=0 result#=0>)...
2025-06-25 15:07:01,130 - qasync._windows._EventWorker - DEBUG - Thread started
2025-06-25 15:07:01,131 - __main__ - INFO - Initializing or finding application window...
2025-06-25 15:07:01,131 - __main__ - INFO - No existing MainWindow found. Creating a new one.
2025-06-25 15:07:01,132 - __main__ - INFO - Stylesheet loaded successfully.
2025-06-25 15:07:01,132 - ultibot_ui.services.api_client - DEBUG - APIClient singleton: base URL establecida en http://127.0.0.1:8000
2025-06-25 15:07:01,325 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client inicializado con base URL: http://127.0.0.1:8000
2025-06-25 15:07:01,347 - ultibot_ui.services.trading_mode_state - INFO - TradingModeStateManager initialized with mode: paper
2025-06-25 15:07:01,347 - ultibot_ui.services.trading_mode_state - INFO - Created global trading mode state manager
2025-06-25 15:07:01,612 - ultibot_ui.widgets.portfolio_widget - INFO - Timer de actualización del portafolio iniciado.
2025-06-25 15:07:01,617 - ultibot_ui.widgets.chart_widget - INFO - Solicitando datos para BTCUSDT - 1h usando ApiWorker
2025-06-25 15:07:01,617 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000017B85B7BBD0>, coroutine_factory: set
2025-06-25 15:07:01,646 - ultibot_ui.widgets.market_data_widget - INFO - Cargando configuración inicial para MarketDataWidget...
2025-06-25 15:07:01,647 - qasync._QEventLoop - ERROR - Task exception was never retrieved
future: <Task finished name='Task-1' coro=<main.<locals>._main_async_wrapper() done, defined at C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\main.py:151> exception=NameError("name 'main_event_loop' is not defined")>
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\main.py", line 154, in _main_async_wrapper
    main_window_ref = await _main_async(app) # _main_async ahora devuelve MainWindow o None
                      ^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\main.py", line 95, in _main_async
    main_window = MainWindow(api_client=api_client, main_event_loop=main_event_loop) # Pasar el bucle de eventos
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\main_window.py", line 68, in __init__
    self._setup_central_content(main_layout, main_event_loop) # Pasar main_event_loop
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\main_window.py", line 216, in _setup_central_content
    self.market_data_widget = MarketDataWidget(
                              ^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\widgets\market_data_widget.py", line 106, in __init__
    self.load_initial_configuration()
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\widgets\market_data_widget.py", line 196, in load_initial_configuration
    future = self._run_api_worker_and_await_result(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\widgets\market_data_widget.py", line 116, in _run_api_worker_and_await_result
    worker = ApiWorker(coroutine_factory=coroutine_factory, api_client=self.api_client, main_event_loop=main_event_loop)
                                                                                                        ^^^^^^^^^^^^^^^
NameError: name 'main_event_loop' is not defined
2025-06-25 15:07:16,626 - ultibot_ui.widgets.portfolio_widget - WARNING - PortfolioWidget: user_id no está disponible. No se puede actualizar el portafolio.
2025-06-25 15:07:31,643 - ultibot_ui.widgets.portfolio_widget - WARNING - PortfolioWidget: user_id no está disponible. No se puede actualizar el portafolio.
2025-06-25 15:08:01,651 - ultibot_ui.widgets.portfolio_widget - WARNING - PortfolioWidget: user_id no está disponible. No se puede actualizar el portafolio.
2025-06-25 15:08:16,661 - ultibot_ui.widgets.portfolio_widget - WARNING - PortfolioWidget: user_id no está disponible. No se puede actualizar el portafolio.
2025-06-25 15:08:31,677 - ultibot_ui.widgets.portfolio_widget - WARNING - PortfolioWidget: user_id no está disponible. No se puede actualizar el portafolio.
2025-06-25 15:08:46,697 - ultibot_ui.widgets.portfolio_widget - WARNING - PortfolioWidget: user_id no está disponible. No se puede actualizar el portafolio.
2025-06-25 15:25:06,124 - ultibot_backend - INFO - [MainThread] - main.py:100 - Apagando UltiBot Backend (lifespan)...
2025-06-25 15:25:06,125 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:190 - Shutting down dependency container...
2025-06-25 15:25:06,129 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:40 - Redis client closed.
2025-06-25 15:25:06,129 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container shut down.
2025-06-25 15:25:06,130 - ultibot_backend - INFO - [MainThread] - main.py:103 - Recursos liberados y aplicación apagada (lifespan).
2025-06-25 15:25:10,715 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-25 15:25:10,716 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-25 15:25:10,732 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-25 15:25:10,734 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-25 15:25:10,735 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-25 15:25:10,735 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-25 15:25:10,735 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:107 - Initializing dependency container...
2025-06-25 15:25:10,737 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:46 - Forzando el uso de SQLite local para depuración, ignorando cualquier DATABASE_URL existente.
2025-06-25 15:25:10,737 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:49 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-25 15:25:10,774 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:63 - Database tables created and session factory initialized successfully.
2025-06-25 15:25:10,966 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-25 15:25:10,967 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-25 15:25:11,152 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-25 15:25:11,156 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-25 15:25:11,156 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-25 15:25:11,157 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-25 15:25:11,172 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-25 15:25:11,173 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x0000023F4906F250>
2025-06-25 15:25:11,173 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:187 - Dependency container initialized successfully.
2025-06-25 15:25:11,173 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-25 15:25:11,174 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-25 15:25:15,652 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-25 15:25:15,653 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-25 15:25:15,671 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-25 15:25:15,672 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-25 15:25:15,673 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-25 15:25:15,674 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-25 15:25:15,674 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:107 - Initializing dependency container...
2025-06-25 15:25:15,674 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:46 - Forzando el uso de SQLite local para depuración, ignorando cualquier DATABASE_URL existente.
2025-06-25 15:25:15,674 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:49 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-25 15:25:15,714 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:63 - Database tables created and session factory initialized successfully.
2025-06-25 15:25:15,899 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-25 15:25:15,900 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-25 15:25:16,086 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-25 15:25:16,089 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-25 15:25:16,089 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-25 15:25:16,090 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-25 15:25:16,106 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-25 15:25:16,106 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000002412CBA1CD0>
2025-06-25 15:25:16,107 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:187 - Dependency container initialized successfully.
2025-06-25 15:25:16,107 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-25 15:25:16,108 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-25 15:29:44,870 - ultibot_backend - INFO - [MainThread] - main.py:100 - Apagando UltiBot Backend (lifespan)...
2025-06-25 15:29:44,870 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:190 - Shutting down dependency container...
2025-06-25 15:29:44,875 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:40 - Redis client closed.
2025-06-25 15:29:44,876 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container shut down.
2025-06-25 15:29:44,876 - ultibot_backend - INFO - [MainThread] - main.py:103 - Recursos liberados y aplicación apagada (lifespan).
2025-06-25 15:29:49,610 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-25 15:29:49,612 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-25 15:29:49,630 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-25 15:29:49,631 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-25 15:29:49,634 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-25 15:29:49,634 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-25 15:29:49,634 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:107 - Initializing dependency container...
2025-06-25 15:29:49,635 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:46 - Forzando el uso de SQLite local para depuración, ignorando cualquier DATABASE_URL existente.
2025-06-25 15:29:49,635 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:49 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-25 15:29:49,669 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:63 - Database tables created and session factory initialized successfully.
2025-06-25 15:29:49,859 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-25 15:29:49,860 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-25 15:29:50,049 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-25 15:29:50,053 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-25 15:29:50,053 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-25 15:29:50,053 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-25 15:29:50,066 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-25 15:29:50,067 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000002F2B9FBB5D0>
2025-06-25 15:29:50,067 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:187 - Dependency container initialized successfully.
2025-06-25 15:29:50,067 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-25 15:29:50,067 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-25 15:29:54,698 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-25 15:29:54,698 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-25 15:29:54,717 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-25 15:29:54,718 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-25 15:29:54,719 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-25 15:29:54,719 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-25 15:29:54,719 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:107 - Initializing dependency container...
2025-06-25 15:29:54,720 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:46 - Forzando el uso de SQLite local para depuración, ignorando cualquier DATABASE_URL existente.
2025-06-25 15:29:54,720 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:49 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-25 15:29:54,757 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:63 - Database tables created and session factory initialized successfully.
2025-06-25 15:29:54,943 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-25 15:29:54,943 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-25 15:29:55,140 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-25 15:29:55,144 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-25 15:29:55,144 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-25 15:29:55,144 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-25 15:29:55,158 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-25 15:29:55,158 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x00000202BBA6F0D0>
2025-06-25 15:29:55,159 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:187 - Dependency container initialized successfully.
2025-06-25 15:29:55,159 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-25 15:29:55,159 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-25 15:30:55,455 - ultibot_backend - INFO - [MainThread] - main.py:100 - Apagando UltiBot Backend (lifespan)...
2025-06-25 15:30:55,455 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:190 - Shutting down dependency container...
2025-06-25 15:30:55,459 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:40 - Redis client closed.
2025-06-25 15:30:55,459 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container shut down.
2025-06-25 15:30:55,460 - ultibot_backend - INFO - [MainThread] - main.py:103 - Recursos liberados y aplicación apagada (lifespan).
2025-06-25 15:30:59,989 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-25 15:30:59,989 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-25 15:31:00,010 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-25 15:31:00,010 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-25 15:31:00,012 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-25 15:31:00,012 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-25 15:31:00,013 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:107 - Initializing dependency container...
2025-06-25 15:31:00,013 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:46 - Forzando el uso de SQLite local para depuración, ignorando cualquier DATABASE_URL existente.
2025-06-25 15:31:00,014 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:49 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-25 15:31:00,054 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:63 - Database tables created and session factory initialized successfully.
2025-06-25 15:31:00,254 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-25 15:31:00,255 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-25 15:31:00,450 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-25 15:31:00,454 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-25 15:31:00,455 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-25 15:31:00,456 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-25 15:31:00,469 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-25 15:31:00,469 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x0000029966AAD910>
2025-06-25 15:31:00,470 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:187 - Dependency container initialized successfully.
2025-06-25 15:31:00,470 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-25 15:31:00,470 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-25 15:31:04,985 - ultibot_backend - INFO - [MainThread] - main.py:111 - Creando nueva instancia de FastAPI...
2025-06-25 15:31:04,986 - ultibot_backend - INFO - [MainThread] - main.py:154 - Registrando routers de la API...
2025-06-25 15:31:05,007 - ultibot_backend - INFO - [MainThread] - main.py:165 - Todos los routers han sido registrados.
2025-06-25 15:31:05,007 - ultibot_backend - INFO - [MainThread] - main.py:218 - Instancia global de la aplicación creada.
2025-06-25 15:31:05,009 - ultibot_backend - INFO - [MainThread] - main.py:82 - Iniciando UltiBot Backend (lifespan)...
2025-06-25 15:31:05,009 - ultibot_backend - INFO - [MainThread] - main.py:87 - DependencyContainer adjuntado a app.state: True
2025-06-25 15:31:05,010 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:107 - Initializing dependency container...
2025-06-25 15:31:05,010 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:46 - Forzando el uso de SQLite local para depuración, ignorando cualquier DATABASE_URL existente.
2025-06-25 15:31:05,010 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:49 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-25 15:31:05,044 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:63 - Database tables created and session factory initialized successfully.
2025-06-25 15:31:05,238 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-25 15:31:05,239 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-25 15:31:05,436 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-25 15:31:05,440 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-25 15:31:05,441 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-25 15:31:05,441 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-25 15:31:05,455 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-25 15:31:05,455 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x0000020644FFD950>
2025-06-25 15:31:05,455 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:187 - Dependency container initialized successfully.
2025-06-25 15:31:05,456 - ultibot_backend - INFO - [MainThread] - main.py:91 - Contenedor de dependencias inicializado en lifespan.
2025-06-25 15:31:05,456 - ultibot_backend - INFO - [MainThread] - main.py:97 - Aplicación iniciada correctamente (lifespan).
2025-06-25 15:38:00,019 - ultibot_backend - INFO - [MainThread] - main.py:100 - Apagando UltiBot Backend (lifespan)...
2025-06-25 15:38:00,020 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:190 - Shutting down dependency container...
2025-06-25 15:38:00,025 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:40 - Redis client closed.
2025-06-25 15:38:00,026 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:197 - Dependency container shut down.
2025-06-25 15:38:00,026 - ultibot_backend - INFO - [MainThread] - main.py:103 - Recursos liberados y aplicación apagada (lifespan).
2025-06-25 16:53:02,812 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-25 16:53:02,812 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-25 16:53:02,833 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-25 16:53:02,833 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicación creada.
2025-06-25 16:53:20,796 - asyncio - DEBUG - Using proactor: _IocpProactor
2025-06-25 16:53:20,798 - qasync._windows._EventPoller - DEBUG - Starting (proactor: <_IocpProactor overlapped#=0 result#=0>)...
2025-06-25 16:53:20,798 - qasync._windows._EventWorker - DEBUG - Thread started
2025-06-25 16:53:20,798 - __main__ - INFO - Initializing or finding application window...
2025-06-25 16:53:20,798 - __main__ - INFO - No existing MainWindow found. Creating a new one.
2025-06-25 16:53:20,802 - __main__ - INFO - Stylesheet loaded successfully.
2025-06-25 16:53:20,802 - ultibot_ui.services.api_client - DEBUG - APIClient singleton: base URL establecida en http://127.0.0.1:8000
2025-06-25 16:53:20,985 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client inicializado con base URL: http://127.0.0.1:8000
2025-06-25 16:53:21,012 - ultibot_ui.services.trading_mode_state - INFO - TradingModeStateManager initialized with mode: paper
2025-06-25 16:53:21,012 - ultibot_ui.services.trading_mode_state - INFO - Created global trading mode state manager
2025-06-25 16:53:21,289 - ultibot_ui.widgets.portfolio_widget - INFO - Timer de actualización del portafolio iniciado.
2025-06-25 16:53:21,289 - ultibot_ui.widgets.chart_widget - INFO - Solicitando datos para BTCUSDT - 1h usando ApiWorker
2025-06-25 16:53:21,292 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000002B146883E50>, coroutine_factory: set
2025-06-25 16:53:21,319 - ultibot_ui.widgets.market_data_widget - INFO - Cargando configuración inicial para MarketDataWidget...
2025-06-25 16:53:21,320 - qasync._QEventLoop - ERROR - Task exception was never retrieved
future: <Task finished name='Task-1' coro=<main.<locals>._main_async_wrapper() done, defined at c:\Users\zamor\UltiBotInversiones\src\ultibot_ui\main.py:151> exception=NameError("name 'main_event_loop' is not defined")>
Traceback (most recent call last):
  File "c:\Users\zamor\UltiBotInversiones\src\ultibot_ui\main.py", line 154, in _main_async_wrapper
    main_window_ref = await _main_async(app) # _main_async ahora devuelve MainWindow o None
                      ^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\zamor\UltiBotInversiones\src\ultibot_ui\main.py", line 95, in _main_async
    main_window = MainWindow(api_client=api_client, main_event_loop=main_event_loop) # Pasar el bucle de eventos
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\main_window.py", line 68, in __init__
    self._setup_central_content(main_layout, main_event_loop) # Pasar main_event_loop
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\main_window.py", line 216, in _setup_central_content
    self.market_data_widget = MarketDataWidget(
                              ^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\widgets\market_data_widget.py", line 106, in __init__
    self.load_initial_configuration()
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\widgets\market_data_widget.py", line 196, in load_initial_configuration
    future = self._run_api_worker_and_await_result(
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\widgets\market_data_widget.py", line 116, in _run_api_worker_and_await_result
    worker = ApiWorker(coroutine_factory=coroutine_factory, api_client=self.api_client, main_event_loop=main_event_loop)
                                                                                                        ^^^^^^^^^^^^^^^
NameError: name 'main_event_loop' is not defined
2025-06-25 16:53:36,294 - ultibot_ui.widgets.portfolio_widget - WARNING - PortfolioWidget: user_id no está disponible. No se puede actualizar el portafolio.
2025-06-25 16:53:51,301 - ultibot_ui.widgets.portfolio_widget - WARNING - PortfolioWidget: user_id no está disponible. No se puede actualizar el portafolio.
2025-06-25 16:54:06,288 - ultibot_ui.widgets.portfolio_widget - WARNING - PortfolioWidget: user_id no está disponible. No se puede actualizar el portafolio.
2025-06-25 16:56:46,220 - asyncio - DEBUG - Using proactor: _IocpProactor
2025-06-25 16:56:46,222 - qasync._windows._EventPoller - DEBUG - Starting (proactor: <_IocpProactor overlapped#=0 result#=0>)...
2025-06-25 16:56:46,223 - qasync._windows._EventWorker - DEBUG - Thread started
2025-06-25 16:56:46,223 - __main__ - INFO - Initializing or finding application window...
2025-06-25 16:56:46,223 - __main__ - INFO - No existing MainWindow found. Creating a new one.
2025-06-25 16:56:46,223 - __main__ - INFO - Stylesheet loaded successfully.
2025-06-25 16:56:46,224 - ultibot_ui.services.api_client - DEBUG - APIClient singleton: base URL establecida en http://127.0.0.1:8000
2025-06-25 16:56:46,442 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client inicializado con base URL: http://127.0.0.1:8000
2025-06-25 16:56:46,466 - ultibot_ui.services.trading_mode_state - INFO - TradingModeStateManager initialized with mode: paper
2025-06-25 16:56:46,466 - ultibot_ui.services.trading_mode_state - INFO - Created global trading mode state manager
2025-06-25 16:56:46,744 - ultibot_ui.widgets.portfolio_widget - INFO - Timer de actualización del portafolio iniciado.
2025-06-25 16:56:46,747 - ultibot_ui.widgets.chart_widget - INFO - Solicitando datos para BTCUSDT - 1h usando ApiWorker
2025-06-25 16:56:46,748 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000002CF1CF638D0>, coroutine_factory: set
2025-06-25 16:56:46,772 - ultibot_ui.widgets.market_data_widget - INFO - Cargando configuración inicial para MarketDataWidget...
2025-06-25 16:56:46,773 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000002CF1CF638D0>, coroutine_factory: set
2025-06-25 16:56:46,774 - ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: __init__ called.
2025-06-25 16:56:46,775 - ultibot_ui.views.opportunities_view - DEBUG - OpportunitiesView initialized.
2025-06-25 16:56:46,804 - ultibot_ui.windows.history_view - INFO - HistoryView inicializada.
2025-06-25 16:56:46,813 - ultibot_ui.views.orders_view - INFO - OrdersView initialized.
2025-06-25 16:56:46,821 - ultibot_ui.views.trading_terminal_view - INFO - Price chart initialized for TradingTerminalView.
2025-06-25 16:56:46,821 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView initialized.
2025-06-25 16:56:46,824 - ultibot_ui.windows.main_window - INFO - Central widget y vistas configuradas.
2025-06-25 16:56:46,846 - ultibot_ui.windows.main_window - INFO - MainWindow inicializada y visible.
2025-06-25 16:56:46,965 - __main__ - INFO - Main window created and shown (loading configuration asynchronously).
2025-06-25 16:56:46,966 - __main__ - INFO - Fetching initial user configuration asynchronously...
2025-06-25 16:56:46,966 - ultibot_ui.windows.main_window - INFO - Fetching initial user configuration asynchronously (from MainWindow)...
2025-06-25 16:56:46,967 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000002CF1CF638D0>, coroutine_factory: set
2025-06-25 16:56:46,969 - ultibot_ui.workers - DEBUG - ApiWorker: run method started in thread InitialConfigWorkerThread.
2025-06-25 16:56:46,969 - ultibot_ui.workers - DEBUG - ApiWorker: Coroutine scheduled on the main event loop.
2025-06-25 16:56:47,034 - ultibot_ui.services.api_client - INFO - Obteniendo configuración de usuario.
2025-06-25 16:56:47,034 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 16:56:47,034 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 16:56:47,045 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 16:56:49,061 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF1CF6AFC0>, 0, 0, <_overlapped.Overlapped object at 0x000002CF1CE86C70>)]
2025-06-25 16:56:49,061 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF1CF6AFC0>
2025-06-25 16:56:49,061 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\windows_events.py", line 633, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] El equipo remoto rechazó la conexión de red
2025-06-25 16:56:49,064 - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-06-25 16:56:49,064 - ultibot_ui.services.api_client - WARNING - Error de red para GET http://127.0.0.1:8000/api/v1/config: All connection attempts failed. Re-lanzando para posible reintento.
2025-06-25 16:56:49,064 - ultibot_ui.services.api_client - WARNING - Fallo de conexión, reintentando en 1.00s... (Intento 1) para GET
2025-06-25 16:56:50,060 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 16:56:50,061 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 16:56:50,062 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 16:56:52,095 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF207E7A60>, 0, 0, <_overlapped.Overlapped object at 0x000002CF1CE86DF0>)]
2025-06-25 16:56:52,095 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF207E7A60>
2025-06-25 16:56:52,095 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\windows_events.py", line 633, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] El equipo remoto rechazó la conexión de red
2025-06-25 16:56:52,095 - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-06-25 16:56:52,095 - ultibot_ui.services.api_client - WARNING - Error de red para GET http://127.0.0.1:8000/api/v1/config: All connection attempts failed. Re-lanzando para posible reintento.
2025-06-25 16:56:52,095 - ultibot_ui.services.api_client - WARNING - Fallo de conexión, reintentando en 3.00s... (Intento 2) para GET
2025-06-25 16:56:54,094 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 16:56:54,095 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 16:56:54,095 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 16:56:56,128 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF207E7B00>, 0, 0, <_overlapped.Overlapped object at 0x000002CF1CE876F0>)]
2025-06-25 16:56:56,130 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF207E7B00>
2025-06-25 16:56:56,130 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\windows_events.py", line 633, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] El equipo remoto rechazó la conexión de red
2025-06-25 16:56:56,130 - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-06-25 16:56:56,130 - ultibot_ui.services.api_client - WARNING - Error de red para GET http://127.0.0.1:8000/api/v1/config: All connection attempts failed. Re-lanzando para posible reintento.
2025-06-25 16:56:56,130 - ultibot_ui.services.api_client - WARNING - Fallo de conexión, reintentando en 7.00s... (Intento 3) para GET
2025-06-25 16:57:00,127 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 16:57:00,128 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 16:57:00,129 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 16:57:01,760 - ultibot_ui.widgets.portfolio_widget - WARNING - PortfolioWidget: user_id no está disponible. No se puede actualizar el portafolio.
2025-06-25 16:57:02,160 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF207E7A60>, 0, 0, <_overlapped.Overlapped object at 0x000002CF1CE870F0>)]
2025-06-25 16:57:02,161 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF207E7A60>
2025-06-25 16:57:02,162 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\windows_events.py", line 633, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] El equipo remoto rechazó la conexión de red
2025-06-25 16:57:02,162 - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-06-25 16:57:02,162 - ultibot_ui.services.api_client - WARNING - Error de red para GET http://127.0.0.1:8000/api/v1/config: All connection attempts failed. Re-lanzando para posible reintento.
2025-06-25 16:57:02,162 - ultibot_ui.services.api_client - WARNING - Fallo de conexión, reintentando en 15.00s... (Intento 4) para GET
2025-06-25 16:57:10,178 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 16:57:10,178 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 16:57:10,179 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 16:57:12,211 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF3B319300>, 0, 0, <_overlapped.Overlapped object at 0x000002CF1CE86C70>)]
2025-06-25 16:57:12,212 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF3B319300>
2025-06-25 16:57:12,212 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\windows_events.py", line 633, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] El equipo remoto rechazó la conexión de red
2025-06-25 16:57:12,212 - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-06-25 16:57:12,214 - ultibot_ui.services.api_client - WARNING - Error de red para GET http://127.0.0.1:8000/api/v1/config: All connection attempts failed. Re-lanzando para posible reintento.
2025-06-25 16:57:12,214 - ultibot_ui.workers - DEBUG - ApiWorker: Task Future-3088534124048 finished.
2025-06-25 16:57:12,214 - ultibot_ui.workers - ERROR - ApiWorker: Generic Exception in task: RetryError[<Future at 0x2cf2082c250 state=finished raised ConnectError>]
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_transports\default.py", line 72, in map_httpcore_exceptions
    yield
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_transports\default.py", line 377, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
  File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: All connection attempts failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 104, in _make_request
    response = await self._client.request(method, endpoint, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_client.py", line 1585, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_client.py", line 1674, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_client.py", line 1702, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_client.py", line 1739, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_client.py", line 1776, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_transports\default.py", line 376, in handle_async_request
    with map_httpcore_exceptions():
  File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_transports\default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: All connection attempts failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\workers.py", line 75, in _on_task_done
    result = future.result()
             ^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\concurrent\futures\_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\concurrent\futures\_base.py", line 401, in __get_result
    raise self._exception
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 132, in get_user_configuration
    return await self._make_request("GET", "/api/v1/config")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\tenacity\__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x2cf2082c250 state=finished raised ConnectError>]
2025-06-25 16:57:12,256 - ultibot_ui.workers - DEBUG - ApiWorker: Emitting 'finished' signal.
2025-06-25 16:57:12,257 - ultibot_ui.windows.main_window - CRITICAL - Error validating initial configuration or fetching: RetryError[<Future at 0x2cf2082c250 state=finished raised ConnectError>]
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\main_window.py", line 329, in fetch_initial_user_configuration_async
    config_dict = await future
                  ^^^^^^^^^^^^
Exception: RetryError[<Future at 0x2cf2082c250 state=finished raised ConnectError>]
2025-06-25 16:57:16,777 - ultibot_ui.views.opportunities_view - INFO - Fetching Gemini IA opportunities.
2025-06-25 16:57:16,777 - ultibot_ui.views.opportunities_view - DEBUG - Creating ApiWorker.
2025-06-25 16:57:16,777 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000002CF1CF638D0>, coroutine_factory: set
2025-06-25 16:57:16,779 - ultibot_ui.widgets.portfolio_widget - WARNING - PortfolioWidget: user_id no está disponible. No se puede actualizar el portafolio.
2025-06-25 16:57:18,384 - __main__ - CRITICAL - An unexpected error occurred during configuration fetch: RetryError[<Future at 0x2cf2082c250 state=finished raised ConnectError>]
Traceback (most recent call last):
  File "c:\Users\zamor\UltiBotInversiones\src\ultibot_ui\main.py", line 103, in _main_async
    user_config = await main_window.fetch_initial_user_configuration_async()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\main_window.py", line 329, in fetch_initial_user_configuration_async
    config_dict = await future
                  ^^^^^^^^^^^^
Exception: RetryError[<Future at 0x2cf2082c250 state=finished raised ConnectError>]
2025-06-25 16:57:19,396 - ultibot_ui.windows.main_window - INFO - MainWindow: Post-show initialization started.
2025-06-25 16:57:19,396 - ultibot_ui.windows.main_window - INFO - Fetching initial user configuration asynchronously (from MainWindow)...
2025-06-25 16:57:19,396 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000002CF1CF638D0>, coroutine_factory: set
2025-06-25 16:57:19,403 - ultibot_ui.workers - DEBUG - ApiWorker: run method started in thread InitialConfigWorkerThread.
2025-06-25 16:57:19,403 - ultibot_ui.workers - DEBUG - ApiWorker: Coroutine scheduled on the main event loop.
2025-06-25 16:57:19,403 - ultibot_ui.services.api_client - INFO - Obteniendo configuración de usuario.
2025-06-25 16:57:19,404 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 16:57:19,404 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 16:57:19,404 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 16:57:21,413 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF207E7880>, 0, 0, <_overlapped.Overlapped object at 0x000002CF208A0330>)]
2025-06-25 16:57:21,414 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF207E7880>
2025-06-25 16:57:21,414 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\windows_events.py", line 633, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] El equipo remoto rechazó la conexión de red
2025-06-25 16:57:21,415 - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-06-25 16:57:21,415 - ultibot_ui.services.api_client - WARNING - Error de red para GET http://127.0.0.1:8000/api/v1/config: All connection attempts failed. Re-lanzando para posible reintento.
2025-06-25 16:57:21,415 - ultibot_ui.services.api_client - WARNING - Fallo de conexión, reintentando en 1.00s... (Intento 1) para GET
2025-06-25 16:57:22,430 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 16:57:22,431 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 16:57:22,432 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 16:57:23,304 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: dashboard
2025-06-25 16:57:23,796 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: terminal
2025-06-25 16:57:24,449 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF208554E0>, 0, 0, <_overlapped.Overlapped object at 0x000002CF208A04B0>)]
2025-06-25 16:57:24,450 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF208554E0>
2025-06-25 16:57:24,450 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\windows_events.py", line 633, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] El equipo remoto rechazó la conexión de red
2025-06-25 16:57:24,451 - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-06-25 16:57:24,452 - ultibot_ui.services.api_client - WARNING - Error de red para GET http://127.0.0.1:8000/api/v1/config: All connection attempts failed. Re-lanzando para posible reintento.
2025-06-25 16:57:24,452 - ultibot_ui.services.api_client - WARNING - Fallo de conexión, reintentando en 3.00s... (Intento 2) para GET
2025-06-25 16:57:25,214 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: opportunities
2025-06-25 16:57:26,462 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 16:57:26,463 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 16:57:26,464 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 16:57:28,174 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: portfolio
2025-06-25 16:57:28,511 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF20855800>, 0, 0, <_overlapped.Overlapped object at 0x000002CF208A0630>)]
2025-06-25 16:57:28,512 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF20855800>
2025-06-25 16:57:28,512 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\windows_events.py", line 633, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] El equipo remoto rechazó la conexión de red
2025-06-25 16:57:28,513 - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-06-25 16:57:28,514 - ultibot_ui.services.api_client - WARNING - Error de red para GET http://127.0.0.1:8000/api/v1/config: All connection attempts failed. Re-lanzando para posible reintento.
2025-06-25 16:57:28,515 - ultibot_ui.services.api_client - WARNING - Fallo de conexión, reintentando en 7.00s... (Intento 3) para GET
2025-06-25 16:57:30,554 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: strategies
2025-06-25 16:57:31,795 - ultibot_ui.widgets.portfolio_widget - WARNING - PortfolioWidget: user_id no está disponible. No se puede actualizar el portafolio.
2025-06-25 16:57:32,354 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: history
2025-06-25 16:57:32,527 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 16:57:32,527 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 16:57:32,529 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 16:57:34,085 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: settings
2025-06-25 16:57:34,563 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF20855620>, 0, 0, <_overlapped.Overlapped object at 0x000002CF208A1230>)]
2025-06-25 16:57:34,563 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x000002CF20855620>
2025-06-25 16:57:34,564 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\windows_events.py", line 633, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] El equipo remoto rechazó la conexión de red
2025-06-25 16:57:34,564 - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-06-25 16:57:34,564 - ultibot_ui.services.api_client - WARNING - Error de red para GET http://127.0.0.1:8000/api/v1/config: All connection attempts failed. Re-lanzando para posible reintento.
2025-06-25 16:57:34,564 - ultibot_ui.services.api_client - WARNING - Fallo de conexión, reintentando en 15.00s... (Intento 4) para GET
2025-06-25 16:57:41,164 - ultibot_ui.windows.main_window - INFO - Cleaning up MainWindow resources. Stopping 4 active threads...
2025-06-25 16:57:41,164 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: Iniciando limpieza de tareas.
2025-06-25 16:57:41,164 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Iniciando limpieza.
2025-06-25 16:57:41,164 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Limpieza completada.
2025-06-25 16:57:41,164 - ultibot_ui.widgets.chart_widget - INFO - ChartWidget: Limpieza completada.
2025-06-25 16:57:41,164 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: Limpieza completada.
2025-06-25 16:57:41,164 - ultibot_ui.views.opportunities_view - INFO - Cleaning up OpportunitiesView...
2025-06-25 16:57:41,164 - ultibot_ui.views.opportunities_view - INFO - OpportunitiesView cleanup finished.
2025-06-25 16:57:41,164 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleaning up...
2025-06-25 16:57:41,164 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleanup finished.
2025-06-25 16:57:41,164 - ultibot_ui.widgets.paper_trading_report_widget - INFO - PaperTradingReportWidget cleanup: No hay acciones que tomar.
2025-06-25 16:57:41,164 - ultibot_ui.windows.history_view - INFO - HistoryView cleanup completado
2025-06-25 16:57:41,164 - ultibot_ui.windows.settings_view - INFO - SettingsView: Cleaning up. Stopping 0 active threads...
2025-06-25 16:57:41,164 - ultibot_ui.windows.settings_view - INFO - SettingsView: Cleanup complete.
2025-06-25 16:57:41,164 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Cleanup initiated. Threads are managed by MainWindow.
2025-06-25 16:57:41,164 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Cleanup finished.
2025-06-25 16:57:41,164 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread ChartWorkerThread_BTCUSDT_1h...
2025-06-25 16:57:41,164 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread unnamed...
2025-06-25 16:57:41,164 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread OpportunitiesApiWorkerThread...
2025-06-25 16:57:41,164 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread InitialConfigWorkerThread...
2025-06-25 16:57:41,174 - ultibot_ui.windows.main_window - INFO - MainWindow cleanup finished.
2025-06-25 16:57:41,188 - __main__ - INFO - aboutToQuit signal received, scheduling resource cleanup.
2025-06-25 16:57:41,188 - ultibot_ui.windows.main_window - INFO - Cleaning up MainWindow resources. Stopping 0 active threads...
2025-06-25 16:57:41,188 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: Iniciando limpieza de tareas.
2025-06-25 16:57:41,188 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Iniciando limpieza.
2025-06-25 16:57:41,188 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Limpieza completada.
2025-06-25 16:57:41,188 - ultibot_ui.widgets.chart_widget - INFO - ChartWidget: Limpieza completada.
2025-06-25 16:57:41,188 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: Limpieza completada.
2025-06-25 16:57:41,188 - ultibot_ui.views.opportunities_view - INFO - Cleaning up OpportunitiesView...
2025-06-25 16:57:41,188 - ultibot_ui.views.opportunities_view - INFO - OpportunitiesView cleanup finished.
2025-06-25 16:57:41,188 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleaning up...
2025-06-25 16:57:41,188 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleanup finished.
2025-06-25 16:57:41,188 - ultibot_ui.widgets.paper_trading_report_widget - INFO - PaperTradingReportWidget cleanup: No hay acciones que tomar.
2025-06-25 16:57:41,194 - ultibot_ui.windows.history_view - INFO - HistoryView cleanup completado
2025-06-25 16:57:41,195 - ultibot_ui.windows.settings_view - INFO - SettingsView: Cleaning up. Stopping 0 active threads...
2025-06-25 16:57:41,195 - ultibot_ui.windows.settings_view - INFO - SettingsView: Cleanup complete.
2025-06-25 16:57:41,195 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Cleanup initiated. Threads are managed by MainWindow.
2025-06-25 16:57:41,195 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Cleanup finished.
2025-06-25 16:57:41,196 - ultibot_ui.windows.main_window - INFO - MainWindow cleanup finished.
2025-06-25 16:57:41,196 - __main__ - WARNING - UltiBotAPIClient instance not found for cleanup.
2025-06-25 16:57:41,197 - qasync._windows._EventPoller - DEBUG - Stopping worker thread...
2025-06-25 16:57:41,199 - qasync._windows._EventWorker - DEBUG - Exiting thread
2025-06-25 16:57:41,202 - qasync._windows._IocpProactor - DEBUG - Closing
2025-06-25 16:57:41,202 - __main__ - INFO - Iniciando cierre de la aplicación y limpieza de tareas pendientes.
2025-06-25 16:57:41,202 - __main__ - WARNING - El bucle de eventos no estaba corriendo o no se encontró durante el cierre.
2025-06-25 16:57:41,203 - __main__ - INFO - Aplicación cerrada.
2025-06-25 16:57:41,281 - qasync._QEventLoop - ERROR - Task was destroyed but it is pending!
task: <Task pending name='Task-8' coro=<MainWindow.post_show_initialization() done, defined at C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\main_window.py:76> wait_for=<Future pending cb=[Task.task_wakeup()]>>
2025-06-25 17:10:52,515 - asyncio - DEBUG - Using proactor: _IocpProactor
2025-06-25 17:10:52,520 - qasync._windows._EventPoller - DEBUG - Starting (proactor: <_IocpProactor overlapped#=0 result#=0>)...
2025-06-25 17:10:52,520 - qasync._windows._EventWorker - DEBUG - Thread started
2025-06-25 17:10:52,520 - __main__ - INFO - Initializing or finding application window...
2025-06-25 17:10:52,520 - __main__ - INFO - No existing MainWindow found. Creating a new one.
2025-06-25 17:10:52,520 - __main__ - INFO - Stylesheet loaded successfully.
2025-06-25 17:10:52,520 - ultibot_ui.services.api_client - DEBUG - APIClient singleton: base URL establecida en http://127.0.0.1:8000
2025-06-25 17:10:52,710 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client inicializado con base URL: http://127.0.0.1:8000
2025-06-25 17:10:52,734 - ultibot_ui.services.trading_mode_state - INFO - TradingModeStateManager initialized with mode: paper
2025-06-25 17:10:52,734 - ultibot_ui.services.trading_mode_state - INFO - Created global trading mode state manager
2025-06-25 17:10:53,009 - ultibot_ui.widgets.portfolio_widget - INFO - Timer de actualización del portafolio iniciado.
2025-06-25 17:10:53,015 - ultibot_ui.widgets.chart_widget - INFO - Solicitando datos para BTCUSDT - 1h usando ApiWorker
2025-06-25 17:10:53,015 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x00000216A22B4590>, coroutine_factory: set
2025-06-25 17:10:53,039 - ultibot_ui.widgets.market_data_widget - INFO - Cargando configuración inicial para MarketDataWidget...
2025-06-25 17:10:53,040 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x00000216A22B4590>, coroutine_factory: set
2025-06-25 17:10:53,041 - ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: __init__ called.
2025-06-25 17:10:53,042 - ultibot_ui.views.opportunities_view - DEBUG - OpportunitiesView initialized.
2025-06-25 17:10:53,074 - ultibot_ui.windows.history_view - INFO - HistoryView inicializada.
2025-06-25 17:10:53,080 - ultibot_ui.views.orders_view - INFO - OrdersView initialized.
2025-06-25 17:10:53,089 - ultibot_ui.views.trading_terminal_view - INFO - Price chart initialized for TradingTerminalView.
2025-06-25 17:10:53,089 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView initialized.
2025-06-25 17:10:53,091 - ultibot_ui.windows.main_window - INFO - Central widget y vistas configuradas.
2025-06-25 17:10:53,100 - ultibot_ui.windows.main_window - INFO - MainWindow inicializada y visible.
2025-06-25 17:10:53,210 - __main__ - INFO - Main window created and shown (loading configuration asynchronously).
2025-06-25 17:10:53,210 - __main__ - INFO - Fetching initial user configuration asynchronously...
2025-06-25 17:10:53,210 - ultibot_ui.windows.main_window - INFO - Fetching initial user configuration asynchronously (from MainWindow)...
2025-06-25 17:10:53,215 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x00000216A22B4590>, coroutine_factory: set
2025-06-25 17:10:53,216 - ultibot_ui.workers - DEBUG - ApiWorker: run method started in thread InitialConfigWorkerThread.
2025-06-25 17:10:53,217 - ultibot_ui.workers - DEBUG - ApiWorker: Coroutine scheduled on the main event loop.
2025-06-25 17:10:53,259 - ultibot_ui.services.api_client - INFO - Obteniendo configuración de usuario.
2025-06-25 17:10:53,266 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:10:53,266 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 17:10:53,269 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 17:10:55,283 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000216A229AF20>, 0, 0, <_overlapped.Overlapped object at 0x00000216A21A71B0>)]
2025-06-25 17:10:55,283 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000216A229AF20>
2025-06-25 17:10:55,283 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\windows_events.py", line 633, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] El equipo remoto rechazó la conexión de red
2025-06-25 17:10:55,283 - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-06-25 17:10:55,283 - ultibot_ui.services.api_client - WARNING - Error de red para GET http://127.0.0.1:8000/api/v1/config: All connection attempts failed. Re-lanzando para posible reintento.
2025-06-25 17:10:55,283 - ultibot_ui.services.api_client - WARNING - Fallo de conexión, reintentando en 1.00s... (Intento 1) para GET
2025-06-25 17:10:56,284 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:10:56,284 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 17:10:56,284 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 17:10:58,316 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000216A5C0FC40>, 0, 0, <_overlapped.Overlapped object at 0x00000216A21A7330>)]
2025-06-25 17:10:58,317 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000216A5C0FC40>
2025-06-25 17:10:58,317 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\windows_events.py", line 633, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] El equipo remoto rechazó la conexión de red
2025-06-25 17:10:58,317 - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-06-25 17:10:58,317 - ultibot_ui.services.api_client - WARNING - Error de red para GET http://127.0.0.1:8000/api/v1/config: All connection attempts failed. Re-lanzando para posible reintento.
2025-06-25 17:10:58,320 - ultibot_ui.services.api_client - WARNING - Fallo de conexión, reintentando en 3.00s... (Intento 2) para GET
2025-06-25 17:11:00,316 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:11:00,316 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 17:11:00,316 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 17:11:02,310 - ultibot_ui.widgets.portfolio_widget - WARNING - PortfolioWidget: user_id no está disponible. No se puede actualizar el portafolio.
2025-06-25 17:11:02,351 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000216A5C0FCE0>, 0, 0, <_overlapped.Overlapped object at 0x00000216A21A7B70>)]
2025-06-25 17:11:02,351 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000216A5C0FCE0>
2025-06-25 17:11:02,351 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\windows_events.py", line 633, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] El equipo remoto rechazó la conexión de red
2025-06-25 17:11:02,351 - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-06-25 17:11:02,351 - ultibot_ui.services.api_client - WARNING - Error de red para GET http://127.0.0.1:8000/api/v1/config: All connection attempts failed. Re-lanzando para posible reintento.
2025-06-25 17:11:02,351 - ultibot_ui.services.api_client - WARNING - Fallo de conexión, reintentando en 7.00s... (Intento 3) para GET
2025-06-25 17:11:06,352 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:11:06,353 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 17:11:06,354 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 17:11:07,999 - ultibot_ui.widgets.portfolio_widget - WARNING - PortfolioWidget: user_id no está disponible. No se puede actualizar el portafolio.
2025-06-25 17:11:08,372 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000216A4DE1120>, 0, 0, <_overlapped.Overlapped object at 0x00000216A21A7570>)]
2025-06-25 17:11:08,373 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000216A4DE1120>
2025-06-25 17:11:08,373 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\windows_events.py", line 633, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] El equipo remoto rechazó la conexión de red
2025-06-25 17:11:08,374 - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-06-25 17:11:08,375 - ultibot_ui.services.api_client - WARNING - Error de red para GET http://127.0.0.1:8000/api/v1/config: All connection attempts failed. Re-lanzando para posible reintento.
2025-06-25 17:11:08,375 - ultibot_ui.services.api_client - WARNING - Fallo de conexión, reintentando en 15.00s... (Intento 4) para GET
2025-06-25 17:11:08,970 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: terminal
2025-06-25 17:11:10,101 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: opportunities
2025-06-25 17:11:11,426 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: portfolio
2025-06-25 17:11:13,992 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: strategies
2025-06-25 17:11:16,382 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:11:16,383 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 17:11:16,384 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 17:11:16,490 - ultibot_ui.views.opportunities_view - INFO - Fetching Gemini IA opportunities.
2025-06-25 17:11:16,500 - ultibot_ui.views.opportunities_view - DEBUG - Creating ApiWorker.
2025-06-25 17:11:16,500 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x00000216A22B4590>, coroutine_factory: set
2025-06-25 17:11:18,401 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000216A4DE1260>, 0, 0, <_overlapped.Overlapped object at 0x00000216A4E243F0>)]
2025-06-25 17:11:18,401 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000216A4DE1260>
2025-06-25 17:11:18,401 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\windows_events.py", line 633, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] El equipo remoto rechazó la conexión de red
2025-06-25 17:11:18,401 - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-06-25 17:11:18,401 - ultibot_ui.services.api_client - WARNING - Error de red para GET http://127.0.0.1:8000/api/v1/config: All connection attempts failed. Re-lanzando para posible reintento.
2025-06-25 17:11:18,401 - ultibot_ui.workers - DEBUG - ApiWorker: Task Future-2296201620176 finished.
2025-06-25 17:11:18,401 - ultibot_ui.workers - ERROR - ApiWorker: Generic Exception in task: RetryError[<Future at 0x216a5c49dd0 state=finished raised ConnectError>]
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_transports\default.py", line 72, in map_httpcore_exceptions
    yield
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_transports\default.py", line 377, in handle_async_request
    resp = await self._pool.handle_async_request(req)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 256, in handle_async_request
    raise exc from None
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpcore\_async\connection_pool.py", line 236, in handle_async_request
    response = await connection.handle_async_request(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpcore\_async\connection.py", line 101, in handle_async_request
    raise exc
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpcore\_async\connection.py", line 78, in handle_async_request
    stream = await self._connect(request)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpcore\_async\connection.py", line 124, in _connect
    stream = await self._network_backend.connect_tcp(**kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpcore\_backends\auto.py", line 31, in connect_tcp
    return await self._backend.connect_tcp(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpcore\_backends\anyio.py", line 113, in connect_tcp
    with map_exceptions(exc_map):
  File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: All connection attempts failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\tenacity\asyncio\__init__.py", line 114, in __call__
    result = await fn(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 104, in _make_request
    response = await self._client.request(method, endpoint, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_client.py", line 1585, in request
    return await self.send(request, auth=auth, follow_redirects=follow_redirects)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_client.py", line 1674, in send
    response = await self._send_handling_auth(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_client.py", line 1702, in _send_handling_auth
    response = await self._send_handling_redirects(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_client.py", line 1739, in _send_handling_redirects
    response = await self._send_single_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_client.py", line 1776, in _send_single_request
    response = await transport.handle_async_request(request)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_transports\default.py", line 376, in handle_async_request
    with map_httpcore_exceptions():
  File "C:\Program Files\Python311\Lib\contextlib.py", line 158, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\httpx\_transports\default.py", line 89, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: All connection attempts failed

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\workers.py", line 75, in _on_task_done
    result = future.result()
             ^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\concurrent\futures\_base.py", line 449, in result
    return self.__get_result()
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\concurrent\futures\_base.py", line 401, in __get_result
    raise self._exception
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\services\api_client.py", line 132, in get_user_configuration
    return await self._make_request("GET", "/api/v1/config")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\tenacity\asyncio\__init__.py", line 189, in async_wrapped
    return await copy(fn, *args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\tenacity\asyncio\__init__.py", line 111, in __call__
    do = await self.iter(retry_state=retry_state)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\tenacity\asyncio\__init__.py", line 153, in iter
    result = await action(retry_state)
             ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\tenacity\_utils.py", line 99, in inner
    return call(*args, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\tenacity\__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x216a5c49dd0 state=finished raised ConnectError>]
2025-06-25 17:11:18,401 - ultibot_ui.workers - DEBUG - ApiWorker: Emitting 'finished' signal.
2025-06-25 17:11:18,410 - ultibot_ui.windows.main_window - CRITICAL - Error validating initial configuration or fetching: RetryError[<Future at 0x216a5c49dd0 state=finished raised ConnectError>]
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\main_window.py", line 329, in fetch_initial_user_configuration_async
    config_dict = await future
                  ^^^^^^^^^^^^
Exception: RetryError[<Future at 0x216a5c49dd0 state=finished raised ConnectError>]
2025-06-25 17:11:20,874 - __main__ - CRITICAL - An unexpected error occurred during configuration fetch: RetryError[<Future at 0x216a5c49dd0 state=finished raised ConnectError>]
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\main.py", line 103, in _main_async
    user_config = await main_window.fetch_initial_user_configuration_async()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\main_window.py", line 329, in fetch_initial_user_configuration_async
    config_dict = await future
                  ^^^^^^^^^^^^
Exception: RetryError[<Future at 0x216a5c49dd0 state=finished raised ConnectError>]
2025-06-25 17:11:22,244 - ultibot_ui.windows.main_window - INFO - MainWindow: Post-show initialization started.
2025-06-25 17:11:22,245 - ultibot_ui.windows.main_window - INFO - Fetching initial user configuration asynchronously (from MainWindow)...
2025-06-25 17:11:22,245 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x00000216A22B4590>, coroutine_factory: set
2025-06-25 17:11:22,246 - ultibot_ui.workers - DEBUG - ApiWorker: run method started in thread InitialConfigWorkerThread.
2025-06-25 17:11:22,247 - ultibot_ui.workers - DEBUG - ApiWorker: Coroutine scheduled on the main event loop.
2025-06-25 17:11:22,251 - ultibot_ui.services.api_client - INFO - Obteniendo configuración de usuario.
2025-06-25 17:11:22,251 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:11:22,251 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 17:11:22,251 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 17:11:23,000 - ultibot_ui.widgets.portfolio_widget - WARNING - PortfolioWidget: user_id no está disponible. No se puede actualizar el portafolio.
2025-06-25 17:11:23,050 - ultibot_ui.views.opportunities_view - INFO - Fetching Gemini IA opportunities.
2025-06-25 17:11:23,051 - ultibot_ui.views.opportunities_view - DEBUG - Creating ApiWorker.
2025-06-25 17:11:23,051 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x00000216A22B4590>, coroutine_factory: set
2025-06-25 17:11:23,083 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: history
2025-06-25 17:11:23,823 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: settings
2025-06-25 17:11:24,283 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x00000216A5C0FF60>, 0, 0, <_overlapped.Overlapped object at 0x00000216A4E24B70>)]
2025-06-25 17:11:24,284 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x00000216A5C0FF60>
2025-06-25 17:11:24,284 - qasync._QEventLoop - DEBUG - Event callback failed
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\qasync\_windows.py", line 43, in _process_events
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Program Files\Python311\Lib\asyncio\windows_events.py", line 633, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225] El equipo remoto rechazó la conexión de red
2025-06-25 17:11:24,284 - httpcore.connection - DEBUG - connect_tcp.failed exception=ConnectError(OSError('All connection attempts failed'))
2025-06-25 17:11:24,284 - ultibot_ui.services.api_client - WARNING - Error de red para GET http://127.0.0.1:8000/api/v1/config: All connection attempts failed. Re-lanzando para posible reintento.
2025-06-25 17:11:24,284 - ultibot_ui.services.api_client - WARNING - Fallo de conexión, reintentando en 1.00s... (Intento 1) para GET
2025-06-25 17:11:25,284 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:11:25,284 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 17:11:25,284 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 17:11:25,830 - ultibot_ui.windows.main_window - INFO - Cleaning up MainWindow resources. Stopping 5 active threads...
2025-06-25 17:11:25,830 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: Iniciando limpieza de tareas.
2025-06-25 17:11:25,832 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Iniciando limpieza.
2025-06-25 17:11:25,832 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Limpieza completada.
2025-06-25 17:11:25,832 - ultibot_ui.widgets.chart_widget - INFO - ChartWidget: Limpieza completada.
2025-06-25 17:11:25,834 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: Limpieza completada.
2025-06-25 17:11:25,834 - ultibot_ui.views.opportunities_view - INFO - Cleaning up OpportunitiesView...
2025-06-25 17:11:25,835 - ultibot_ui.views.opportunities_view - INFO - OpportunitiesView cleanup finished.
2025-06-25 17:11:25,835 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleaning up...
2025-06-25 17:11:25,835 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleanup finished.
2025-06-25 17:11:25,836 - ultibot_ui.widgets.paper_trading_report_widget - INFO - PaperTradingReportWidget cleanup: No hay acciones que tomar.
2025-06-25 17:11:25,836 - ultibot_ui.windows.history_view - INFO - HistoryView cleanup completado
2025-06-25 17:11:25,836 - ultibot_ui.windows.settings_view - INFO - SettingsView: Cleaning up. Stopping 0 active threads...
2025-06-25 17:11:25,837 - ultibot_ui.windows.settings_view - INFO - SettingsView: Cleanup complete.
2025-06-25 17:11:25,837 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Cleanup initiated. Threads are managed by MainWindow.
2025-06-25 17:11:25,837 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Cleanup finished.
2025-06-25 17:11:25,837 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread ChartWorkerThread_BTCUSDT_1h...
2025-06-25 17:11:25,838 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread unnamed...
2025-06-25 17:11:25,840 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread OpportunitiesApiWorkerThread...
2025-06-25 17:11:25,841 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread InitialConfigWorkerThread...
2025-06-25 17:11:25,842 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread OpportunitiesApiWorkerThread...
2025-06-25 17:11:25,843 - ultibot_ui.windows.main_window - INFO - MainWindow cleanup finished.
2025-06-25 17:11:25,858 - __main__ - INFO - aboutToQuit signal received, scheduling resource cleanup.
2025-06-25 17:11:25,860 - ultibot_ui.windows.main_window - INFO - Cleaning up MainWindow resources. Stopping 0 active threads...
2025-06-25 17:11:25,861 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: Iniciando limpieza de tareas.
2025-06-25 17:11:25,861 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Iniciando limpieza.
2025-06-25 17:11:25,861 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Limpieza completada.
2025-06-25 17:11:25,861 - ultibot_ui.widgets.chart_widget - INFO - ChartWidget: Limpieza completada.
2025-06-25 17:11:25,862 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: Limpieza completada.
2025-06-25 17:11:25,862 - ultibot_ui.views.opportunities_view - INFO - Cleaning up OpportunitiesView...
2025-06-25 17:11:25,862 - ultibot_ui.views.opportunities_view - INFO - OpportunitiesView cleanup finished.
2025-06-25 17:11:25,862 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleaning up...
2025-06-25 17:11:25,863 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleanup finished.
2025-06-25 17:11:25,863 - ultibot_ui.widgets.paper_trading_report_widget - INFO - PaperTradingReportWidget cleanup: No hay acciones que tomar.
2025-06-25 17:11:25,863 - ultibot_ui.windows.history_view - INFO - HistoryView cleanup completado
2025-06-25 17:11:25,863 - ultibot_ui.windows.settings_view - INFO - SettingsView: Cleaning up. Stopping 0 active threads...
2025-06-25 17:11:25,863 - ultibot_ui.windows.settings_view - INFO - SettingsView: Cleanup complete.
2025-06-25 17:11:25,863 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Cleanup initiated. Threads are managed by MainWindow.
2025-06-25 17:11:25,863 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Cleanup finished.
2025-06-25 17:11:25,863 - ultibot_ui.windows.main_window - INFO - MainWindow cleanup finished.
2025-06-25 17:11:25,863 - __main__ - WARNING - UltiBotAPIClient instance not found for cleanup.
2025-06-25 17:11:25,863 - qasync._windows._EventPoller - DEBUG - Stopping worker thread...
2025-06-25 17:11:25,867 - qasync._windows._EventWorker - DEBUG - Exiting thread
2025-06-25 17:11:25,870 - qasync._windows._IocpProactor - DEBUG - Closing
2025-06-25 17:11:25,870 - __main__ - INFO - Iniciando cierre de la aplicación y limpieza de tareas pendientes.
2025-06-25 17:11:25,870 - __main__ - WARNING - El bucle de eventos no estaba corriendo o no se encontró durante el cierre.
2025-06-25 17:11:25,870 - __main__ - INFO - Aplicación cerrada.
2025-06-25 17:11:25,947 - qasync._QEventLoop - ERROR - Task was destroyed but it is pending!
task: <Task pending name='Task-8' coro=<MainWindow.post_show_initialization() done, defined at C:\Users\zamor\UltiBotInversiones\src\ultibot_ui\windows\main_window.py:76> wait_for=<Future pending cb=[Task.task_wakeup()]>>
2025-06-25 17:11:43,440 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-25 17:11:43,440 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-25 17:11:43,460 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-25 17:11:43,467 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicación creada.
2025-06-25 17:11:43,469 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-25 17:11:43,470 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-25 17:11:43,470 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:110 - Initializing dependency container...
2025-06-25 17:11:43,471 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:47 - Usando base de datos SQLite local: "sqlite+aiosqlite:///ultibot_local.db" # Modificado para usar SQLite local. Esta opción es para desarrollo.
2025-06-25 17:11:43,471 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:52 - Initializing database with URL: "sqlite+aiosqlite:///ultibot_local.db" # Modificado para usar SQLite local
2025-06-25 17:11:43,472 - ultibot_backend.dependencies - ERROR - [MainThread] - dependencies.py:68 - Failed to initialize database: Could not parse SQLAlchemy URL from given URL string
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 53, in initialize_database
    _db_engine = create_async_engine(
                 ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 120, in create_async_engine
    sync_engine = _create_engine(url, **kw)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 549, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\url.py", line 856, in make_url
    return _parse_url(name_or_url)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\url.py", line 922, in _parse_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Could not parse SQLAlchemy URL from given URL string
2025-06-25 17:11:43,489 - ultibot_backend - CRITICAL - [MainThread] - main.py:98 - Error fatal durante el arranque de la aplicación (lifespan): Could not parse SQLAlchemy URL from given URL string
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 94, in lifespan
    await container.initialize_services()
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 112, in initialize_services
    await initialize_database()
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 53, in initialize_database
    _db_engine = create_async_engine(
                 ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 120, in create_async_engine
    sync_engine = _create_engine(url, **kw)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 549, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\url.py", line 856, in make_url
    return _parse_url(name_or_url)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\url.py", line 922, in _parse_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Could not parse SQLAlchemy URL from given URL string
2025-06-25 17:13:25,887 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-25 17:13:25,887 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-25 17:13:25,907 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-25 17:13:25,908 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicación creada.
2025-06-25 17:13:25,909 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-25 17:13:25,909 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-25 17:13:25,910 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:110 - Initializing dependency container...
2025-06-25 17:13:25,910 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:47 - Using local SQLite database: "sqlite+aiosqlite:///ultibot_local.db" # Modificado para usar SQLite local. This is for development.
2025-06-25 17:13:25,910 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:52 - Initializing database with URL: "sqlite+aiosqlite:///ultibot_local.db" # Modificado para usar SQLite local
2025-06-25 17:13:25,910 - ultibot_backend.dependencies - ERROR - [MainThread] - dependencies.py:68 - Failed to initialize database: Could not parse SQLAlchemy URL from given URL string
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 53, in initialize_database
    _db_engine = create_async_engine(
                 ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 120, in create_async_engine
    sync_engine = _create_engine(url, **kw)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 549, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\url.py", line 856, in make_url
    return _parse_url(name_or_url)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\url.py", line 922, in _parse_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Could not parse SQLAlchemy URL from given URL string
2025-06-25 17:13:25,910 - ultibot_backend - CRITICAL - [MainThread] - main.py:98 - Error fatal durante el arranque de la aplicación (lifespan): Could not parse SQLAlchemy URL from given URL string
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 94, in lifespan
    await container.initialize_services()
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 112, in initialize_services
    await initialize_database()
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 53, in initialize_database
    _db_engine = create_async_engine(
                 ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 120, in create_async_engine
    sync_engine = _create_engine(url, **kw)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 549, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\url.py", line 856, in make_url
    return _parse_url(name_or_url)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\url.py", line 922, in _parse_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Could not parse SQLAlchemy URL from given URL string
2025-06-25 17:14:32,755 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-25 17:14:32,755 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-25 17:14:32,776 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-25 17:14:32,777 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicación creada.
2025-06-25 17:14:32,777 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-25 17:14:32,777 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-25 17:14:32,777 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:112 - Initializing dependency container...
2025-06-25 17:14:32,777 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:47 - Using local SQLite database: "sqlite+aiosqlite:///ultibot_local.db" # Modificado para usar SQLite local. This is for development.
2025-06-25 17:14:32,777 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:54 - Initializing database with URL: "sqlite+aiosqlite:///ultibot_local.db"
2025-06-25 17:14:32,777 - ultibot_backend.dependencies - ERROR - [MainThread] - dependencies.py:70 - Failed to initialize database: Could not parse SQLAlchemy URL from given URL string
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 55, in initialize_database
    _db_engine = create_async_engine(
                 ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 120, in create_async_engine
    sync_engine = _create_engine(url, **kw)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 549, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\url.py", line 856, in make_url
    return _parse_url(name_or_url)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\url.py", line 922, in _parse_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Could not parse SQLAlchemy URL from given URL string
2025-06-25 17:14:32,781 - ultibot_backend - CRITICAL - [MainThread] - main.py:98 - Error fatal durante el arranque de la aplicación (lifespan): Could not parse SQLAlchemy URL from given URL string
Traceback (most recent call last):
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\main.py", line 94, in lifespan
    await container.initialize_services()
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 114, in initialize_services
    await initialize_database()
  File "C:\Users\zamor\UltiBotInversiones\src\ultibot_backend\dependencies.py", line 55, in initialize_database
    _db_engine = create_async_engine(
                 ^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\engine.py", line 120, in create_async_engine
    sync_engine = _create_engine(url, **kw)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<string>", line 2, in create_engine
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\util\deprecations.py", line 281, in warned
    return fn(*args, **kwargs)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\create.py", line 549, in create_engine
    u = _url.make_url(url)
        ^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\url.py", line 856, in make_url
    return _parse_url(name_or_url)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zamor\UltiBotInversiones\.venv\Lib\site-packages\sqlalchemy\engine\url.py", line 922, in _parse_url
    raise exc.ArgumentError(
sqlalchemy.exc.ArgumentError: Could not parse SQLAlchemy URL from given URL string
2025-06-25 17:15:47,348 - ultibot_backend - INFO - [MainThread] - main.py:115 - Creando nueva instancia de FastAPI...
2025-06-25 17:15:47,349 - ultibot_backend - INFO - [MainThread] - main.py:158 - Registrando routers de la API...
2025-06-25 17:15:47,367 - ultibot_backend - INFO - [MainThread] - main.py:169 - Todos los routers han sido registrados.
2025-06-25 17:15:47,368 - ultibot_backend - INFO - [MainThread] - main.py:222 - Instancia global de la aplicación creada.
2025-06-25 17:15:47,368 - ultibot_backend - INFO - [MainThread] - main.py:86 - Iniciando UltiBot Backend (lifespan)...
2025-06-25 17:15:47,368 - ultibot_backend - INFO - [MainThread] - main.py:91 - DependencyContainer adjuntado a app.state: True
2025-06-25 17:15:47,368 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:106 - Initializing dependency container...
2025-06-25 17:15:47,368 - ultibot_backend.dependencies - WARNING - [MainThread] - dependencies.py:45 - Using local SQLite database: sqlite+aiosqlite:///ultibot_local.db. This is for development.
2025-06-25 17:15:47,368 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:48 - Initializing database with URL: sqlite+aiosqlite:///ultibot_local.db
2025-06-25 17:15:47,420 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:62 - Database tables created and session factory initialized successfully.
2025-06-25 17:15:47,616 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:12 - RedisCache initialized with URL: redis://localhost:6379/0
2025-06-25 17:15:47,617 - ultibot_backend.adapters.redis_cache - INFO - [MainThread] - redis_cache.py:18 - Redis client created.
2025-06-25 17:15:47,811 - ultibot_backend.services.order_execution_service - INFO - [MainThread] - order_execution_service.py:343 - Paper Trading Service inicializado con capital virtual: 10000.0 USDT
2025-06-25 17:15:47,818 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:30 - CredentialService __init__ intentando obtener encryption_key de AppSettings: Presente
2025-06-25 17:15:47,818 - ultibot_backend.services.credential_service - INFO - [MainThread] - credential_service.py:36 - Pasando la siguiente clave (str) a Fernet: m-28N... (truncada por seguridad)
2025-06-25 17:15:47,818 - ultibot_backend.services.unified_order_execution_service - INFO - [MainThread] - unified_order_execution_service.py:28 - UnifiedOrderExecutionService initialized with both real and paper execution services
2025-06-25 17:15:47,834 - ultibot_backend.services.ai_orchestrator_service - INFO - [MainThread] - ai_orchestrator_service.py:144 - AIOrchestrator initialized with gemini-1.5-pro-latest and PydanticOutputParser.
2025-06-25 17:15:47,835 - ultibot_backend.services.performance_service - INFO - [MainThread] - performance_service.py:29 - PerformanceService initialized. PersistenceService instance: <ultibot_backend.adapters.persistence_service.SupabasePersistenceService object at 0x000002655A871610>
2025-06-25 17:15:47,835 - ultibot_backend.dependencies - INFO - [MainThread] - dependencies.py:186 - Dependency container initialized successfully.
2025-06-25 17:15:47,835 - ultibot_backend - INFO - [MainThread] - main.py:95 - Contenedor de dependencias inicializado en lifespan.
2025-06-25 17:15:47,836 - ultibot_backend - INFO - [MainThread] - main.py:101 - Aplicación iniciada correctamente (lifespan).
2025-06-25 17:17:55,476 - asyncio - DEBUG - Using proactor: _IocpProactor
2025-06-25 17:17:55,482 - qasync._windows._EventPoller - DEBUG - Starting (proactor: <_IocpProactor overlapped#=0 result#=0>)...
2025-06-25 17:17:55,482 - qasync._windows._EventWorker - DEBUG - Thread started
2025-06-25 17:17:55,482 - __main__ - INFO - Initializing or finding application window...
2025-06-25 17:17:55,482 - __main__ - INFO - No existing MainWindow found. Creating a new one.
2025-06-25 17:17:55,482 - __main__ - INFO - Stylesheet loaded successfully.
2025-06-25 17:17:55,482 - ultibot_ui.services.api_client - DEBUG - APIClient singleton: base URL establecida en http://127.0.0.1:8000
2025-06-25 17:17:55,682 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client inicializado con base URL: http://127.0.0.1:8000
2025-06-25 17:17:55,708 - ultibot_ui.services.trading_mode_state - INFO - TradingModeStateManager initialized with mode: paper
2025-06-25 17:17:55,708 - ultibot_ui.services.trading_mode_state - INFO - Created global trading mode state manager
2025-06-25 17:17:55,990 - ultibot_ui.widgets.portfolio_widget - INFO - Timer de actualización del portafolio iniciado.
2025-06-25 17:17:55,993 - ultibot_ui.widgets.chart_widget - INFO - Solicitando datos para BTCUSDT - 1h usando ApiWorker
2025-06-25 17:17:55,993 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000001664BA02BD0>, coroutine_factory: set
2025-06-25 17:17:56,015 - ultibot_ui.widgets.market_data_widget - INFO - Cargando configuración inicial para MarketDataWidget...
2025-06-25 17:17:56,015 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000001664BA02BD0>, coroutine_factory: set
2025-06-25 17:17:56,015 - ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: __init__ called.
2025-06-25 17:17:56,015 - ultibot_ui.views.opportunities_view - DEBUG - OpportunitiesView initialized.
2025-06-25 17:17:56,051 - ultibot_ui.windows.history_view - INFO - HistoryView inicializada.
2025-06-25 17:17:56,052 - ultibot_ui.views.orders_view - INFO - OrdersView initialized.
2025-06-25 17:17:56,067 - ultibot_ui.views.trading_terminal_view - INFO - Price chart initialized for TradingTerminalView.
2025-06-25 17:17:56,068 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView initialized.
2025-06-25 17:17:56,069 - ultibot_ui.windows.main_window - INFO - Central widget y vistas configuradas.
2025-06-25 17:17:56,082 - ultibot_ui.windows.main_window - INFO - MainWindow inicializada y visible.
2025-06-25 17:17:56,202 - __main__ - INFO - Main window created and shown (loading configuration asynchronously).
2025-06-25 17:17:56,202 - __main__ - INFO - Fetching initial user configuration asynchronously...
2025-06-25 17:17:56,202 - ultibot_ui.windows.main_window - INFO - Fetching initial user configuration asynchronously (from MainWindow)...
2025-06-25 17:17:56,202 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000001664BA02BD0>, coroutine_factory: set
2025-06-25 17:17:56,202 - ultibot_ui.workers - DEBUG - ApiWorker: run method started in thread InitialConfigWorkerThread.
2025-06-25 17:17:56,202 - ultibot_ui.workers - DEBUG - ApiWorker: Coroutine scheduled on the main event loop.
2025-06-25 17:17:56,256 - ultibot_ui.services.api_client - INFO - Obteniendo configuración de usuario.
2025-06-25 17:17:56,256 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:17:56,258 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 17:17:56,262 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 17:17:56,272 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001664E538110>
2025-06-25 17:17:56,273 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:17:56,273 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:17:56,274 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:17:56,274 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:17:56,274 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:17:56,277 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/config
2025-06-25 17:17:56,288 - ultibot_backend.services.config_service - INFO - [MainThread] - config_service.py:71 - Configuración de usuario cargada exitosamente para el user_id: 00000000-0000-0000-0000-000000000001
2025-06-25 17:17:56,289 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/config - Status: 200
2025-06-25 17:17:56,291 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664BA16DE0>, 127, 0, <_overlapped.Overlapped object at 0x000001664B926EB0>)]
2025-06-25 17:17:56,291 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664BA16DE0>
2025-06-25 17:17:56,292 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:17:55 GMT'), (b'server', b'uvicorn'), (b'content-length', b'1204'), (b'content-type', b'application/json')])
2025-06-25 17:17:56,293 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/config "HTTP/1.1 200 OK"
2025-06-25 17:17:56,293 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/config "HTTP/1.1 200 OK"
2025-06-25 17:17:56,294 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:17:56,294 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:17:56,295 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:17:56,295 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:17:56,296 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/config "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:17:56,296 - ultibot_ui.services.api_client - DEBUG - Response content (processed): {'id': 'f9700762-0f32-4179-a790-df66b804df30', 'userId': '00000000-0000-0000-0000-000000000001', 'telegramChatId': None, 'notificationPreferences': [], 'enableTelegramNotifications': False, 'defaultPaperTradingCapital': '10000.00000000', 'paperTradingActive': True, 'paperTradingAssets': None, 'watchlists': [], 'favoritePairs': ['BTCUSDT', 'ETHUSDT', 'BNBUSDT'], 'riskProfile': 'moderate', 'riskProfileSettings': {'daily_capital_risk_percentage': 0.01, 'per_trade_capital_risk_percentage': 0.005, 'max_drawdown_percentage': 0.1}, 'realTradingSettings': {'real_trading_mode_active': False, 'real_trades_executed_count': 0, 'max_concurrent_operations': None, 'daily_loss_limit_absolute': None, 'daily_profit_target_absolute': None, 'asset_specific_stop_loss': None, 'auto_pause_trading_conditions': None, 'daily_capital_risked_usd': '0.0', 'last_daily_reset': '2025-06-25T18:47:27.846336Z'}, 'aiStrategyConfigurations': None, 'aiAnalysisConfidenceThresholds': {'paper_trading': 0.7, 'real_trading': 0.8}, 'mcpServerPreferences': [], 'selectedTheme': 'dark', 'dashboardLayoutProfiles': None, 'activeDashboardLayoutProfileId': None, 'dashboardLayoutConfig': None, 'cloudSyncPreferences': None, 'createdAt': '2025-06-25T18:47:27.849804', 'updatedAt': '2025-06-25T18:47:27.849804'}
2025-06-25 17:17:56,296 - ultibot_ui.workers - DEBUG - ApiWorker: Task Future-1538867129296 finished.
2025-06-25 17:17:56,297 - ultibot_ui.workers - DEBUG - ApiWorker: result_ready signal emitted.
2025-06-25 17:17:56,297 - ultibot_ui.workers - DEBUG - ApiWorker: Emitting 'finished' signal.
2025-06-25 17:17:56,297 - ultibot_ui.windows.main_window - INFO - Configuration received and validated for user ID: 00000000-0000-0000-0000-000000000001. Updating UI.
2025-06-25 17:17:56,298 - ultibot_ui.windows.main_window - INFO - User configuration set for ID: 00000000-0000-0000-0000-000000000001
2025-06-25 17:17:56,298 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: User ID set to 00000000-0000-0000-0000-000000000001. Initializing async components.
2025-06-25 17:17:56,298 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: User ID set to 00000000-0000-0000-0000-000000000001. Starting updates.
2025-06-25 17:17:56,298 - ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: paper
2025-06-25 17:17:56,299 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000001664BA02BD0>, coroutine_factory: set
2025-06-25 17:17:56,299 - ultibot_ui.widgets.market_data_widget - INFO - Cargando configuración inicial para MarketDataWidget...
2025-06-25 17:17:56,300 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000001664BA02BD0>, coroutine_factory: set
2025-06-25 17:17:56,300 - ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: User ID set to 00000000-0000-0000-0000-000000000001. Loading initial data.
2025-06-25 17:17:56,300 - ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: _load_initial_data called.
2025-06-25 17:17:56,301 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: User ID set to 00000000-0000-0000-0000-000000000001. Triggering initial data fetch.
2025-06-25 17:17:56,302 - ultibot_ui.windows.history_view - INFO - HistoryView: User ID set to 00000000-0000-0000-0000-000000000001. Loading data.
2025-06-25 17:17:56,302 - ultibot_ui.widgets.paper_trading_report_widget - INFO - PaperTradingReportWidget: User ID set to 00000000-0000-0000-0000-000000000001. Loading data.
2025-06-25 17:17:56,302 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000001664BA02BD0>, coroutine_factory: set
2025-06-25 17:17:56,302 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000001664BA02BD0>, coroutine_factory: set
2025-06-25 17:17:56,302 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000001664BA02BD0>, coroutine_factory: set
2025-06-25 17:17:56,302 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000001664BA02BD0>, coroutine_factory: set
2025-06-25 17:17:56,302 - ultibot_ui.views.orders_view - INFO - OrdersView: User ID set to 00000000-0000-0000-0000-000000000001. Setting up worker.
2025-06-25 17:17:56,302 - ultibot_ui.views.orders_view - INFO - Hilo de OrdersWorker iniciado.
2025-06-25 17:17:56,302 - ultibot_ui.windows.settings_view - INFO - SettingsView: User ID set to 00000000-0000-0000-0000-000000000001. Loading initial data.
2025-06-25 17:17:56,302 - ultibot_ui.workers - DEBUG - OrdersWorker: run method started in thread <PySide6.QtCore.QThread(0x1664af40280) at 0x000001664E5071C0>.
2025-06-25 17:17:56,302 - ultibot_ui.windows.settings_view - INFO - SettingsView: Iniciando carga de datos iniciales (_load_initial_data).
2025-06-25 17:17:56,302 - ultibot_ui.workers - DEBUG - OrdersWorker: Coroutine scheduled on the main event loop.
2025-06-25 17:17:56,302 - ultibot_ui.windows.settings_view - INFO - SettingsView: Solicitando configuración de usuario general.
2025-06-25 17:17:56,302 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000001664BA02BD0>, coroutine_factory: set
2025-06-25 17:17:56,307 - ultibot_ui.windows.settings_view - INFO - SettingsView: Solicitando configuración de usuario para estado de operativa real.
2025-06-25 17:17:56,307 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000001664BA02BD0>, coroutine_factory: set
2025-06-25 17:17:56,307 - __main__ - INFO - Configuration received and validated for user ID: 00000000-0000-0000-0000-000000000001. UI updated by MainWindow.
2025-06-25 17:17:56,308 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Scheduling portfolio snapshot fetch.
2025-06-25 17:17:56,308 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000001664BA02BD0>, coroutine_factory: set
2025-06-25 17:17:56,310 - ultibot_ui.windows.main_window - INFO - MainWindow: Post-show initialization started.
2025-06-25 17:17:56,310 - ultibot_ui.views.strategies_view - INFO - StrategiesView: Initializing view data (loading strategies)...
2025-06-25 17:17:56,311 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Initializing view data (starting price feed)...
2025-06-25 17:17:56,311 - ultibot_ui.views.trading_terminal_view - INFO - Price feed worker started for BTC/USDT.
2025-06-25 17:17:56,311 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: initialize_async_components INVOCADO
2025-06-25 17:17:56,312 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000001664BA02BD0>, coroutine_factory: set
2025-06-25 17:17:56,312 - ultibot_ui.workers - DEBUG - StrategiesWorker: run method started in thread StrategiesWorkerThread.
2025-06-25 17:17:56,312 - ultibot_ui.workers - DEBUG - TradingTerminalWorker: run method started in thread PriceFeedWorkerThread_BTC/USDT.
2025-06-25 17:17:56,312 - ultibot_ui.windows.main_window - INFO - MainWindow: Post-show initialization finished.
2025-06-25 17:17:56,312 - ultibot_ui.workers - DEBUG - StrategiesWorker: Coroutine scheduled on the main event loop.
2025-06-25 17:17:56,312 - ultibot_ui.workers - DEBUG - TradingTerminalWorker: Coroutine scheduled on the main event loop.
2025-06-25 17:17:56,312 - ultibot_ui.workers - INFO - Fetching real order history from API...
2025-06-25 17:17:56,312 - ultibot_ui.services.api_client - INFO - Obteniendo trades, modo: paper, filtros: {'trading_mode': 'paper', 'limit': 100, 'offset': 0, 'status': 'open', 'user_id': '00000000-0000-0000-0000-000000000001'}
2025-06-25 17:17:56,312 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:17:56,312 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/trades
2025-06-25 17:17:56,318 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:17:56,318 - ultibot_ui.workers - INFO - Fetching real strategies from API...
2025-06-25 17:17:56,318 - ultibot_ui.services.api_client - INFO - Obteniendo estrategias de trading.
2025-06-25 17:17:56,319 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:17:56,319 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/strategies
2025-06-25 17:17:56,320 - ultibot_ui.workers - INFO - Starting real-time price feed for BTC/USDT...
2025-06-25 17:17:56,320 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:17:56,321 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:17:56,321 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:17:56,322 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:17:56,322 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:17:56,322 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/trades
2025-06-25 17:17:56,322 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:17:56,322 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:17:56,323 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 17:17:56,323 - ultibot_backend.adapters.persistence_service - DEBUG - [MainThread] - persistence_service.py:564 - get_trades_with_filters - user_id: 00000000-0000-0000-0000-000000000001, trading_mode: paper, status: None, symbol: None, start_date: None, end_date: None, limit: 100, offset: 0
2025-06-25 17:17:56,323 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 17:17:56,329 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001664F399D50>
2025-06-25 17:17:56,329 - ultibot_backend.adapters.persistence_service - DEBUG - [MainThread] - persistence_service.py:603 - get_trades_with_filters - Trades recuperados: 0
2025-06-25 17:17:56,329 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x000001664F39A4D0>
2025-06-25 17:17:56,330 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:17:56,330 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:17:56,330 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:17:56,330 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:17:56,330 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:17:56,330 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/strategies
2025-06-25 17:17:56,332 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:17:56,332 - ultibot_backend.api.v1.endpoints.strategies - INFO - [MainThread] - strategies.py:78 - Listing strategies for user 00000000-0000-0000-0000-000000000001
2025-06-25 17:17:56,332 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:17:56,332 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:17:56,333 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:17:56,333 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:17:56,334 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:17:56,336 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/trades - Status: 200
2025-06-25 17:17:56,337 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664BA16DE0>, 124, 0, <_overlapped.Overlapped object at 0x000001664B926EB0>)]
2025-06-25 17:17:56,338 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664BA16DE0>
2025-06-25 17:17:56,338 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:17:55 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-25 17:17:56,339 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/trades?trading_mode=paper&limit=100&offset=0&status=open&user_id=00000000-0000-0000-0000-000000000001 "HTTP/1.1 200 OK"
2025-06-25 17:17:56,339 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/trades?trading_mode=paper&limit=100&offset=0&status=open&user_id=00000000-0000-0000-0000-000000000001 "HTTP/1.1 200 OK"
2025-06-25 17:17:56,340 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:17:56,340 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:17:56,340 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:17:56,341 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:17:56,341 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/trades "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:17:56,342 - ultibot_ui.services.api_client - DEBUG - Response content (processed): []
2025-06-25 17:17:56,342 - ultibot_ui.workers - INFO - Fetched 0 orders from API.
2025-06-25 17:17:56,342 - ultibot_ui.views.orders_view - INFO - Actualizando tabla de órdenes con 0 órdenes.
2025-06-25 17:17:56,343 - ultibot_ui.views.orders_view - INFO - Tabla de órdenes actualizada.
2025-06-25 17:17:56,343 - ultibot_ui.workers - INFO - OrdersWorker finished.
2025-06-25 17:17:56,346 - ultibot_backend.api.v1.endpoints.strategies - INFO - [MainThread] - strategies.py:90 - Retrieved 0 strategies
2025-06-25 17:17:56,347 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/strategies - Status: 200
2025-06-25 17:17:56,348 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664F3914E0>, 125, 0, <_overlapped.Overlapped object at 0x000001664F3A41B0>)]
2025-06-25 17:17:56,348 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664F3914E0>
2025-06-25 17:17:56,349 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:17:55 GMT'), (b'server', b'uvicorn'), (b'content-length', b'33'), (b'content-type', b'application/json')])
2025-06-25 17:17:56,349 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/strategies "HTTP/1.1 200 OK"
2025-06-25 17:17:56,349 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/strategies "HTTP/1.1 200 OK"
2025-06-25 17:17:56,349 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:17:56,349 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:17:56,351 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:17:56,351 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:17:56,351 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/strategies "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:17:56,352 - ultibot_ui.services.api_client - DEBUG - Response content (processed): {'strategies': [], 'total_count': 0}
2025-06-25 17:17:56,352 - ultibot_ui.workers - INFO - Fetched 2 strategies from API.
2025-06-25 17:17:56,352 - ultibot_ui.workers - INFO - StrategiesWorker finished.
2025-06-25 17:17:56,409 - ultibot_ui.views.opportunities_view - INFO - Fetching Gemini IA opportunities.
2025-06-25 17:17:56,410 - ultibot_ui.views.opportunities_view - DEBUG - Creating ApiWorker.
2025-06-25 17:17:56,410 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000001664BA02BD0>, coroutine_factory: set
2025-06-25 17:17:56,977 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:17:56,978 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:17:56,979 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664F391580>, 126, 0, <_overlapped.Overlapped object at 0x000001664F3A4270>)]
2025-06-25 17:17:56,980 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664F391580>
2025-06-25 17:17:56,980 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:17:55 GMT'), (b'server', b'uvicorn'), (b'content-length', b'103'), (b'content-type', b'application/json')])
2025-06-25 17:17:56,981 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:17:56,981 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:17:56,981 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:17:56,982 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:17:56,982 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:17:56,983 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:17:56,983 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:17:56,983 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107660.75, 'priceChangePercent': 1.671, 'quoteVolume': 1788907150.599313}]
2025-06-25 17:17:56,983 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:17:57,983 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:17:57,983 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:17:57,985 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:17:57,986 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:17:57,986 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:17:57,986 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:17:57,986 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:17:57,987 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:17:57,987 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:17:58,352 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:17:58,352 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:17:58,352 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664BA16DE0>, 126, 0, <_overlapped.Overlapped object at 0x000001664B926EB0>)]
2025-06-25 17:17:58,359 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664BA16DE0>
2025-06-25 17:17:58,359 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:17:57 GMT'), (b'server', b'uvicorn'), (b'content-length', b'103'), (b'content-type', b'application/json')])
2025-06-25 17:17:58,359 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:17:58,359 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:17:58,362 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:17:58,362 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:17:58,362 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:17:58,362 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:17:58,363 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:17:58,363 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.33, 'priceChangePercent': 1.684, 'quoteVolume': 1789009027.912024}]
2025-06-25 17:17:58,364 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:17:59,375 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:17:59,375 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:17:59,375 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:17:59,377 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:17:59,377 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:17:59,377 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:17:59,377 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:17:59,379 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:17:59,379 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:17:59,745 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:17:59,745 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:17:59,745 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664BA16DE0>, 126, 0, <_overlapped.Overlapped object at 0x000001664B926EB0>)]
2025-06-25 17:17:59,745 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664BA16DE0>
2025-06-25 17:17:59,745 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:17:58 GMT'), (b'server', b'uvicorn'), (b'content-length', b'104'), (b'content-type', b'application/json')])
2025-06-25 17:17:59,749 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:17:59,749 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:17:59,749 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:17:59,750 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:17:59,750 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:17:59,750 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:17:59,750 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:17:59,750 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.34, 'priceChangePercent': 1.676, 'quoteVolume': 1788883927.8631263}]
2025-06-25 17:17:59,752 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:00,768 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:00,768 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:00,768 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:00,768 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:00,768 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:00,768 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:00,768 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:00,768 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:01,132 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:01,134 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:01,134 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664BA16DE0>, 126, 0, <_overlapped.Overlapped object at 0x000001664B926EB0>)]
2025-06-25 17:18:01,136 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664BA16DE0>
2025-06-25 17:18:01,136 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:00 GMT'), (b'server', b'uvicorn'), (b'content-length', b'104'), (b'content-type', b'application/json')])
2025-06-25 17:18:01,137 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:01,137 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:01,137 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:01,137 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:01,138 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:01,138 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:01,138 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:01,139 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.34, 'priceChangePercent': 1.676, 'quoteVolume': 1788874904.9044297}]
2025-06-25 17:18:01,139 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:01,304 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x000001664BA02BD0>, coroutine_factory: set
2025-06-25 17:18:01,358 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664F34BBA0>, 0, 0, <_overlapped.Overlapped object at 0x000001664B9279F0>)]
2025-06-25 17:18:01,358 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664F34BBA0>
2025-06-25 17:18:01,984 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664F34B7E0>, 0, 0, <_overlapped.Overlapped object at 0x000001664B927270>)]
2025-06-25 17:18:01,984 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664F34B7E0>
2025-06-25 17:18:02,163 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:02,163 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:02,163 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:02,163 - httpcore.connection - DEBUG - close.started
2025-06-25 17:18:02,163 - httpcore.connection - DEBUG - close.complete
2025-06-25 17:18:02,163 - httpcore.connection - DEBUG - close.started
2025-06-25 17:18:02,163 - httpcore.connection - DEBUG - close.complete
2025-06-25 17:18:02,163 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:02,163 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:02,163 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:02,163 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:02,163 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
ET /api/v1/market/tickers
2025-06-25 17:18:02,238 - asyncio - DEBUG - Using proactor: _IocpProactor
2025-06-25 17:18:02,240 - qasync._windows._EventPoller - DEBUG - Starting (proactor: <_IocpProactor overlapped#=0 result#=0>)...
2025-06-25 17:18:02,241 - qasync._windows._EventWorker - DEBUG - Thread started
2025-06-25 17:18:02,242 - __main__ - INFO - Initializing or finding application window...
2025-06-25 17:18:02,242 - __main__ - INFO - No existing MainWindow found. Creating a new one.
2025-06-25 17:18:02,243 - __main__ - INFO - Stylesheet loaded successfully.
2025-06-25 17:18:02,243 - ultibot_ui.services.api_client - DEBUG - APIClient singleton: base URL establecida en http://127.0.0.1:8000
2025-06-25 17:18:02,447 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client inicializado con base URL: http://127.0.0.1:8000
2025-06-25 17:18:02,462 - ultibot_ui.services.trading_mode_state - INFO - TradingModeStateManager initialized with mode: paper
2025-06-25 17:18:02,462 - ultibot_ui.services.trading_mode_state - INFO - Created global trading mode state manager
2025-06-25 17:18:02,529 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:02,530 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:02,532 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664F3918A0>, 126, 0, <_overlapped.Overlapped object at 0x000001664B927630>)]
2025-06-25 17:18:02,533 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664F3918A0>
2025-06-25 17:18:02,534 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:01 GMT'), (b'server', b'uvicorn'), (b'content-length', b'104'), (b'content-type', b'application/json')])
2025-06-25 17:18:02,534 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:02,534 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:02,535 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:02,536 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:02,537 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:02,537 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:02,538 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:02,538 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.34, 'priceChangePercent': 1.676, 'quoteVolume': 1788861073.8433967}]
2025-06-25 17:18:02,539 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:02,752 - ultibot_ui.widgets.portfolio_widget - INFO - Timer de actualización del portafolio iniciado.
2025-06-25 17:18:02,752 - ultibot_ui.widgets.chart_widget - INFO - Solicitando datos para BTCUSDT - 1h usando ApiWorker
2025-06-25 17:18:02,752 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000015F75FB0610>, coroutine_factory: set
2025-06-25 17:18:02,782 - ultibot_ui.widgets.market_data_widget - INFO - Cargando configuración inicial para MarketDataWidget...
2025-06-25 17:18:02,782 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000015F75FB0610>, coroutine_factory: set
2025-06-25 17:18:02,786 - ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: __init__ called.
2025-06-25 17:18:02,786 - ultibot_ui.views.opportunities_view - DEBUG - OpportunitiesView initialized.
2025-06-25 17:18:02,822 - ultibot_ui.windows.history_view - INFO - HistoryView inicializada.
2025-06-25 17:18:02,827 - ultibot_ui.views.orders_view - INFO - OrdersView initialized.
2025-06-25 17:18:02,837 - ultibot_ui.views.trading_terminal_view - INFO - Price chart initialized for TradingTerminalView.
2025-06-25 17:18:02,837 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView initialized.
2025-06-25 17:18:02,843 - ultibot_ui.windows.main_window - INFO - Central widget y vistas configuradas.
2025-06-25 17:18:02,865 - ultibot_ui.windows.main_window - INFO - MainWindow inicializada y visible.
2025-06-25 17:18:02,982 - __main__ - INFO - Main window created and shown (loading configuration asynchronously).
2025-06-25 17:18:02,982 - __main__ - INFO - Fetching initial user configuration asynchronously...
2025-06-25 17:18:02,982 - ultibot_ui.windows.main_window - INFO - Fetching initial user configuration asynchronously (from MainWindow)...
2025-06-25 17:18:02,982 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000015F75FB0610>, coroutine_factory: set
2025-06-25 17:18:02,982 - ultibot_ui.workers - DEBUG - ApiWorker: run method started in thread InitialConfigWorkerThread.
2025-06-25 17:18:02,982 - ultibot_ui.workers - DEBUG - ApiWorker: Coroutine scheduled on the main event loop.
2025-06-25 17:18:03,038 - ultibot_ui.services.api_client - INFO - Obteniendo configuración de usuario.
2025-06-25 17:18:03,038 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:03,039 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/config
2025-06-25 17:18:03,050 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 17:18:03,053 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000015F78B4D950>
2025-06-25 17:18:03,053 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:03,054 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:03,054 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:03,055 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:03,054 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/config
2025-06-25 17:18:03,055 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:03,055 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/config - Status: 200
2025-06-25 17:18:03,057 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F75F92DE0>, 127, 0, <_overlapped.Overlapped object at 0x0000015F75EA6EB0>)]
2025-06-25 17:18:03,057 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F75F92DE0>
2025-06-25 17:18:03,058 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:02 GMT'), (b'server', b'uvicorn'), (b'content-length', b'1204'), (b'content-type', b'application/json')])
2025-06-25 17:18:03,058 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/config "HTTP/1.1 200 OK"
2025-06-25 17:18:03,058 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/config "HTTP/1.1 200 OK"
2025-06-25 17:18:03,059 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:03,059 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:03,060 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:03,060 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:03,060 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/config "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:03,060 - ultibot_ui.services.api_client - DEBUG - Response content (processed): {'id': 'f9700762-0f32-4179-a790-df66b804df30', 'userId': '00000000-0000-0000-0000-000000000001', 'telegramChatId': None, 'notificationPreferences': [], 'enableTelegramNotifications': False, 'defaultPaperTradingCapital': '10000.00000000', 'paperTradingActive': True, 'paperTradingAssets': None, 'watchlists': [], 'favoritePairs': ['BTCUSDT', 'ETHUSDT', 'BNBUSDT'], 'riskProfile': 'moderate', 'riskProfileSettings': {'daily_capital_risk_percentage': 0.01, 'per_trade_capital_risk_percentage': 0.005, 'max_drawdown_percentage': 0.1}, 'realTradingSettings': {'real_trading_mode_active': False, 'real_trades_executed_count': 0, 'max_concurrent_operations': None, 'daily_loss_limit_absolute': None, 'daily_profit_target_absolute': None, 'asset_specific_stop_loss': None, 'auto_pause_trading_conditions': None, 'daily_capital_risked_usd': '0.0', 'last_daily_reset': '2025-06-25T18:47:27.846336Z'}, 'aiStrategyConfigurations': None, 'aiAnalysisConfidenceThresholds': {'paper_trading': 0.7, 'real_trading': 0.8}, 'mcpServerPreferences': [], 'selectedTheme': 'dark', 'dashboardLayoutProfiles': None, 'activeDashboardLayoutProfileId': None, 'dashboardLayoutConfig': None, 'cloudSyncPreferences': None, 'createdAt': '2025-06-25T18:47:27.849804', 'updatedAt': '2025-06-25T18:47:27.849804'}
2025-06-25 17:18:03,062 - ultibot_ui.workers - DEBUG - ApiWorker: Task Future-1509512905168 finished.
2025-06-25 17:18:03,062 - ultibot_ui.workers - DEBUG - ApiWorker: result_ready signal emitted.
2025-06-25 17:18:03,062 - ultibot_ui.workers - DEBUG - ApiWorker: Emitting 'finished' signal.
2025-06-25 17:18:03,063 - ultibot_ui.windows.main_window - INFO - Configuration received and validated for user ID: 00000000-0000-0000-0000-000000000001. Updating UI.
2025-06-25 17:18:03,064 - ultibot_ui.windows.main_window - INFO - User configuration set for ID: 00000000-0000-0000-0000-000000000001
2025-06-25 17:18:03,064 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: User ID set to 00000000-0000-0000-0000-000000000001. Initializing async components.
2025-06-25 17:18:03,064 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: User ID set to 00000000-0000-0000-0000-000000000001. Starting updates.
2025-06-25 17:18:03,064 - ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: paper
2025-06-25 17:18:03,064 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000015F75FB0610>, coroutine_factory: set
2025-06-25 17:18:03,065 - ultibot_ui.widgets.market_data_widget - INFO - Cargando configuración inicial para MarketDataWidget...
2025-06-25 17:18:03,066 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000015F75FB0610>, coroutine_factory: set
2025-06-25 17:18:03,066 - ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: User ID set to 00000000-0000-0000-0000-000000000001. Loading initial data.
2025-06-25 17:18:03,066 - ultibot_ui.views.opportunities_view - INFO - OpportunitiesView: _load_initial_data called.
2025-06-25 17:18:03,066 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: User ID set to 00000000-0000-0000-0000-000000000001. Triggering initial data fetch.
2025-06-25 17:18:03,067 - ultibot_ui.windows.history_view - INFO - HistoryView: User ID set to 00000000-0000-0000-0000-000000000001. Loading data.
2025-06-25 17:18:03,067 - ultibot_ui.widgets.paper_trading_report_widget - INFO - PaperTradingReportWidget: User ID set to 00000000-0000-0000-0000-000000000001. Loading data.
2025-06-25 17:18:03,068 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000015F75FB0610>, coroutine_factory: set
2025-06-25 17:18:03,068 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000015F75FB0610>, coroutine_factory: set
2025-06-25 17:18:03,069 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000015F75FB0610>, coroutine_factory: set
2025-06-25 17:18:03,069 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000015F75FB0610>, coroutine_factory: set
2025-06-25 17:18:03,069 - ultibot_ui.views.orders_view - INFO - OrdersView: User ID set to 00000000-0000-0000-0000-000000000001. Setting up worker.
2025-06-25 17:18:03,070 - ultibot_ui.views.orders_view - INFO - Hilo de OrdersWorker iniciado.
2025-06-25 17:18:03,070 - ultibot_ui.windows.settings_view - INFO - SettingsView: User ID set to 00000000-0000-0000-0000-000000000001. Loading initial data.
2025-06-25 17:18:03,070 - ultibot_ui.workers - DEBUG - OrdersWorker: run method started in thread <PySide6.QtCore.QThread(0x15f750aeef0) at 0x0000015F1739B540>.
2025-06-25 17:18:03,070 - ultibot_ui.windows.settings_view - INFO - SettingsView: Iniciando carga de datos iniciales (_load_initial_data).
2025-06-25 17:18:03,071 - ultibot_ui.workers - DEBUG - OrdersWorker: Coroutine scheduled on the main event loop.
2025-06-25 17:18:03,071 - ultibot_ui.windows.settings_view - INFO - SettingsView: Solicitando configuración de usuario general.
2025-06-25 17:18:03,071 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000015F75FB0610>, coroutine_factory: set
2025-06-25 17:18:03,072 - ultibot_ui.windows.settings_view - INFO - SettingsView: Solicitando configuración de usuario para estado de operativa real.
2025-06-25 17:18:03,072 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000015F75FB0610>, coroutine_factory: set
2025-06-25 17:18:03,072 - __main__ - INFO - Configuration received and validated for user ID: 00000000-0000-0000-0000-000000000001. UI updated by MainWindow.
2025-06-25 17:18:03,073 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Scheduling portfolio snapshot fetch.
2025-06-25 17:18:03,073 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000015F75FB0610>, coroutine_factory: set
2025-06-25 17:18:03,075 - ultibot_ui.windows.main_window - INFO - MainWindow: Post-show initialization started.
2025-06-25 17:18:03,075 - ultibot_ui.views.strategies_view - INFO - StrategiesView: Initializing view data (loading strategies)...
2025-06-25 17:18:03,075 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Initializing view data (starting price feed)...
2025-06-25 17:18:03,076 - ultibot_ui.workers - DEBUG - StrategiesWorker: run method started in thread StrategiesWorkerThread.
2025-06-25 17:18:03,076 - ultibot_ui.views.trading_terminal_view - INFO - Price feed worker started for BTC/USDT.
2025-06-25 17:18:03,076 - ultibot_ui.workers - DEBUG - StrategiesWorker: Coroutine scheduled on the main event loop.
2025-06-25 17:18:03,076 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: initialize_async_components INVOCADO
2025-06-25 17:18:03,077 - ultibot_ui.workers - DEBUG - TradingTerminalWorker: run method started in thread PriceFeedWorkerThread_BTC/USDT.
2025-06-25 17:18:03,077 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000015F75FB0610>, coroutine_factory: set
2025-06-25 17:18:03,077 - ultibot_ui.workers - DEBUG - TradingTerminalWorker: Coroutine scheduled on the main event loop.
2025-06-25 17:18:03,078 - ultibot_ui.windows.main_window - INFO - MainWindow: Post-show initialization finished.
2025-06-25 17:18:03,078 - ultibot_ui.workers - INFO - Fetching real order history from API...
2025-06-25 17:18:03,078 - ultibot_ui.services.api_client - INFO - Obteniendo trades, modo: paper, filtros: {'trading_mode': 'paper', 'limit': 100, 'offset': 0, 'status': 'open', 'user_id': '00000000-0000-0000-0000-000000000001'}
2025-06-25 17:18:03,078 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:03,078 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/trades
2025-06-25 17:18:03,082 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:03,082 - ultibot_ui.workers - INFO - Fetching real strategies from API...
2025-06-25 17:18:03,082 - ultibot_ui.services.api_client - INFO - Obteniendo estrategias de trading.
2025-06-25 17:18:03,082 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:03,085 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/strategies
2025-06-25 17:18:03,085 - ultibot_ui.workers - INFO - Starting real-time price feed for BTC/USDT...
2025-06-25 17:18:03,085 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:03,086 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:03,086 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:03,087 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:03,087 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:03,087 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:03,087 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/trades
2025-06-25 17:18:03,087 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:03,088 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 17:18:03,088 - ultibot_backend.adapters.persistence_service - DEBUG - [MainThread] - persistence_service.py:564 - get_trades_with_filters - user_id: 00000000-0000-0000-0000-000000000001, trading_mode: paper, status: None, symbol: None, start_date: None, end_date: None, limit: 100, offset: 0
2025-06-25 17:18:03,088 - httpcore.connection - DEBUG - connect_tcp.started host='127.0.0.1' port=8000 local_address=None timeout=30.0 socket_options=None
2025-06-25 17:18:03,092 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[Task.task_wakeup()]>, <function IocpProactor.connect.<locals>.finish_connect at 0x0000015F17DA14E0>, 0, 0, <_overlapped.Overlapped object at 0x0000015F17DB41B0>)]
2025-06-25 17:18:03,093 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.connect.<locals>.finish_connect at 0x0000015F17DA14E0>
2025-06-25 17:18:03,094 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000015F78AF71D0>
2025-06-25 17:18:03,094 - ultibot_backend.adapters.persistence_service - DEBUG - [MainThread] - persistence_service.py:603 - get_trades_with_filters - Trades recuperados: 0
2025-06-25 17:18:03,095 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:03,095 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.anyio.AnyIOStream object at 0x0000015F17D9FAD0>
2025-06-25 17:18:03,095 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:03,096 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:03,096 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:03,096 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:03,097 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:03,097 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:03,097 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:03,098 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:03,098 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:03,098 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:03,100 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/strategies
2025-06-25 17:18:03,101 - ultibot_backend.api.v1.endpoints.strategies - INFO - [MainThread] - strategies.py:78 - Listing strategies for user 00000000-0000-0000-0000-000000000001
2025-06-25 17:18:03,102 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/trades - Status: 200
2025-06-25 17:18:03,102 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F75F92DE0>, 124, 0, <_overlapped.Overlapped object at 0x0000015F75EA6EB0>)]
2025-06-25 17:18:03,104 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F75F92DE0>
2025-06-25 17:18:03,104 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:02 GMT'), (b'server', b'uvicorn'), (b'content-length', b'2'), (b'content-type', b'application/json')])
2025-06-25 17:18:03,105 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/trades?trading_mode=paper&limit=100&offset=0&status=open&user_id=00000000-0000-0000-0000-000000000001 "HTTP/1.1 200 OK"
2025-06-25 17:18:03,105 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/trades?trading_mode=paper&limit=100&offset=0&status=open&user_id=00000000-0000-0000-0000-000000000001 "HTTP/1.1 200 OK"
2025-06-25 17:18:03,105 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:03,106 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:03,106 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:03,106 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:03,107 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/trades "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:03,107 - ultibot_ui.services.api_client - DEBUG - Response content (processed): []
2025-06-25 17:18:03,107 - ultibot_ui.workers - INFO - Fetched 0 orders from API.
2025-06-25 17:18:03,107 - ultibot_ui.views.orders_view - INFO - Actualizando tabla de órdenes con 0 órdenes.
2025-06-25 17:18:03,108 - ultibot_ui.views.orders_view - INFO - Tabla de órdenes actualizada.
2025-06-25 17:18:03,108 - ultibot_ui.workers - INFO - OrdersWorker finished.
2025-06-25 17:18:03,108 - ultibot_backend.api.v1.endpoints.strategies - INFO - [MainThread] - strategies.py:90 - Retrieved 0 strategies
2025-06-25 17:18:03,109 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/strategies - Status: 200
2025-06-25 17:18:03,111 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA0720>, 125, 0, <_overlapped.Overlapped object at 0x0000015F17DB4270>)]
2025-06-25 17:18:03,111 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA0720>
2025-06-25 17:18:03,112 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:02 GMT'), (b'server', b'uvicorn'), (b'content-length', b'33'), (b'content-type', b'application/json')])
2025-06-25 17:18:03,112 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/strategies "HTTP/1.1 200 OK"
2025-06-25 17:18:03,112 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/strategies "HTTP/1.1 200 OK"
2025-06-25 17:18:03,113 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:03,113 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:03,114 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:03,114 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:03,114 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/strategies "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:03,114 - ultibot_ui.services.api_client - DEBUG - Response content (processed): {'strategies': [], 'total_count': 0}
2025-06-25 17:18:03,115 - ultibot_ui.workers - INFO - Fetched 2 strategies from API.
2025-06-25 17:18:03,115 - ultibot_ui.workers - INFO - StrategiesWorker finished.
2025-06-25 17:18:03,172 - ultibot_ui.views.opportunities_view - INFO - Fetching Gemini IA opportunities.
2025-06-25 17:18:03,172 - ultibot_ui.views.opportunities_view - DEBUG - Creating ApiWorker.
2025-06-25 17:18:03,172 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000015F75FB0610>, coroutine_factory: set
2025-06-25 17:18:03,452 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:03,452 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:03,452 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA14E0>, 126, 0, <_overlapped.Overlapped object at 0x0000015F17DB41B0>)]
2025-06-25 17:18:03,458 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA14E0>
2025-06-25 17:18:03,459 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:02 GMT'), (b'server', b'uvicorn'), (b'content-length', b'103'), (b'content-type', b'application/json')])
2025-06-25 17:18:03,459 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:03,459 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:03,460 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:03,460 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:03,462 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:03,462 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:03,462 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:03,463 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.34, 'priceChangePercent': 1.676, 'quoteVolume': 1788861427.031632}]
2025-06-25 17:18:03,463 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:03,546 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:03,546 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:03,546 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:03,547 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:03,548 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:03,548 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:03,548 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:03,548 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:03,549 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:03,912 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:03,912 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:03,912 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664F3918A0>, 126, 0, <_overlapped.Overlapped object at 0x000001664B927630>)]
2025-06-25 17:18:03,912 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664F3918A0>
2025-06-25 17:18:03,918 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:02 GMT'), (b'server', b'uvicorn'), (b'content-length', b'103'), (b'content-type', b'application/json')])
2025-06-25 17:18:03,918 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:03,918 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:03,919 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:03,919 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:03,920 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:03,920 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:03,920 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:03,920 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.34, 'priceChangePercent': 1.676, 'quoteVolume': 1788861427.031632}]
2025-06-25 17:18:03,922 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:04,460 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:04,460 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:04,460 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:04,462 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:04,462 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:04,462 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:04,462 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:04,462 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:04,462 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:04,822 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:04,822 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:04,822 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F75F92DE0>, 126, 0, <_overlapped.Overlapped object at 0x0000015F75EA6EB0>)]
2025-06-25 17:18:04,822 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F75F92DE0>
2025-06-25 17:18:04,826 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:03 GMT'), (b'server', b'uvicorn'), (b'content-length', b'104'), (b'content-type', b'application/json')])
2025-06-25 17:18:04,827 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:04,827 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:04,828 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:04,830 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:04,830 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:04,831 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:04,831 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:04,831 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.33, 'priceChangePercent': 1.676, 'quoteVolume': 1788863556.1894157}]
2025-06-25 17:18:04,831 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:04,922 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:04,922 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:04,922 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:04,926 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:04,927 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:04,927 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:04,927 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:04,927 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:04,927 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:05,282 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:05,282 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:05,282 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664F3918A0>, 126, 0, <_overlapped.Overlapped object at 0x000001664B927630>)]
2025-06-25 17:18:05,292 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664F3918A0>
2025-06-25 17:18:05,292 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:03 GMT'), (b'server', b'uvicorn'), (b'content-length', b'103'), (b'content-type', b'application/json')])
2025-06-25 17:18:05,292 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:05,292 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:05,294 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:05,294 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:05,294 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:05,296 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:05,296 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:05,296 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.33, 'priceChangePercent': 1.676, 'quoteVolume': 1788863676.080151}]
2025-06-25 17:18:05,297 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:05,832 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:05,832 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:05,832 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:05,832 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:05,832 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:05,832 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:05,832 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:05,832 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:05,832 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:06,212 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:06,212 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:06,212 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F75F92DE0>, 126, 0, <_overlapped.Overlapped object at 0x0000015F75EA6EB0>)]
2025-06-25 17:18:06,260 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F75F92DE0>
2025-06-25 17:18:06,272 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:04 GMT'), (b'server', b'uvicorn'), (b'content-length', b'104'), (b'content-type', b'application/json')])
2025-06-25 17:18:06,273 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:06,273 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:06,273 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:06,293 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:06,294 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:06,311 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:06,312 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:06,312 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:06,313 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.34, 'priceChangePercent': 1.676, 'quoteVolume': 1788863695.2553418}]
2025-06-25 17:18:06,313 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:06,313 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:06,313 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:06,314 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:06,315 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:06,315 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:06,315 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:06,315 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:06,316 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:06,677 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:06,677 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:06,677 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664F3918A0>, 126, 0, <_overlapped.Overlapped object at 0x000001664B927630>)]
2025-06-25 17:18:06,682 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x000001664F3918A0>
2025-06-25 17:18:06,682 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:06 GMT'), (b'server', b'uvicorn'), (b'content-length', b'104'), (b'content-type', b'application/json')])
2025-06-25 17:18:06,682 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:06,682 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:06,683 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:06,683 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:06,684 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:06,684 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:06,684 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:06,684 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.34, 'priceChangePercent': 1.676, 'quoteVolume': 1788863695.2553418}]
2025-06-25 17:18:06,685 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:07,326 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:07,327 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:07,327 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:07,327 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:07,327 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:07,327 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:07,327 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:07,327 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:07,327 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:07,396 - ultibot_ui.windows.main_window - INFO - Cleaning up MainWindow resources. Stopping 13 active threads...
2025-06-25 17:18:07,396 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: Iniciando limpieza de tareas.
2025-06-25 17:18:07,396 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Iniciando limpieza.
2025-06-25 17:18:07,397 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Limpieza completada.
2025-06-25 17:18:07,397 - ultibot_ui.widgets.chart_widget - INFO - ChartWidget: Limpieza completada.
2025-06-25 17:18:07,397 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: Limpieza completada.
2025-06-25 17:18:07,397 - ultibot_ui.views.opportunities_view - INFO - Cleaning up OpportunitiesView...
2025-06-25 17:18:07,398 - ultibot_ui.views.opportunities_view - INFO - OpportunitiesView cleanup finished.
2025-06-25 17:18:07,398 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleaning up...
2025-06-25 17:18:07,398 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleanup finished.
2025-06-25 17:18:07,399 - ultibot_ui.widgets.paper_trading_report_widget - INFO - PaperTradingReportWidget cleanup: No hay acciones que tomar.
2025-06-25 17:18:07,399 - ultibot_ui.windows.history_view - INFO - HistoryView cleanup completado
2025-06-25 17:18:07,399 - ultibot_ui.windows.settings_view - INFO - SettingsView: Cleaning up. Stopping 2 active threads...
2025-06-25 17:18:07,399 - ultibot_ui.windows.settings_view - INFO - SettingsView: Quitting and waiting for thread unnamed...
2025-06-25 17:18:07,399 - ultibot_ui.windows.settings_view - INFO - SettingsView: Quitting and waiting for thread unnamed...
2025-06-25 17:18:07,399 - ultibot_ui.windows.settings_view - INFO - SettingsView: Cleanup complete.
2025-06-25 17:18:07,402 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Cleanup initiated. Threads are managed by MainWindow.
2025-06-25 17:18:07,402 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Cleanup finished.
2025-06-25 17:18:07,403 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread ChartWorkerThread_BTCUSDT_1h...
2025-06-25 17:18:07,404 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread unnamed...
2025-06-25 17:18:07,404 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread PortfolioApiWorkerThread...
2025-06-25 17:18:07,404 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread unnamed...
2025-06-25 17:18:07,404 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread unnamed...
2025-06-25 17:18:07,406 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread unnamed...
2025-06-25 17:18:07,406 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread unnamed...
2025-06-25 17:18:07,407 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread unnamed...
2025-06-25 17:18:07,407 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread PortfolioApiWorkerThread_fetch_snapshot...
2025-06-25 17:18:07,407 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread PriceFeedWorkerThread_BTC/USDT...
2025-06-25 17:18:07,407 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread DashboardApiWorkerThread_load_performance...
2025-06-25 17:18:07,409 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread OpportunitiesApiWorkerThread...
2025-06-25 17:18:07,409 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread unnamed...
2025-06-25 17:18:07,410 - ultibot_ui.windows.main_window - INFO - MainWindow cleanup finished.
2025-06-25 17:18:07,421 - __main__ - INFO - aboutToQuit signal received, scheduling resource cleanup.
2025-06-25 17:18:07,422 - ultibot_ui.windows.main_window - INFO - Cleaning up MainWindow resources. Stopping 0 active threads...
2025-06-25 17:18:07,422 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: Iniciando limpieza de tareas.
2025-06-25 17:18:07,422 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Iniciando limpieza.
2025-06-25 17:18:07,422 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Limpieza completada.
2025-06-25 17:18:07,422 - ultibot_ui.widgets.chart_widget - INFO - ChartWidget: Limpieza completada.
2025-06-25 17:18:07,422 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: Limpieza completada.
2025-06-25 17:18:07,422 - ultibot_ui.views.opportunities_view - INFO - Cleaning up OpportunitiesView...
2025-06-25 17:18:07,422 - ultibot_ui.views.opportunities_view - INFO - OpportunitiesView cleanup finished.
2025-06-25 17:18:07,422 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleaning up...
2025-06-25 17:18:07,422 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleanup finished.
2025-06-25 17:18:07,422 - ultibot_ui.widgets.paper_trading_report_widget - INFO - PaperTradingReportWidget cleanup: No hay acciones que tomar.
2025-06-25 17:18:07,422 - ultibot_ui.windows.history_view - INFO - HistoryView cleanup completado
2025-06-25 17:18:07,422 - ultibot_ui.windows.settings_view - INFO - SettingsView: Cleaning up. Stopping 0 active threads...
2025-06-25 17:18:07,426 - ultibot_ui.windows.settings_view - INFO - SettingsView: Cleanup complete.
2025-06-25 17:18:07,426 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Cleanup initiated. Threads are managed by MainWindow.
2025-06-25 17:18:07,426 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Cleanup finished.
2025-06-25 17:18:07,427 - ultibot_ui.windows.main_window - INFO - MainWindow cleanup finished.
2025-06-25 17:18:07,427 - __main__ - WARNING - UltiBotAPIClient instance not found for cleanup.
2025-06-25 17:18:07,428 - qasync._windows._EventPoller - DEBUG - Stopping worker thread...
2025-06-25 17:18:07,443 - qasync._windows._EventWorker - DEBUG - Exiting thread
2025-06-25 17:18:07,444 - qasync._windows._IocpProactor - DEBUG - Closing
2025-06-25 17:18:07,444 - __main__ - INFO - Iniciando cierre de la aplicación y limpieza de tareas pendientes.
2025-06-25 17:18:07,445 - __main__ - WARNING - El bucle de eventos no estaba corriendo o no se encontró durante el cierre.
2025-06-25 17:18:07,445 - __main__ - INFO - Aplicación cerrada.
2025-06-25 17:18:07,694 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:07,695 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:07,696 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F75F92DE0>, 126, 0, <_overlapped.Overlapped object at 0x0000015F75EA6EB0>)]
2025-06-25 17:18:07,696 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F75F92DE0>
2025-06-25 17:18:07,698 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:07 GMT'), (b'server', b'uvicorn'), (b'content-length', b'104'), (b'content-type', b'application/json')])
2025-06-25 17:18:07,698 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:07,698 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:07,698 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:07,698 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:07,699 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:07,699 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:07,700 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:07,700 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.34, 'priceChangePercent': 1.676, 'quoteVolume': 1788863523.6901653}]
2025-06-25 17:18:07,700 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:08,062 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000015F75FB0610>, coroutine_factory: set
2025-06-25 17:18:08,129 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17397BA0>, 0, 0, <_overlapped.Overlapped object at 0x0000015F75EA7030>)]
2025-06-25 17:18:08,130 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17397BA0>
2025-06-25 17:18:08,442 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F173977E0>, 0, 0, <_overlapped.Overlapped object at 0x0000015F75EA7330>)]
2025-06-25 17:18:08,442 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F173977E0>
2025-06-25 17:18:08,692 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:08,693 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:08,693 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:08,693 - httpcore.connection - DEBUG - close.started
2025-06-25 17:18:08,693 - httpcore.connection - DEBUG - close.complete
2025-06-25 17:18:08,693 - httpcore.connection - DEBUG - close.started
2025-06-25 17:18:08,697 - httpcore.connection - DEBUG - close.complete
2025-06-25 17:18:08,697 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:08,697 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:08,697 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:08,697 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:08,697 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:08,699 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:09,062 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:09,062 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:09,062 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA1620>, 126, 0, <_overlapped.Overlapped object at 0x0000015F75EA7630>)]
2025-06-25 17:18:09,062 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA1620>
2025-06-25 17:18:09,065 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:08 GMT'), (b'server', b'uvicorn'), (b'content-length', b'104'), (b'content-type', b'application/json')])
2025-06-25 17:18:09,065 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:09,065 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:09,066 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:09,066 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:09,066 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:09,067 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:09,067 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:09,067 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.33, 'priceChangePercent': 1.676, 'quoteVolume': 1788862363.0590005}]
2025-06-25 17:18:09,068 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:10,075 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:10,077 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:10,077 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:10,077 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:10,079 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:10,079 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:10,079 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:10,079 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:10,079 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:10,444 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:10,444 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:10,447 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA1620>, 126, 0, <_overlapped.Overlapped object at 0x0000015F75EA7630>)]
2025-06-25 17:18:10,449 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA1620>
2025-06-25 17:18:10,449 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:09 GMT'), (b'server', b'uvicorn'), (b'content-length', b'103'), (b'content-type', b'application/json')])
2025-06-25 17:18:10,449 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:10,449 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:10,450 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:10,451 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:10,451 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:10,451 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:10,451 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:10,452 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.33, 'priceChangePercent': 1.676, 'quoteVolume': 1788862293.221224}]
2025-06-25 17:18:10,452 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:11,460 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:11,460 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:11,462 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:11,462 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:11,462 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:11,462 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:11,462 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:11,462 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:11,462 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:11,832 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:11,832 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:11,832 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA1620>, 126, 0, <_overlapped.Overlapped object at 0x0000015F75EA7630>)]
2025-06-25 17:18:11,840 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA1620>
2025-06-25 17:18:11,840 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:11 GMT'), (b'server', b'uvicorn'), (b'content-length', b'104'), (b'content-type', b'application/json')])
2025-06-25 17:18:11,840 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:11,840 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:11,842 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:11,842 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:11,842 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:11,842 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:11,843 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:11,843 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.34, 'priceChangePercent': 1.676, 'quoteVolume': 1788863207.7737374}]
2025-06-25 17:18:11,843 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:12,860 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:12,860 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:12,862 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:12,862 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:12,862 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:12,862 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:12,862 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:12,862 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:12,862 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:13,228 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:13,230 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:13,232 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA0220>, 126, 0, <_overlapped.Overlapped object at 0x0000015F75EA7630>)]
2025-06-25 17:18:13,232 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA0220>
2025-06-25 17:18:13,233 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:12 GMT'), (b'server', b'uvicorn'), (b'content-length', b'104'), (b'content-type', b'application/json')])
2025-06-25 17:18:13,233 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:13,233 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:13,234 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:13,234 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:13,235 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:13,235 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:13,235 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:13,235 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.33, 'priceChangePercent': 1.676, 'quoteVolume': 1788867059.1559658}]
2025-06-25 17:18:13,235 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:14,245 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:14,246 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:14,246 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:14,247 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:14,248 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:14,248 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:14,248 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:14,248 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:14,249 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:14,612 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:14,612 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:14,617 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA0220>, 126, 0, <_overlapped.Overlapped object at 0x0000015F75EA7630>)]
2025-06-25 17:18:14,617 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA0220>
2025-06-25 17:18:14,617 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:13 GMT'), (b'server', b'uvicorn'), (b'content-length', b'104'), (b'content-type', b'application/json')])
2025-06-25 17:18:14,618 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:14,618 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:14,618 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:14,618 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:14,618 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:14,620 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:14,620 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:14,620 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.33, 'priceChangePercent': 1.676, 'quoteVolume': 1788866950.2341328}]
2025-06-25 17:18:14,620 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:15,625 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:15,625 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:15,627 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:15,628 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:15,628 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:15,628 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:15,628 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:15,628 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:15,628 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:16,013 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:16,013 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:16,013 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA0220>, 126, 0, <_overlapped.Overlapped object at 0x0000015F75EA7630>)]
2025-06-25 17:18:16,013 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA0220>
2025-06-25 17:18:16,020 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:15 GMT'), (b'server', b'uvicorn'), (b'content-length', b'103'), (b'content-type', b'application/json')])
2025-06-25 17:18:16,020 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:16,020 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:16,020 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:16,020 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:16,020 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:16,022 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:16,022 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:16,022 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.34, 'priceChangePercent': 1.676, 'quoteVolume': 1788867659.977028}]
2025-06-25 17:18:16,023 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:17,027 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:17,028 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:17,028 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:17,028 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:17,028 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:17,028 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:17,028 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:17,028 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:17,032 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:17,392 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:17,393 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:17,394 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA19E0>, 126, 0, <_overlapped.Overlapped object at 0x0000015F17DA5470>)]
2025-06-25 17:18:17,394 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA19E0>
2025-06-25 17:18:17,395 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:16 GMT'), (b'server', b'uvicorn'), (b'content-length', b'104'), (b'content-type', b'application/json')])
2025-06-25 17:18:17,395 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:17,395 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:17,396 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:17,396 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:17,397 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:17,397 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:17,397 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:17,397 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.33, 'priceChangePercent': 1.676, 'quoteVolume': 1788870516.4140801}]
2025-06-25 17:18:17,398 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:18,073 - ultibot_ui.widgets.portfolio_widget - INFO - Actualizando datos del portafolio para modo: paper
2025-06-25 17:18:18,074 - ultibot_ui.workers - DEBUG - ApiWorker initialized with api_client: <ultibot_ui.services.api_client.UltiBotAPIClient object at 0x0000015F75FB0610>, coroutine_factory: set
2025-06-25 17:18:18,394 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:18,394 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:18,394 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:18,394 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:18,394 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:18,394 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:18,394 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:18,394 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:18,394 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:18,552 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: terminal
2025-06-25 17:18:18,762 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:18,762 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:18,762 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA19E0>, 126, 0, <_overlapped.Overlapped object at 0x0000015F75EA7030>)]
2025-06-25 17:18:18,762 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA19E0>
2025-06-25 17:18:18,762 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:17 GMT'), (b'server', b'uvicorn'), (b'content-length', b'104'), (b'content-type', b'application/json')])
2025-06-25 17:18:18,762 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:18,762 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:18,762 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:18,762 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:18,769 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:18,770 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:18,770 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:18,770 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107679.34, 'priceChangePercent': 1.676, 'quoteVolume': 1788871960.9087515}]
2025-06-25 17:18:18,770 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:19,478 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: opportunities
2025-06-25 17:18:19,777 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:19,777 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:19,777 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:19,780 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:19,780 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:19,780 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:19,780 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:19,780 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:19,782 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:20,144 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:20,144 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:20,144 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA19E0>, 126, 0, <_overlapped.Overlapped object at 0x0000015F75EA7030>)]
2025-06-25 17:18:20,148 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA19E0>
2025-06-25 17:18:20,149 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:18 GMT'), (b'server', b'uvicorn'), (b'content-length', b'104'), (b'content-type', b'application/json')])
2025-06-25 17:18:20,149 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:20,149 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:20,150 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:20,150 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:20,151 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:20,151 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:20,151 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:20,151 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107653.36, 'priceChangePercent': 1.647, 'quoteVolume': 1788986965.9765844}]
2025-06-25 17:18:20,152 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:20,572 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: portfolio
2025-06-25 17:18:21,044 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: strategies
2025-06-25 17:18:21,142 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:21,143 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:21,144 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:21,144 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:21,144 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:21,144 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:21,146 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:21,146 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:21,146 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:21,524 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:21,525 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:21,527 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA19E0>, 126, 0, <_overlapped.Overlapped object at 0x0000015F75EA7030>)]
2025-06-25 17:18:21,528 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA19E0>
2025-06-25 17:18:21,529 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:20 GMT'), (b'server', b'uvicorn'), (b'content-length', b'103'), (b'content-type', b'application/json')])
2025-06-25 17:18:21,529 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:21,529 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:21,530 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:21,531 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:21,531 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:21,531 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:21,532 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:21,532 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107653.35, 'priceChangePercent': 1.647, 'quoteVolume': 1788987055.503257}]
2025-06-25 17:18:21,532 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:22,182 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: history
2025-06-25 17:18:22,542 - ultibot_ui.services.api_client - INFO - Obteniendo datos de mercado para símbolos: ['BTC/USDT']
2025-06-25 17:18:22,543 - ultibot_ui.services.api_client - DEBUG - APIClient httpx client ya está inicializado.
2025-06-25 17:18:22,544 - ultibot_ui.services.api_client - DEBUG - APIClient: _make_request invocado para GET /api/v1/market/tickers
2025-06-25 17:18:22,544 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'GET']>
2025-06-25 17:18:22,546 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-06-25 17:18:22,546 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'GET']>
2025-06-25 17:18:22,546 - ultibot_backend - INFO - [MainThread] - main.py:127 - Middleware: Solicitud entrante: GET /api/v1/market/tickers
2025-06-25 17:18:22,546 - httpcore.http11 - DEBUG - send_request_body.complete
2025-06-25 17:18:22,546 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'GET']>
2025-06-25 17:18:22,587 - ultibot_ui.windows.main_window - INFO - Cambiando a la vista: settings
2025-06-25 17:18:22,909 - ultibot_backend.services.market_data_service - INFO - [MainThread] - market_data_service.py:159 - Datos REST de BTC/USDT (consultado como BTCUSDT) obtenidos.
2025-06-25 17:18:22,910 - ultibot_backend - INFO - [MainThread] - main.py:129 - Middleware: Solicitud procesada: GET /api/v1/market/tickers - Status: 200
2025-06-25 17:18:22,911 - qasync._windows._EventWorker - DEBUG - Got events from poll: [(<_OverlappedFuture pending cb=[_ProactorReadPipeTransport._loop_reading()]>, <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA19E0>, 126, 0, <_overlapped.Overlapped object at 0x0000015F75EA7030>)]
2025-06-25 17:18:22,912 - qasync._QEventLoop - DEBUG - Invoking event callback <function IocpProactor.recv_into.<locals>.finish_recv at 0x0000015F17DA19E0>
2025-06-25 17:18:22,913 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'date', b'Wed, 25 Jun 2025 21:18:22 GMT'), (b'server', b'uvicorn'), (b'content-length', b'104'), (b'content-type', b'application/json')])
2025-06-25 17:18:22,913 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:22,913 - httpx - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers?symbols=BTC%2FUSDT "HTTP/1.1 200 OK"
2025-06-25 17:18:22,914 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'GET']>
2025-06-25 17:18:22,914 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-06-25 17:18:22,915 - httpcore.http11 - DEBUG - response_closed.started
2025-06-25 17:18:22,915 - httpcore.http11 - DEBUG - response_closed.complete
2025-06-25 17:18:22,915 - ultibot_ui.services.api_client - INFO - HTTP Request: GET http://127.0.0.1:8000/api/v1/market/tickers "HTTP/HTTP/1.1 200 OK"
2025-06-25 17:18:22,915 - ultibot_ui.services.api_client - DEBUG - Response content (processed): [{'symbol': 'BTCUSDT', 'lastPrice': 107653.35, 'priceChangePercent': 1.647, 'quoteVolume': 1788987228.8251517}]
2025-06-25 17:18:22,916 - ultibot_ui.workers - WARNING - No ticker data found for BTC/USDT.
2025-06-25 17:18:23,824 - ultibot_ui.windows.main_window - INFO - Cleaning up MainWindow resources. Stopping 14 active threads...
2025-06-25 17:18:23,825 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: Iniciando limpieza de tareas.
2025-06-25 17:18:23,825 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Iniciando limpieza.
2025-06-25 17:18:23,826 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Limpieza completada.
2025-06-25 17:18:23,827 - ultibot_ui.widgets.chart_widget - INFO - ChartWidget: Limpieza completada.
2025-06-25 17:18:23,828 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: Limpieza completada.
2025-06-25 17:18:23,828 - ultibot_ui.views.opportunities_view - INFO - Cleaning up OpportunitiesView...
2025-06-25 17:18:23,829 - ultibot_ui.views.opportunities_view - INFO - OpportunitiesView cleanup finished.
2025-06-25 17:18:23,829 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleaning up...
2025-06-25 17:18:23,830 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleanup finished.
2025-06-25 17:18:23,830 - ultibot_ui.widgets.paper_trading_report_widget - INFO - PaperTradingReportWidget cleanup: No hay acciones que tomar.
2025-06-25 17:18:23,830 - ultibot_ui.windows.history_view - INFO - HistoryView cleanup completado
2025-06-25 17:18:23,831 - ultibot_ui.windows.settings_view - INFO - SettingsView: Cleaning up. Stopping 2 active threads...
2025-06-25 17:18:23,831 - ultibot_ui.windows.settings_view - INFO - SettingsView: Quitting and waiting for thread unnamed...
2025-06-25 17:18:23,833 - ultibot_ui.windows.settings_view - INFO - SettingsView: Quitting and waiting for thread unnamed...
2025-06-25 17:18:23,834 - ultibot_ui.windows.settings_view - INFO - SettingsView: Cleanup complete.
2025-06-25 17:18:23,834 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Cleanup initiated. Threads are managed by MainWindow.
2025-06-25 17:18:23,834 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Cleanup finished.
2025-06-25 17:18:23,835 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread ChartWorkerThread_BTCUSDT_1h...
2025-06-25 17:18:23,836 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread unnamed...
2025-06-25 17:18:23,836 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread PortfolioApiWorkerThread...
2025-06-25 17:18:23,837 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread unnamed...
2025-06-25 17:18:23,837 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread unnamed...
2025-06-25 17:18:23,838 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread unnamed...
2025-06-25 17:18:23,839 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread unnamed...
2025-06-25 17:18:23,839 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread unnamed...
2025-06-25 17:18:23,840 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread PortfolioApiWorkerThread_fetch_snapshot...
2025-06-25 17:18:23,840 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread PriceFeedWorkerThread_BTC/USDT...
2025-06-25 17:18:23,841 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread DashboardApiWorkerThread_load_performance...
2025-06-25 17:18:23,841 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread OpportunitiesApiWorkerThread...
2025-06-25 17:18:23,841 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread unnamed...
2025-06-25 17:18:23,842 - ultibot_ui.windows.main_window - INFO - MainWindow: Quitting and waiting for thread PortfolioApiWorkerThread...
2025-06-25 17:18:23,843 - ultibot_ui.windows.main_window - INFO - MainWindow cleanup finished.
2025-06-25 17:18:23,858 - __main__ - INFO - aboutToQuit signal received, scheduling resource cleanup.
2025-06-25 17:18:23,859 - ultibot_ui.windows.main_window - INFO - Cleaning up MainWindow resources. Stopping 0 active threads...
2025-06-25 17:18:23,860 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: Iniciando limpieza de tareas.
2025-06-25 17:18:23,860 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Iniciando limpieza.
2025-06-25 17:18:23,860 - ultibot_ui.widgets.portfolio_widget - INFO - PortfolioWidget: Limpieza completada.
2025-06-25 17:18:23,861 - ultibot_ui.widgets.chart_widget - INFO - ChartWidget: Limpieza completada.
2025-06-25 17:18:23,861 - ultibot_ui.windows.dashboard_view - INFO - DashboardView: Limpieza completada.
2025-06-25 17:18:23,862 - ultibot_ui.views.opportunities_view - INFO - Cleaning up OpportunitiesView...
2025-06-25 17:18:23,862 - ultibot_ui.views.opportunities_view - INFO - OpportunitiesView cleanup finished.
2025-06-25 17:18:23,862 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleaning up...
2025-06-25 17:18:23,863 - ultibot_ui.views.portfolio_view - INFO - PortfolioView: Cleanup finished.
2025-06-25 17:18:23,863 - ultibot_ui.widgets.paper_trading_report_widget - INFO - PaperTradingReportWidget cleanup: No hay acciones que tomar.
2025-06-25 17:18:23,864 - ultibot_ui.windows.history_view - INFO - HistoryView cleanup completado
2025-06-25 17:18:23,864 - ultibot_ui.windows.settings_view - INFO - SettingsView: Cleaning up. Stopping 0 active threads...
2025-06-25 17:18:23,864 - ultibot_ui.windows.settings_view - INFO - SettingsView: Cleanup complete.
2025-06-25 17:18:23,865 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Cleanup initiated. Threads are managed by MainWindow.
2025-06-25 17:18:23,865 - ultibot_ui.views.trading_terminal_view - INFO - TradingTerminalView: Cleanup finished.
2025-06-25 17:18:23,865 - ultibot_ui.windows.main_window - INFO - MainWindow cleanup finished.
2025-06-25 17:18:23,865 - __main__ - WARNING - UltiBotAPIClient instance not found for cleanup.
2025-06-25 17:18:23,866 - qasync._windows._EventPoller - DEBUG - Stopping worker thread...
2025-06-25 17:18:23,867 - qasync._windows._EventWorker - DEBUG - Exiting thread
2025-06-25 17:18:23,870 - qasync._windows._IocpProactor - DEBUG - Closing
2025-06-25 17:18:23,870 - __main__ - INFO - Iniciando cierre de la aplicación y limpieza de tareas pendientes.
2025-06-25 17:18:23,871 - __main__ - WARNING - El bucle de eventos no estaba corriendo o no se encontró durante el cierre.
2025-06-25 17:18:23,871 - __main__ - INFO - Aplicación cerrada.
